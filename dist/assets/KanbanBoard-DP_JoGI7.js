import{u as $s,r as l,s as O,j as e,a as Sa,_ as Da}from"./index-uFDlRck9.js";const La=()=>Da(()=>import("./confetti.module-wUsLuJ1J.js"),[]).then(s=>s.default),zt={high:{bg:"#FEE2E2",text:"#DC2626",icon:"â–°â–°â–°",label:"High Effort"},medium:{bg:"#FEF3C7",text:"#D97706",icon:"â–°â–°",label:"Medium Effort"},low:{bg:"#D1FAE5",text:"#059669",icon:"â–°",label:"Low Effort"}},dt=[{id:"meeting_followup",label:"Meeting Follow-up",color:"#8B5CF6"},{id:"email",label:"Email",color:"#3B82F6"},{id:"deliverable",label:"Deliverable",color:"#10B981"},{id:"admin",label:"Admin",color:"#4B5563"},{id:"review",label:"Review/Approval",color:"#F59E0B"},{id:"call",label:"Call/Meeting",color:"#EC4899"},{id:"research",label:"Research",color:"#14B8A6"}],Pt=[{id:"email",label:"Email",icon:"âœ‰ï¸"},{id:"meeting",label:"Meeting",icon:"ðŸ‘¥"},{id:"slack",label:"Slack/Teams",icon:"ðŸ’¬"},{id:"ad_hoc",label:"Ad-hoc",icon:"ðŸ’¡"},{id:"project_plan",label:"Project Plan",icon:"ðŸ“‹"},{id:"client_request",label:"Client Request",icon:"ðŸŽ¯"}],Is=[{id:null,label:"No recurrence"},{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"biweekly",label:"Bi-weekly (every 2 weeks)"},{id:"monthly",label:"Monthly"}],Ft={backlog:"#9CA3AF",todo:"#3B82F6",in_progress:"#EC4899",blocked:"#EF4444",done:"#64748B"},ot=[{id:"backlog",title:"Backlog",subtitle:"Future work",color:Ft.backlog},{id:"todo",title:"To Do",subtitle:"Ready to start",color:Ft.todo},{id:"in_progress",title:"In Progress",subtitle:"Active work",color:Ft.in_progress},{id:"done",title:"Done",subtitle:"Completed",color:Ft.done}],Vr=5,Hr=10,Ds=[{bg:"#EDE9FE",text:"#7C3AED",border:"#C4B5FD"},{bg:"#DBEAFE",text:"#2563EB",border:"#93C5FD"},{bg:"#D1FAE5",text:"#059669",border:"#6EE7B7"},{bg:"#FEF3C7",text:"#D97706",border:"#FCD34D"},{bg:"#FCE7F3",text:"#DB2777",border:"#F9A8D4"},{bg:"#E0E7FF",text:"#4F46E5",border:"#A5B4FC"},{bg:"#CCFBF1",text:"#0D9488",border:"#5EEAD4"},{bg:"#FEE2E2",text:"#DC2626",border:"#FCA5A5"},{bg:"#F3E8FF",text:"#9333EA",border:"#D8B4FE"},{bg:"#CFFAFE",text:"#0891B2",border:"#67E8F9"}],Gr=s=>{if(!s)return null;let d=0;for(let i=0;i<s.length;i++)d=s.charCodeAt(i)+((d<<5)-d);return Ds[Math.abs(d)%Ds.length]},ht=(s,d)=>{if(!s||d==="done")return null;const i=new Date;i.setHours(0,0,0,0);const f=new Date(s);f.setHours(0,0,0,0);const x=Math.ceil((f-i)/(1e3*60*60*24));return x<0?"overdue":x===0?"today":x<=3?"soon":"ok"},or=s=>{if(s.status!=="backlog")return!1;if(!s.start_date)return!0;const d=new Date;d.setHours(0,0,0,0);const i=new Date(s.start_date);return i.setHours(0,0,0,0),i<=d},gt=(s,d)=>!s.dependencies||s.dependencies.length===0||s.status==="done"?!1:s.dependencies.some(i=>{const f=d.find(x=>x.id===i.depends_on_id);return f&&f.status!=="done"}),qr=s=>{if(s.status==="done")return!1;const d=new Date;if(d.setHours(0,0,0,0),s.my_day_date){const i=new Date(s.my_day_date);if(i.setHours(0,0,0,0),i<d)return!1;if(i.getTime()===d.getTime())return!0}if(s.start_date){const i=new Date(s.start_date);if(i.setHours(0,0,0,0),i<=d)return!0}return!1},Ls=(s,d,i,f=null)=>{if(!s||!d)return[];const x=[];let T=new Date(s);T.setHours(0,0,0,0);let g=null;f&&(g=new Date(f),g.setHours(23,59,59,999));const c=w=>{switch(d){case"daily":w.setDate(w.getDate()+1);break;case"weekly":w.setDate(w.getDate()+7);break;case"biweekly":w.setDate(w.getDate()+14);break;case"monthly":w.setMonth(w.getMonth()+1);break;default:return null}return w},p=f?365:i;let k=0;for(;k<p&&(c(T),!(g&&T>g||(x.push(T.toISOString().split("T")[0]),k++,!f&&k>=i))););return x},Bt=s=>s?new Date(s).toLocaleDateString(void 0,{day:"numeric",month:"short"}):"",Yr=()=>{const d=new Date(2e3,0,15).toLocaleDateString();return parseInt(d.split(/[\/\-\.]/)[0])===1},Rt=s=>{if(!s)return"";if(s<60)return`${s}m`;const d=Math.floor(s/60),i=s%60;return i>0?`${d}h ${i}m`:`${d}h`},Ts=s=>{if(!s)return"";let d=s.toString().trim().toLowerCase();if(/^\d{1,2}:\d{2}$/.test(d)){const[g,c]=d.split(":").map(Number);if(g>=0&&g<=23&&c>=0&&c<=59)return`${String(g).padStart(2,"0")}:${String(c).padStart(2,"0")}`}const i=/pm|p\.m\.|p$/.test(d),f=/am|a\.m\.|a$/.test(d);d=d.replace(/\s*(am|pm|a\.m\.|p\.m\.|a|p)\s*/gi,"").trim();let x=0,T=0;if(d.includes(":")){const g=d.split(":");x=parseInt(g[0])||0,T=parseInt(g[1])||0}else if(d.length===1||d.length===2)x=parseInt(d)||0,T=0;else if(d.length===3)x=parseInt(d[0])||0,T=parseInt(d.slice(1))||0;else if(d.length===4)x=parseInt(d.slice(0,2))||0,T=parseInt(d.slice(2))||0;else return"";return i&&x<12?x+=12:f&&x===12&&(x=0),x<0||x>23||T<0||T>59?"":`${String(x).padStart(2,"0")}:${String(T).padStart(2,"0")}`},lr=s=>{if(!s)return{date:null,cleanedText:"",matched:null};const d=new Date;d.setHours(0,0,0,0);const i=s.trim().match(/^([TDWM])([+-]\d+)?$/i);if(i){const c=i[1].toUpperCase(),p=i[2]?parseInt(i[2]):0,k=new Date(d);switch(c){case"T":case"D":k.setDate(k.getDate()+p);break;case"W":k.setDate(k.getDate()+p*7);break;case"M":k.setMonth(k.getMonth()+p);break}return{date:k.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}const f=[{regex:/\b(today)\b/i,fn:()=>new Date(d)},{regex:/\b(tomorrow)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+1),c}},{regex:/\b(yesterday)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()-1),c}},{regex:/\b(next\s+)?(monday)\b/i,fn:c=>x(1,c[1])},{regex:/\b(next\s+)?(tuesday)\b/i,fn:c=>x(2,c[1])},{regex:/\b(next\s+)?(wednesday)\b/i,fn:c=>x(3,c[1])},{regex:/\b(next\s+)?(thursday)\b/i,fn:c=>x(4,c[1])},{regex:/\b(next\s+)?(friday)\b/i,fn:c=>x(5,c[1])},{regex:/\b(next\s+)?(saturday)\b/i,fn:c=>x(6,c[1])},{regex:/\b(next\s+)?(sunday)\b/i,fn:c=>x(0,c[1])},{regex:/\bin\s+(\d+)\s+days?\b/i,fn:c=>{const p=new Date(d);return p.setDate(p.getDate()+parseInt(c[1])),p}},{regex:/\bin\s+(\d+)\s+weeks?\b/i,fn:c=>{const p=new Date(d);return p.setDate(p.getDate()+parseInt(c[1])*7),p}},{regex:/\bin\s+(\d+)\s+months?\b/i,fn:c=>{const p=new Date(d);return p.setMonth(p.getMonth()+parseInt(c[1])),p}},{regex:/\bnext\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+7),c}},{regex:/\bnext\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1),c}},{regex:/\bend\s+of\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+(5-c.getDay())),c}},{regex:/\bend\s+of\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1,0),c}}];function x(c,p){const k=new Date(d),w=k.getDay();let _=c-w;return(_<=0||p)&&(_+=7),p&&_<=7&&(_+=7),k.setDate(k.getDate()+_),k}for(const c of f){const p=s.match(c.regex);if(p){const k=c.fn(p),w=s.replace(c.regex,"").replace(/\s+/g," ").trim();return{date:k.toISOString().split("T")[0],cleanedText:w,matched:p[0]}}}const T=Yr();let g=s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(g){let c,p;T?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=g[3].length===2?2e3+parseInt(g[3]):parseInt(g[3]),w=new Date(k,p,c);if(!isNaN(w.getTime()))return{date:w.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}if(g=s.match(/^(\d{1,2})[\/\-](\d{1,2})$/),g){let c,p;T?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=new Date(d.getFullYear(),p,c);if(k<d&&k.setFullYear(k.getFullYear()+1),!isNaN(k.getTime()))return{date:k.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}return{date:null,cleanedText:s,matched:null}},Ta=[{label:"Today",getValue:()=>new Date().toISOString().split("T")[0]},{label:"Tomorrow",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]}},{label:"Next Week",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]}},{label:"Next Month",getValue:()=>{const s=new Date;return s.setMonth(s.getMonth()+1),s.toISOString().split("T")[0]}}],Ma=({message:s,action:d,actionLabel:i,onClose:f,duration:x=5e3})=>(l.useEffect(()=>{const T=setTimeout(f,x);return()=>clearTimeout(T)},[f,x]),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),d&&e.jsx("button",{onClick:()=>{d(),f()},className:"px-3 py-1 text-sm font-semibold bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg transition-colors",children:i||"Undo"}),e.jsx("button",{onClick:f,className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})),Ea=({isOpen:s,onClose:d,onConfirm:i,title:f,message:x,confirmLabel:T="Confirm",confirmStyle:g="danger",icon:c="âš ï¸",loading:p=!1})=>{if(l.useEffect(()=>{const w=_=>{_.key==="Escape"&&d(),_.key==="Enter"&&!p&&i()};if(s)return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,d,i,p]),!s)return null;const k={danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",primary:"bg-indigo-500 hover:bg-indigo-600 text-white"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:c})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f})]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:x}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:d,disabled:p,className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:i,disabled:p,className:`px-4 py-2 rounded-xl font-medium transition-colors ${k[g]} disabled:opacity-50`,children:p?"Please wait...":T})]})]})})},Fa=({onRefresh:s,children:d})=>{const[i,f]=l.useState(0),[x,T]=l.useState(!1),g=l.useRef(0),c=80,p=Q=>{window.scrollY===0&&(g.current=Q.touches[0].clientY)},k=Q=>{if(x||g.current===0)return;if(window.scrollY>0){g.current=0,f(0);return}const V=Q.touches[0].clientY-g.current;if(V>0){const D=Math.min(V*.4,c+40);f(D),D>10&&Q.preventDefault()}},w=async()=>{if(i>=c&&!x){T(!0),f(c);try{await s()}finally{T(!1),f(0)}}else f(0);g.current=0};l.useEffect(()=>{if("ontouchstart"in window)return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",w),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",w)}},[x,i]);const _=Math.min(i/c,1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 overflow-hidden bg-gradient-to-b from-indigo-50 to-transparent dark:from-indigo-900/30 sm:hidden",style:{height:i>0?`${i}px`:0},children:e.jsxs("div",{className:`flex items-center gap-2 text-indigo-600 dark:text-indigo-400 ${x?"animate-pulse":""}`,children:[e.jsx("svg",{className:`w-5 h-5 transition-transform duration-200 ${x?"animate-spin":""}`,style:{transform:x?"none":`rotate(${_*180}deg)`},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),e.jsx("span",{className:"text-sm font-medium",children:x?"Refreshing...":_>=1?"Release to refresh":"Pull to refresh"})]})}),d]})},Ba=({isOpen:s,onClose:d,user:i})=>{const[f,x]=l.useState("suggestion"),[T,g]=l.useState(""),[c,p]=l.useState([]),[k,w]=l.useState(!1),[_,Q]=l.useState(!1),[B,V]=l.useState(null);l.useEffect(()=>{s||setTimeout(()=>{x("suggestion"),g(""),p([]),Q(!1),V(null)},300)},[s]),l.useEffect(()=>{const v=$=>{$.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[s,d]),l.useEffect(()=>{const v=$=>{var ce;if(!s)return;const ne=(ce=$.clipboardData)==null?void 0:ce.items;if(ne){for(const ke of ne)if(ke.type.startsWith("image/")){$.preventDefault();const he=ke.getAsFile();he&&D(he);break}}};return window.addEventListener("paste",v),()=>window.removeEventListener("paste",v)},[s,c]);const D=v=>{if(c.length>=3){V("Maximum 3 images allowed");return}const $=new Image,ne=new FileReader;ne.onload=ce=>{$.onload=()=>{let{width:Y,height:de}=$;if(Y>1500||de>1500){const b=Math.min(1500/Y,1500/de);Y=Math.round(Y*b),de=Math.round(de*b)}const Se=document.createElement("canvas");Se.width=Y,Se.height=de,Se.getContext("2d").drawImage($,0,0,Y,de);const H=Se.toDataURL("image/jpeg",.8),F=H.split(",")[1];p(b=>[...b,{base64:F,preview:H}]),V(null)},$.onerror=()=>V("Failed to load image"),$.src=ce.target.result},ne.onerror=()=>V("Failed to read image"),ne.readAsDataURL(v)},P=v=>{var ne;const $=(ne=v.target.files)==null?void 0:ne[0];$&&D($),v.target.value=""},te=v=>{p($=>$.filter((ne,ce)=>ce!==v))},pe=async v=>{if(v.preventDefault(),!!T.trim()){w(!0),V(null);try{const $=[];for(const ce of c){const ke=`feedback/${(i==null?void 0:i.id)||"anonymous"}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.jpg`,he=atob(ce.base64),Y=new Array(he.length);for(let F=0;F<he.length;F++)Y[F]=he.charCodeAt(F);const de=new Uint8Array(Y),Se=new Blob([de],{type:"image/jpeg"}),{data:N,error:H}=await O.storage.from("attachments").upload(ke,Se);if(H)console.error("Upload error:",H);else{const{data:F}=O.storage.from("attachments").getPublicUrl(ke);F!=null&&F.publicUrl&&$.push(F.publicUrl)}}const{error:ne}=await O.from("feedback").insert({user_id:i==null?void 0:i.id,user_email:i==null?void 0:i.email,type:f,message:T.trim(),images:$.length>0?$:null,page:window.location.pathname});if(ne)throw ne;Q(!0),setTimeout(()=>d(),2e3)}catch($){console.error("Error submitting feedback:",$),V("Failed to submit feedback. Please try again.")}finally{w(!1)}}};if(!s)return null;const m=[{id:"bug",label:"ðŸ› Bug",desc:"Something isn't working"},{id:"suggestion",label:"ðŸ’¡ Suggestion",desc:"Ideas for improvement"},{id:"question",label:"â“ Question",desc:"Need help with something"},{id:"other",label:"ðŸ’¬ Other",desc:"General feedback"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp",onClick:v=>v.stopPropagation(),children:_?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"âœ“"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We really appreciate you taking the time to help us improve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send Feedback"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Help us make Trackli better!"})]}),e.jsxs("form",{onSubmit:pe,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.map(v=>e.jsxs("button",{type:"button",onClick:()=>x(v.id),className:`p-3 rounded-xl border-2 text-left transition-all ${f===v.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:v.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.desc})]},v.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:T,onChange:v=>g(v.target.value),placeholder:"Tell us what's on your mind...",rows:4,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshots (optional)"}),c.length>0&&e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:c.map((v,$)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v.preview,alt:`Screenshot ${$+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>te($),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},$))}),c.length<3&&e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add image or paste from clipboard"}),e.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]}),B&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:B})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!T.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Sending...":"Send Feedback"})]})]})]})})})},Ws="roddickaimee@gmail.com",Aa=({isOpen:s,onClose:d,userEmail:i})=>{const[f,x]=l.useState([]),[T,g]=l.useState(!0),[c,p]=l.useState("all"),k=i===Ws;l.useEffect(()=>{s&&k&&w()},[s,k]);const w=async()=>{g(!0);try{const{data:D,error:P}=await O.from("feedback").select("*").order("created_at",{ascending:!1});if(P)throw P;x(D||[])}catch(D){console.error("Error loading feedback:",D)}finally{g(!1)}},_=async(D,P)=>{try{const{error:te}=await O.from("feedback").update({status:P}).eq("id",D);if(te)throw te;x(pe=>pe.map(m=>m.id===D?{...m,status:P}:m))}catch(te){console.error("Error updating feedback:",te)}};if(l.useEffect(()=>{const D=P=>{P.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[s,d]),!s||!k)return null;const Q=c==="all"?f:f.filter(D=>D.status===c),B={bug:"ðŸ›",suggestion:"ðŸ’¡",question:"â“",other:"ðŸ’¬"},V={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",read:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[85vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp flex flex-col",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Admin"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.length," total submissions"]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["all","new","read","resolved"].map(D=>e.jsxs("button",{onClick:()=>p(D),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c===D?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[D.charAt(0).toUpperCase()+D.slice(1),D!=="all"&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",f.filter(P=>D==="all"||P.status===D).length,")"]})]},D))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:T?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading feedback..."}):Q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ðŸ“«"}),"No feedback yet"]}):e.jsx("div",{className:"space-y-4",children:Q.map(D=>e.jsx("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:B[D.type]||"ðŸ’¬"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:D.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V[D.status]}`,children:D.status})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:D.message}),D.images&&D.images.length>0&&e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:D.images.map((P,te)=>e.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:P,alt:`Screenshot ${te+1}`,className:"w-24 h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity"})},te))}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:D.user_email}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[new Date(D.created_at).toLocaleDateString()," ",new Date(D.created_at).toLocaleTimeString()]}),D.page&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:D.page})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[D.status!=="read"&&e.jsx("button",{onClick:()=>_(D.id,"read"),className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors",title:"Mark as read",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),D.status!=="resolved"&&e.jsx("button",{onClick:()=>_(D.id,"resolved"),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark as resolved",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]})},D.id))})})]})})},$a=({hour:s})=>s<12?e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunriseGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F97316"}),e.jsx("stop",{offset:"100%",stopColor:"#FBBF24"})]})}),e.jsx("path",{d:"M4 22 L28 22",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"16",cy:"18",r:"6",fill:"url(#sunriseGrad)"}),e.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"9",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"12",x2:"9",y2:"14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"25",y1:"12",x2:"23",y2:"14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"})]}):s<17?e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"afternoonGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"16",cy:"16",r:"6",fill:"url(#afternoonGrad)"}),[0,45,90,135,180,225,270,315].map((d,i)=>e.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"7",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${d} 16 16)`},i))]}):e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"moonGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#CBD5E1"}),e.jsx("stop",{offset:"100%",stopColor:"#94A3B8"})]})}),e.jsx("path",{d:"M20 6 A10 10 0 1 0 20 26 A8 8 0 1 1 20 6",fill:"url(#moonGrad)"}),e.jsx("circle",{cx:"24",cy:"8",r:"1",fill:"#FBBF24"}),e.jsx("circle",{cx:"27",cy:"14",r:"1.5",fill:"#FBBF24"}),e.jsx("circle",{cx:"22",cy:"20",r:"1",fill:"#FBBF24"})]}),Ms={celebrate:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"celebrateGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F472B6"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"16",fill:"url(#celebrateGrad)"}),e.jsx("path",{d:"M16 22 Q18 18 20 22 Q22 26 24 22 Q26 18 28 22 Q30 26 32 22",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"18",cy:"18",r:"2",fill:"white"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",fill:"white"}),e.jsx("path",{d:"M8 8 L12 14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M40 8 L36 14",stroke:"#A78BFA",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M6 24 L10 24",stroke:"#34D399",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M38 24 L42 24",stroke:"#F472B6",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"10",cy:"36",r:"2",fill:"#FBBF24"}),e.jsx("circle",{cx:"38",cy:"36",r:"2",fill:"#A78BFA"})]}),sun:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"emptySunGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#emptySunGrad)"}),[0,45,90,135,180,225,270,315].map((s,d)=>e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"10",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${s} 24 24)`},d))]}),folder:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"emptyFolderGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("path",{d:"M6 14 L6 38 Q6 40 8 40 L40 40 Q42 40 42 38 L42 18 Q42 16 40 16 L24 16 L20 12 L8 12 Q6 12 6 14 Z",fill:"url(#emptyFolderGrad)"}),e.jsx("line",{x1:"18",y1:"26",x2:"30",y2:"26",stroke:"white",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"}),e.jsx("line",{x1:"18",y1:"32",x2:"26",y2:"32",stroke:"white",strokeWidth:"2",strokeLinecap:"round",opacity:"0.4"})]})},Es=({icon:s,title:d,description:i,action:f,actionLabel:x,variant:T="default"})=>{const g={default:"from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",success:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30",warning:"from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",celebrate:"from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-6 sm:px-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 w-24 h-24 rounded-full bg-gradient-to-br ${g[T]} opacity-50 animate-pulse`,style:{transform:"scale(1.3)"}}),e.jsx("div",{className:`relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br ${g[T]} flex items-center justify-center shadow-lg`,children:Ms[s]?Ms[s]():e.jsx("div",{className:"text-3xl sm:text-4xl",children:s})})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:d}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mb-6 max-w-xs sm:max-w-sm leading-relaxed",children:i}),f&&e.jsx("button",{onClick:f,className:"group px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-2",children:[x,e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Qr=({isOpen:s,onClose:d,title:i,children:f,wide:x,fullScreenMobile:T})=>(l.useEffect(()=>{const g=c=>{c.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[s,d]),s?e.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:d}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-2xl w-full flex flex-col animate-modalSlideUp ${T?"h-full sm:h-auto sm:max-h-[90vh] rounded-none sm:rounded-2xl sm:mx-4":"rounded-t-2xl sm:rounded-2xl sm:mx-4 max-h-[95vh] sm:max-h-[90vh]"} ${x?"sm:max-w-2xl":"sm:max-w-md"}`,children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-between p-4 pr-6 sm:p-6 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 z-20 ${T?"rounded-none sm:rounded-t-2xl":"rounded-t-2xl"}`,children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100",children:i}),e.jsx("button",{type:"button",onClick:d,className:"p-3 -mr-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-400 touch-manipulation",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 overscroll-contain",children:f})]})]}):null),Ia=({isOpen:s,onClose:d,attachment:i,attachments:f,onNavigate:x})=>{var v;if(!s||!i)return null;const T=i.file_name||"",g=i.file_url||"",c=((v=T.split(".").pop())==null?void 0:v.toLowerCase())||"",p=["jpg","jpeg","png","gif","webp","svg","bmp"].includes(c),k=c==="pdf",w=["mp4","webm","ogg","mov"].includes(c),_=["mp3","wav","ogg","m4a"].includes(c),Q=["doc","docx","xls","xlsx","ppt","pptx"].includes(c),B=["eml","msg"].includes(c),V=(f==null?void 0:f.findIndex($=>$.id===i.id))??-1,D=f&&f.length>1,P=V>0,te=V<((f==null?void 0:f.length)||0)-1,pe=()=>{P&&x&&x(f[V-1])},m=()=>{te&&x&&x(f[V+1])};return l.useEffect(()=>{const $=ne=>{s&&(ne.key==="Escape"&&d(),ne.key==="ArrowLeft"&&P&&pe(),ne.key==="ArrowRight"&&te&&m())};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[s,V,f]),e.jsxs("div",{className:"fixed inset-0 z-[310] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/50 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-white/80 text-sm truncate max-w-[300px]",children:T}),D&&e.jsxs("span",{className:"text-white/50 text-sm",children:[V+1," / ",f.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g,download:T,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:d,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),D&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:pe,disabled:!P,className:`absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${P?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:m,disabled:!te,className:`absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${te?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"relative max-w-[90vw] max-h-[85vh] flex items-center justify-center",children:[p&&e.jsx("img",{src:g,alt:T,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"}),k&&e.jsx("iframe",{src:g,title:T,className:"w-[90vw] h-[85vh] max-w-4xl rounded-lg bg-white"}),w&&e.jsx("video",{src:g,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl",children:"Your browser does not support video playback."}),_&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸŽµ"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-4",children:T}),e.jsx("audio",{src:g,controls:!0,autoPlay:!0,className:"w-full max-w-md",children:"Your browser does not support audio playback."})]}),Q&&e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(g)}`,title:T,className:"w-[90vw] h-[85vh] max-w-5xl rounded-lg bg-white"}),B&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ‰ï¸"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:T}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Email files can be opened in your email client"}),e.jsxs("a",{href:g,download:T,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Email"]})]}),!p&&!k&&!w&&!_&&!Q&&!B&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“„"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:T}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Preview not available for this file type"}),e.jsxs("a",{href:g,download:T,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]})]})},Wa=({step:s,onNext:d,onSkip:i,onComplete:f})=>{const T=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒT":"Ctrl+Alt+T",g=[{target:"summary-bar",title:"Welcome to Trackli!",description:"This is your Summary Bar - click any stat to filter tasks. Use the My Day filter to see your daily focus, or filter by assignee, customer, category and more.",position:"bottom"},{target:"columns",title:"Kanban Board",description:"Your tasks flow from Backlog â†’ To Do â†’ In Progress â†’ Done. Drag and drop to move tasks between columns.",position:"top"},{target:"task-card",title:"Task Cards",description:"Each card shows key info at a glance. Look for the sun icon on cards in your My Day list! Hover to see details and attachments.",position:"right"},{target:"views",title:"Multiple Views",description:"Switch between Board, My Day, All Tasks (with sorting & CSV export), Calendar, and Progress views using the menu.",position:"bottom"},{target:"add-task",title:"Create Tasks",description:`Click + Task or press ${T} to create. Set dates, effort level, assignee, customer, category, attachments, subtasks, dependencies, and recurring schedules.`,position:"bottom"},{target:"notes",title:"Meeting Notes â†’ Tasks",description:"Click Notes to quickly capture meeting notes - type, paste, or even speak! AI extracts action items as tasks automatically.",position:"bottom"},{target:"help",title:"Need Help?",description:"Click the ? icon anytime to access the full help guide. You're all set!",position:"bottom"}],c=g[s];return c?e.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),e.jsxs("div",{className:`absolute z-[1001] max-w-sm animate-fadeIn ${s===0?"top-32 left-1/2 -translate-x-1/2":s===1?"top-40 left-1/2 -translate-x-1/2":s===2?"top-60 left-[340px]":s===3?"top-24 left-8":s===4?"top-20 right-48":s===5?"top-20 right-32":"top-20 right-24"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:g.map((p,k)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${k===s?"w-6 bg-indigo-500":k<s?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},k))}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:i,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip tour"}),e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsx("button",{onClick:()=>d(s-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>s<g.length-1?d(s+1):f(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:s<g.length-1?"Next":"Get Started!"})]})]})]}),e.jsx("div",{className:`absolute w-4 h-4 bg-white dark:bg-gray-800 rotate-45 border-gray-200 dark:border-gray-700 ${c.position==="bottom"?"-top-2 left-1/2 -translate-x-1/2 border-t border-l":c.position==="top"?"-bottom-2 left-1/2 -translate-x-1/2 border-b border-r":c.position==="right"?"-left-2 top-8 border-l border-b":"-right-2 top-8 border-r border-t"}`})]})]}):null},Oa=()=>e.jsxs("svg",{viewBox:"0 0 280 120",className:"w-full h-32 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunGlow",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("rect",{x:"10",y:"10",width:"120",height:"100",rx:"8",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"70",y:"26",textAnchor:"middle",fontSize:"9",fill:"#6B7280",children:"ðŸ’¡ Recommendations"}),e.jsx("rect",{x:"18",y:"36",width:"104",height:"32",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"52",r:"6",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"48",width:"50",height:"8",rx:"2",fill:"#9CA3AF"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"108",cy:"52",r:"10",fill:"#FEF3C7",children:e.jsx("animate",{attributeName:"r",values:"10;12;10",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("text",{x:"108",y:"56",textAnchor:"middle",fontSize:"12",children:"â˜€ï¸"}),e.jsxs("circle",{cx:"108",cy:"52",r:"10",fill:"none",stroke:"#F59E0B",strokeWidth:"2",children:[e.jsx("animate",{attributeName:"r",values:"10;20;20",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.8;0;0",dur:"1.5s",repeatCount:"indefinite"})]})]}),e.jsx("rect",{x:"18",y:"74",width:"104",height:"28",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"88",r:"5",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"84",width:"40",height:"8",rx:"2",fill:"#D1D5DB"}),e.jsx("rect",{x:"150",y:"10",width:"120",height:"100",rx:"8",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("text",{x:"210",y:"26",textAnchor:"middle",fontSize:"10",fill:"#D97706",fontWeight:"bold",children:"â˜€ï¸ My Day"}),e.jsx("rect",{x:"158",y:"36",width:"104",height:"32",rx:"6",fill:"#FDE68A",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("circle",{cx:"170",cy:"52",r:"6",fill:"#10B981",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("rect",{x:"182",y:"48",width:"50",height:"8",rx:"2",fill:"#92400E",opacity:"0.5",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;0.5;0.5",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("path",{d:"M125 52 L145 52 L140 47 M145 52 L140 57",stroke:"#F59E0B",strokeWidth:"2",fill:"none",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.2;0.6;1"})})]}),Pa=()=>e.jsxs("svg",{viewBox:"0 0 280 140",className:"w-full h-36 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"calButtonGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"15",y:"20",width:"120",height:"50",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("circle",{cx:"32",cy:"38",r:"6",fill:"#3B82F6"}),e.jsx("rect",{x:"45",y:"32",width:"55",height:"8",rx:"2",fill:"#374151"}),e.jsx("rect",{x:"45",y:"44",width:"35",height:"6",rx:"2",fill:"#9CA3AF"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",y:"30",width:"24",height:"24",rx:"6",fill:"#EEF2FF",children:e.jsx("animate",{attributeName:"fill",values:"#EEF2FF;#C7D2FE;#EEF2FF",dur:"2s",repeatCount:"indefinite"})}),e.jsx("text",{x:"117",y:"47",textAnchor:"middle",fontSize:"14",children:"ðŸ—“"}),e.jsxs("circle",{cx:"117",cy:"42",r:"12",fill:"none",stroke:"#6366F1",strokeWidth:"2",children:[e.jsx("animate",{attributeName:"r",values:"12;18;18",dur:"2s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.8;0;0",dur:"2s",repeatCount:"indefinite"})]})]}),e.jsx("path",{d:"M140 45 L155 45",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round",markerEnd:"url(#arrowhead)",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.7;1"})}),e.jsxs("g",{children:[e.jsx("rect",{x:"160",y:"15",width:"105",height:"110",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"212",y:"35",textAnchor:"middle",fontSize:"8",fill:"#374151",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Schedule Task"]}),e.jsxs("text",{x:"170",y:"52",fontSize:"7",fill:"#6B7280",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Date"]}),e.jsx("rect",{x:"170",y:"55",width:"85",height:"18",rx:"4",fill:"#F9FAFB",stroke:"#E5E7EB",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"180",y:"67",fontSize:"8",fill:"#374151",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"02/01/2026"]}),e.jsxs("text",{x:"170",y:"82",fontSize:"7",fill:"#6B7280",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Time"]}),e.jsx("rect",{x:"170",y:"85",width:"85",height:"18",rx:"4",fill:"#F9FAFB",stroke:"#E5E7EB",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"180",y:"97",fontSize:"8",fill:"#374151",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"09:00"]}),e.jsx("rect",{x:"190",y:"107",width:"55",height:"14",rx:"4",fill:"url(#calButtonGradient)",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"217",y:"117",textAnchor:"middle",fontSize:"7",fill:"white",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Schedule"]})]})]}),za=()=>e.jsxs("svg",{viewBox:"0 0 200 100",className:"w-full h-28 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"resizeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("text",{x:"15",y:"25",fontSize:"9",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"15",y:"55",fontSize:"9",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"15",y:"85",fontSize:"9",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"45",y1:"18",x2:"190",y2:"18",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"48",x2:"190",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"78",x2:"190",y2:"78",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"50",y:"22",width:"130",rx:"4",fill:"url(#resizeGradient)",children:e.jsx("animate",{attributeName:"height",values:"22;52;22",dur:"3s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"56",y:"28",width:"60",height:"6",rx:"2",fill:"white",opacity:"0.8"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",width:"20",height:"6",rx:"3",fill:"white",opacity:"0.9",children:e.jsx("animate",{attributeName:"y",values:"40;70;40",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M115 0 L115 8 M111 4 L119 4",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"transform",values:"translate(0,48);translate(0,78);translate(0,48)",dur:"3s",repeatCount:"indefinite"})})]})]}),Ra=()=>e.jsxs("svg",{viewBox:"0 0 240 80",className:"w-full h-24 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("rect",{x:"20",y:"20",width:"200",height:"40",rx:"8",fill:"#FEF3C7"}),e.jsx("text",{x:"30",y:"38",fontSize:"10",fill:"#92400E",fontWeight:"bold",children:"Today's Progress"}),e.jsx("rect",{x:"30",y:"45",width:"180",height:"8",rx:"4",fill:"#FDE68A"}),e.jsx("rect",{x:"30",y:"45",height:"8",rx:"4",fill:"url(#progressGradient)",children:e.jsx("animate",{attributeName:"width",values:"0;180;180;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"})}),e.jsxs("text",{x:"200",y:"38",textAnchor:"end",fontSize:"10",fill:"#059669",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"}),"100% âœ“"]}),e.jsxs("circle",{cx:"60",cy:"15",r:"3",fill:"#F59E0B",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.5;0.7"}),e.jsx("animate",{attributeName:"cy",values:"15;5;5",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("circle",{cx:"120",cy:"12",r:"3",fill:"#EC4899",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;0.55;0.75"}),e.jsx("animate",{attributeName:"cy",values:"12;2;2",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;1"})]}),e.jsxs("circle",{cx:"180",cy:"14",r:"3",fill:"#6366F1",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;0.52;0.72"}),e.jsx("animate",{attributeName:"cy",values:"14;4;4",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),Fs={sun:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#sunGrad)"}),[0,45,90,135,180,225,270,315].map((s,d)=>e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"10",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${s} 24 24)`},d))]}),addTask:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"addGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"24",rx:"4",fill:"url(#addGrad)"}),e.jsx("line",{x1:"24",y1:"18",x2:"24",y2:"30",stroke:"white",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("line",{x1:"18",y1:"24",x2:"30",y2:"24",stroke:"white",strokeWidth:"3",strokeLinecap:"round"})]}),chart:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#34D399"})]})}),e.jsx("rect",{x:"8",y:"28",width:"8",height:"12",rx:"2",fill:"url(#chartGrad)",opacity:"0.6"}),e.jsx("rect",{x:"20",y:"20",width:"8",height:"20",rx:"2",fill:"url(#chartGrad)",opacity:"0.8"}),e.jsx("rect",{x:"32",y:"10",width:"8",height:"30",rx:"2",fill:"url(#chartGrad)"})]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"calGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"28",rx:"4",fill:"url(#calGrad)"}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"8",rx:"4",fill:"#4F46E5"}),e.jsx("circle",{cx:"14",cy:"8",r:"2",fill:"#6366F1"}),e.jsx("circle",{cx:"34",cy:"8",r:"2",fill:"#6366F1"}),e.jsx("rect",{x:"14",y:"24",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"24",y:"24",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"14",y:"32",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"24",y:"32",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"})]}),sparkle:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sparkGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#A78BFA"}),e.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),e.jsx("path",{d:"M24 4 L26 18 L40 20 L26 22 L24 36 L22 22 L8 20 L22 18 Z",fill:"url(#sparkGrad)"}),e.jsx("circle",{cx:"36",cy:"10",r:"3",fill:"#C4B5FD"}),e.jsx("circle",{cx:"12",cy:"34",r:"2",fill:"#C4B5FD"})]}),timer:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"timerGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("circle",{cx:"24",cy:"26",r:"16",fill:"none",stroke:"url(#timerGrad)",strokeWidth:"4"}),e.jsx("circle",{cx:"24",cy:"26",r:"12",fill:"#EEF2FF"}),e.jsx("line",{x1:"24",y1:"26",x2:"24",y2:"18",stroke:"#4F46E5",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"24",y1:"26",x2:"30",y2:"26",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("rect",{x:"20",y:"4",width:"8",height:"4",rx:"1",fill:"#6366F1"})]}),table:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tableGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"6",y:"8",width:"36",height:"32",rx:"4",fill:"url(#tableGrad)"}),e.jsx("rect",{x:"6",y:"8",width:"36",height:"8",rx:"4",fill:"#4F46E5"}),e.jsx("line",{x1:"6",y1:"22",x2:"42",y2:"22",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"6",y1:"30",x2:"42",y2:"30",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"18",y1:"16",x2:"18",y2:"40",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"30",y1:"16",x2:"30",y2:"40",stroke:"white",strokeWidth:"1",opacity:"0.3"})]}),importExport:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"importGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#34D399"}),e.jsx("stop",{offset:"100%",stopColor:"#10B981"})]})}),e.jsx("rect",{x:"10",y:"8",width:"28",height:"32",rx:"3",fill:"url(#importGrad)"}),e.jsx("path",{d:"M18 20 L24 26 L30 20",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("line",{x1:"24",y1:"14",x2:"24",y2:"26",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"32",x2:"32",y2:"32",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]}),folder:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"folderGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FBBF24"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("path",{d:"M6 14 L6 38 Q6 40 8 40 L40 40 Q42 40 42 38 L42 18 Q42 16 40 16 L24 16 L20 12 L8 12 Q6 12 6 14 Z",fill:"url(#folderGrad)"}),e.jsx("rect",{x:"6",y:"16",width:"36",height:"2",fill:"#D97706",opacity:"0.3"})]}),settings:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"settingsGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9CA3AF"}),e.jsx("stop",{offset:"100%",stopColor:"#6B7280"})]})}),e.jsx("path",{d:"M24 8 L27 10 L30 8 L32 11 L36 11 L36 15 L39 17 L37 20 L39 23 L36 25 L36 29 L32 29 L30 32 L27 30 L24 32 L21 30 L18 32 L16 29 L12 29 L12 25 L9 23 L11 20 L9 17 L12 15 L12 11 L16 11 L18 8 L21 10 Z",fill:"url(#settingsGrad)"}),e.jsx("circle",{cx:"24",cy:"20",r:"6",fill:"white"}),e.jsx("circle",{cx:"24",cy:"20",r:"3",fill:"#6B7280"})]}),chartUp:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartUpGrad",x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("polyline",{points:"8,36 18,26 28,30 40,14",fill:"none",stroke:"url(#chartUpGrad)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polygon",{points:"36,12 42,12 42,18",fill:"#6366F1"}),e.jsx("circle",{cx:"8",cy:"36",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"18",cy:"26",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"28",cy:"30",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"40",cy:"14",r:"3",fill:"#6366F1"})]}),trophy:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"trophyGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("path",{d:"M14 8 L34 8 L34 20 Q34 28 24 32 Q14 28 14 20 Z",fill:"url(#trophyGrad)"}),e.jsx("path",{d:"M14 12 L10 12 Q6 12 6 16 L6 18 Q6 22 10 22 L14 22",fill:"none",stroke:"#F59E0B",strokeWidth:"3"}),e.jsx("path",{d:"M34 12 L38 12 Q42 12 42 16 L42 18 Q42 22 38 22 L34 22",fill:"none",stroke:"#F59E0B",strokeWidth:"3"}),e.jsx("rect",{x:"20",y:"32",width:"8",height:"4",fill:"#D97706"}),e.jsx("rect",{x:"16",y:"36",width:"16",height:"4",rx:"1",fill:"#92400E"})]})},Va=({view:s,step:d,onNext:i,onSkip:f,onComplete:x})=>{const T={myday:[{title:"Welcome to My Day!",description:"This is your personal daily focus list. Plan what to work on today without cluttering your board view.",iconComponent:"sun"},{title:"Add Tasks to My Day",description:"Tasks with today's start date appear automatically. Click the sun button on any recommended task to add it to your day!",iconComponent:"addTask",animation:"addToMyDay"},{title:"Track Your Progress",description:"Watch your progress bar fill up as you complete tasks. Finish everything for a confetti celebration!",iconComponent:"chart",animation:"progressBar"}],calendar:[{title:"Welcome to Calendar!",description:"View your scheduled tasks visually. Switch between daily, weekly, and monthly views using the buttons at the top.",iconComponent:"calendar"},{title:"Schedule a Task",description:"Click the calendar button on any task to set a date and time. The task will appear on the calendar.",iconComponent:"sparkle",animation:"dragToCalendar"},{title:"Task Duration",description:"Set the Time Estimate on a task to control how tall it appears on the calendar. Click any task to edit its details.",iconComponent:"timer"}],tasks:[{title:"All Tasks View",description:"See every task in a powerful table format. Click any column header to sort, or use the Filters button to narrow down results.",iconComponent:"table"},{title:"Import & Export CSV",description:"Export tasks for reporting, or import to bulk create/edit. Use * in the ID column to create new tasks, or include existing IDs to update them.",iconComponent:"importExport"}],projects:[{title:"Projects View",description:"Organize your work into projects. Each project gets its own color that appears on task cards throughout the app.",iconComponent:"folder"},{title:"Manage Projects",description:"Create new projects, edit details, or archive completed ones. Archived projects hide their tasks from the main board.",iconComponent:"settings"}],progress:[{title:"Progress View",description:"Track your productivity across all projects. See completion rates, task counts, and how you're doing over time.",iconComponent:"chartUp"},{title:"Completion Insights",description:"The charts show your completed vs. remaining tasks. Use this to identify bottlenecks and celebrate wins!",iconComponent:"trophy"}]},g={addToMyDay:Oa,dragToCalendar:Pa,resizeTask:za,progressBar:Ra},c=T[s]||[],p=c[d];return p?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),e.jsx("div",{className:"relative z-[1001] max-w-md w-full animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[e.jsx("div",{className:"mb-3",children:p.iconComponent&&Fs[p.iconComponent]?Fs[p.iconComponent]():e.jsx("span",{className:"text-4xl",children:p.icon})}),e.jsx("h3",{className:"text-xl font-bold",children:p.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:p.description}),p.animation&&g[p.animation]&&e.jsx("div",{className:"mb-6",children:(()=>{const k=g[p.animation];return e.jsx(k,{})})()}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:c.map((k,w)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${w===d?"w-8 bg-indigo-500":w<d?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},w))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip"}),e.jsxs("div",{className:"flex gap-2",children:[d>0&&e.jsx("button",{onClick:()=>i(d-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>d<c.length-1?i(d+1):x(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:d<c.length-1?"Next":"Got it!"})]})]})]})]})})]}):null},Bs={tasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",fill:"#10B981"}),e.jsx("path",{d:"M7 12 L10 15 L17 8",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),board:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#6366F1"}),e.jsx("rect",{x:"4",y:"6",width:"4",height:"12",rx:"1",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"10",y:"6",width:"4",height:"8",rx:"1",fill:"white",opacity:"0.7"}),e.jsx("rect",{x:"16",y:"6",width:"4",height:"5",rx:"1",fill:"white",opacity:"0.5"})]}),myday:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"#F59E0B"}),[0,45,90,135,180,225,270,315].map((s,d)=>e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"5",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${s} 12 12)`},d))]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",fill:"#6366F1"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"5",rx:"2",fill:"#4F46E5"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5",fill:"#6366F1"}),e.jsx("circle",{cx:"17",cy:"3",r:"1.5",fill:"#6366F1"}),e.jsx("rect",{x:"6",y:"12",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"10.5",y:"12",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"6",y:"16",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.6"})]}),alltasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#6366F1"}),e.jsx("line",{x1:"5",y1:"8",x2:"19",y2:"8",stroke:"white",strokeWidth:"1.5",opacity:"0.8"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"white",strokeWidth:"1.5",opacity:"0.6"}),e.jsx("line",{x1:"5",y1:"16",x2:"19",y2:"16",stroke:"white",strokeWidth:"1.5",opacity:"0.4"})]}),shortcuts:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",fill:"#6B7280"}),e.jsx("rect",{x:"4",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"8",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"12",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"16",y:"8",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"4",y:"11",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"9",y:"11",width:"6",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"16",y:"11",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"6",y:"14",width:"12",height:"2",rx:"0.5",fill:"white",opacity:"0.4"})]})},Et={myday:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"#F59E0B"}),[0,45,90,135,180,225,270,315].map((s,d)=>e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"5",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${s} 12 12)`},d))]}),board:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#D4A574"}),e.jsx("rect",{x:"3",y:"2",width:"10",height:"4",rx:"1",fill:"#B8956E"}),e.jsx("rect",{x:"4",y:"8",width:"16",height:"11",rx:"1",fill:"#FDF6E9"}),e.jsx("line",{x1:"7",y1:"11",x2:"17",y2:"11",stroke:"#E5E7EB",strokeWidth:"1.5"}),e.jsx("line",{x1:"7",y1:"14",x2:"14",y2:"14",stroke:"#E5E7EB",strokeWidth:"1.5"})]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",fill:"#FEE2E2"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"5",rx:"2",fill:"#EF4444"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("circle",{cx:"17",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("rect",{x:"6",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"10.5",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"6",y:"16",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"})]}),alltasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#818CF8"}),e.jsx("rect",{x:"2",y:"3",width:"20",height:"5",rx:"2",fill:"#6366F1"}),e.jsx("line",{x1:"5",y1:"11",x2:"19",y2:"11",stroke:"white",strokeWidth:"1.5",opacity:"0.6"}),e.jsx("line",{x1:"5",y1:"15",x2:"19",y2:"15",stroke:"white",strokeWidth:"1.5",opacity:"0.4"})]}),projects:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M3 7 L3 19 Q3 20 4 20 L20 20 Q21 20 21 19 L21 9 Q21 8 20 8 L12 8 L10 6 L4 6 Q3 6 3 7 Z",fill:"#9CA3AF"}),e.jsx("rect",{x:"3",y:"8",width:"18",height:"1",fill:"#6B7280",opacity:"0.3"})]}),progress:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"4",y:"14",width:"4",height:"6",rx:"1",fill:"#EF4444"}),e.jsx("rect",{x:"10",y:"10",width:"4",height:"10",rx:"1",fill:"#F59E0B"}),e.jsx("rect",{x:"16",y:"6",width:"4",height:"14",rx:"1",fill:"#10B981"})]}),lightbulb:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M12 2 C8 2 5 5 5 9 C5 12 7 14 8 15 L8 18 L16 18 L16 15 C17 14 19 12 19 9 C19 5 16 2 12 2 Z",fill:"#FCD34D"}),e.jsx("rect",{x:"9",y:"19",width:"6",height:"2",rx:"1",fill:"#F59E0B"}),e.jsx("rect",{x:"10",y:"21",width:"4",height:"1",rx:"0.5",fill:"#D97706"}),e.jsx("path",{d:"M9 9 L12 12 L15 9",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round",fill:"none"})]})},Ha=({isOpen:s,onClose:d,initialTab:i="tasks",shortcutModifier:f="âŒ˜âŒƒ"})=>{const[x,T]=l.useState(i);if(l.useEffect(()=>{s&&T(i)},[s,i]),!s)return null;const g=[{id:"tasks",label:"Tasks",iconComponent:"tasks"},{id:"board",label:"Board",iconComponent:"board"},{id:"myday",label:"My Day",iconComponent:"myday"},{id:"calendar",label:"Calendar",iconComponent:"calendar"},{id:"alltasks",label:"All Tasks",iconComponent:"alltasks"},{id:"shortcuts",label:"Shortcuts",iconComponent:"shortcuts"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl",children:"â“"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Trackli Help Guide"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use Trackli effectively"})]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:g.map(c=>e.jsxs("button",{onClick:()=>T(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x===c.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{children:c.iconComponent&&Bs[c.iconComponent]?Bs[c.iconComponent]():c.icon}),e.jsx("span",{children:c.label})]},c.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-240px)]",children:[x==="board"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Kanban Columns"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Tasks flow through four columns representing their status:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#9CA3AF",backgroundColor:"#F9FAFB"},children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Backlog"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Future work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#3B82F6",backgroundColor:"#EFF6FF"},children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"To Do"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#EC4899",backgroundColor:"#FDF2F8"},children:[e.jsx("span",{className:"font-semibold text-pink-700",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#64748B",backgroundColor:"#F8FAFC"},children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Done"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:e.jsxs("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:[e.jsx("strong",{children:"ðŸ‘† Drag & Drop:"})," Drag any task card between columns to change its status instantly."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Card Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click Actions:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click card"})," â€“ Open task to edit all details"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click title"})," â€“ Edit title inline (desktop)"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Hover Actions (Desktop):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Hover over a card to reveal quick action buttons:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-700 rounded",children:"â–¶ Start"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:"âœ“ Done"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded",children:"ðŸš© Critical"}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:"â˜€ï¸ My Day"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Mobile Quick Actions:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"On mobile, quick status buttons appear at the bottom of each card."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Task Card Indicators"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Left Border Colors:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-red-500"}),e.jsx("span",{children:"Red = Overdue or Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-orange-500"}),e.jsx("span",{children:"Orange = Blocked or Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-green-500"}),e.jsx("span",{children:"Green = Ready to Start"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-blue-500"}),e.jsx("span",{children:"Blue/Pink/Gray = Column status"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Icons & Badges:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"ðŸš© = Critical/Flagged"}),e.jsx("div",{children:"ðŸ”’ = Blocked by another task"}),e.jsx("div",{children:"ðŸ” = Recurring task"}),e.jsx("div",{children:"â˜€ï¸ = In My Day"}),e.jsx("div",{children:"â–¶ = Start date"}),e.jsx("div",{children:"ðŸ—“ = Due date"}),e.jsx("div",{children:"â± = Time estimate"}),e.jsx("div",{children:"ðŸ“Ž = Has attachments"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Effort Bars:"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â–°"}),e.jsx("span",{children:"Low"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â–°â–°"}),e.jsx("span",{children:"Medium"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"â–°â–°â–°"}),e.jsx("span",{children:"High"})]})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Filtering & Search"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Summary Bar (Quick Filters):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click any stat in the summary bar to filter:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-red-600 font-medium",children:"ðŸš© Critical"})," â€“ Flagged tasks"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600 font-medium",children:"Due Today"})," â€“ Due today"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-red-600 font-medium",children:"Overdue"})," â€“ Past due date"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-amber-600 font-medium",children:"â˜€ï¸ My Day"})," â€“ Daily focus tasks"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Field Filters:"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click the filter icon (ðŸ”) to filter by:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsx("div",{children:"â€¢ Assignee"}),e.jsx("div",{children:"â€¢ Customer"}),e.jsx("div",{children:"â€¢ Category"}),e.jsx("div",{children:"â€¢ Effort Level"}),e.jsx("div",{children:"â€¢ Source"}),e.jsx("div",{children:"â€¢ Due Date"})]})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsx("p",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-1",children:"ðŸ” Quick Search"}),e.jsxs("p",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"âŒ˜K"})," (Mac) or ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"Ctrl+K"})," (Win) to open search. Find tasks by title, description, assignee, or customer."]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:'ðŸ’¡ Active filters show a count badge. Click "Clear" to reset all filters.'})]})]}),x==="myday"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center text-amber-600 dark:text-amber-400",children:"â˜€ï¸"}),"What is My Day?"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"My Day is your personal daily focus list. It helps you plan what to work on today without cluttering your board view."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"How Tasks Appear in My Day"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-1",children:"Auto-included:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks with a start date of today or earlier automatically appear in My Day"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Manually added:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click the â˜€ï¸ button on any task in Recommendations to add it to your focus list"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Sun Icon on Cards (â˜€ï¸)"]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tasks in your My Day list show a ",e.jsx("span",{className:"text-lg",children:"â˜€ï¸"})," sun icon on their card in the board view, right below the effort bars. This helps you quickly identify your daily focus tasks while browsing the board."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Recommendations & All Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The Recommendations section shows tasks organized by urgency and status. Click the â˜€ï¸ button on any task to add it:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸ”´ Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"ðŸŸ  Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due today"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-yellow-600",children:"ðŸŸ¡ Due Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due in next 3 days"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-green-600",children:"ðŸŸ¢ Quick Wins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low effort tasks"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"ðŸ”µ In Progress"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currently being worked on"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"âšª To Do"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-xl col-span-2",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ðŸ“‹ Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet prioritized"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Daily Reset"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manually added tasks clear from My Day at midnight (or when completed), giving you a fresh start each day. Auto-included tasks based on start date will remain until their start date passes."})]})]}),x==="calendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—“"}),"Calendar View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Schedule tasks on your calendar with start times and durations. Access via the menu or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜L"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Daily"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single day view"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7-day overview"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“ï¸"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full month grid"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Scheduling Tasks"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click the Calendar Button:"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Click the ",e.jsx("span",{className:"text-lg",children:"ðŸ—“"})," calendar button on any task to open the scheduling modal. Set a date and time, then click Schedule."]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Task Duration:"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Set the ",e.jsx("strong",{children:"Time Estimate"})," on a task to control how tall it appears on the calendar (e.g., 30m, 1h, 2h)."]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click to Edit:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click any task on the calendar to open and edit its details, change times, or mark it complete."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"How to Schedule"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Set a Start Date and Start Time on any task to have it appear on the calendar."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”´"}),e.jsx("span",{children:"Overdue tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ "}),e.jsx("span",{children:"Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"}),e.jsx("span",{children:"Due Soon (3 days)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”µ"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{children:"My Day tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âšª"}),e.jsx("span",{children:"To Do"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Backlog"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¢"}),e.jsx("span",{children:"Quick Wins"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Visual Indicators"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-red-500 font-medium",children:"Red line"})," â€“ Current time indicator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-orange-500 font-medium",children:"âš ï¸ Orange ring"})," â€“ Task overlaps with another scheduled task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"Colored bars"})," â€“ Tasks are color-coded by project"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"30-min slots"})," â€“ Calendar auto-scrolls to 6am on load"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"5"}),"Quick Actions"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Hover over any scheduled task to reveal action buttons:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"â–¶"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Start task"})]}),e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ“"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Mark done"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ•"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Remove from calendar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Removing a task from calendar clears its scheduled time. If not done, it returns to the sidebar for rescheduling."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"âš™ï¸"}),"Workflow Automation"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When you schedule a task:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:'â€¢ Status automatically changes to "To Do" (if in Backlog)'}),e.jsx("li",{children:"â€¢ Start date is set to the scheduled day"}),e.jsx("li",{children:"â€¢ Start time is set to the slot time"}),e.jsx("li",{children:"â€¢ Task appears in My Day if scheduled for today"})]})]})]})]}),x==="alltasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—ƒï¸"}),"All Tasks View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Access all your tasks in a powerful table format. Click the view switcher in the header and select "All Tasks" or press ',e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒA"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+A"})," (Win)."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Sorting"]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Click any column header to sort by that field. Click again to reverse the sort order. An arrow indicator shows the current sort direction."}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Sortable columns: Title, Project, Status, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Created"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Filtering"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-medium",children:"Filters"})," button to show filter inputs for each column"]}),e.jsx("p",{children:"â€¢ Type in the filter boxes below column headers to narrow results"}),e.jsxs("p",{children:["â€¢ Click ",e.jsx("span",{className:"text-red-600",children:"Clear Filters"})," to reset all filters"]}),e.jsx("p",{children:"â€¢ Active filters show a dot indicator on the Filters button"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"3"}),"Export to CSV"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Export CSV"})," button to download your tasks."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Includes: Title, Project, Status, Critical, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Description, and Created date."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Only currently filtered/visible tasks are exported."})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"4"}),"Import from CSV"]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium",children:"Import CSV"})," button to bulk create or update tasks."]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Create new tasks:"})," Use ",e.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:"*"})," in the ID column"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Update existing:"})," Include the task's existing ID"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Template:"})," Export first to get the correct column format"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Great for migrating from other tools or bulk task creation."})]})]})]}),x==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Creating Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-indigo-500 text-white rounded text-sm font-medium",children:"+"})," button in the header"]}),e.jsxs("p",{children:["â€¢ Or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒT"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+T"})," (Win)"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Fields"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Title *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The task name (required)"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Project *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Which project this belongs to"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Start Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When to start working on it"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deadline for completion"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Time Estimate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long it will take"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Effort Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low / Medium / High effort"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Client/customer for the task"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Assignee"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Who's responsible"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type of work"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flag as high priority"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Completing Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover"})," over a task and click the ",e.jsx("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded text-sm",children:"âœ“ Done"})," button"]}),e.jsxs("p",{children:["â€¢ Or ",e.jsx("strong",{children:"drag"}),' the task to the "Done" column']}),e.jsx("p",{children:"â€¢ Or open the task and change its status"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Dependencies (Blocking)"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:'â€¢ In the task editor, use "Blocked By" to select tasks that must be completed first'}),e.jsx("p",{children:"â€¢ Blocked tasks show with ðŸ”’ and an orange border"}),e.jsx("p",{children:'â€¢ When the blocking task is completed, the blocked task becomes "ready to start"'})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Recurring Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Set a recurrence pattern: Daily, Weekly, Bi-weekly, Monthly"}),e.jsx("p",{children:"â€¢ When completed, a new instance is automatically created"}),e.jsx("p",{children:"â€¢ Recurring tasks show ðŸ” on the card"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"6"}),"Attachments"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Adding Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Open a task and go to the Details tab"}),e.jsx("p",{children:'â€¢ Drag & drop files or click "Choose files"'}),e.jsx("p",{children:"â€¢ Supports images, PDFs, documents, and more"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Viewing Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Click any attachment to open the viewer"}),e.jsx("p",{children:"â€¢ PDFs display inline with page navigation"}),e.jsx("p",{children:"â€¢ Images show in a lightbox view"}),e.jsx("p",{children:"â€¢ Use â† â†’ arrow keys to navigate between multiple attachments"}),e.jsx("p",{children:"â€¢ Click the download icon to save files locally"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"ðŸ’¡ Tasks with attachments show a ðŸ“Ž icon with count on the card"})]})]})]}),x==="shortcuts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Navigation Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"â˜€ï¸ My Day View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"D"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“‹ Board View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"B"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ—“ Calendar View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"L"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ” Quick Search"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"/"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Action Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Task"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"T"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Project"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"P"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Import Notes"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"N"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quick Add Task"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Q"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Help / Shortcuts"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"?"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Close Modal"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Esc"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click task"})," â€“ Open task editor"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task"})," â€“ Move between columns on board"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover task"})," â€“ See quick action buttons (desktop)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click ðŸ—“ button"})," â€“ Schedule task on calendar"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Need more help? ",e.jsx("a",{href:"mailto:support@gettrackli.com",className:"text-indigo-500 hover:text-indigo-600 hover:underline",children:"Contact support"})]}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:"Got it!"})]})]})]})},Ga=({isOpen:s,onClose:d,tasks:i,projects:f,onEditTask:x,allTasks:T})=>{const[g,c]=l.useState(""),p=l.useRef(null);if(l.useEffect(()=>{s&&p.current&&p.current.focus(),s||c("")},[s]),l.useEffect(()=>{const w=_=>{_.key==="Escape"&&s&&d()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,d]),!s)return null;const k=g.trim()?i.filter(w=>{var Q,B,V,D,P;const _=g.toLowerCase();return((Q=w.title)==null?void 0:Q.toLowerCase().includes(_))||((B=w.description)==null?void 0:B.toLowerCase().includes(_))||((V=w.assignee)==null?void 0:V.toLowerCase().includes(_))||((D=w.customer)==null?void 0:D.toLowerCase().includes(_))||((P=w.notes)==null?void 0:P.toLowerCase().includes(_))}):[];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:p,type:"text",value:g,onChange:w=>c(w.target.value),placeholder:"Search tasks by title, description, assignee, customer...",className:"flex-1 text-lg outline-none placeholder-gray-400"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded",children:"ESC"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:g.trim()===""?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{children:"Start typing to search across all tasks"})]}):k.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No results found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:k.map(w=>{var V;const _=f.find(D=>D.id===w.project_id),Q=dt.find(D=>D.id===w.category),B=ht(w.due_date,w.status);return e.jsx("button",{onClick:()=>{x(w),d()},className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mt-1.5 shrink-0",style:{backgroundColor:Ft[w.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 truncate",children:w.title}),w.critical&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:_==null?void 0:_.name}),Q&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{color:Q.color},children:Q.label})]}),w.assignee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:w.assignee})]}),w.due_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:B==="overdue"?"text-red-600":B==="today"?"text-orange-600":"",children:["Due ",Bt(w.due_date)]})]})]}),w.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 truncate",children:w.description})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-lg text-gray-500 shrink-0",children:(V=ot.find(D=>D.id===w.status))==null?void 0:V.title})]})},w.id)})})}),k.length>0&&e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-sm text-gray-500",children:[k.length," task",k.length!==1?"s":""," found"]})]})]})},Ua=({task:s,highlight:d,onSelectForScheduling:i,onEditTask:f,COLUMN_COLORS:x,formatTimeEstimate:T,formatDate:g})=>{const c=k=>{k.stopPropagation(),k.preventDefault(),i(s)},p=()=>{f(s)};return e.jsx("div",{onClick:p,className:`relative p-2.5 rounded-lg border cursor-pointer hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 ${d==="red"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":d==="orange"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":d==="yellow"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":d==="pink"?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800":d==="amber"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":d==="green"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":d==="blue"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":d==="gray"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 shrink-0",style:{backgroundColor:x[s.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[s.critical&&"ðŸš© ",s.title]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-[10px] text-gray-500 dark:text-gray-400",children:[s.time_estimate&&e.jsxs("span",{children:["â±",T(s.time_estimate)]}),s.due_date&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),g(s.due_date)]})]})]}),e.jsx("button",{onClick:c,className:"shrink-0 p-1.5 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 transition-colors",title:"Click to schedule",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})},qa=({tasks:s,projects:d,onEditTask:i,allTasks:f,onUpdateTask:x,onCreateTask:T,onDeleteTask:g,onDuplicateTask:c,viewMode:p,setViewMode:k,onShowConfirm:w})=>{const[_,Q]=l.useState(new Date),[B,V]=l.useState(null),[D,P]=l.useState(null),[te,pe]=l.useState(null),[m,v]=l.useState(null),[$,ne]=l.useState(null),[ce,ke]=l.useState(null),[he,Y]=l.useState(null),[de,Se]=l.useState(new Date().toISOString().split("T")[0]),[N,H]=l.useState("09:00"),F=l.useRef(null),b=l.useRef(!1),Z=[{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},{bg:"bg-emerald-100 dark:bg-emerald-900/50",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800"},{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800"},{bg:"bg-cyan-100 dark:bg-cyan-900/50",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-200 dark:border-cyan-800"},{bg:"bg-pink-100 dark:bg-pink-900/50",text:"text-pink-700 dark:text-pink-300",border:"border-pink-200 dark:border-pink-800"},{bg:"bg-amber-100 dark:bg-amber-900/50",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800"},{bg:"bg-teal-100 dark:bg-teal-900/50",text:"text-teal-700 dark:text-teal-300",border:"border-teal-200 dark:border-teal-800"}],E=u=>{if(!u)return{bg:"bg-indigo-100 dark:bg-indigo-900/50",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"};const S=u.split("").reduce((j,G)=>j+G.charCodeAt(0),0)%Z.length;return Z[S]},se=(u,S)=>{if(!u.start_time)return!1;const j=S.toISOString().split("T")[0],G=ee(u.start_time),K=G+(u.time_estimate||30);return s.some(J=>{if(J.id===u.id||J.start_date!==j||!J.start_time)return!1;const xe=ee(J.start_time),be=xe+(J.time_estimate||30);return G<be&&K>xe})};l.useEffect(()=>{(p==="daily"||p==="weekly")&&F.current&&(F.current.scrollTop=384)},[p,_]),l.useEffect(()=>{if(!m)return;const u=j=>{j.preventDefault()},S=j=>{Te(j)};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",S)}},[m]);const ie=["January","February","March","April","May","June","July","August","September","October","November","December"],ae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ee=Array.from({length:48},(u,S)=>{const j=S*30,G=Math.floor(j/60),K=j%60,J=G%12||12,xe=G<12?"AM":"PM";return{slotIndex:S,minutes:j,label:`${J}:${K.toString().padStart(2,"0")} ${xe}`,isHour:K===0}}),ve=u=>{if(u==null)return"";const S=Math.floor(u/60),j=u%60;return`${S.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`},y=u=>{if(!u)return"";if(u.includes("AM")||u.includes("PM"))return u;const[S,j]=u.split(":").map(Number);if(isNaN(S)||isNaN(j))return u;const G=S%12||12,K=S<12?"AM":"PM";return`${G}:${j.toString().padStart(2,"0")} ${K}`},ee=u=>{var J;if(!u)return null;const S=u.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);if(!S)return null;let j=parseInt(S[1]);const G=parseInt(S[2]),K=(J=S[3])==null?void 0:J.toUpperCase();return K==="PM"&&j!==12&&(j+=12),K==="AM"&&j===12&&(j=0),j*60+G},z=_.getFullYear(),le=_.getMonth(),me=new Date(z,le,1),je=new Date(z,le+1,0),fe=me.getDay(),Ue=je.getDate(),Fe=new Date;Fe.setHours(0,0,0,0);const qe=()=>{const u=new Date(_);p==="daily"?u.setDate(u.getDate()-1):p==="weekly"?u.setDate(u.getDate()-7):u.setMonth(u.getMonth()-1),Q(u)},R=()=>{const u=new Date(_);p==="daily"?u.setDate(u.getDate()+1):p==="weekly"?u.setDate(u.getDate()+7):u.setMonth(u.getMonth()+1),Q(u)},we=()=>Q(new Date),Ze=()=>ne(null);l.useEffect(()=>{if($){const u=()=>Ze();return document.addEventListener("click",u),document.addEventListener("contextmenu",u),()=>{document.removeEventListener("click",u),document.removeEventListener("contextmenu",u)}}},[$]);const ut=u=>{const S=new Date(u),j=S.getDay();return S.setDate(S.getDate()-j),S.setHours(0,0,0,0),S},Be=()=>{const u=ut(_);return Array.from({length:7},(S,j)=>{const G=new Date(u);return G.setDate(G.getDate()+j),G})},ye=u=>{const S=u.toISOString().split("T")[0];return s.filter(j=>j.start_date===S||j.due_date===S)},Ke=(u,S)=>{const j=u.toISOString().split("T")[0],G=S*30,K=G+30;return s.filter(J=>{if(J.start_date!==j)return!1;const xe=J.start_time?ee(J.start_time):null;return xe===null?!1:xe>=G&&xe<K})},at=(u,S)=>{b.current=!0,P(S),u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain",S.id)},ze=()=>{P(null),pe(null),setTimeout(()=>{b.current=!1},100)},Xe=u=>{!b.current&&!m&&i(u)},pt=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{start_time:null,end_time:null})},ct=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{status:"done"})},yt=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{status:"in_progress"})},mt=(u,S)=>{if(!T)return;const j=u.toISOString().split("T")[0],G=new Date().toISOString().split("T")[0],K=S*30,J=ve(K),xe=ve(K+30),be={start_date:j,due_date:j,start_time:J,end_time:xe,status:"todo"};j===G&&(be.my_day_date=G),T(be)},n=async(u,S,j)=>{console.log("handleDropOnSlot called",{date:u,slotIndex:S,hasEvent:!!j,draggedTask:D});let G=D;if(!G&&(j!=null&&j.dataTransfer)){const De=j.dataTransfer.getData("text/plain");console.log("Fallback to dataTransfer, taskId:",De),G=f.find(Ce=>Ce.id===De),console.log("Found task from allTasks:",G==null?void 0:G.title)}if(!G||!x){console.log("Drop failed: no task or onUpdateTask",{taskToSchedule:G,hasOnUpdateTask:!!x,allTasksLength:f==null?void 0:f.length});return}const K=u.toISOString().split("T")[0],J=new Date().toISOString().split("T")[0],xe=S*30,be=ve(xe),tt=G.time_estimate||30,I=xe+tt,ge=ve(I);console.log("Dropping task:",{taskId:G.id,dateStr:K,startTime:be,endTime:ge,duration:tt});const We={start_date:K,start_time:be,end_time:ge};G.due_date||(We.due_date=K),G.status==="backlog"&&(We.status="todo"),K===J&&(We.my_day_date=J);const He=G.id;P(null);try{await x(He,We),console.log("Task updated successfully with:",We)}catch(De){console.error("Error updating task:",De)}},W=async u=>{if(!D||!x)return;const S=u.toISOString().split("T")[0];await x(D.id,{start_date:S,start_time:null,end_time:null}),P(null)},X=(u,S)=>{u.stopPropagation(),u.preventDefault(),v({task:S,startY:u.clientY,originalDuration:S.time_estimate||30})},Te=async u=>{if(!m||!x){v(null);return}const S=u.clientY-m.startY,j=Math.round(S/32),G=Math.max(15,m.originalDuration+j*30),K=ee(m.task.start_time);if(K!==null){const J=K+G,xe=ve(J);console.log("Resizing task:",{taskId:m.task.id,oldDuration:m.originalDuration,newDuration:G,newEndTime:xe}),await x(m.task.id,{time_estimate:G,end_time:xe})}v(null)},Re=()=>{const u=[];for(let S=0;S<fe;S++)u.push(e.jsx("div",{className:"h-20 sm:h-28 bg-gray-50/50 dark:bg-gray-800/30"},`empty-${S}`));for(let S=1;S<=Ue;S++){const j=new Date(z,le,S),G=j.toISOString().split("T")[0],K=ye(j),J=j.getTime()===Fe.getTime(),xe=B===G,be=j<Fe,tt=K.filter(ge=>ge.status!=="done"&&be&&!J),I=K.filter(ge=>ge.critical&&ge.status!=="done");K.filter(ge=>ge.status==="done"),K.filter(ge=>ge.status!=="done"),u.push(e.jsxs("div",{"data-dropzone":"calendar-date","data-date":j,onClick:()=>{Q(j),k("daily")},onDragOver:ge=>{ge.preventDefault(),ge.dataTransfer.dropEffect="move"},onDrop:ge=>{ge.preventDefault(),W(j)},className:`h-20 sm:h-28 p-1.5 sm:p-2 border-b border-r border-gray-100 dark:border-gray-800 cursor-pointer transition-all hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 touch-manipulation ${J?"bg-indigo-50 dark:bg-indigo-900/30 ring-2 ring-inset ring-indigo-400":xe?"bg-indigo-100 dark:bg-indigo-900/50":be?"bg-gray-50/30 dark:bg-gray-800/30":"bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5 sm:mb-1",children:[e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${J?"text-indigo-600 dark:text-indigo-400":be?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:S}),K.length>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full ${tt.length>0?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":I.length>0?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:K.length})]}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 overflow-hidden",children:[K.slice(0,2).map(ge=>(d.find(We=>We.id===ge.project_id),e.jsxs("div",{draggable:!0,onDragStart:We=>at(We,ge),onDragEnd:ze,onClick:We=>{We.stopPropagation(),Xe(ge)},className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded truncate cursor-grab active:cursor-grabbing transition-all hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 ${ge.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":ge.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":be&&!J?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300"}`,title:ge.title,children:[ge.critical&&"ðŸš© ",ge.title]},ge.id))),K.length>2&&e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500 px-1.5 sm:px-2",children:["+",K.length-2," more"]})]})]},S))}return u},Ve=B?s.filter(u=>u.due_date===B||u.start_date===B):[],Je=()=>{if(p==="daily")return _.toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"});if(p==="weekly"){const u=Be(),S=u[0],j=u[6];return S.getMonth()===j.getMonth()?`${S.getDate()} - ${j.getDate()} ${ie[S.getMonth()]} ${S.getFullYear()}`:`${S.getDate()} ${ie[S.getMonth()].slice(0,3)} - ${j.getDate()} ${ie[j.getMonth()].slice(0,3)} ${j.getFullYear()}`}return`${ie[le]} ${z}`},Ye=()=>{const u=new Date().toISOString().split("T")[0],S=new Date;S.setHours(0,0,0,0);const j=new Date(S);j.setDate(j.getDate()+3);const G=s.filter(re=>{if(re.status==="done")return!1;if(!re.start_time)return!0;if(re.start_date){const Ie=new Date(re.start_date);if(Ie.setHours(0,0,0,0),Ie<S)return!0}return!1}),K=re=>{if(re.status==="done")return!1;if(re.my_day_date){const Ie=new Date(re.my_day_date);if(Ie.setHours(0,0,0,0),Ie<S)return!1;if(Ie.getTime()===S.getTime())return!0}return re.start_date===u},J=G.filter(re=>K(re)),xe=G.filter(re=>{if(J.includes(re)||!re.due_date)return!1;const Ie=new Date(re.due_date);return Ie.setHours(0,0,0,0),Ie<S}),be=G.filter(re=>J.includes(re)?!1:re.due_date===u),tt=G.filter(re=>{if(J.includes(re)||be.includes(re)||!re.due_date||re.due_date===u)return!1;const Ie=new Date(re.due_date);return Ie.setHours(0,0,0,0),Ie>S&&Ie<=j}),I=re=>J.includes(re)||xe.includes(re)||be.includes(re)||tt.includes(re),ge=G.filter(re=>re.status==="in_progress"&&!I(re)),We=G.filter(re=>re.status==="todo"&&!I(re)&&!ge.includes(re)),He=G.filter(re=>re.status==="backlog"&&!I(re)&&!ge.includes(re)&&!We.includes(re)),De=G.filter(re=>re.energy_level==="low"&&!I(re)&&!ge.includes(re)&&!We.includes(re)&&!He.includes(re)),Ce=re=>re.sort((Ie,Oe)=>{if(Ie.critical&&!Oe.critical)return-1;if(!Ie.critical&&Oe.critical)return 1;if(Ie.due_date&&Oe.due_date){const dr=new Date(Ie.due_date)-new Date(Oe.due_date);if(dr!==0)return dr}return Ie.due_date&&!Oe.due_date?-1:!Ie.due_date&&Oe.due_date?1:new Date(Ie.created_at)-new Date(Oe.created_at)});return{overdue:Ce(xe),dueToday:Ce(be),dueSoon:Ce(tt),inProgress:Ce(ge),myDay:Ce(J),todo:Ce(We),backlog:Ce(He),quickWins:Ce(De)}},et=async()=>{he&&(await x(he.id,{start_date:de,start_time:N,status:he.status==="backlog"?"todo":he.status}),Y(null))},Ne=()=>{const u=_.toISOString().split("T")[0],S=_.toDateString()===new Date().toDateString(),j=Ye(),G=j.overdue.length+j.dueToday.length+j.dueSoon.length+j.inProgress.length+j.myDay.length+j.todo.length+j.backlog.length+j.quickWins.length,K=({title:J,icon:xe,tasks:be,highlight:tt,defaultOpen:I=!0})=>be.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx("span",{children:xe})," ",J,e.jsxs("span",{className:"text-gray-400",children:["(",be.length,")"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[be.slice(0,5).map(ge=>e.jsx(Ua,{task:ge,highlight:tt,onSelectForScheduling:Y,onEditTask:i,COLUMN_COLORS:Ft,formatTimeEstimate:Rt,formatDate:Bt},ge.id)),be.length>5&&e.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:["+",be.length-5," more"]})]})]});return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[ce&&e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center justify-between animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"ðŸ—“"}),e.jsxs("span",{className:"text-sm font-medium truncate",children:["Click a time slot to schedule: ",ce.title]})]}),e.jsx("button",{onClick:()=>ke(null),className:"shrink-0 p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),e.jsxs("div",{className:`h-12 flex items-center justify-center font-semibold ${S?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300"}`,children:[Le[_.getDay()]," ",_.getDate()]})]}),e.jsx("div",{ref:F,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Ee.map(({slotIndex:J,label:xe,isHour:be})=>e.jsx("div",{className:"h-8 px-2 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:be&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:xe})},J))}),e.jsxs("div",{className:"relative",children:[S&&(()=>{const J=new Date,be=(J.getHours()*60+J.getMinutes())/30*32;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${be}px`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("div",{className:"flex-1 h-0.5 bg-red-500"})]})})})(),Ee.map(({slotIndex:J,isHour:xe})=>{const be=Ke(_,J),tt=te&&te.date===u&&te.slotIndex===J;return e.jsxs("div",{"data-dropzone":"calendar-slot","data-date":_,"data-slot-index":J,className:`h-8 border-b relative transition-all duration-150 ${xe?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} ${tt&&D?"bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-inset ring-indigo-400":"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"} cursor-pointer`,onDragOver:I=>{I.preventDefault(),I.dataTransfer.dropEffect="move",pe({date:u,slotIndex:J})},onDragLeave:()=>pe(null),onDrop:I=>{I.preventDefault(),pe(null),n(_,J,I)},onDoubleClick:()=>mt(_,J),children:[tt&&D&&e.jsx("div",{className:"absolute inset-x-1 top-0 bg-indigo-200/50 dark:bg-indigo-700/30 border-2 border-dashed border-indigo-400 rounded text-[10px] text-indigo-600 dark:text-indigo-300 px-1 truncate pointer-events-none z-30",style:{height:`${Math.ceil((D.time_estimate||30)/30)*32-2}px`},children:D.title}),be.map(I=>{const ge=I.time_estimate||30,We=Math.ceil(ge/30),He=E(I.project_id),De=se(I,_);return e.jsxs("div",{draggable:!m,onDragStart:Ce=>!m&&at(Ce,I),onDragEnd:ze,onClick:Ce=>{Ce.stopPropagation(),Xe(I)},onDoubleClick:Ce=>{Ce.stopPropagation(),Xe(I)},className:`absolute left-1 right-1 px-2 py-0.5 rounded text-xs font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${I.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":I.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${He.bg} ${He.text}`} ${De?"ring-2 ring-orange-400 dark:ring-orange-500":""}`,style:{height:`${We*32-2}px`,top:"1px"},title:`${I.title}${I.start_time?` (${y(I.start_time)}${I.end_time?" - "+y(I.end_time):""})`:""}${De?" âš ï¸ Overlaps with another task":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"truncate text-[11px]",children:[De&&e.jsx("span",{title:"Time conflict",children:"âš ï¸ "}),I.critical&&"ðŸš© ",I.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[(I.status==="backlog"||I.status==="todo")&&e.jsx("button",{onClick:Ce=>yt(Ce,I),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Start task",children:"â–¶"}),I.status!=="done"&&e.jsx("button",{onClick:Ce=>ct(Ce,I),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Ce=>pt(Ce,I),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from calendar",children:"âœ•"})]})]}),We>1&&I.start_time&&e.jsxs("div",{className:"text-[9px] opacity-70",children:[y(I.start_time),I.end_time&&` - ${y(I.end_time)}`]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize bg-transparent hover:bg-indigo-300/50 dark:hover:bg-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b",onMouseDown:Ce=>X(Ce,I)})]},I.id)})]},J)})]})]})})]}),e.jsx("div",{className:"w-full lg:w-72 lg:shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ—“"})," Schedule Tasks"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Click ðŸ—“ to set date & time",S?" â€¢ Auto-adds to My Day":""]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-1",children:G===0?e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 text-center py-8",children:"All caught up!"}):e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"My Day",icon:"â˜€ï¸",tasks:j.myDay,highlight:"amber"}),e.jsx(K,{title:"In Progress",icon:"ðŸŸ£",tasks:j.inProgress,highlight:"pink"}),e.jsx(K,{title:"To Do",icon:"ðŸ“‹",tasks:j.todo,highlight:"blue"}),e.jsx(K,{title:"Backlog",icon:"ðŸ“¦",tasks:j.backlog,highlight:"gray"}),e.jsx(K,{title:"Overdue",icon:"ðŸ”´",tasks:j.overdue,highlight:"red"}),e.jsx(K,{title:"Due Today",icon:"ðŸŸ ",tasks:j.dueToday,highlight:"orange"}),e.jsx(K,{title:"Due Soon",icon:"ðŸŸ¡",tasks:j.dueSoon,highlight:"yellow"}),e.jsx(K,{title:"Quick Wins",icon:"âš¡",tasks:j.quickWins,highlight:"green"})]})})]})})]})},Xt=()=>{const u=Be(),S=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[700px]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),u.map((j,G)=>{const J=j.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`h-12 flex flex-col items-center justify-center ${J?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ae[j.getDay()]}),e.jsx("span",{className:`text-sm font-semibold ${J?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:j.getDate()})]},G)})]}),e.jsx("div",{ref:F,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Ee.map(({slotIndex:j,label:G,isHour:K})=>e.jsx("div",{className:"h-6 px-1 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:K&&e.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400",children:G})},j))}),u.map((j,G)=>{const J=j.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`min-w-[80px] relative ${J?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:[J&&(()=>{const xe=new Date,tt=(xe.getHours()*60+xe.getMinutes())/30*24;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${tt}px`},children:e.jsx("div",{className:"h-0.5 bg-red-500"})})})(),Ee.map(({slotIndex:xe,isHour:be})=>{const tt=Ke(j,xe);return e.jsx("div",{"data-dropzone":"calendar-slot","data-date":j,"data-slot-index":xe,className:`h-6 border-b relative transition-colors ${be?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 cursor-pointer`,onDragOver:I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},onDrop:I=>{I.preventDefault(),n(j,xe,I)},onDoubleClick:()=>mt(j,xe),children:tt.map(I=>{const ge=I.time_estimate||30,We=Math.min(Math.ceil(ge/30),8),He=E(I.project_id);return e.jsx("div",{draggable:!0,onDragStart:De=>at(De,I),onDragEnd:ze,onClick:De=>{De.stopPropagation(),Xe(I)},onDoubleClick:De=>{De.stopPropagation(),Xe(I)},className:`absolute left-0.5 right-0.5 px-1 rounded text-[9px] font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${I.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":I.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${He.bg} ${He.text}`}`,style:{height:`${We*24-2}px`,top:"1px"},title:I.title,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"truncate",children:[I.critical&&"ðŸš©",I.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(I.status==="backlog"||I.status==="todo")&&e.jsx("button",{onClick:De=>yt(De,I),className:"hover:text-blue-500",title:"Start task",children:"â–¶"}),I.status!=="done"&&e.jsx("button",{onClick:De=>ct(De,I),className:"hover:text-green-500",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:De=>pt(De,I),className:"hover:text-red-500",title:"Remove from calendar",children:"âœ•"})]})]})},I.id)})},xe)})]},G)})]})})]})})})};return e.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-4 sm:py-8 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:Je()}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[s.filter(u=>(u.due_date||u.start_date)&&u.status!=="done").length," tasks scheduled"]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:we,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:qe,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:R,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-800 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>k("daily"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="daily"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Day"}),e.jsx("button",{onClick:()=>k("weekly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="weekly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>k("monthly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="monthly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Month"})]})]}),p==="daily"&&Ne(),p==="weekly"&&Xt(),p==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:ae.map((u,S)=>e.jsxs("div",{className:"py-2 sm:py-3 text-center text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"hidden sm:inline",children:u}),e.jsx("span",{className:"sm:hidden",children:u.charAt(0)})]},u))}),e.jsx("div",{className:"grid grid-cols-7",children:Re()})]}),B&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Tasks for ",new Date(B+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})]}),Ve.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No tasks due on this date"}):e.jsx("div",{className:"space-y-3",children:Ve.map(u=>{var G;const S=d.find(K=>K.id===u.project_id),j=dt.find(K=>K.id===u.category);return e.jsx("div",{onClick:()=>i(u),className:`p-4 rounded-xl border cursor-pointer hover:shadow-md transition-all ${u.status==="done"?"bg-green-50 border-green-200":u.critical?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Ft[u.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:`font-medium ${u.status==="done"?"text-gray-400 line-through":"text-gray-800"}`,children:[u.critical&&"ðŸš© ",u.title]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[S&&e.jsx("span",{children:S.name}),j&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:j.color},children:j.label}),u.assignee&&e.jsxs("span",{children:["â€¢ ",u.assignee]})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${u.status==="done"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(G=ot.find(K=>K.id===u.status))==null?void 0:G.title})]})},u.id)})})]}),e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-400"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Overdue / Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to reschedule"})]})]})]}),(p==="daily"||p==="weekly")&&e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-100 dark:bg-indigo-900/50"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to schedule time"})]})]}),he&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Y(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-xs p-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"ðŸ—“ Schedule Task"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:he.title}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:de,onChange:u=>Se(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:N,onChange:u=>H(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsx("button",{onClick:()=>Y(null),className:"flex-1 px-3 py-2.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:et,className:"flex-1 px-3 py-2.5 text-sm bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-semibold",children:"Schedule"})]})]})]})]})]})},Ur=({task:s,project:d,showRemove:i=!1,isCompleted:f=!1,blocked:x,dueDateStatus:T,energyStyle:g,onEditTask:c,onQuickStatusChange:p,onRemoveFromMyDay:k,onAddToMyDay:w,showReorder:_=!1,isFirst:Q=!1,isLast:B=!1,onMoveUp:V,onMoveDown:D})=>e.jsx("div",{onClick:()=>c(s),className:`group relative p-4 rounded-xl select-none transition-all duration-200 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50 hover:-translate-y-0.5 cursor-pointer ${f?"bg-gray-50 dark:bg-gray-800/50 opacity-60":x?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800":s.critical?"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[_&&!f&&e.jsxs("div",{className:"flex flex-col gap-0.5 shrink-0",children:[e.jsx("button",{onClick:P=>{P.stopPropagation(),V==null||V()},disabled:Q,className:`p-0.5 rounded transition-colors ${Q?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move up",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:P=>{P.stopPropagation(),D==null||D()},disabled:B,className:`p-0.5 rounded transition-colors ${B?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move down",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("button",{onClick:P=>{P.stopPropagation(),p(s.id,s.status==="done"?"todo":"done")},className:`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${s.status==="done"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,children:s.status==="done"&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h4",{className:`font-medium text-sm leading-tight ${f?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-100"}`,children:[s.critical&&!f&&e.jsx("span",{className:"text-red-500 mr-1",children:"ðŸš©"}),x&&!f&&e.jsx("span",{className:"text-orange-500 mr-1",children:"ðŸ”’"}),s.title]}),w&&!f&&e.jsx("button",{onClick:P=>{P.stopPropagation(),w(s.id)},className:"p-1.5 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-all touch-manipulation text-amber-500 hover:text-amber-600 dark:text-amber-400",title:"Add to My Day",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),i&&!f&&e.jsx("button",{onClick:P=>k(P,s),className:"p-2 sm:p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 sm:bg-transparent sm:dark:bg-transparent sm:opacity-0 sm:group-hover:opacity-100 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all touch-manipulation",title:"Remove from My Day",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[d&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),d.name]}),s.due_date&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${T==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":T==="today"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":T==="soon"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Bt(s.due_date)}),g&&e.jsxs("span",{className:"text-xs",title:`${g.label} effort`,children:[s.energy_level==="low"&&e.jsx("span",{style:{color:g.text},children:"â–°"}),s.energy_level==="medium"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°"}),s.energy_level==="high"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°â–°"})]}),s.time_estimate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time_estimate<60?`${s.time_estimate}m`:`${Math.round(s.time_estimate/60)}h`})]})]})]})}),Ya=({tasks:s,projects:d,onEditTask:i,allTasks:f,onQuickStatusChange:x,onUpdateMyDayDate:T,showConfettiPref:g})=>{const[c,p]=l.useState("overdue"),[k,w]=l.useState(!1),_=l.useRef(null),[Q,B]=l.useState(()=>{try{const y=localStorage.getItem("trackli-myday-order");return y?JSON.parse(y):[]}catch{return[]}}),V=new Date;V.setHours(0,0,0,0);const D=V.toISOString().split("T")[0],P=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],te=["January","February","March","April","May","June","July","August","September","October","November","December"],pe=new Date().getHours(),m=pe<12?"Good morning":pe<17?"Good afternoon":"Good evening",v=y=>{if(y.my_day_date){const ee=new Date(y.my_day_date);if(ee.setHours(0,0,0,0),ee<V)return!1;if(ee.getTime()===V.getTime()){if(y.status==="done"){if(!y.completed_at)return!1;const z=new Date(y.completed_at);return z.setHours(0,0,0,0),z.getTime()===V.getTime()}return!0}}if(y.status==="done"){if(!y.completed_at)return!1;const ee=new Date(y.completed_at);if(ee.setHours(0,0,0,0),ee.getTime()!==V.getTime())return!1;if(y.start_date){const z=new Date(y.start_date);if(z.setHours(0,0,0,0),z<=V)return!0}return!1}if(y.start_date){const ee=new Date(y.start_date);if(ee.setHours(0,0,0,0),ee<=V)return!0}return!1},$=l.useMemo(()=>s.filter(y=>v(y)),[s]),ne=l.useMemo(()=>$.filter(y=>y.status!=="done"),[$]),ce=l.useMemo(()=>$.filter(y=>y.status==="done"),[$]),ke=l.useMemo(()=>{const y=[...ne];return Q.length>0?y.sort((ee,z)=>{const le=Q.indexOf(ee.id),me=Q.indexOf(z.id);return le!==-1&&me!==-1?le-me:le!==-1?-1:me!==-1?1:0}):y.sort((ee,z)=>{const le=!!ee.start_date,me=!!z.start_date;if(le&&!me)return-1;if(!le&&me)return 1;if(le&&me){const Fe=new Date(ee.start_date)-new Date(z.start_date);if(Fe!==0)return Fe;const qe=ee.start_time||ee.end_time,R=z.start_time||z.end_time;if(qe&&!R)return-1;if(!qe&&R)return 1;if(qe&&R){const we=qe.localeCompare(R);if(we!==0)return we}}const je={in_progress:0,todo:1,backlog:2},fe=je[ee.status]??3,Ue=je[z.status]??3;return fe!==Ue?fe-Ue:new Date(ee.created_at)-new Date(z.created_at)}),y},[ne,Q]),he=(y,ee)=>{const z=ke.map(fe=>fe.id),le=z.indexOf(y);if(le===-1)return;const me=ee==="up"?le-1:le+1;if(me<0||me>=z.length)return;const je=[...z];[je[le],je[me]]=[je[me],je[le]],B(je),localStorage.setItem("trackli-myday-order",JSON.stringify(je))},Y=s.filter(y=>!v(y)&&y.status!=="done"),de=Y.filter(y=>(y.status==="todo"||y.status==="in_progress")&&!gt(y,f)),Se=de.filter(y=>ht(y.due_date,y.status)==="overdue"),N=de.filter(y=>ht(y.due_date,y.status)==="today"&&!Se.includes(y)),H=de.filter(y=>{if(!y.due_date||Se.includes(y)||N.includes(y))return!1;const ee=new Date(y.due_date);ee.setHours(0,0,0,0);const z=Math.ceil((ee-V)/(1e3*60*60*24));return z>0&&z<=3}),F=y=>Se.includes(y)||N.includes(y)||H.includes(y),b=Y.filter(y=>y.status==="in_progress"&&!gt(y,f)&&!F(y)),Z=Y.filter(y=>y.status==="todo"&&!gt(y,f)&&!F(y)),E=Y.filter(y=>y.status==="backlog"&&!gt(y,f)),se=Y.filter(y=>y.energy_level==="low"&&!F(y)&&!b.includes(y)&&!Z.includes(y)&&!E.includes(y)).slice(0,5),ie=ne.reduce((y,ee)=>y+(ee.time_estimate||0),0),ae=ce.reduce((y,ee)=>y+(ee.time_estimate||0),0),Le=$.length>0?Math.round(ce.length/$.length*100):0;l.useEffect(()=>{_.current>0&&ne.length===0&&ce.length>0&&!k&&g!==!1&&(w(!0),La().then(y=>{const z=Date.now()+3e3,le=()=>{y({particleCount:3,angle:60,spread:55,origin:{x:0,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),y({particleCount:3,angle:120,spread:55,origin:{x:1,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),Date.now()<z&&requestAnimationFrame(le)};le()})),_.current=ne.length},[ne.length,ce.length,k,g]);const Ee=(y,ee)=>{y.stopPropagation();const z=new Date(V);z.setDate(z.getDate()-1);const le=z.toISOString().split("T")[0];T(ee.id,le)},ve=({title:y,emoji:ee,color:z,tasks:le,id:me})=>{if(le.length===0)return null;const je=c===me;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>p(je?null:me),className:`w-full px-3 sm:px-4 py-3 sm:py-3 flex items-center justify-between ${z} transition-colors touch-manipulation`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:ee}),e.jsx("span",{className:"font-medium text-sm",children:y}),e.jsx("span",{className:"text-xs bg-white/50 dark:bg-black/20 px-2 py-0.5 rounded-full",children:le.length})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${je?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),je&&e.jsx("div",{className:"p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-900",children:le.map(fe=>{const Ue=d.find(we=>we.id===fe.project_id),Fe=gt(fe,f),qe=ht(fe.due_date,fe.status),R=zt[fe.energy_level];return e.jsx(Ur,{task:fe,project:Ue,blocked:Fe,dueDateStatus:qe,energyStyle:R,onEditTask:i,onQuickStatusChange:x,onAddToMyDay:we=>T(we,D)},fe.id)})})]})};return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:p-6 py-4",children:[e.jsx("div",{className:"mb-4 sm:mb-6 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3",children:[e.jsx($a,{hour:pe})," ",m]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[P[V.getDay()],", ",te[V.getMonth()]," ",V.getDate()]})]})}),$.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Today's Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[ce.length," of ",$.length," tasks (",Le,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${Le}%`}})}),ie>0&&e.jsxs("div",{className:"flex justify-between mt-2 text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["~",Math.round(ie/60),"h remaining"]}),e.jsxs("span",{children:["~",Math.round(ae/60),"h completed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[Et.myday(),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Day"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["(",ke.length," active)"]})]}),e.jsx("div",{className:"min-h-[150px] sm:min-h-[200px] rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 transition-all",children:ke.length===0&&ce.length===0?e.jsx(Es,{icon:"sun",title:"Your day is wide open",description:"Click the sun button on recommended tasks below to add them here, or create tasks with today's start date.",variant:"default"}):e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[ke.map((y,ee)=>{const z=d.find(fe=>fe.id===y.project_id),le=gt(y,f),me=ht(y.due_date,y.status),je=zt[y.energy_level];return e.jsx(Ur,{task:y,project:z,showRemove:!0,blocked:le,dueDateStatus:me,energyStyle:je,onEditTask:i,onQuickStatusChange:x,onRemoveFromMyDay:Ee,showReorder:ke.length>1,isFirst:ee===0,isLast:ee===ke.length-1,onMoveUp:()=>he(y.id,"up"),onMoveDown:()=>he(y.id,"down")},y.id)}),ce.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-3 sm:pt-4 pb-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500",children:["Completed today (",ce.length,")"]}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),ce.map(y=>{const ee=d.find(je=>je.id===y.project_id),z=gt(y,f),le=ht(y.due_date,y.status),me=zt[y.energy_level];return e.jsx(Ur,{task:y,project:ee,isCompleted:!0,blocked:z,dueDateStatus:le,energyStyle:me,onEditTask:i,onQuickStatusChange:x},y.id)})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[Et.lightbulb(),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recommendations"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-3 sm:mb-4",children:"Click the sun button on any task to add it to your focus list"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx(ve,{id:"overdue",title:"Overdue",emoji:"ðŸ”´",color:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",tasks:Se}),e.jsx(ve,{id:"dueToday",title:"Due Today",emoji:"ðŸŸ ",color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",tasks:N}),e.jsx(ve,{id:"dueSoon",title:"Due Soon",emoji:"ðŸŸ¡",color:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",tasks:H}),e.jsx(ve,{id:"quickWins",title:"Quick Wins",emoji:"ðŸŸ¢",color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400",tasks:se}),e.jsx(ve,{id:"inProgress",title:"In Progress",emoji:"ðŸ”µ",color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",tasks:b}),e.jsx(ve,{id:"todo",title:"To Do",emoji:"âšª",color:"bg-slate-50 dark:bg-slate-900/20 text-slate-700 dark:text-slate-400",tasks:Z}),e.jsx(ve,{id:"backlog",title:"Backlog",emoji:"ðŸ“‹",color:"bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400",tasks:E}),Se.length===0&&N.length===0&&H.length===0&&se.length===0&&b.length===0&&Z.length===0&&E.length===0&&e.jsx(Es,{icon:"celebrate",title:"You're all caught up!",description:"No tasks need your attention right now. Enjoy the moment or create something new.",variant:"celebrate"})]})]})]})]})},Qa=({tasks:s,projects:d,onEditTask:i,allTasks:f})=>{var Se;const{user:x}=$s(),[T,g]=l.useState("created_at"),[c,p]=l.useState("desc"),[k,w]=l.useState({}),[_,Q]=l.useState(!1),B=N=>{const H=s.map(F=>{var b,Z,E;return N==="project"?(b=d.find(se=>se.id===F.project_id))==null?void 0:b.name:N==="category"?(Z=dt.find(se=>se.id===F.category))==null?void 0:Z.label:N==="source"?(E=Pt.find(se=>se.id===F.source))==null?void 0:E.label:F[N]}).filter(Boolean);return[...new Set(H)].sort()},V=N=>{T===N?p(c==="asc"?"desc":"asc"):(g(N),p("asc"))},D=l.useMemo(()=>s.filter(N=>{var H,F,b;for(const[Z,E]of Object.entries(k)){if(!E)continue;let se;if(Z==="project"?se=((H=d.find(ie=>ie.id===N.project_id))==null?void 0:H.name)||"":Z==="category"?se=((F=dt.find(ie=>ie.id===N.category))==null?void 0:F.label)||"":Z==="source"?se=((b=Pt.find(ie=>ie.id===N.source))==null?void 0:b.label)||"":se=N[Z]||"",E==="__blank__"&&se||E!=="__blank__"&&String(se).toLowerCase()!==String(E).toLowerCase())return!1}return!0}),[s,k,d]),P=l.useMemo(()=>[...D].sort((N,H)=>{var Z,E,se,ie;let F,b;return T==="project"?(F=((Z=d.find(ae=>ae.id===N.project_id))==null?void 0:Z.name)||"",b=((E=d.find(ae=>ae.id===H.project_id))==null?void 0:E.name)||""):T==="category"?(F=((se=dt.find(ae=>ae.id===N.category))==null?void 0:se.label)||"",b=((ie=dt.find(ae=>ae.id===H.category))==null?void 0:ie.label)||""):(F=N[T]??"",b=H[T]??""),(T.includes("date")||T==="created_at")&&(F=F?new Date(F).getTime():0,b=b?new Date(b).getTime():0),typeof F=="boolean"&&(F=F?1:0),typeof b=="boolean"&&(b=b?1:0),F<b?c==="asc"?-1:1:F>b?c==="asc"?1:-1:0}),[D,T,c,d]),te=()=>{const N=["ID","Title","Project","Project Archived","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description","Created"],H=P.map(E=>{var ie,ae;const se=d.find(Le=>Le.id===E.project_id);return[E.id||"",E.title||"",(se==null?void 0:se.name)||"",se!=null&&se.archived?"Yes":"No",E.status||"",E.critical?"Yes":"No",E.due_date||"",E.start_date||"",E.assignee||"",E.customer||"",((ie=dt.find(Le=>Le.id===E.category))==null?void 0:ie.label)||"",E.energy_level||"",((ae=Pt.find(Le=>Le.id===E.source))==null?void 0:ae.label)||"",E.time_estimate?`${E.time_estimate}m`:"",(E.description||"").replace(/[\n\r,]/g," "),E.created_at?new Date(E.created_at).toLocaleDateString():""]}),F=[N,...H].map(E=>E.map(se=>`"${String(se).replace(/"/g,'""')}"`).join(",")).join(`
`),b=new Blob([F],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(b),Z.download=`trackli-tasks-${new Date().toISOString().split("T")[0]}.csv`,Z.click()},pe=()=>{var E;const N=["ID","Title","Project","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description"],H=["*","Example Task",((E=d[0])==null?void 0:E.name)||"Project Name","todo","No","","","","","","","","30m","Task description here"],F=[N,H].map(se=>se.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(",")).join(`
`),b=new Blob([F],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a");Z.href=URL.createObjectURL(b),Z.download="trackli-template.csv",Z.click()},[m,v]=l.useState(!1),[$,ne]=l.useState(null),ce=l.useRef(null),ke=async N=>{var F,b,Z;const H=(F=N.target.files)==null?void 0:F[0];if(H){v(!0),ne(null);try{const se=(await H.text()).split(`
`).filter(Be=>Be.trim());if(se.length<2){ne({error:"CSV must have a header row and at least one data row"}),v(!1);return}const ie=Be=>{const ye=[];let Ke="",at=!1;for(let ze=0;ze<Be.length;ze++){const Xe=Be[ze];Xe==='"'?at&&Be[ze+1]==='"'?(Ke+='"',ze++):at=!at:Xe===","&&!at?(ye.push(Ke.trim()),Ke=""):Ke+=Xe}return ye.push(Ke.trim()),ye},ae=ie(se[0]).map(Be=>Be.toLowerCase().trim()),Le=ae.indexOf("id"),Ee=ae.indexOf("title"),ve=ae.indexOf("project"),y=ae.indexOf("status"),ee=ae.indexOf("critical"),z=ae.indexOf("due date"),le=ae.indexOf("start date"),me=ae.indexOf("assignee"),je=ae.indexOf("customer"),fe=ae.indexOf("category"),Ue=ae.indexOf("effort"),Fe=ae.indexOf("source"),qe=ae.indexOf("time estimate"),R=ae.indexOf("description");if(Ee===-1){ne({error:"CSV must have a Title column"}),v(!1);return}let we=0,Ze=0,ut=[];for(let Be=1;Be<se.length;Be++){const ye=ie(se[Be]);if(ye.length===0||ye.every(Ne=>!Ne))continue;const Ke=Le>=0?ye[Le]:"",at=Ee>=0?ye[Ee]:"";if(!at){ut.push(`Row ${Be+1}: Missing title`);continue}const ze=ve>=0?ye[ve]:"",Xe=d.find(Ne=>Ne.name.toLowerCase()===ze.toLowerCase()),pt=fe>=0?ye[fe]:"",ct=dt.find(Ne=>Ne.label.toLowerCase()===pt.toLowerCase()),yt=Fe>=0?ye[Fe]:"",mt=Pt.find(Ne=>Ne.label.toLowerCase()===yt.toLowerCase()),n=y>=0?(b=ye[y])==null?void 0:b.toLowerCase():"todo",X={backlog:"backlog","to do":"todo",todo:"todo","in progress":"in_progress",in_progress:"in_progress",done:"done"}[n]||"todo",Te=ee>=0?(Z=ye[ee])==null?void 0:Z.toLowerCase():"",Re=Te==="yes"||Te==="true"||Te==="1",Ve=qe>=0?ye[qe]:"",Je=Ve&&parseInt(Ve.replace(/m$/i,""))||null,Ye=Ne=>{if(!Ne)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(Ne))return Ne;const Xt=Yr(),u=Ne.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(u){let S,j;return Xt?(j=u[1].padStart(2,"0"),S=u[2].padStart(2,"0")):(S=u[1].padStart(2,"0"),j=u[2].padStart(2,"0")),`${u[3]}-${j}-${S}`}return null},et={title:at,project_id:(Xe==null?void 0:Xe.id)||null,status:X,critical:Re,due_date:Ye(z>=0?ye[z]:null),start_date:Ye(le>=0?ye[le]:null),assignee:me>=0&&ye[me]||null,customer:je>=0&&ye[je]||null,category:(ct==null?void 0:ct.id)||null,energy_level:Ue>=0&&ye[Ue]?ye[Ue].toLowerCase():null,source:(mt==null?void 0:mt.id)||null,time_estimate:Je,description:R>=0&&ye[R]||null};try{if(!Ke||Ke==="*"){const{error:Ne}=await O.from("tasks").insert(et);if(Ne)throw Ne;we++}else{const{error:Ne}=await O.from("tasks").update(et).eq("id",Ke);if(Ne)throw Ne;Ze++}}catch(Ne){ut.push(`Row ${Be+1}: ${Ne.message}`)}}if(ne({created:we,updated:Ze,errors:ut}),we>0||Ze>0){const{data:Be}=await O.from("tasks").select("*, dependencies:task_dependencies!task_dependencies_task_id_fkey(depends_on_id)").eq("user_id",x.id).order("created_at",{ascending:!1});Be&&window.location.reload()}}catch(E){ne({error:`Failed to parse CSV: ${E.message}`})}v(!1),ce.current&&(ce.current.value="")}},he=[{key:"title",label:"Title",width:"min-w-[200px]"},{key:"project",label:"Project",width:"min-w-[120px]"},{key:"status",label:"Status",width:"min-w-[100px]"},{key:"critical",label:"Critical",width:"min-w-[80px]"},{key:"due_date",label:"Due Date",width:"min-w-[100px]"},{key:"start_date",label:"Start Date",width:"min-w-[100px]"},{key:"assignee",label:"Assignee",width:"min-w-[120px]"},{key:"customer",label:"Customer",width:"min-w-[120px]"},{key:"category",label:"Category",width:"min-w-[120px]"},{key:"energy_level",label:"Effort",width:"min-w-[100px]"},{key:"source",label:"Source",width:"min-w-[100px]"},{key:"time_estimate",label:"Est. Time",width:"min-w-[90px]"},{key:"created_at",label:"Created",width:"min-w-[100px]"}],Y=(N,H)=>{var F,b;switch(H){case"project":return((F=d.find(E=>E.id===N.project_id))==null?void 0:F.name)||"-";case"status":return{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done"}[N.status]||N.status;case"critical":return N.critical?"ðŸš¨ Yes":"-";case"due_date":case"start_date":return N[H]?Bt(N[H]):"-";case"category":return((b=dt.find(E=>E.id===N.category))==null?void 0:b.label)||"-";case"energy_level":return{high:"â–°â–°â–° High",medium:"â–°â–° Medium",low:"â–° Low"}[N.energy_level]||"-";case"source":const Z=Pt.find(E=>E.id===N.source);return Z?`${Z.icon} ${Z.label}`:"-";case"time_estimate":return N.time_estimate?Rt(N.time_estimate):"-";case"created_at":return N.created_at?new Date(N.created_at).toLocaleDateString():"-";default:return N[H]||"-"}},de=N=>({backlog:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",todo:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",in_progress:"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300",done:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"})[N]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-100",children:"All Tasks"}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:P.length})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>Q(!_),className:`flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${_||Object.values(k).some(N=>N)?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Object.values(k).some(N=>N)&&e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]}),Object.values(k).some(N=>N)&&e.jsx("button",{onClick:()=>w({}),className:"px-2 py-1.5 text-xs sm:text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Clear"}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700"}),e.jsxs("button",{onClick:te,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 rounded-lg text-sm font-medium transition-colors",title:"Export CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:()=>{var N;return(N=ce.current)==null?void 0:N.click()},disabled:m,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Import CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:m?"Importing...":"Import"})]}),e.jsxs("button",{onClick:pe,className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",title:"Download CSV template",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Template"]}),e.jsx("input",{ref:ce,type:"file",accept:".csv",onChange:ke,className:"hidden"})]})]}),$&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ne(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:$.error?"Import Error":"Import Complete"}),$.error?e.jsx("p",{className:"text-red-600 dark:text-red-400",children:$.error}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-green-600",children:$.created})," tasks created"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:$.updated})," tasks updated"]}),((Se=$.errors)==null?void 0:Se.length)>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Errors:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:[$.errors.slice(0,5).map((N,H)=>e.jsx("li",{children:N},H)),$.errors.length>5&&e.jsxs("li",{children:["...and ",$.errors.length-5," more"]})]})]})]}),e.jsx("button",{onClick:()=>ne(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 z-10",children:[e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800",children:he.map(N=>e.jsx("th",{className:`${N.width} px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700`,children:e.jsxs("button",{onClick:()=>V(N.key),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[N.label,T===N.key&&e.jsx("svg",{className:`w-4 h-4 ${c==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},N.key))}),_&&e.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800/50",children:he.map(N=>e.jsx("th",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:["title","time_estimate","created_at"].includes(N.key)?e.jsx("span",{className:"text-xs text-gray-400",children:"-"}):e.jsxs("select",{value:k[N.key]||"",onChange:H=>w({...k,[N.key]:H.target.value}),className:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),N.key==="status"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),N.key==="critical"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),N.key==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),["project","assignee","customer","category","source"].includes(N.key)&&B(N.key).map(H=>e.jsx("option",{value:H,children:H},H))]})},`filter-${N.key}`))})]}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:he.length,className:"px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try adjusting your filters or search terms"})]})})}):P.map(N=>{const H=d.find(b=>b.id===N.project_id),F=H==null?void 0:H.archived;return e.jsx("tr",{onClick:()=>i(N),className:`cursor-pointer transition-colors ${F?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,children:he.map(b=>e.jsx("td",{className:"px-4 py-3 text-sm",children:b.key==="title"?e.jsxs("div",{className:"flex items-center gap-2",children:[N.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš¨"}),F&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:"Archived"}),e.jsx("span",{className:`font-medium truncate max-w-[250px] ${F?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:N.title})]}):b.key==="status"?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${de(N.status)}`,children:Y(N,b.key)}):b.key==="critical"?e.jsx("span",{className:N.critical?"text-red-500 font-medium":"text-gray-400",children:Y(N,b.key)}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Y(N,b.key)})},`${N.id}-${b.key}`))},N.id)})})]})})]})},Ka=({task:s,project:d,onEdit:i,onDragStart:f,showProject:x=!0,allTasks:T=[],onQuickComplete:g,bulkSelectMode:c,isSelected:p,onToggleSelect:k,onStatusChange:w,onSetDueDate:_,onToggleMyDay:Q,isDragging:B,onUpdateTitle:V,onToggleCritical:D})=>{var z,le,me,je,fe,Ue,Fe,qe;const[P,te]=l.useState(!1),[pe,m]=l.useState(!1),[v,$]=l.useState(s.title),ne=l.useRef(null),ce=l.useRef(!1),ke=R=>{ce.current=!0,f(R,s)},he=()=>{setTimeout(()=>{ce.current=!1},100)},Y=()=>{ce.current||(c?k==null||k(s.id):i(s))},de=R=>{c||!V||(R.stopPropagation(),m(!0),$(s.title),setTimeout(()=>{var we;return(we=ne.current)==null?void 0:we.focus()},0))},Se=()=>{v.trim()&&v!==s.title&&V(s.id,v.trim()),m(!1)},N=R=>{R.key==="Enter"?(R.preventDefault(),Se()):R.key==="Escape"&&($(s.title),m(!1))},H=ht(s.due_date,s.status),F=gt(s,T),b=s.recurrence_type?Is.find(R=>R.id===s.recurrence_type):null,Z=s.status==="done",E=s.status==="in_progress",se=or(s),ie=dt.find(R=>R.id===s.category),ae=zt[s.energy_level],Le=qr(s),Ee=!Z&&H==="overdue",ve=!Z&&H==="today",y=Ee?"#DC2626":ve?"#D97706":F?"#F97316":s.critical?"#EF4444":se?"#10B981":Ft[s.status],ee=s.description||s.assignee||ie||((z=s.subtasks)==null?void 0:z.length)>0||((le=s.attachments)==null?void 0:le.length)>0;return e.jsxs("div",{draggable:!0,onDragStart:ke,onDragEnd:he,onClick:Y,className:`task-card relative rounded-lg p-2 sm:p-2.5 shadow-sm border cursor-pointer transition-all duration-200 group hover:z-[100] ${B?"opacity-30 scale-95 ring-2 ring-dashed ring-indigo-400 bg-indigo-50 dark:bg-indigo-900/30":"hover:-translate-y-1 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50"} ${!B&&Z?"opacity-60 bg-white dark:bg-gray-800":!B&&Ee?"bg-red-50 dark:bg-red-900/40":!B&&ve?"bg-amber-50 dark:bg-amber-900/40":B?"":"bg-white dark:bg-gray-800"} ${p?"ring-2 ring-indigo-500 border-indigo-300":Ee?"border-red-300 dark:border-red-500 hover:border-red-400 dark:hover:border-red-400":ve?"border-amber-300 dark:border-amber-500 hover:border-amber-400 dark:hover:border-amber-400":F?"border-orange-200 dark:border-orange-800 hover:border-orange-300":s.critical?"border-red-200 dark:border-red-800 hover:border-red-300":se?"border-green-200 dark:border-green-800 hover:border-green-300":"border-gray-100 dark:border-gray-700 hover:border-gray-200"}`,style:{borderLeftWidth:"2px",borderLeftColor:y},children:[ee&&e.jsxs("div",{className:`hidden md:block absolute top-0 z-[200] w-56 p-3 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none ${s.status==="done"?"right-full mr-2":"left-full ml-2"}`,children:[ie&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:ie.color},children:ie.label})}),s.customer&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-2",children:s.customer}),ae&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:ae.bg,color:ae.text},children:[ae.icon," ",ae.label]})}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 line-clamp-3",children:s.description}),s.assignee&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-[10px] font-medium flex items-center justify-center flex-shrink-0",children:s.assignee.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:s.assignee})]}),((me=s.dependencies)==null?void 0:me.length)>0&&(()=>{const R=s.dependencies.map(we=>T.find(Ze=>Ze.id===we.depends_on_id)).filter(we=>we&&we.status!=="done");return R.length===0?null:e.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"ðŸš« Blocked by:"}),R.map(we=>e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["â€¢ ",we.title]},we.id))]})})(),((je=s.subtasks)==null?void 0:je.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Subtasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s.subtasks.filter(R=>R.completed).length/s.subtasks.length*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.subtasks.filter(R=>R.completed).length,"/",s.subtasks.length]})]})]}),((fe=s.attachments)==null?void 0:fe.length)>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“Ž ",s.attachments.length," attachment",s.attachments.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col",children:[c&&e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("button",{onClick:R=>{R.stopPropagation(),k==null||k(s.id)},className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${p?"bg-indigo-500 border-indigo-500 text-white":"border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-800"}`,children:p&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[Le&&!Z&&e.jsx("span",{className:"text-xs flex-shrink-0",title:"In My Day",children:"â˜€ï¸"}),Ee&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-red-100 dark:bg-red-500/80 text-red-700 dark:text-white flex-shrink-0",children:"OVERDUE"}),ve&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-amber-100 dark:bg-amber-500/80 text-amber-700 dark:text-white flex-shrink-0",children:"TODAY"}),F&&e.jsx("span",{title:"Blocked",className:"text-xs flex-shrink-0",children:"ðŸ”’"}),s.critical&&e.jsx("span",{title:"Critical",className:"text-xs flex-shrink-0",children:"ðŸš©"}),b&&e.jsx("span",{title:b.label,className:"text-xs flex-shrink-0",children:"ðŸ”"}),pe?e.jsx("input",{ref:ne,type:"text",value:v,onChange:R=>$(R.target.value),onBlur:Se,onKeyDown:N,onClick:R=>R.stopPropagation(),className:"flex-1 text-xs font-medium bg-white dark:bg-gray-700 border border-indigo-400 rounded px-1.5 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700 dark:text-gray-200"}):e.jsx("h4",{onClick:R=>V&&R.stopPropagation(),onDoubleClick:de,className:`flex-1 text-xs font-medium line-clamp-2 leading-tight ${Ee?"text-red-700 dark:text-red-200 group-hover:text-red-800 dark:group-hover:text-red-100":ve?"text-amber-700 dark:text-amber-200 group-hover:text-amber-800 dark:group-hover:text-amber-100":"text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"} ${V?"cursor-text":""}`,title:V?"Double-click to edit":"",children:s.title})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-1.5 text-[10px] text-gray-600 dark:text-gray-400",children:[s.start_date&&e.jsxs("span",{className:`flex items-center gap-0.5 ${se?"text-green-600 dark:text-green-400":""}`,children:[e.jsx("span",{children:"â–¶"})," ",Bt(s.start_date)]}),s.due_date&&e.jsxs("span",{className:`flex items-center gap-0.5 font-medium ${H==="overdue"?"text-red-600 dark:text-red-400":H==="today"?"text-orange-600 dark:text-orange-400":H==="soon"?"text-amber-600 dark:text-amber-400":""}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Bt(s.due_date)]}),s.time_estimate&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("span",{children:"â±"})," ",Rt(s.time_estimate)]}),ae&&e.jsxs("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 text-[9px] font-medium rounded-full",style:{backgroundColor:ae.bg,color:ae.text},title:ae.label,children:[ae.icon," ",ae.label]})]}),s.customer&&e.jsx("div",{className:"hidden sm:block mt-1.5",children:e.jsx("span",{className:"inline-block px-2 py-0.5 text-[10px] font-medium rounded-full",style:{backgroundColor:((Ue=Gr(s.customer))==null?void 0:Ue.bg)||"#EDE9FE",color:((Fe=Gr(s.customer))==null?void 0:Fe.text)||"#7C3AED",border:`1px solid ${((qe=Gr(s.customer))==null?void 0:qe.border)||"#C4B5FD"}`},children:s.customer})}),x&&d&&e.jsx("div",{className:"hidden sm:block mt-2 pt-1.5 border-t border-gray-100 dark:border-gray-700",children:e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:d.name})}),g&&e.jsxs("div",{className:"sm:hidden flex items-center gap-1.5 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[s.status==="backlog"&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 rounded hover:bg-blue-100 transition-colors",children:"â†’ To Do"}),s.status==="todo"&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,"in_progress")},className:"flex-1 py-1 text-[10px] font-medium text-pink-600 bg-pink-50 dark:bg-pink-900/30 dark:text-pink-400 rounded hover:bg-pink-100 transition-colors",children:"â–¶ Start"}),(s.status==="backlog"||s.status==="todo"||s.status==="in_progress")&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,"done")},className:"flex-1 py-1 text-[10px] font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 rounded hover:bg-emerald-100 transition-colors",children:"âœ“ Done"}),s.status==="done"&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-amber-600 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 rounded hover:bg-amber-100 transition-colors",children:"â†© Reopen"})]})]})]}),!B&&e.jsx("div",{className:"hidden md:flex absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 scale-90 group-hover:scale-100 z-10",children:e.jsxs("div",{className:"flex items-center gap-0.5 p-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:[!E&&!Z&&g&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,"in_progress")},className:"p-1.5 text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded transition-colors",title:"Start working",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),g&&e.jsx("button",{onClick:R=>{R.stopPropagation(),g(s.id,Z?"todo":"done")},className:`p-1.5 rounded transition-colors ${Z?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/30":"text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:Z?"Reopen task":"Mark done",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),D&&e.jsx("button",{onClick:R=>{R.stopPropagation(),D(s.id,!s.critical)},className:`p-1.5 rounded transition-colors ${s.critical?"text-red-500 bg-red-50 dark:bg-red-900/30":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:s.critical?"Remove critical flag":"Mark as critical",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:s.critical?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),Q&&!Z&&e.jsx("button",{onClick:R=>{R.stopPropagation(),Q(s.id,!Le)},className:`p-1.5 rounded transition-colors ${Le?"text-amber-500 bg-amber-50 dark:bg-amber-900/30":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30"}`,title:Le?"Remove from My Day":"Add to My Day",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:Le?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})})]})},Ja=({tasks:s,projects:d,onEditTask:i,onUndoComplete:f})=>{const[x,T]=l.useState(!1);if(s.length===0)return null;const g=c=>{const p=new Date(c),w=new Date-p,_=Math.floor(w/6e4),Q=Math.floor(w/36e5),B=Math.floor(w/864e5);return _<1?"just now":_<60?`${_}m ago`:Q<24?`${Q}h ago`:`${B}d ago`};return e.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>T(!x),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Recently Completed"}),e.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 px-2 py-0.5 rounded-full",children:s.length})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"px-4 pb-4 space-y-2",children:s.map(c=>{const p=d.find(k=>k.id===c.project_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-gray-200 dark:hover:border-gray-600 transition-colors",children:[e.jsx("button",{onClick:()=>f(c.id),className:"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center shrink-0 hover:bg-amber-500 transition-colors",title:"Mark as incomplete",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>i(c),children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-through truncate",children:c.title}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:p&&e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:p.name})})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 shrink-0",children:g(c.completed_at)})]},c.id)})})]})},As=({column:s,tasks:d,projects:i,onEditTask:f,onDragStart:x,onDragOver:T,onDrop:g,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:w,onSetDueDate:_,bulkSelectMode:Q,selectedTaskIds:B,onToggleSelect:V,onAddTask:D,onToggleMyDay:P,isMobileFullWidth:te,draggedTask:pe,onUpdateTitle:m,onToggleCritical:v})=>{const[$,ne]=l.useState(!1),[ce,ke]=l.useState(!1),[he,Y]=l.useState(!1),de=d.reduce((E,se)=>E+(se.time_estimate||0),0),Se=d.filter(E=>E.critical).length,N=d.filter(E=>or(E)).length,H=s.id==="done",F=s.id==="backlog";let b=d,Z=0;return H&&!ce?(b=d.slice(0,Vr),Z=Math.max(0,d.length-Vr)):F&&!he&&(b=d.slice(0,Hr),Z=Math.max(0,d.length-Hr)),e.jsxs("div",{className:`${te?"w-full":"flex-shrink-0 w-[280px] sm:w-[300px] lg:flex-1 lg:min-w-[300px] lg:max-w-[400px] xl:max-w-[450px]"} bg-gray-50/80 dark:bg-gray-800/80 rounded-2xl p-3 sm:p-4 transition-all duration-200 overflow-visible ${$?"ring-2 ring-indigo-400 ring-offset-2 dark:ring-offset-gray-900 bg-indigo-50/50 dark:bg-indigo-900/20 scale-[1.01]":""}`,onDragOver:E=>{E.preventDefault(),ne(!0),T(E,s.id)},onDragLeave:()=>ne(!1),onDrop:E=>{ne(!1),g(E,s.id)},children:[e.jsxs("div",{className:`${te?"hidden":"flex"} items-center gap-3 mb-2`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:s.title}),e.jsx("span",{className:"ml-auto bg-white dark:bg-gray-700 px-2.5 py-0.5 rounded-full text-sm font-medium text-gray-500 dark:text-gray-300 shadow-sm",children:d.length})]}),e.jsxs("div",{className:`${te?"hidden":"flex"} items-center gap-2 mb-4 ml-6 text-xs text-gray-500 dark:text-gray-400`,children:[de>0&&e.jsx("span",{children:Rt(de)}),s.id!=="done"&&Se>0&&e.jsxs("span",{className:"text-red-500",children:[Se," critical"]}),s.id==="backlog"&&N>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[N," ready"]})]}),e.jsxs("div",{className:"space-y-2 overflow-visible",children:[b.length===0&&!$&&e.jsxs("div",{className:"py-6 sm:py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-10 sm:h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3 sm:mb-2 opacity-60",children:e.jsx("span",{className:"text-xl sm:text-lg",children:s.id==="done"?"âœ…":s.id==="in_progress"?"ðŸ’­":s.id==="todo"?"ðŸ“‹":"ðŸ“¦"})}),e.jsx("p",{className:"text-sm sm:text-xs text-gray-400 dark:text-gray-500 px-4",children:s.id==="done"?"Completed tasks appear here":s.id==="in_progress"?"Tasks you're working on":s.id==="todo"?"Ready to start":"Future tasks"})]}),b.map(E=>e.jsx(Ka,{task:E,project:i.find(se=>se.id===E.project_id),onEdit:f,onDragStart:x,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:w,onSetDueDate:_,bulkSelectMode:Q,isSelected:B==null?void 0:B.has(E.id),onToggleSelect:V,onToggleMyDay:P,isDragging:(pe==null?void 0:pe.id)===E.id,onUpdateTitle:m,onToggleCritical:v},E.id)),H&&Z>0&&!ce&&e.jsxs("button",{onClick:()=>ke(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-indigo-300 transition-all",children:["View all ",d.length," completed tasks â†’"]}),H&&ce&&d.length>Vr&&e.jsx("button",{onClick:()=>ke(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all",children:"Show less â†‘"}),F&&Z>0&&!he&&e.jsxs("button",{onClick:()=>Y(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-indigo-300 transition-all",children:["View all ",d.length," backlog tasks â†’"]}),F&&he&&d.length>Hr&&e.jsx("button",{onClick:()=>Y(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-gray-300 transition-all",children:"Show less â†‘"}),pe&&pe.status!==s.id&&$&&e.jsxs("div",{className:"w-full py-4 rounded-xl border-2 border-dashed border-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20 animate-dropZone flex items-center justify-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Drop here"]}),e.jsxs("button",{onClick:()=>D(s.id),className:"w-full mt-3 py-3 sm:py-2.5 text-sm text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-medium rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 transition-all flex items-center justify-center gap-2 active:scale-95 touch-manipulation",children:[e.jsx("svg",{className:"w-5 h-5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add task"]})]})]})},Za=({isOpen:s,onClose:d,task:i,projects:f,allTasks:x,onSave:T,onDelete:g,loading:c,templates:p=[],onSaveTemplate:k,onDeleteTemplate:w,onShowConfirm:_})=>{var yt,mt;const Q=l.useRef(null),[B,V]=l.useState(!1),[D,P]=l.useState(!1),[te,pe]=l.useState(""),[m,v]=l.useState({title:"",description:"",project_id:"",status:"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),[$,ne]=l.useState([]),[ce,ke]=l.useState([]),[he,Y]=l.useState([]),[de,Se]=l.useState("details"),[N,H]=l.useState(""),[F,b]=l.useState(!1),[Z,E]=l.useState(!1),[se,ie]=l.useState(""),[ae,Le]=l.useState(!1),[Ee,ve]=l.useState(""),[y,ee]=l.useState(""),[z,le]=l.useState([]),[me,je]=l.useState(""),[fe,Ue]=l.useState([]),[Fe,qe]=l.useState(""),R=l.useRef(null),[we,Ze]=l.useState(null);l.useEffect(()=>{const n=W=>{var X;D&&(W.key==="Escape"&&P(!1),W.key==="Enter"&&(g(i.id),P(!1),d())),(W.ctrlKey||W.metaKey)&&W.key==="s"&&!D&&(W.preventDefault(),(X=document.querySelector("form"))==null||X.requestSubmit())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[D,i,g,d]);const ut=n=>{n&&(v(W=>({...W,title:n.title||"",description:n.description||"",project_id:n.project_id||W.project_id,category:n.category||"deliverable",energy_level:n.energy_level||"medium",time_estimate:n.time_estimate||"",source:n.source||"ad_hoc",assignee:n.assignee||"",customer:n.customer||"",critical:n.critical||!1,recurrence_type:n.recurrence_type||null,recurrence_count:n.recurrence_count||8})),le(n.subtasks||[]),n.assignee&&(f.flatMap(X=>X.team_members||[]).includes(n.assignee)||(E(!0),ie(n.assignee))),n.customer&&(Le(!0),ve(n.customer)))},Be=async n=>{var X;const W=(X=n.clipboardData)==null?void 0:X.items;if(W){for(const Te of W)if(Te.type.startsWith("image/")){n.preventDefault();const Re=Te.getAsFile();if(Re){const Ve=new Date().toISOString().replace(/[:.]/g,"-"),Je=Re.type.split("/")[1]||"png",Ye=new File([Re],`pasted-image-${Ve}.${Je}`,{type:Re.type});if(Ye.size>10*1024*1024){H("Pasted image is too large. Max size is 10MB.");return}Y(et=>[...et,Ye]),ee("ðŸ“Ž Image captured!"),setTimeout(()=>ee(""),2e3)}break}}};l.useEffect(()=>{var W,X,Te,Re;const n=i!=null&&i.id?`edit-${i.id}`:s?`new-${(i==null?void 0:i.title)||""}-${(i==null?void 0:i.project_id)||""}`:null;if(!(!s||R.current===n)){if(R.current=n,i!=null&&i.id){const Ve=f.find(et=>et.id===i.project_id),Je=Ve&&!((W=Ve.members)!=null&&W.includes(i.assignee))&&i.assignee,Ye=Ve&&!((X=Ve.customers)!=null&&X.includes(i.customer))&&i.customer;v({title:i.title||"",description:i.description||"",project_id:i.project_id||"",status:i.status||"backlog",critical:i.critical||!1,start_date:i.start_date||"",start_time:i.start_time||"",end_time:i.end_time||"",due_date:i.due_date||"",assignee:Je?"":i.assignee||"",time_estimate:i.time_estimate||"",energy_level:i.energy_level||"medium",category:i.category||"deliverable",source:i.source||"ad_hoc",source_link:i.source_link||"",customer:Ye?"":i.customer||"",notes:i.notes||"",recurrence_type:i.recurrence_type||null,recurrence_count:i.recurrence_count||8,recurrence_end_date:i.recurrence_end_date||""}),ke(i.attachments||[]),ne(((Te=i.dependencies)==null?void 0:Te.map(et=>et.depends_on_id))||[]),E(Je),ie(Je?i.assignee:""),Le(Ye),ve(Ye?i.customer:""),le(i.subtasks||[]),Ue(i.comments||[])}else v({title:(i==null?void 0:i.title)||"",description:"",project_id:(i==null?void 0:i.project_id)||((Re=f[0])==null?void 0:Re.id)||"",status:(i==null?void 0:i.status)||"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:(i==null?void 0:i.due_date)||"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),ke([]),ne([]),E(!1),ie(""),Le(!1),ve(""),le([]),Ue([]);Y([]),Se("details"),H(""),je(""),qe("")}},[i==null?void 0:i.id,i==null?void 0:i.title,i==null?void 0:i.project_id,s]),l.useEffect(()=>{s||(R.current=null)},[s]);const ye=f.find(n=>n.id===m.project_id),Ke=async n=>{const W=Array.from(n.target.files);if(W.length===0)return;H("");const X=[];for(const Te of W){if(Te.size>10*1024*1024){H(`File "${Te.name}" is too large. Max size is 10MB.`);continue}X.push(Te)}Y([...he,...X]),Q.current&&(Q.current.value="")},at=n=>{Y(he.filter((W,X)=>X!==n))},ze=n=>{ke(ce.filter(W=>W.id!==n))},Xe=async n=>{n.preventDefault();const W=Z?se:m.assignee,X=ae?Ee:m.customer;await T({...m,assignee:W,customer:X,time_estimate:m.time_estimate?parseInt(m.time_estimate):null,id:i==null?void 0:i.id,dependencies:$,subtasks:z,comments:fe},he,ce),d()},pt=(x==null?void 0:x.filter(n=>n.project_id===m.project_id&&n.id!==(i==null?void 0:i.id)&&n.status!=="done"))||[],ct=n=>n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB";return e.jsxs(Qr,{isOpen:s,onClose:d,title:i!=null&&i.id?"Edit Task":"New Task",wide:!0,fullScreenMobile:!0,children:[e.jsxs("form",{onSubmit:Xe,children:[!(i!=null&&i.id)&&p.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"ðŸ“‹ Use template:"}),e.jsxs("select",{onChange:n=>{const W=p.find(X=>X.id===parseInt(n.target.value));W&&ut(W),n.target.value=""},className:"flex-1 min-w-[150px] px-3 py-1.5 bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",value:"",children:[e.jsx("option",{value:"",children:"Select a template..."}),p.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),w&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{type:"button",className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",title:"Manage templates",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 hidden group-hover:block",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700",children:"Delete template"}),p.map(n=>e.jsxs("button",{type:"button",onClick:()=>w(n.id),className:"w-full px-3 py-1.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n.name]},n.id))]})]})]})}),e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 overflow-x-auto min-h-[44px]",children:[{id:"details",label:"Details"},{id:"additional",label:"More"},{id:"subtasks",label:"Subtasks"},{id:"dependencies",label:"Deps",labelFull:"Dependencies"},{id:"activity",label:"Activity"}].map(n=>e.jsx("button",{type:"button",onClick:()=>Se(n.id),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${de===n.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-800 dark:text-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:n.labelFull?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:n.label}),e.jsx("span",{className:"hidden sm:inline",children:n.labelFull})]}):n.label},n.id))}),de==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:m.title,onChange:n=>v({...m,title:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.title?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,placeholder:"What needs to be done?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:n=>v({...m,description:n.target.value}),onPaste:Be,rows:2,className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.description?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Add more context... (paste images here!)"}),y&&de==="details"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:y})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project *"}),e.jsxs("select",{required:!0,value:m.project_id,onChange:n=>v({...m,project_id:n.target.value,assignee:"",customer:""}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.project_id?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,children:[e.jsx("option",{value:"",children:"Select project"}),f.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:m.status,onChange:n=>v({...m,status:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:ot.map(n=>e.jsx("option",{value:n.id,children:n.title},n.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer/Client"}),ae?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Ee,onChange:n=>ve(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Customer name"}),e.jsx("button",{type:"button",onClick:()=>{Le(!1),ve("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.customer,onChange:n=>{n.target.value==="__other__"?(Le(!0),v({...m,customer:""})):v({...m,customer:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.customer?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"No customer"}),(yt=ye==null?void 0:ye.customers)==null?void 0:yt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Effort Level"}),e.jsx("select",{value:m.energy_level,onChange:n=>v({...m,energy_level:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.energy_level?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:Object.entries(zt).map(([n,W])=>e.jsxs("option",{value:n,children:[W.icon," ",W.label]},n))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Start Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.start_date,onChange:n=>v({...m,start_date:n.target.value}),onBlur:n=>{const W=n.target.value.trim();if(!W){v({...m,start_date:""});return}const X=lr(W);X.date&&v({...m,start_date:X.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.start_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Due Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.due_date,onChange:n=>v({...m,due_date:n.target.value}),onBlur:n=>{const W=n.target.value.trim();if(!W){v({...m,due_date:""});return}const X=lr(W);X.date&&v({...m,due_date:X.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.due_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"text",value:m.start_time||"",onChange:n=>v({...m,start_time:n.target.value}),onBlur:n=>{const W=Ts(n.target.value);if(W||!n.target.value){const X={start_time:W};if(W&&m.time_estimate){const[Te,Re]=W.split(":").map(Number),Je=Te*60+Re+parseInt(m.time_estimate),Ye=Math.floor(Je/60),et=Je%60;X.end_time=`${String(Ye).padStart(2,"0")}:${String(et).padStart(2,"0")}`}v({...m,...X})}},placeholder:"e.g. 9am, 230pm, 14:30",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"text",value:m.end_time||"",onChange:n=>v({...m,end_time:n.target.value}),onBlur:n=>{const W=Ts(n.target.value);if(W||!n.target.value){const X={end_time:W};if(m.start_time&&W){const[Te,Re]=m.start_time.split(":").map(Number),[Ve,Je]=W.split(":").map(Number),Ye=Te*60+Re,Ne=Ve*60+Je-Ye;Ne>0&&(X.time_estimate=String(Ne))}v({...m,...X})}},placeholder:"e.g. 10am, 430pm, 16:00",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>v({...m,critical:!m.critical}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.critical?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 ring-2 ring-red-300 dark:ring-red-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸš© Critical"}),e.jsx("button",{type:"button",onClick:()=>v({...m,recurrence_type:m.recurrence_type?null:"weekly"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.recurrence_type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-2 ring-blue-300 dark:ring-blue-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸ” Recurring"})]}),m.recurrence_type&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Repeat"}),e.jsx("select",{value:m.recurrence_type||"",onChange:n=>v({...m,recurrence_type:n.target.value||null}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:Is.filter(n=>n.id).map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),m.start_date?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Occurrences"}),e.jsx("input",{type:"number",min:"1",max:"52",value:m.recurrence_count,onChange:n=>v({...m,recurrence_count:parseInt(n.target.value)||1,recurrence_end_date:""}),className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Or until date"}),e.jsx("input",{type:"text",value:m.recurrence_end_date,onChange:n=>v({...m,recurrence_end_date:n.target.value}),onBlur:n=>{const W=n.target.value.trim();if(!W)return;const X=lr(W);X.date&&v({...m,recurrence_end_date:X.date,recurrence_count:0})},placeholder:"e.g. M+6",className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["ðŸ—“ ",m.recurrence_end_date?`Will create occurrences until ${m.recurrence_end_date}`:`Will create ${m.recurrence_count} future occurrence${m.recurrence_count!==1?"s":""}`]})]}):e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Set a Start Date above for recurrence to work"]})]})]}),de==="subtasks"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("h3",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:"Checklist"})]}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-300 mb-4",children:"Break down this task into smaller steps"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:me,onChange:n=>je(n.target.value),onKeyDown:n=>{n.key==="Enter"&&me.trim()&&(n.preventDefault(),le([...z,{id:Date.now().toString(),title:me.trim(),completed:!1}]),je(""))},placeholder:"Add a subtask...",className:"flex-1 px-4 py-2.5 border border-indigo-200 dark:border-indigo-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("button",{type:"button",onClick:()=>{me.trim()&&(le([...z,{id:Date.now().toString(),title:me.trim(),completed:!1}]),je(""))},className:"px-4 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium",children:"Add"})]}),z.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:[e.jsxs("span",{children:[z.filter(n=>n.completed).length," of ",z.length," completed"]}),e.jsxs("span",{children:[Math.round(z.filter(n=>n.completed).length/z.length*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-indigo-200 dark:bg-indigo-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${z.filter(n=>n.completed).length/z.length*100}%`}})})]}),z.length===0?e.jsxs("div",{className:"text-center py-8 text-indigo-400 dark:text-indigo-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No subtasks yet. Add some to track progress!"})]}):e.jsx("div",{className:"space-y-2",children:z.map((n,W)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${n.completed?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>{le(z.map(X=>X.id===n.id?{...X,completed:!X.completed}:X))},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${n.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-indigo-400"}`,children:n.completed&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`flex-1 ${n.completed?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-200"}`,children:n.title}),e.jsx("button",{type:"button",onClick:()=>le(z.filter(X=>X.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id))})]})}),de==="additional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"number",min:"0",step:"5",value:m.time_estimate,onChange:n=>{const W=n.target.value,X={time_estimate:W};if(m.start_time&&W){const[Te,Re]=m.start_time.split(":").map(Number),Je=Te*60+Re+parseInt(W),Ye=Math.floor(Je/60),et=Je%60;X.end_time=`${String(Ye).padStart(2,"0")}:${String(et).padStart(2,"0")}`}v({...m,...X})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.time_estimate?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Minutes (e.g., 30)"}),m.time_estimate&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Rt(parseInt(m.time_estimate))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assignee"}),Z?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:se,onChange:n=>ie(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Enter name"}),e.jsx("button",{type:"button",onClick:()=>{E(!1),ie("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.assignee,onChange:n=>{n.target.value==="__other__"?(E(!0),v({...m,assignee:""})):v({...m,assignee:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.assignee?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),(mt=ye==null?void 0:ye.members)==null?void 0:mt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:m.category,onChange:n=>v({...m,category:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:dt.map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),e.jsx("select",{value:m.source,onChange:n=>v({...m,source:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Pt.map(n=>e.jsxs("option",{value:n.id,children:[n.icon," ",n.label]},n.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Link"}),e.jsx("input",{type:"text",value:m.source_link,onChange:n=>v({...m,source_link:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"URL or reference to the source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:m.notes,onChange:n=>v({...m,notes:n.target.value}),onPaste:Be,rows:4,className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Running notes, context, updates... (paste images here!)"}),y&&de==="additional"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:[e.jsx("input",{ref:Q,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:Ke,className:"hidden"}),e.jsx("input",{id:"camera-input",type:"file",accept:"image/*",capture:"environment",onChange:Ke,className:"hidden"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var n;return(n=document.getElementById("camera-input"))==null?void 0:n.click()},disabled:F,className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"ðŸ“· Take Photo"}),e.jsx("button",{type:"button",onClick:()=>{var n;return(n=Q.current)==null?void 0:n.click()},disabled:F,className:"w-full sm:w-auto px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600",children:F?"Uploading...":"ðŸ“Ž Choose Files"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Max 10MB â€¢ Paste images with âŒ˜V"})]}),N&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:N}),(ce.length>0||he.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[ce.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>Ze(n),children:[e.jsx("span",{className:"text-lg",children:"ðŸ“„"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:n.file_name}),e.jsx("p",{className:"text-xs text-gray-400",children:ct(n.file_size)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Ze(n),className:"p-1.5 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg text-indigo-500",title:"View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("a",{href:n.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",title:"Download",children:"â¬‡ï¸"}),e.jsx("button",{type:"button",onClick:()=>{_?_({title:"Remove Attachment",message:`Remove "${n.file_name||n.name}"? This cannot be undone.`,confirmLabel:"Remove",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>ze(n.id)}):ze(n.id)},className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500",title:"Delete",children:"ðŸ—‘ï¸"})]})]},n.id)),he.map((n,W)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"âž•"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:n.name}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["New â€¢ ",ct(n.size)]})]})]}),e.jsx("button",{type:"button",onClick:()=>at(W),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500 flex-shrink-0",children:"âœ•"})]},W))]})]})]}),de==="dependencies"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Blocked by"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"This task won't start until these are done"})]}),$.length>0&&e.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 rounded-full",children:[$.length," selected"]})]}),m.project_id?pt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No other tasks to link"})]}):e.jsx("div",{className:"space-y-1 max-h-72 overflow-y-auto -mx-1 px-1",children:pt.map(n=>{var X;const W=$.includes(n.id);return e.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all ${W?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${W?"bg-indigo-500 border-indigo-500":"border-gray-300 dark:border-gray-600"}`,children:W&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("input",{type:"checkbox",checked:W,onChange:Te=>{Te.target.checked?ne([...$,n.id]):ne($.filter(Re=>Re!==n.id))},className:"sr-only"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm truncate ${W?"font-medium text-gray-900 dark:text-gray-100":"text-gray-700 dark:text-gray-300"}`,children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n.status==="done"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":n.status==="in_progress"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.status==="todo"?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:(X=ot.find(Te=>Te.id===n.status))==null?void 0:X.title}),n.critical&&e.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"ðŸš©"})]})]})]},n.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select a project first"})]})]}),de==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Add a Comment"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Notes and updates about this task"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("textarea",{value:Fe,onChange:n=>qe(n.target.value),placeholder:"Add a comment or note...",rows:2,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"}),e.jsx("button",{type:"button",onClick:()=>{if(Fe.trim()){const n={id:Date.now().toString(),text:Fe.trim(),created_at:new Date().toISOString(),type:"comment"};Ue([n,...fe]),qe("")}},disabled:!Fe.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium sm:self-end",children:"Add Comment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Activity & Comments",fe.length>0&&e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["(",fe.length,")"]})]}),fe.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“"}),e.jsx("p",{className:"text-sm",children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Add notes to track progress and context"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:fe.map(n=>e.jsx("div",{className:`p-3 rounded-lg border ${n.type==="comment"?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[n.type==="comment"?e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:n.text}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:n.icon||"â€¢"})," ",n.text]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(n.created_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),n.type==="comment"&&e.jsx("button",{type:"button",onClick:()=>Ue(fe.filter(W=>W.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors touch-manipulation",title:"Delete comment",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},n.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 pt-6 mt-6 border-t border-gray-100 dark:border-gray-700",children:[(i==null?void 0:i.id)&&e.jsx("button",{type:"button",onClick:()=>P(!0),disabled:c,className:"px-3 sm:px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50 text-sm sm:text-base",children:"Delete"}),e.jsx("div",{className:"hidden sm:block",children:B?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:te,onChange:n=>pe(n.target.value),placeholder:"Template name...",className:"px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-800 focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{te.trim()&&k&&(k({...m,name:te.trim(),subtasks:z}),pe(""),V(!1))},disabled:!te.trim(),className:"px-3 py-2 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/60 disabled:opacity-50",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{V(!1),pe("")},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{type:"button",onClick:()=>V(!0),className:"px-4 py-2.5 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors text-sm",title:"Save current task settings as a reusable template",children:"ðŸ’¾ Save as Template"})}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",onClick:d,className:"px-3 sm:px-4 py-2.5 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 sm:px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 text-sm sm:text-base",children:c?"Saving...":i!=null&&i.id?"Save":"Create"})]})]}),e.jsx(Ia,{isOpen:!!we,onClose:()=>Ze(null),attachment:we,attachments:ce,onNavigate:Ze}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ—‘ï¸"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Task"})]}),e.jsxs("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:['Delete "',i==null?void 0:i.title,'"? This cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{g(i.id),P(!1),d()},className:"px-4 py-2 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Delete"})]})]})})]})},Xa=({isOpen:s,onClose:d,project:i,onSave:f,onDelete:x,onArchive:T,loading:g,onShowConfirm:c})=>{const[p,k]=l.useState({name:"",members:[],customers:[]}),[w,_]=l.useState(""),[Q,B]=l.useState("");l.useEffect(()=>{k(i?{name:i.name,members:[...i.members||[]],customers:[...i.customers||[]]}:{name:"",members:[],customers:[]}),_(""),B("")},[i,s]),l.useEffect(()=>{const m=v=>{var $;(v.ctrlKey||v.metaKey)&&v.key==="s"&&s&&(v.preventDefault(),($=document.querySelector("form"))==null||$.requestSubmit())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[s]);const V=()=>{w.trim()&&!p.members.includes(w.trim())&&(k({...p,members:[...p.members,w.trim()]}),_(""))},D=m=>{k({...p,members:p.members.filter(v=>v!==m)})},P=()=>{Q.trim()&&!p.customers.includes(Q.trim())&&(k({...p,customers:[...p.customers,Q.trim()]}),B(""))},te=m=>{k({...p,customers:p.customers.filter(v=>v!==m)})},pe=async m=>{m.preventDefault(),await f({...p,id:i==null?void 0:i.id}),d()};return e.jsx(Qr,{isOpen:s,onClose:d,title:i?"Edit Project":"New Project",children:e.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:m=>k({...p,name:m.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:w,onChange:m=>_(m.target.value),onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),V()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add team member"}),e.jsx("button",{type:"button",onClick:V,className:"px-4 py-2.5 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.members.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>D(m),className:"hover:text-indigo-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customers/Clients"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:Q,onChange:m=>B(m.target.value),onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),P()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add customer/client"}),e.jsx("button",{type:"button",onClick:P,className:"px-4 py-2.5 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.customers.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>te(m),className:"hover:text-purple-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{c({title:"Delete Project",message:`Delete "${i.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{x(i.id),d()}})},disabled:g,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{T(i.id),d()},disabled:g,className:"px-4 py-2.5 text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl transition-colors disabled:opacity-50",children:i.archived?"Unarchive":"Archive"})]}),e.jsx("button",{type:"button",onClick:d,className:"ml-auto px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium disabled:opacity-50",children:g?"Saving...":i?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Project"]})})]})]})})};function hn(){var ws,Ns,Cs,_s,Ss;const{user:s,signOut:d}=$s(),f=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒ":"Ctrl+Alt+",[x,T]=l.useState([]),[g,c]=l.useState([]),[p,k]=l.useState(!0),[w,_]=l.useState(!1),[Q,B]=l.useState(null),[V,D]=l.useState(!navigator.onLine),[P,te]=l.useState(null),[pe,m]=l.useState(null);l.useEffect(()=>{const t=()=>D(!1),r=()=>D(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]);const v=(t,r="success")=>{m({message:t,type:r}),setTimeout(()=>m(null),3e3)},$=async()=>{if(we==="DELETE"){Be(!0);try{await O.from("tasks").delete().eq("user_id",s.id),await O.from("projects").delete().eq("user_id",s.id),await O.from("feedback").delete().eq("user_id",s.id),await O.from("task_templates").delete().eq("user_id",s.id),await d()}catch(t){console.error("Error deleting account:",t),B("Failed to delete account"),Be(!1)}}},ne=async()=>{pt(!0);try{const{error:t}=await O.auth.updateUser({data:{display_name:ye}});if(t)throw t;ze(!1),v("Display name saved")}catch(t){console.error("Error saving display name:",t),B("Failed to save display name")}pt(!1)},ce=async()=>{yt(!0);try{const{error:t}=await O.auth.resetPasswordForEmail(s.email,{redirectTo:window.location.origin});if(t)throw t;n(!0)}catch(t){console.error("Error sending password reset:",t),B("Failed to send password reset email")}yt(!1)},ke=(t,r)=>{localStorage.setItem(t,r),t==="trackli-default-view"&&X(r),t==="trackli-week-start"&&Re(r),t==="trackli-show-confetti"&&Je(r==="true")},he=async()=>{et(!0);try{const t=new Date;t.setDate(t.getDate()-parseInt(Ne));const{data:r,error:a}=await O.from("tasks").select("id").eq("user_id",s.id).eq("status","done").lt("updated_at",t.toISOString());if(a)throw a;if(r.length>0){const{error:o}=await O.from("tasks").delete().in("id",r.map(h=>h.id));if(o)throw o;c(h=>h.filter(C=>!r.find(L=>L.id===C.id))),v(`Cleared ${r.length} completed task${r.length===1?"":"s"}`)}else v("No completed tasks older than "+Ne+" days")}catch(t){console.error("Error clearing tasks:",t),B("Failed to clear completed tasks")}et(!1)},[Y,de]=l.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[Se,N]=l.useState("monthly"),[H,F]=l.useState(!1),[b,Z]=l.useState(()=>typeof window<"u"?localStorage.getItem("trackli-dark-mode")==="true":!1),[E,se]=l.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[ie,ae]=l.useState(1),[Le,Ee]=l.useState(!1),[ve,y]=l.useState(!1),[ee,z]=l.useState(!1),[le,me]=l.useState(!1),[je,fe]=l.useState(!1),[Ue,Fe]=l.useState(!1),[qe,R]=l.useState(!1),[we,Ze]=l.useState(""),[ut,Be]=l.useState(!1),[ye,Ke]=l.useState(""),[at,ze]=l.useState(!1),[Xe,pt]=l.useState(!1),[ct,yt]=l.useState(!1),[mt,n]=l.useState(!1),[W,X]=l.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[Te,Re]=l.useState(()=>localStorage.getItem("trackli-week-start")||"0"),[Ve,Je]=l.useState(()=>localStorage.getItem("trackli-show-confetti")!=="false"),[Ye,et]=l.useState(!1),[Ne,Xt]=l.useState("30"),[u,S]=l.useState("board"),[j,G]=l.useState(()=>!localStorage.getItem("trackli_onboarding_complete")),[K,J]=l.useState(0),[xe,be]=l.useState(null),[tt,I]=l.useState(0),[ge,We]=l.useState(()=>{const t=localStorage.getItem("trackli_view_tours_completed");return t?JSON.parse(t):{}}),[He,De]=l.useState("all"),[Ce,re]=l.useState(!1),[Ie,Oe]=l.useState(!1),[dr,At]=l.useState(!1),[Vt,it]=l.useState(null),[Os,$t]=l.useState(null),[en,tn]=l.useState(null),[er,Kr]=l.useState(null),[tr,Nr]=l.useState(null),[bt,cr]=l.useState(!1),[ft,xr]=l.useState(!1),[Cr,Jr]=l.useState(!1),[_r,Zr]=l.useState(!1),[Sr,Xr]=l.useState(!1),[jt,gr]=l.useState(!1),[kt,mr]=l.useState(!1),[Ht,hr]=l.useState(""),[Ae,It]=l.useState({}),[Ps,es]=l.useState(""),[zs,rn]=l.useState(!1),[Dr,sn]=l.useState("all"),[ts,an]=l.useState(""),[Wt,rs]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_saved_views")||"[]")}catch{return[]}}),[Rs,ur]=l.useState(!1),[Gt,ss]=l.useState(""),[Lr,as]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_task_templates")||"[]")}catch{return[]}}),[nn,on]=l.useState(!1),[Vs,ns]=l.useState(!1),is=l.useRef(!1),[Hs,Ut]=l.useState(!1),[Pe,vt]=l.useState({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),[wt,Nt]=l.useState([]),[os,ls]=l.useState(!1),[Gs,St]=l.useState(!1),[Dt,Tr]=l.useState(null),[rr,pr]=l.useState(!1),[ln,yr]=l.useState(""),[Us,qs]=l.useState(!1),br=l.useRef(null);l.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;qs(!!t)},[]);const Ys=(t,r=!1)=>{const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a){alert("Voice input is not supported in this browser. Try Chrome or Safari.");return}const o=new a;o.continuous=r,o.interimResults=!0,o.lang="en-GB",o.onstart=()=>{pr(!0)},o.onresult=h=>{let C="";for(let L=0;L<h.results.length;L++)C+=h.results[L][0].transcript;t(C)},o.onerror=h=>{console.error("Speech recognition error:",h.error),pr(!1),h.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access in your browser settings.")},o.onend=()=>{pr(!1)},br.current=o,o.start()},Mr=()=>{br.current&&(br.current.stop(),br.current=null),pr(!1)},Qs=(t,r=!1)=>{rr?Mr():Ys(t,r)},[fr,Ks]=l.useState(null),[sr,Er]=l.useState(null),Fr=(t,r=null,a=null)=>{const o=t.includes("Failed to fetch")||t.includes("NetworkError")?"Network error - please check your connection":t.includes("JWT")||t.includes("auth")?"Session expired - please refresh the page":t.includes("duplicate")||t.includes("unique")?"This item already exists":t.includes("permission")||t.includes("denied")?"You don't have permission to do this":t;Er({message:o,retryAction:r,details:a})},[Ge,Ct]=l.useState(null),[qt,Lt]=l.useState(!1),[$e,xt]=l.useState(new Set),[dn,cn]=l.useState(!1),[Js,Yt]=l.useState(!1),[Qt,Kt]=l.useState(""),[Br,Ar]=l.useState(""),[Zs,$r]=l.useState(!1);l.useEffect(()=>{localStorage.setItem("trackli-dark-mode",b),b?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[b]),l.useEffect(()=>{const t=()=>{se(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{const t=r=>{var h,C,L;if(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.tagName==="SELECT")return;const o=navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey&&r.ctrlKey:r.ctrlKey&&r.altKey;if(o&&(r.key==="k"||r.key==="s")){r.preventDefault(),y(!0);return}if(r.key==="/"){r.preventDefault(),y(!0);return}if(r.key==="q"){r.preventDefault(),x.length>0&&(Ar(((h=x[0])==null?void 0:h.id)||""),Yt(!0));return}if(o&&r.key==="t"){r.preventDefault(),x.length>0&&(it(null),Oe(!0));return}if(o&&r.key==="p"){r.preventDefault(),$t(null),At(!0);return}if(o&&r.key==="n"){r.preventDefault(),x.length>0&&(vt({...Pe,projectId:((C=x[0])==null?void 0:C.id)||""}),Nt([]),St(!1),yr(""),Ut(!0));return}if(o&&r.key==="v"){r.preventDefault(),x.length>0&&(vt({...Pe,projectId:((L=x[0])==null?void 0:L.id)||"",notes:""}),Nt([]),St(!1),yr(" "),Ut(!0));return}if(o&&r.key==="d"){r.preventDefault(),de("myday");return}if(o&&r.key==="b"){r.preventDefault(),de("board");return}if(o&&r.key==="l"){r.preventDefault(),de("calendar");return}if(o&&r.key==="a"){r.preventDefault(),de("tasks");return}if(r.key==="?"||r.shiftKey&&r.key==="/"){r.preventDefault(),S("shortcuts"),z(!0);return}if(r.key==="Escape"&&qt){Lt(!1),xt(new Set);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[x,Pe,g]),l.useEffect(()=>{if(E||j)return;if(["myday","calendar","tasks","projects","progress"].includes(Y)&&!ge[Y]){const r=setTimeout(()=>{be(Y),I(0)},500);return()=>clearTimeout(r)}},[Y,ge,E,j]);const ds=t=>{const r={...ge,[t]:!0};We(r),localStorage.setItem("trackli_view_tours_completed",JSON.stringify(r)),be(null),I(0)},Xs=async()=>{try{const t=new Date().toISOString().split("T")[0],r=new Date(Date.now()+864e5).toISOString().split("T")[0],a=new Date(Date.now()+7*864e5).toISOString().split("T")[0],{data:o,error:h}=await O.from("projects").insert({name:"ðŸš€ Getting Started with Trackli",user_id:s.id}).select().single();if(h)throw console.error("Project creation error:",h),h;const C=[{title:"Welcome! Click me to see task details",description:`This is the task editor. Here you can:

â€¢ Set due dates and start dates
â€¢ Add time estimates
â€¢ Assign to team members
â€¢ Add subtasks
â€¢ Attach files
â€¢ Set up recurring schedules

Try editing this task, then mark it complete!`,status:"todo",project_id:o.id,my_day_date:t,energy_level:"low",time_estimate:5},{title:"Check out My Day view",description:`My Day is your daily focus list. Tasks appear here if:

â€¢ Their start date is today or earlier
â€¢ You manually add them via the sun icon

Try switching to My Day view in the menu!`,status:"todo",project_id:o.id,start_date:t,energy_level:"medium",time_estimate:10},{title:"Explore the Calendar view",description:`The Calendar view lets you:

â€¢ See tasks on their due dates
â€¢ Drag tasks to reschedule them
â€¢ Switch between daily, weekly, and monthly views

This task is due tomorrow!`,status:"todo",project_id:o.id,due_date:r,energy_level:"medium",time_estimate:15},{title:"Try the Notes feature for meetings",description:`Click the Notes button in the header to:

â€¢ Paste meeting notes
â€¢ Use voice-to-text (speak your notes!)
â€¢ AI extracts action items automatically

Perfect for turning meetings into tasks!`,status:"todo",project_id:o.id,energy_level:"high",time_estimate:20},{title:"Learn keyboard shortcuts",description:`Speed up your workflow with shortcuts:

â€¢ âŒ˜/Ctrl + âŒƒ + T â€” New task
â€¢ âŒ˜/Ctrl + S â€” Save
â€¢ Escape â€” Close modal
â€¢ ? â€” Help menu

Click the ? icon anytime for more!`,status:"backlog",project_id:o.id,due_date:a,energy_level:"low",time_estimate:10},{title:"Complete this task to see the celebration!",description:`When you complete all your My Day tasks, you get a confetti celebration!

Try completing this task by clicking the circle on the left.`,status:"todo",project_id:o.id,my_day_date:t,energy_level:"low",time_estimate:1}],{data:L,error:M}=await O.from("tasks").insert(C).select();if(M)throw M;const A=L.find(q=>q.title.includes("Welcome!"));A&&await O.from("subtasks").insert([{task_id:A.id,title:"Read this task description",completed:!1,position:0},{task_id:A.id,title:"Check out the different views (My Day, Calendar, etc.)",completed:!1,position:1},{task_id:A.id,title:"Complete a task to see it move to Done",completed:!1,position:2}]),ns(!0),await _t()}catch(t){console.error("Error creating welcome project:",t)}};l.useEffect(()=>{_t()},[]);const _t=async()=>{var t,r,a,o,h,C;k(!0),B(null);try{const[L,M,A,q,U,oe,_e]=await Promise.all([O.from("projects").select("*").order("created_at",{ascending:!1}),O.from("tasks").select("*").order("created_at",{ascending:!1}),O.from("project_members").select("project_id, name"),O.from("project_customers").select("project_id, name"),O.from("attachments").select("*"),O.from("task_dependencies").select("task_id, depends_on_id"),O.auth.getUser()]);if(L.error)throw L.error;if(M.error)throw M.error;const Qe={},Me={};(t=A.data)==null||t.forEach(ue=>{Qe[ue.project_id]||(Qe[ue.project_id]=[]),Qe[ue.project_id].push(ue.name)}),(r=q.data)==null||r.forEach(ue=>{Me[ue.project_id]||(Me[ue.project_id]=[]),Me[ue.project_id].push(ue.name)});const nt=L.data.map(ue=>({...ue,members:Qe[ue.id]||[],customers:Me[ue.id]||[]})),rt={},Ot={};(a=U.data)==null||a.forEach(ue=>{rt[ue.task_id]||(rt[ue.task_id]=[]),rt[ue.task_id].push({...ue,file_url:O.storage.from("attachments").getPublicUrl(ue.file_path).data.publicUrl})}),(o=oe.data)==null||o.forEach(ue=>{Ot[ue.task_id]||(Ot[ue.task_id]=[]),Ot[ue.task_id].push(ue)});const lt=M.data.map(ue=>({...ue,attachments:rt[ue.id]||[],dependencies:Ot[ue.id]||[]}));T(nt),c(lt);const st=(h=_e.data)==null?void 0:h.user;if(!((C=st==null?void 0:st.user_metadata)==null?void 0:C.has_been_welcomed)&&nt.length===0&&lt.length===0&&!is.current){is.current=!0,await Xs(),await O.auth.updateUser({data:{has_been_welcomed:!0}});return}const zr=new Date;zr.setHours(0,0,0,0);const Jt=lt.filter(ue=>{if(ue.status!=="backlog"||!ue.start_date)return!1;const Zt=new Date(ue.start_date);return Zt.setHours(0,0,0,0),Zt<=zr});if(Jt.length>0){const ue=Jt.map(Zt=>Zt.id);c(Zt=>Zt.map(Rr=>ue.includes(Rr.id)?{...Rr,status:"todo"}:Rr)),O.from("tasks").update({status:"todo"}).in("id",ue).then(()=>console.log("Auto-moved",ue.length,"tasks to todo"))}}catch(L){console.error("Error fetching data:",L),B(L.message)}finally{k(!1)}},ea=t=>{const r=t.split(`
`),a=ta(t);return a.length>0?a:sa(r)},ta=t=>{const r=t.split(`
`),a=[];let o=-1,h={followUp:-1,owner:-1,dueDate:-1,status:-1},C="|";for(let M=0;M<r.length;M++){const A=r[M].toLowerCase();if(A.includes("|")&&(A.includes("follow")||A.includes("action")||A.includes("task"))){const q=r[M].split("|").map(U=>U.trim().toLowerCase());for(let U=0;U<q.length;U++){const oe=q[U];oe.includes("follow")||oe.includes("action")||oe.includes("task")||oe.includes("item")?h.followUp=U:oe.includes("owner")||oe.includes("assignee")||oe.includes("who")||oe.includes("responsible")?h.owner=U:oe.includes("due")||oe.includes("date")||oe.includes("when")||oe.includes("deadline")?h.dueDate=U:(oe.includes("status")||oe.includes("state")||oe.includes("progress"))&&(h.status=U)}if(h.followUp!==-1){o=M,C="|";break}}if(A.includes("	")&&(A.includes("follow")||A.includes("action")||A.includes("task"))){const q=r[M].split("	").map(U=>U.trim().toLowerCase());for(let U=0;U<q.length;U++){const oe=q[U];oe.includes("follow")||oe.includes("action")||oe.includes("task")||oe.includes("item")?h.followUp=U:oe.includes("owner")||oe.includes("assignee")||oe.includes("who")?h.owner=U:oe.includes("due")||oe.includes("date")||oe.includes("when")?h.dueDate=U:(oe.includes("status")||oe.includes("state"))&&(h.status=U)}if(h.followUp!==-1){o=M,C="	";break}}}if(o===-1||h.followUp===-1)return[];let L=o+1;L<r.length&&/^[\s|:-]+$/.test(r[L].replace(/\t/g,""))&&L++;for(let M=L;M<r.length;M++){const A=r[M].trim();if(!A||!A.includes(C)&&C==="|"||C==="	"&&!A.includes("	")&&A.split(/\s{2,}/).length<2){if(a.length>0)break;continue}const q=C==="|"?A.split("|").map(rt=>rt.trim()):A.split("	").map(rt=>rt.trim()),U=q[h.followUp]||"",oe=h.owner!==-1&&q[h.owner]||"",_e=h.dueDate!==-1&&q[h.dueDate]||"",Qe=h.status!==-1?(q[h.status]||"").toLowerCase():"";if(!U||U.length<3||Qe.includes("done")||Qe.includes("complete")||Qe.includes("closed"))continue;let Me=Pe.date;if(_e){const rt=ra(_e);rt&&(Me=rt)}const nt=/urgent|asap|critical|important|high/i.test(U)||/urgent|asap|critical|important|high/i.test(Qe);a.push({id:`extracted-table-${M}`,title:U.charAt(0).toUpperCase()+U.slice(1),assignee:oe,dueDate:Me,selected:!0,critical:nt})}return a},ra=t=>{if(!t)return null;const r=t.trim().toLowerCase(),a=new Date,o=Yr();if(r==="today"||r==="eod")return a.toISOString().split("T")[0];if(r==="tomorrow")return a.setDate(a.getDate()+1),a.toISOString().split("T")[0];if(r==="asap")return a.toISOString().split("T")[0];const C=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(r);if(C!==-1){let A=(C-a.getDay()+7)%7;return A===0&&(A=7),a.setDate(a.getDate()+A),a.toISOString().split("T")[0]}let L=t.match(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/);if(L){let A,q;o?(q=parseInt(L[1])-1,A=parseInt(L[2])):(A=parseInt(L[1]),q=parseInt(L[2])-1);const U=L[3].length===2?2e3+parseInt(L[3]):parseInt(L[3]),oe=new Date(U,q,A);if(!isNaN(oe.getTime()))return oe.toISOString().split("T")[0]}if(L=t.match(/(\d{1,2})[\/\-](\d{1,2})(?!\d)/),L){let A,q;o?(q=parseInt(L[1])-1,A=parseInt(L[2])):(A=parseInt(L[1]),q=parseInt(L[2])-1);const U=new Date(a.getFullYear(),q,A);if(!isNaN(U.getTime()))return U.toISOString().split("T")[0]}const M=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(L=t.match(/(\d{1,2})\s*(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i),L){const A=parseInt(L[1]),q=M.indexOf(L[2].toLowerCase()),U=new Date(a.getFullYear(),q,A);if(!isNaN(U.getTime()))return U.toISOString().split("T")[0]}if(L=t.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s*(\d{1,2})/i),L){const A=parseInt(L[2]),q=M.indexOf(L[1].toLowerCase()),U=new Date(a.getFullYear(),q,A);if(!isNaN(U.getTime()))return U.toISOString().split("T")[0]}return null},sa=t=>{var h,C,L,M,A;const r=[],a=[/^[-*â€¢]\s*\[?\s*\]?\s*(.+)/i,/^(?:action|todo|task|to-do|to do)[:\s]+(.+)/i,/^(\d+[.)]\s*.+)/i,/(.+?)\s+(?:will|to|should|must|needs? to|has to)\s+(.+)/i,/(?:@|assigned to:?)\s*(\w+)\s*[-:]\s*(.+)/i,/^(?:ai|action item)[:\s]+(.+)/i,/^follow[ -]?up[:\s]+(.+)/i],o=/^(schedule|send|create|update|review|prepare|draft|complete|finish|follow|contact|call|email|write|set up|organize|coordinate|check|confirm|arrange|book|submit|share|distribute|circulate|research|investigate|look into|find|get|obtain|collect|gather|compile|analyze|assess|evaluate|implement|execute|deliver|present|discuss|meet|sync|align|escalate|resolve|fix|address)/i;for(let q=0;q<t.length;q++){const U=t[q].trim();if(!U)continue;let oe=!1,_e="",Qe="";for(const Me of a){const nt=U.match(Me);if(nt){Me.toString().includes("will|to|should")?(Qe=((h=nt[1])==null?void 0:h.trim())||"",_e=`${Qe} ${((C=nt[2])==null?void 0:C.trim())||""}`.trim()):Me.toString().includes("@|assigned")?(Qe=((L=nt[1])==null?void 0:L.trim())||"",_e=((M=nt[2])==null?void 0:M.trim())||""):_e=((A=nt[1])==null?void 0:A.trim())||"",oe=!0;break}}if(!oe&&o.test(U)&&(_e=U,oe=!0),!oe&&U.includes(":")&&!U.startsWith("http")){const Me=U.split(":");if(Me.length>=2&&Me[0].length<30){const nt=Me[0].trim(),rt=Me.slice(1).join(":").trim();rt.length>5&&o.test(rt)&&(Qe=nt,_e=rt,oe=!0)}}if(oe&&_e.length>3){_e=_e.replace(/^[-*â€¢]\s*\[?\s*\]?\s*/,"").replace(/^\d+[.)]\s*/,"").replace(/^(?:action|todo|task|ai|action item|follow[ -]?up)[:\s]*/i,"").trim();let Me=Pe.date;const nt=[/by\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/by\s+(\d{1,2}\/\d{1,2})/i,/due\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/(eod|end of day|eow|end of week|asap)/i];for(const rt of nt){const Ot=_e.match(rt);if(Ot){const lt=Ot[1].toLowerCase(),st=new Date;if(lt==="today"||lt==="eod"||lt==="end of day")Me=st.toISOString().split("T")[0];else if(lt==="tomorrow")st.setDate(st.getDate()+1),Me=st.toISOString().split("T")[0];else if(lt==="asap")Me=st.toISOString().split("T")[0];else if(lt==="eow"||lt==="end of week"){const Pr=(5-st.getDay()+7)%7||7;st.setDate(st.getDate()+Pr),Me=st.toISOString().split("T")[0]}else if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(lt)){let Jt=(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(lt)-st.getDay()+7)%7;Jt===0&&(Jt=7),st.setDate(st.getDate()+Jt),Me=st.toISOString().split("T")[0]}_e=_e.replace(rt,"").trim()}}_e.length>3&&r.push({id:`extracted-${q}`,title:_e.charAt(0).toUpperCase()+_e.slice(1),assignee:Qe,dueDate:Me,selected:!0,critical:/urgent|asap|critical|important/i.test(_e)})}}return r},aa=async()=>{if(!(!Pe.notes.trim()&&!Dt)){ls(!0);try{if(Dt){const t=await fetch("/api/extract-from-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:Dt.base64,mediaType:Dt.mediaType})});if(!t.ok){const o=await t.json();throw new Error(o.error||"Failed to extract tasks from image")}const a=(await t.json()).tasks.map((o,h)=>({id:`img-${Date.now()}-${h}`,title:o.title,assignee:o.assignee||"",dueDate:o.dueDate||Pe.date,critical:o.isCritical||!1,selected:!0}));Nt(a),St(!0)}else setTimeout(()=>{const t=ea(Pe.notes);Nt(t),St(!0)},300)}catch(t){console.error("Extraction error:",t),B(t.message)}finally{ls(!1)}}},na=t=>{var h;const r=(h=t.target.files)==null?void 0:h[0];if(!r){console.log("No file selected");return}console.log("File selected:",r.name,r.type,r.size);const a=new Image,o=new FileReader;o.onload=C=>{a.onload=()=>{let{width:A,height:q}=a;if(A>2e3||q>2e3){const Me=Math.min(2e3/A,2e3/q);A=Math.round(A*Me),q=Math.round(q*Me)}const U=document.createElement("canvas");U.width=A,U.height=q,U.getContext("2d").drawImage(a,0,0,A,q);const _e=U.toDataURL("image/jpeg",.8),Qe=_e.split(",")[1];console.log("Compressed image size:",Math.round(Qe.length*.75/1024),"KB"),Tr({base64:Qe,mediaType:"image/jpeg",preview:_e,name:r.name||"photo.jpg"}),B(null)},a.onerror=()=>{console.error("Failed to load image"),B("Failed to load image")},a.src=C.target.result},o.onerror=()=>{console.error("FileReader error:",o.error),B("Failed to read image file")},o.readAsDataURL(r)},ia=async()=>{var r;const t=wt.filter(a=>a.selected);if(t.length!==0){_(!0),B(null);try{const a=Pe.projectId||((r=x[0])==null?void 0:r.id);if(!a)throw new Error("Please select a project");const o=x.find(C=>C.id===a),h=(o==null?void 0:o.members)||[];for(const C of t){let L=null;C.assignee&&(L=h.find(q=>q.toLowerCase().includes(C.assignee.toLowerCase())||C.assignee.toLowerCase().includes(q.toLowerCase().split(" ")[0])));const M={title:C.title,description:Pe.title?`From meeting: ${Pe.title}`:"",project_id:a,status:"todo",critical:C.critical,start_date:null,due_date:C.dueDate||null,assignee:L||C.assignee||null,time_estimate:null,energy_level:"medium",category:"meeting_followup",source:"meeting",source_link:null,customer:null,notes:null},{error:A}=await O.from("tasks").insert(M);if(A)throw A}await _t(),Ut(!1),vt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),Nt([]),St(!1),yr(""),Mr()}catch(a){console.error("Error creating tasks:",a),B(a.message)}finally{_(!1)}}},ar=(t,r,a)=>{Nt(o=>o.map(h=>h.id===t?{...h,[r]:a}:h))},oa=t=>{Nt(r=>r.filter(a=>a.id!==t))},la=async t=>{_(!0),B(null);try{if(t.id){const{error:a}=await O.from("projects").update({name:t.name}).eq("id",t.id);if(a)throw a;await O.from("project_members").delete().eq("project_id",t.id),await O.from("project_customers").delete().eq("project_id",t.id),t.members.length>0&&await O.from("project_members").insert(t.members.map(o=>({project_id:t.id,name:o}))),t.customers.length>0&&await O.from("project_customers").insert(t.customers.map(o=>({project_id:t.id,name:o})))}else{const{data:a,error:o}=await O.from("projects").insert({name:t.name,user_id:s.id}).select().single();if(o)throw o;t.members.length>0&&await O.from("project_members").insert(t.members.map(h=>({project_id:a.id,name:h}))),t.customers.length>0&&await O.from("project_customers").insert(t.customers.map(h=>({project_id:a.id,name:h})))}await _t();const r=!t.id;v(r?"âœ“ Project created":"âœ“ Project saved")}catch(r){console.error("Error saving project:",r),B(r.message)}finally{_(!1)}},cs=async t=>{_(!0);try{const{error:r}=await O.from("projects").delete().eq("id",t);if(r)throw r;He===t&&De("all"),await _t()}catch(r){console.error("Error deleting project:",r),B(r.message)}finally{_(!1)}},Ir=async t=>{const r=x.find(o=>o.id===t),a=r!=null&&r.archived?"unarchive":"archive";_(!0);try{const{error:o}=await O.from("projects").update({archived:!(r!=null&&r.archived)}).eq("id",t);if(o)throw o;T(x.map(h=>h.id===t?{...h,archived:!h.archived}:h)),te({taskId:null,previousStatus:null,taskTitle:`Project ${a}d`}),setTimeout(()=>te(null),3e3)}catch(o){console.error(`Error ${a}ing project:`,o),Fr(o.message||`Failed to ${a} project`,null,`Project ${a} failed`)}finally{_(!1)}},da=async t=>{if($e.size!==0){_(!0);try{const r=Array.from($e),{error:a}=await O.from("tasks").update({status:t}).in("id",r);if(a)throw a;c(g.map(o=>$e.has(o.id)?{...o,status:t}:o)),te({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks moved to ${t.replace("_"," ")}`}),setTimeout(()=>te(null),3e3),Lt(!1),xt(new Set)}catch(r){console.error("Error bulk updating tasks:",r),B(r.message)}finally{_(!1)}}},ca=async()=>{$e.size!==0&&Ct({title:"Delete Tasks",message:`Are you sure you want to delete ${$e.size} selected task${$e.size===1?"":"s"}? This cannot be undone.`,confirmLabel:"Delete",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:async()=>{_(!0);try{const t=Array.from($e),{error:r}=await O.from("tasks").delete().in("id",t);if(r)throw r;c(g.filter(a=>!$e.has(a.id))),te({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks deleted`}),setTimeout(()=>te(null),3e3),Lt(!1),xt(new Set),Ct(null)}catch(t){console.error("Error bulk deleting tasks:",t),B(t.message)}finally{_(!1)}}})},xa=async t=>{var r;if(!($e.size===0||!t)){_(!0);try{const a=Array.from($e),{error:o}=await O.from("tasks").update({project_id:t}).in("id",a);if(o)throw o;const h=((r=x.find(C=>C.id===t))==null?void 0:r.name)||"project";c(g.map(C=>$e.has(C.id)?{...C,project_id:t}:C)),te({taskId:null,previousStatus:null,taskTitle:`${a.length} tasks moved to ${h}`}),setTimeout(()=>te(null),3e3),Lt(!1),xt(new Set)}catch(a){console.error("Error bulk moving tasks:",a),B(a.message)}finally{_(!1)}}},ga=async t=>{if($e.size!==0){_(!0);try{const r=Array.from($e),{error:a}=await O.from("tasks").update({assignee:t||null}).in("id",r);if(a)throw a;c(g.map(o=>$e.has(o.id)?{...o,assignee:t||null}:o)),te({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks assigned to ${t||"nobody"}`}),setTimeout(()=>te(null),3e3),Lt(!1),xt(new Set)}catch(r){console.error("Error bulk assigning tasks:",r),B(r.message)}finally{_(!1)}}},ma=async()=>{if($e.size!==0){_(!0);try{const t=Array.from($e),r=g.filter(C=>$e.has(C.id)),o=!(r.filter(C=>C.critical).length>r.length/2),{error:h}=await O.from("tasks").update({critical:o}).in("id",t);if(h)throw h;c(g.map(C=>$e.has(C.id)?{...C,critical:o}:C)),te({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks ${o?"marked critical":"unmarked"}`}),setTimeout(()=>te(null),3e3),Lt(!1),xt(new Set)}catch(t){console.error("Error bulk toggling critical:",t),B(t.message)}finally{_(!1)}}},ha=()=>{xt(new Set(Mt.map(t=>t.id)))},ua=()=>{xt(new Set)},xs=async(t,r=[],a=[])=>{_(!0),B(null);try{let o=t.id;if(o){const{error:C}=await O.from("tasks").update({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).eq("id",o);if(C)throw C;await O.from("task_dependencies").delete().eq("task_id",o),t.dependencies&&t.dependencies.length>0&&await O.from("task_dependencies").insert(t.dependencies.map(q=>({task_id:o,depends_on_id:q})));const L=a.map(q=>q.id),{data:M}=await O.from("attachments").select("id, file_path").eq("task_id",o),A=(M==null?void 0:M.filter(q=>!L.includes(q.id)))||[];for(const q of A)await O.storage.from("attachments").remove([q.file_path]),await O.from("attachments").delete().eq("id",q.id)}else{const{data:C,error:L}=await O.from("tasks").insert({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).select().single();if(L)throw L;if(o=C.id,t.dependencies&&t.dependencies.length>0&&await O.from("task_dependencies").insert(t.dependencies.map(M=>({task_id:o,depends_on_id:M}))),t.recurrence_type&&t.start_date){const M=t.recurrence_end_date?Ls(t.start_date,t.recurrence_type,0,t.recurrence_end_date):Ls(t.start_date,t.recurrence_type,t.recurrence_count||8);let A=null;t.due_date&&t.start_date&&(A=new Date(t.due_date)-new Date(t.start_date));const q=M.map(U=>{let oe=null;if(A!==null){const _e=new Date(U);_e.setTime(_e.getTime()+A),oe=_e.toISOString().split("T")[0]}return{title:t.title,description:t.description,project_id:t.project_id,status:"backlog",critical:t.critical,start_date:U,start_time:t.start_time||null,end_time:t.end_time||null,due_date:oe,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type,recurrence_parent_id:o,subtasks:t.subtasks||[]}});if(q.length>0){const{error:U}=await O.from("tasks").insert(q);U&&console.error("Error creating future occurrences:",U)}}}for(const C of r){const L=`${s.id}/${o}/${Date.now()}_${C.name}`,{error:M}=await O.storage.from("attachments").upload(L,C);if(M)throw M;await O.from("attachments").insert({task_id:o,file_name:C.name,file_path:L,file_size:C.size,file_type:C.type})}await _t();const h=!t.id;v(h?"âœ“ Task created":"âœ“ Task saved")}catch(o){console.error("Error saving task:",o),Fr(o.message||"Failed to save task",()=>xs(t,r,a),"Save failed")}finally{_(!1)}},nr=async(t,r=!1)=>{const a=g.find(o=>o.id===t);if(a&&(a.recurrence_type||a.recurrence_parent_id)&&!r&&!tr){Nr({taskId:t,title:a.title,parentId:a.recurrence_parent_id||a.id});return}_(!0);try{if(r&&a){const o=a.recurrence_parent_id||a.id,h=g.filter(L=>L.id===o||L.recurrence_parent_id===o);for(const L of h){const{data:M}=await O.from("attachments").select("file_path").eq("task_id",L.id);(M==null?void 0:M.length)>0&&await O.storage.from("attachments").remove(M.map(A=>A.file_path))}const{error:C}=await O.from("tasks").delete().or(`id.eq.${o},recurrence_parent_id.eq.${o}`);if(C)throw C;await _t(),v(`Deleted ${h.length} recurring tasks`)}else{const{data:o}=await O.from("attachments").select("file_path").eq("task_id",t);(o==null?void 0:o.length)>0&&await O.storage.from("attachments").remove(o.map(C=>C.file_path));const{error:h}=await O.from("tasks").delete().eq("id",t);if(h)throw h;await _t(),v("Task deleted")}}catch(o){console.error("Error deleting task:",o),Fr(o.message||"Failed to delete task",()=>nr(t,r),"Delete failed")}finally{_(!1),Nr(null)}},pa=async(t,r,a=null)=>{var h;if(!t.trim())return;const o=r||((h=x[0])==null?void 0:h.id);if(o)try{_(!0);const{data:C,error:L}=await O.from("tasks").insert({title:t.trim(),project_id:o,status:"backlog",due_date:a,energy_level:"medium",category:"deliverable",source:"ad_hoc"}).select().single();if(L)throw L;c(M=>[...M,{...C,attachments:[],dependencies:[]}]),Kt(""),Yt(!1)}catch(C){console.error("Error creating task:",C),B(C.message)}finally{_(!1)}},Wr=async(t,r)=>{try{const a=g.find(h=>h.id===t),{error:o}=await O.from("tasks").update({my_day_date:r}).eq("id",t);if(o)throw o;c(h=>h.map(C=>C.id===t?{...C,my_day_date:r}:C)),r&&new Date(r).toDateString()===new Date().toDateString()&&v(`â˜€ï¸ Added "${a==null?void 0:a.title}" to My Day`)}catch(a){console.error("Error updating my_day_date:",a)}},Tt=async(t,r)=>{try{const a=g.find(C=>C.id===t),{error:o}=await O.from("tasks").update({status:r,completed_at:r==="done"?new Date().toISOString():null}).eq("id",t);if(o)throw o;const h=a==null?void 0:a.status;r==="done"&&(a!=null&&a.recurrence_type)?await _t():c(g.map(C=>C.id===t?{...C,status:r,completed_at:r==="done"?new Date().toISOString():null}:C)),r==="done"&&(te({taskId:t,previousStatus:h,taskTitle:a==null?void 0:a.title}),setTimeout(()=>te(null),5e3))}catch(a){console.error("Error updating task status:",a),B(a.message)}},gs=async(t,r)=>{try{const{error:a}=await O.from("tasks").update({due_date:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,due_date:r}:o))}catch(a){console.error("Error setting due date:",a),B(a.message)}},ms=async(t,r)=>{try{const{error:a}=await O.from("tasks").update({title:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,title:r}:o))}catch(a){console.error("Error updating task title:",a),B(a.message)}},hs=async(t,r)=>{try{const{error:a}=await O.from("tasks").update({critical:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,critical:r}:o)),v(r?"ðŸš© Marked as critical":"âœ“ Critical flag removed")}catch(a){console.error("Error toggling critical:",a),B(a.message)}},ya=async(t,r)=>{try{const{error:a}=await O.from("tasks").update(r).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,...r}:o))}catch(a){console.error("Error updating task from calendar:",a),B(a.message)}},ba=async()=>{if(P)try{await O.from("tasks").update({status:P.previousStatus}).eq("id",P.taskId),c(t=>t.map(r=>r.id===P.taskId?{...r,status:P.previousStatus}:r)),te(null)}catch(t){console.error("Error undoing:",t),B(t.message)}},us=(t,r)=>{Kr(r),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",r.id)},ps=(t,r)=>{t.preventDefault()},ys=(t,r)=>{t.preventDefault(),er&&er.status!==r&&Tt(er.id,r),Kr(null)},fa=[...new Set(g.map(t=>t.assignee).filter(Boolean))];[...new Set(g.map(t=>t.customer).filter(Boolean))];const ir=bt||ft||Cr||_r||Sr||jt||kt||Ht.trim()||Object.keys(Ae).length>0,bs=()=>{cr(!1),xr(!1),Jr(!1),Zr(!1),Xr(!1),gr(!1),mr(!1),hr(""),It({}),es("")},fs=t=>{const r={id:Date.now(),name:t,filters:{selectedProjectId:He,filterCritical:bt,filterOverdue:ft,filterBlocked:Cr,filterActive:_r,filterBacklog:Sr,filterDueToday:jt,filterMyDay:kt,searchQuery:Ht,fieldFilters:Ae}},a=[...Wt,r];rs(a),localStorage.setItem("trackli_saved_views",JSON.stringify(a)),ur(!1),ss("")},ja=t=>{De(t.filters.selectedProjectId||"all"),cr(t.filters.filterCritical||!1),xr(t.filters.filterOverdue||!1),Jr(t.filters.filterBlocked||!1),Zr(t.filters.filterActive||!1),Xr(t.filters.filterBacklog||!1),gr(t.filters.filterDueToday||!1),mr(t.filters.filterMyDay||!1),hr(t.filters.searchQuery||""),It(t.filters.fieldFilters||{})},ka=t=>{const r=Wt.filter(a=>a.id!==t);rs(r),localStorage.setItem("trackli_saved_views",JSON.stringify(r))},va=t=>{const r={id:Date.now(),name:t.name,title:t.title||"",description:t.description||"",project_id:t.project_id||"",category:t.category||"deliverable",energy_level:t.energy_level||"medium",time_estimate:t.time_estimate||"",source:t.source||"ad_hoc",assignee:t.assignee||"",customer:t.customer||"",critical:t.critical||!1,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,subtasks:t.subtasks||[]},a=[...Lr,r];return as(a),localStorage.setItem("trackli_task_templates",JSON.stringify(a)),r},wa=t=>{const r=Lr.filter(a=>a.id!==t);as(r),localStorage.setItem("trackli_task_templates",JSON.stringify(r))};g.filter(t=>He!=="all"&&t.project_id!==He?!1:or(t)).length;const Mt=g.filter(t=>{var r,a,o,h,C,L;if(!Ce&&t.project_id){const M=x.find(A=>A.id===t.project_id);if(M!=null&&M.archived)return!1}if(He!=="all"&&t.project_id!==He||bt&&!t.critical||ft&&ht(t.due_date,t.status)!=="overdue"||Cr&&!gt(t,g)||_r&&!["todo","in_progress"].includes(t.status)||Sr&&t.status!=="backlog"||jt&&ht(t.due_date,t.status)!=="today"||kt&&!qr(t))return!1;if(Ht.trim()){const M=Ht.toLowerCase(),A=(r=t.title)==null?void 0:r.toLowerCase().includes(M),q=(a=t.description)==null?void 0:a.toLowerCase().includes(M),U=(o=t.customer)==null?void 0:o.toLowerCase().includes(M),oe=(h=t.assignee)==null?void 0:h.toLowerCase().includes(M),_e=(L=(C=x.find(Qe=>Qe.id===t.project_id))==null?void 0:C.name)==null?void 0:L.toLowerCase().includes(M);if(!A&&!q&&!U&&!oe&&!_e)return!1}for(const[M,A]of Object.entries(Ae))if(A==="__blank__"){if(M==="assignee"&&t.assignee||M==="customer"&&t.customer||M==="category"&&t.category||M==="energy_level"&&t.energy_level||M==="source"&&t.source||M==="due_date"&&t.due_date)return!1}else if(M==="assignee"&&t.assignee!==A||M==="customer"&&t.customer!==A||M==="category"&&t.category!==A||M==="energy_level"&&t.energy_level!==A||M==="source"&&t.source!==A||M==="due_date"&&A==="has_date"&&!t.due_date)return!1;if(zs&&!or(t))return!1;if(Dr!=="all"&&ts){const M=parseInt(ts);if(Dr==="lt"&&(t.time_estimate||0)>=M||Dr==="gt"&&(t.time_estimate||0)<=M)return!1}return!0}),js=t=>{if(!t.start_date)return!1;const r=new Date;r.setHours(0,0,0,0);const a=new Date(t.start_date);return a.setHours(0,0,0,0),a>r},Na=(t,r=!1)=>{const a={high:0,medium:1,low:2};return[...t].sort((o,h)=>{if(r){const q=js(o),U=js(h);if(q&&!U)return 1;if(!q&&U)return-1}if(o.critical&&!h.critical)return-1;if(!o.critical&&h.critical)return 1;const C=!!o.due_date,L=!!h.due_date;if(C&&L){const q=new Date(o.due_date)-new Date(h.due_date);if(q!==0)return q}else{if(C&&!L)return-1;if(!C&&L)return 1}const M=a[o.energy_level]??1,A=a[h.energy_level]??1;return M!==A?M-A:new Date(o.created_at)-new Date(h.created_at)})},Or=t=>{const r=Mt.filter(a=>a.status===t);return t==="done"?[...r].sort((a,o)=>{const h=a.completed_at?new Date(a.completed_at):new Date(0);return(o.completed_at?new Date(o.completed_at):new Date(0))-h}):Na(r,t==="backlog")},jr=Mt.filter(t=>t.critical&&t.status!=="done").length,kr=Mt.filter(t=>ht(t.due_date,t.status)==="overdue").length,vr=Mt.filter(t=>ht(t.due_date,t.status)==="today").length;Mt.filter(t=>gt(t,g)&&t.status!=="done").length;const wr=Mt.filter(t=>qr(t)).length;Mt.filter(t=>t.status!=="done").reduce((t,r)=>t+(r.time_estimate||0),0);const Ca=(()=>{const t=g.filter(h=>h.status==="done"&&h.completed_at);if(t.length===0)return 0;const r=new Set(t.map(h=>new Date(h.completed_at).toDateString()));let a=0,o=new Date;for(o.setHours(0,0,0,0);r.has(o.toDateString());)a++,o.setDate(o.getDate()-1);if(a===0){const h=new Date;for(h.setDate(h.getDate()-1),h.setHours(0,0,0,0);r.has(h.toDateString());)a++,h.setDate(h.getDate()-1)}return a})(),ks=(()=>{const t=new Date,r=new Date(t);r.setDate(r.getDate()-7);const a=g.filter(o=>{if(o.status!=="done"||!o.completed_at)return!1;const h=new Date(o.completed_at);return h>=r&&h<=t});return{count:a.length,time:a.reduce((o,h)=>o+(h.time_estimate||0),0)}})(),vs=new Date;vs.setHours(0,0,0,0);const _a=g.filter(t=>t.status==="done"&&t.completed_at&&new Date(t.completed_at)>=vs).length;return g.filter(t=>t.due_date===new Date().toISOString().split("T")[0]&&t.status!=="done").length,p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full drop-shadow-xl",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"loading-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"loading-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#loading-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#loading-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Trackli"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading your tasks..."})]})}):e.jsx(Fa,{onRefresh:_t,children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-200",children:[V&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-amber-500 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m-3.536-3.536a4 4 0 010-5.656m-7.072 7.072a9 9 0 010-12.728m3.536 3.536a4 4 0 010 5.656"})}),"You're offline â€” changes won't sync until you reconnect"]})}),sr&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl p-4 shadow-lg animate-in slide-in-from-bottom-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:sr.details||"Error"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:sr.message}),sr.retryAction&&e.jsx("button",{onClick:()=>{Er(null),sr.retryAction()},className:"mt-2 px-3 py-1 bg-red-100 dark:bg-red-800/50 hover:bg-red-200 dark:hover:bg-red-800 text-red-700 dark:text-red-200 rounded-lg text-xs font-medium transition-colors",children:"Try Again"})]}),e.jsx("button",{onClick:()=>Er(null),className:"p-2 sm:p-1 hover:bg-red-100 dark:hover:bg-red-800/50 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),P&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-4 animate-in slide-in-from-bottom-5",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm font-medium",children:['"',P.taskTitle,'" marked as done']}),e.jsx("button",{onClick:ba,className:"px-3 py-1 bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg text-sm font-semibold transition-colors",children:"Undo"}),e.jsx("button",{onClick:()=>te(null),className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),pe&&e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[pe.type==="success"?e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-blue-400 dark:text-blue-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:pe.message}),e.jsx("button",{onClick:()=>m(null),className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>F(!H),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",title:"Menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 sm:bg-black/20 animate-fadeIn",onClick:()=>F(!1)}),e.jsxs("div",{className:"fixed sm:absolute top-0 sm:top-full left-0 h-screen sm:h-auto w-72 sm:w-56 sm:mt-2 sm:rounded-xl shadow-2xl border-r sm:border border-gray-200 dark:border-gray-700 py-2 z-[1000] animate-slideInFromLeft sm:animate-none overflow-y-auto",style:{backgroundColor:b?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"sm:hidden flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Menu"}),e.jsx("button",{onClick:()=>F(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsxs("button",{onClick:()=>{de("myday"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="myday"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.myday(),e.jsx("span",{className:"font-medium",children:"My Day"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"D"]})]}),e.jsxs("button",{onClick:()=>{de("board"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="board"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.board(),e.jsx("span",{className:"font-medium",children:"Board"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"B"]})]}),e.jsxs("button",{onClick:()=>{de("calendar"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="calendar"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.calendar(),e.jsx("span",{className:"font-medium",children:"Calendar"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"L"]})]}),e.jsxs("button",{onClick:()=>{de("tasks"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="tasks"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.alltasks(),e.jsx("span",{className:"font-medium",children:"All Tasks"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"A"]})]}),e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Manage"}),e.jsxs("button",{onClick:()=>{de("projects"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="projects"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.projects(),e.jsx("span",{className:"font-medium",children:"Projects"})]}),e.jsxs("button",{onClick:()=>{de("progress"),F(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="progress"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Et.progress(),e.jsx("span",{className:"font-medium",children:"Progress"})]}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Settings"}),e.jsxs("button",{onClick:()=>{Z(!b)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:b?"â˜€ï¸":"ðŸŒ™"}),e.jsx("span",{className:"font-medium",children:b?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:()=>{var t;vt({...Pe,projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Ut(!0),F(!1)},disabled:x.length===0,className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"font-medium",children:"Import Notes"})]}),e.jsxs("button",{onClick:()=>{me(!0),F(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sm:hidden",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsx("span",{className:"font-medium",children:"Send Feedback"})]}),e.jsxs("button",{onClick:()=>{Fe(!0),F(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:"âš™ï¸"}),e.jsx("span",{className:"font-medium",children:"Settings"})]}),e.jsxs("button",{onClick:()=>{d(),F(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx("span",{className:"text-lg",children:"ðŸšª"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]}),e.jsx("div",{className:"h-8"})]})]})]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:Y==="myday"?"â˜€ï¸ My Day":Y==="board"?"ðŸ“‹ Board":Y==="calendar"?"ðŸ—“ Calendar":Y==="tasks"?"ðŸ—ƒï¸ All Tasks":Y==="progress"?"ðŸ“Š Progress":"ðŸ“ Projects"})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"mobile-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"mobile-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#mobile-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#mobile-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("span",{className:"text-base font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden xl:flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"desktop-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"desktop-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#desktop-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#desktop-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h1",{className:"hidden sm:block text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>Z(!b),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:b?"Light mode":"Dark mode",children:b?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),Y==="board"&&e.jsx("button",{onClick:()=>{Lt(!qt),xt(new Set)},className:`hidden sm:block p-2 rounded-xl transition-colors ${qt?"bg-indigo-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400"}`,title:"Bulk select",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("button",{onClick:()=>{$t(null),At(!0)},className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-teal-500 text-white rounded-lg sm:rounded-xl hover:bg-teal-600 transition-colors text-sm font-medium items-center gap-1.5",title:"âŒ˜P",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"P"}),"roject"]})]}),e.jsxs("button",{onClick:()=>{it(null),Oe(!0)},disabled:x.length===0,className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg sm:rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all text-sm font-medium items-center gap-1.5 shadow-lg shadow-indigo-500/25 disabled:opacity-50",title:`${f}T`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"T"}),"ask"]})]}),e.jsxs("button",{onClick:()=>{var t;vt({...Pe,projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Ut(!0)},disabled:x.length===0,className:"hidden sm:flex px-3 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 transition-colors text-sm font-medium items-center gap-1.5 disabled:opacity-50",title:"Import Meeting Notes (âŒ˜N)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Notes"})]}),e.jsx("button",{onClick:()=>z(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Help Guide",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(s==null?void 0:s.email)===Ws&&e.jsx("button",{onClick:()=>fe(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"View Feedback",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("button",{onClick:()=>Fe(!0),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Settings",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:d,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Sign Out",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),Y==="board"&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2",children:[e.jsxs("div",{className:"sm:hidden flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:He,onChange:t=>De(t.target.value),className:"w-full appearance-none pl-3 pr-7 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),x.filter(t=>!t.archived||Ce).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("button",{onClick:()=>Ee(!0),className:`relative p-2.5 rounded-xl border transition-all ${ir?"bg-indigo-500 border-indigo-500 text-white":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),ir&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:Object.keys(Ae).length+(bt?1:0)+(jt?1:0)+(ft?1:0)+(kt?1:0)})]}),e.jsx("button",{onClick:()=>y(!0),className:"p-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-600 dark:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),Le&&Sa.createPortal(e.jsxs("div",{className:"sm:hidden fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>Ee(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Filters"}),e.jsx("button",{onClick:()=>Ee(!1),className:"p-2 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Quick Filters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>cr(!bt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${bt?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["ðŸš© Critical (",jr,")"]}),e.jsxs("button",{onClick:()=>gr(!jt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${jt?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Today (",vr,")"]}),e.jsxs("button",{onClick:()=>xr(!ft),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${ft?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Overdue (",kr,")"]}),e.jsxs("button",{onClick:()=>mr(!kt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${kt?"bg-amber-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["â˜€ï¸ My Day (",wr,")"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Filter by Field"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:Ae.assignee||"",onChange:t=>It(t.target.value?{...Ae,assignee:t.target.value}:(({assignee:r,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Assignee: All"}),e.jsx("option",{value:"__blank__",children:"Assignee: (Blank)"}),[...new Set(g.map(t=>t.assignee).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ae.customer||"",onChange:t=>It(t.target.value?{...Ae,customer:t.target.value}:(({customer:r,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Customer: All"}),e.jsx("option",{value:"__blank__",children:"Customer: (Blank)"}),[...new Set(g.map(t=>t.customer).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ae.category||"",onChange:t=>It(t.target.value?{...Ae,category:t.target.value}:(({category:r,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Category: All"}),dt.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]}),e.jsxs("select",{value:Ae.energy_level||"",onChange:t=>It(t.target.value?{...Ae,energy_level:t.target.value}:(({energy_level:r,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Effort: All"}),e.jsx("option",{value:"high",children:"High Effort"}),e.jsx("option",{value:"medium",children:"Medium Effort"}),e.jsx("option",{value:"low",children:"Low Effort"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[ir&&e.jsx("button",{onClick:()=>{bs(),Ee(!1)},className:"flex-1 p-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:()=>Ee(!1),className:"flex-1 p-3 bg-indigo-500 text-white rounded-xl text-sm font-medium",children:"Apply"})]})]})]}),document.body),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 min-w-max overflow-x-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:He,onChange:t=>De(t.target.value),className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),x.filter(t=>!t.archived||Ce).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>cr(!bt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${bt?"bg-red-500 text-white shadow-sm":jr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"ðŸš©"}),e.jsx("span",{className:"hidden sm:inline",children:"Critical"}),(bt||jr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${bt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:jr})]}),e.jsxs("button",{onClick:()=>gr(!jt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${jt?"bg-orange-500 text-white shadow-sm":vr>0?"text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Due Today"}),e.jsx("span",{className:"sm:hidden",children:"Today"}),(jt||vr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${jt?"bg-white/20":"bg-orange-100 dark:bg-orange-900/50"}`,children:vr})]}),e.jsxs("button",{onClick:()=>xr(!ft),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${ft?"bg-red-600 text-white shadow-sm":kr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"Overdue"}),(ft||kr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${ft?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:kr})]}),e.jsxs("button",{onClick:()=>mr(!kt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${kt?"bg-amber-500 text-white shadow-sm":wr>0?"text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{className:"hidden sm:inline",children:"My Day"}),(kt||wr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${kt?"bg-white/20":"bg-amber-100 dark:bg-amber-900/50"}`,children:wr})]})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Object.entries(Ae).map(([t,r])=>{var h,C;const a={assignee:"Assignee",customer:"Customer",category:"Category",energy_level:"Effort",source:"Source",due_date:"Due Date"};let o=r;return r==="__blank__"?o="(Blank)":t==="category"?o=((h=dt.find(L=>L.id===r))==null?void 0:h.label)||r:t==="energy_level"?o=r==="high"?"High":r==="medium"?"Medium":"Low":t==="source"?o=((C=Pt.find(L=>L.id===r))==null?void 0:C.label)||r:t==="due_date"&&r==="has_date"&&(o="Has Date"),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[a[t],": ",o,e.jsx("button",{onClick:()=>{const L={...Ae};delete L[t],It(L)},className:"ml-0.5 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Ps,onChange:t=>es(t.target.value),className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"+ Filter"}),!Ae.assignee&&e.jsx("option",{value:"assignee",children:"Assignee"}),!Ae.customer&&e.jsx("option",{value:"customer",children:"Customer"}),!Ae.category&&e.jsx("option",{value:"category",children:"Category"}),!Ae.energy_level&&e.jsx("option",{value:"energy_level",children:"Effort"}),!Ae.source&&e.jsx("option",{value:"source",children:"Source"}),!Ae.due_date&&e.jsx("option",{value:"due_date",children:"Due Date"})]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:Ht,onChange:t=>hr(t.target.value),className:"w-32 sm:w-40 pl-7 pr-2 py-1 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent focus:bg-white dark:focus:bg-gray-700 transition-colors"}),e.jsx("svg",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Ht&&e.jsx("button",{onClick:()=>hr(""),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ir&&e.jsxs("button",{onClick:bs,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]}),e.jsxs("label",{className:"hidden sm:flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:Ce,onChange:t=>re(t.target.checked),className:"w-3 h-3 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Archived"]})]}),Wt.length>0&&e.jsxs("div",{className:"relative border-l border-gray-200 dark:border-gray-700 pl-2",children:[e.jsxs("select",{onChange:t=>{const r=Wt.find(a=>a.id===parseInt(t.target.value));r&&ja(r),t.target.value=""},className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600",children:[e.jsx("option",{value:"",children:"ðŸ“‘ Views"}),Wt.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ir&&e.jsx("button",{onClick:()=>ur(!0),className:"p-2 sm:p-1 text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 touch-manipulation",title:"Save current filters as a view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]})]}),x.length===0&&e.jsxs("div",{className:"max-w-md mx-auto mt-12 sm:mt-20 text-center px-6",children:[e.jsx("div",{className:"w-24 h-24 sm:w-20 sm:h-20 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-12 h-12 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-base sm:text-base",children:"Get started by creating your first project."}),e.jsx("button",{onClick:()=>{$t(null),At(!0)},className:"w-full sm:w-auto px-8 py-4 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 text-lg sm:text-base active:scale-95",children:"Create Your First Project"})]}),x.length>0&&e.jsxs(e.Fragment,{children:[qt&&e.jsx("div",{className:"sticky top-[73px] z-30 bg-indigo-600 dark:bg-indigo-700 border-b border-indigo-500",children:e.jsx("div",{className:"max-w-full mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{Lt(!1),xt(new Set)},className:"p-1.5 hover:bg-indigo-500 rounded-lg transition-colors text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("span",{className:"text-white font-medium",children:[$e.size," task",$e.size!==1?"s":""," selected"]}),e.jsx("button",{onClick:ha,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Select all"}),e.jsx("button",{onClick:ua,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Deselect all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>t.target.value&&da(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Status..."}),e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsxs("select",{onChange:t=>t.target.value&&xa(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Project..."}),x.filter(t=>!t.archived).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>ga(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Assign..."}),e.jsx("option",{value:"",children:"Unassign"}),fa.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:ma,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 border border-white/30 text-white rounded-lg text-sm font-medium transition-colors",title:"Toggle critical flag",children:"ðŸš© Critical"}),e.jsx("button",{onClick:ca,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})}),Y==="myday"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ya,{tasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{it(t),Oe(!0)},allTasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),onQuickStatusChange:Tt,onUpdateMyDayDate:Wr,showConfettiPref:Ve})},"myday"),Y==="calendar"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(qa,{tasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{it(t),Oe(!0)},onCreateTask:t=>{it(t),Oe(!0)},allTasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),onUpdateTask:ya,onDeleteTask:nr,viewMode:Se,setViewMode:N,onShowConfirm:Ct})},"calendar"),Y==="tasks"&&e.jsx("div",{className:"animate-fadeIn h-[calc(100vh-140px)]",children:e.jsx(Qa,{tasks:g,projects:x,onEditTask:t=>{it(t),Oe(!0)},allTasks:g})},"tasks"),Y==="projects"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-8 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Projects"}),e.jsxs("button",{onClick:()=>{$t(null),At(!0)},className:"px-3 sm:px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium flex items-center gap-2 text-sm sm:text-base",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 sm:mb-4",children:["Active Projects (",x.filter(t=>!t.archived).length,")"]}),e.jsxs("div",{className:"space-y-3",children:[x.filter(t=>!t.archived).map(t=>{var h,C;const r=g.filter(L=>L.project_id===t.id),a=r.filter(L=>L.status==="done").length,o=r.length>0?Math.round(a/r.length*100):0;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:t.name}),e.jsx("button",{onClick:()=>{$t(t),At(!0)},className:"sm:hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[r.length," tasks"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((h=t.members)==null?void 0:h.length)||0," members"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((C=t.customers)==null?void 0:C.length)||0," customers"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 w-10 text-right",children:[o,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-100 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{De(t.id),de("board")},className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"View Board"}),e.jsx("button",{onClick:()=>{$t(t),At(!0)},className:"hidden sm:block p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>{const L=g.filter(M=>M.project_id===t.id&&M.status!=="done");Ct({title:"Archive Project",message:`Archive "${t.name}"?${L.length>0?` This will hide ${L.length} active task${L.length===1?"":"s"} from the board.`:""} You can unarchive it later.`,confirmLabel:"Archive",confirmStyle:"warning",icon:"ðŸ“¦",onConfirm:()=>Ir(t.id)})},className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors touch-manipulation",title:"Archive project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]})]})},t.id)}),x.filter(t=>!t.archived).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"No active projects yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first project to organize your tasks"})]})]})]}),x.filter(t=>t.archived).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 sm:mb-4",children:["Archived (",x.filter(t=>t.archived).length,")"]}),e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.archived).map(t=>{const r=g.filter(a=>a.project_id===t.id);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4 opacity-75",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¦"}),e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400 truncate",children:t.name})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1 ml-7",children:[r.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>Ir(t.id),className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"Unarchive"}),e.jsx("button",{onClick:()=>{Ct({title:"Delete Project",message:`Delete "${t.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{cs(t.id),Ct(null)}})},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors touch-manipulation",title:"Delete permanently",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)})})]})]},"projects"),Y==="progress"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"ðŸ“Š Progress Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ”¥"}),e.jsx("span",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:Ca})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:_a})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“"}),e.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:ks.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â±ï¸"}),e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Rt(ks.time)||"0h"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time This Week"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Last 7 Days"}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:(()=>{const t=[];for(let a=6;a>=0;a--){const o=new Date;o.setDate(o.getDate()-a),o.setHours(0,0,0,0);const h=o.toDateString(),C=o.toLocaleDateString(void 0,{weekday:"short"}),L=g.filter(M=>M.status==="done"&&M.completed_at&&new Date(M.completed_at).toDateString()===h).length;t.push({dayName:C,count:L,isToday:a===0})}const r=Math.max(...t.map(a=>a.count),1);return t.map((a,o)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"80px"},children:e.jsx("div",{className:`w-full max-w-[40px] rounded-t-lg transition-all ${a.isToday?"bg-gradient-to-t from-indigo-500 to-purple-500":"bg-indigo-200 dark:bg-indigo-800"}`,style:{height:`${Math.max(a.count/r*100,8)}%`}})}),e.jsx("span",{className:`text-xs font-medium ${a.isToday?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:a.dayName}),e.jsx("span",{className:`text-xs ${a.isToday?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-400 dark:text-gray-500"}`,children:a.count})]},o))})()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Project Progress"}),e.jsx("div",{className:"space-y-4",children:x.filter(t=>!t.archived).map(t=>{const r=g.filter(h=>h.project_id===t.id),a=r.filter(h=>h.status==="done").length,o=r.length>0?Math.round(a/r.length*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a,"/",r.length," tasks"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${o}%`}})})]},t.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Recently Completed"}),e.jsxs("div",{className:"space-y-3",children:[g.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,10).map(t=>{const r=x.find(h=>h.id===t.project_id),o=new Date(t.completed_at).toDateString()===new Date().toDateString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==null?void 0:r.name})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:o?"Today":Bt(t.completed_at)})]},t.id)}),g.filter(t=>t.status==="done").length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸ’ª"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-base sm:text-sm",children:"No completed tasks yet"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Get started!"})]})]})]})]}),Y==="board"&&e.jsx("main",{className:"flex-1 px-3 sm:px-6 py-4 sm:py-6 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-900/50 rounded-2xl border border-gray-200/60 dark:border-gray-700/40 shadow-inner p-3 sm:p-4",children:[E&&e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("button",{onClick:()=>ae(Math.max(0,ie-1)),disabled:ie===0,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:ot[ie].color}}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:ot[ie].title}),e.jsx("span",{className:"px-2 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full shadow-sm",children:Or(ot[ie].id).length})]})}),e.jsx("button",{onClick:()=>ae(Math.min(ot.length-1,ie+1)),disabled:ie===ot.length-1,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:ot.map((t,r)=>e.jsx("button",{onClick:()=>ae(r),className:`transition-all duration-200 ${r===ie?"w-6 h-2 rounded-full":"w-2 h-2 rounded-full"}`,style:{backgroundColor:r===ie?t.color:"#D1D5DB"}},t.id))})]}),e.jsx("div",{className:E?"":"flex gap-3 sm:gap-4 lg:gap-6 overflow-x-auto overflow-y-visible pb-4 sm:pb-6 justify-center",children:E?e.jsx(As,{column:ot[ie],tasks:Or(ot[ie].id),projects:x,onEditTask:t=>{it(t),Oe(!0)},onDragStart:us,onDragOver:ps,onDrop:ys,showProject:He==="all",allTasks:g,onQuickComplete:Tt,onStatusChange:Tt,onSetDueDate:gs,bulkSelectMode:qt,selectedTaskIds:$e,onToggleSelect:t=>{const r=new Set($e);r.has(t)?r.delete(t):r.add(t),xt(r)},onAddTask:t=>{it({status:t}),Oe(!0)},onToggleMyDay:(t,r)=>{const a=new Date().toISOString().split("T")[0],o=new Date(Date.now()-864e5).toISOString().split("T")[0];Wr(t,r?a:o)},isMobileFullWidth:!0,draggedTask:er,onUpdateTitle:ms,onToggleCritical:hs},ot[ie].id):ot.map(t=>e.jsx(As,{column:t,tasks:Or(t.id),projects:x,onEditTask:r=>{it(r),Oe(!0)},onDragStart:us,onDragOver:ps,onDrop:ys,showProject:He==="all",allTasks:g,onQuickComplete:Tt,onStatusChange:Tt,onSetDueDate:gs,bulkSelectMode:qt,selectedTaskIds:$e,onToggleSelect:r=>{const a=new Set($e);a.has(r)?a.delete(r):a.add(r),xt(a)},onAddTask:r=>{it({status:r}),Oe(!0)},onToggleMyDay:(r,a)=>{const o=new Date().toISOString().split("T")[0],h=new Date(Date.now()-864e5).toISOString().split("T")[0];Wr(r,a?o:h)},draggedTask:er,onUpdateTitle:ms,onToggleCritical:hs},t.id))}),e.jsx(Ja,{tasks:g.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,5),projects:x,onEditTask:t=>{it(t),Oe(!0)},onUndoComplete:t=>Tt(t,"todo")})]})})]}),e.jsx(Za,{isOpen:Ie,onClose:()=>{Oe(!1),it(null)},task:Vt!=null&&Vt.id&&g.find(t=>t.id===Vt.id)||Vt,projects:x,allTasks:g,onSave:xs,onDelete:nr,loading:w,templates:Lr,onSaveTemplate:va,onDeleteTemplate:wa,onShowConfirm:Ct}),e.jsx(Xa,{isOpen:dr,onClose:()=>{At(!1),$t(null)},project:Os,onSave:la,onDelete:cs,onArchive:Ir,loading:w,onShowConfirm:Ct}),e.jsx(Ga,{isOpen:ve,onClose:()=>y(!1),tasks:g,projects:x,onEditTask:t=>{it(t),Oe(!0)},allTasks:g}),Vs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl shadow-2xl p-6 ${b?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"ðŸš€"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We've created a starter project with sample tasks to help you learn the app."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘†"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click on any task"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Each task has tips on features to explore"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Try My Day view"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your daily focus list - some tasks are already there!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Complete tasks to see them move"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete all My Day tasks for a celebration!"})]})]})]}),e.jsx("button",{onClick:()=>ns(!1),className:"w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Let's Go! ðŸŽ‰"})]})}),e.jsx(Ha,{isOpen:ee,onClose:()=>{z(!1),S("board")},initialTab:u,shortcutModifier:f}),e.jsx(Ea,{isOpen:!!Ge,onClose:()=>Ct(null),onConfirm:()=>{var t;(t=Ge==null?void 0:Ge.onConfirm)==null||t.call(Ge),Ct(null)},title:(Ge==null?void 0:Ge.title)||"",message:(Ge==null?void 0:Ge.message)||"",confirmLabel:Ge==null?void 0:Ge.confirmLabel,confirmStyle:Ge==null?void 0:Ge.confirmStyle,icon:Ge==null?void 0:Ge.icon,loading:w}),tr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 ${b?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ”"})}),e.jsx("h3",{className:`text-lg font-semibold ${b?"text-white":"text-gray-900"}`,children:"Delete Recurring Task"})]}),e.jsxs("p",{className:`mb-6 ${b?"text-gray-300":"text-gray-600"}`,children:['"',tr.title,'" is part of a recurring series. What would you like to do?']}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>nr(tr.taskId,!1),disabled:w,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${b?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Delete only this occurrence"}),e.jsx("button",{onClick:()=>nr(tr.taskId,!0),disabled:w,className:"w-full py-3 px-4 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-all",children:w?"Deleting...":"Delete all future occurrences"}),e.jsx("button",{onClick:()=>Nr(null),disabled:w,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${b?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cancel"})]})]})}),j&&Y==="board"&&!E&&e.jsx(Wa,{step:K,onNext:J,onSkip:()=>{G(!1),localStorage.setItem("trackli_onboarding_complete","true")},onComplete:()=>{G(!1),localStorage.setItem("trackli_onboarding_complete","true")}}),xe&&e.jsx(Va,{view:xe,step:tt,onNext:I,onSkip:()=>ds(xe),onComplete:()=>ds(xe)}),e.jsx(Qr,{isOpen:Hs,onClose:()=>{var t;Ut(!1),Mr(),yr(""),vt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Tr(null)},title:"Import Meeting Notes",wide:!0,children:Gs?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:["Found ",wt.length," potential task",wt.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and edit before creating"})]}),e.jsx("button",{onClick:()=>St(!1),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"â† Back to Notes"})]}),wt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"No action items found in your notes."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Try adding bullet points or phrases like "Action:", "TODO:", or "@name"'})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:wt.map(t=>e.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${t.selected?"border-indigo-200 bg-indigo-50/50":"border-gray-100 bg-gray-50 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:r=>ar(t.id,"selected",r.target.checked),className:"mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:r=>ar(t.id,"title",r.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm font-medium"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Assignee:"}),e.jsx("input",{type:"text",value:t.assignee||"",onChange:r=>ar(t.id,"assignee",r.target.value),placeholder:"Unassigned",className:"px-2 py-1 border border-gray-200 rounded-lg text-xs w-28 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Due:"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:r=>ar(t.id,"dueDate",r.target.value),className:"px-2 py-1 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:t.critical,onChange:r=>ar(t.id,"critical",r.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-red-600",children:"Critical"})]})]})]}),e.jsx("button",{onClick:()=>oa(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[wt.filter(t=>t.selected).length," task",wt.filter(t=>t.selected).length!==1?"s":""," selected"]}),e.jsx("button",{onClick:ia,disabled:wt.filter(t=>t.selected).length===0||w,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create ",wt.filter(t=>t.selected).length," Task",wt.filter(t=>t.selected).length!==1?"s":""]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[Q&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:Q}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paste notes or upload a photo of your notes. We'll extract action items automatically."}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-colors hover:border-indigo-300 dark:hover:border-indigo-600",children:Dt?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Dt.preview,alt:"Uploaded notes",className:"w-full max-h-48 object-contain rounded-lg bg-gray-100 dark:bg-gray-800"}),e.jsx("button",{onClick:()=>Tr(null),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Dt.name," ready for extraction"]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Upload photo of notes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or take a photo on mobile"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:na,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"or paste text notes"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:Pe.title,onChange:t=>vt({...Pe,title:t.target.value}),placeholder:"e.g., Weekly Team Sync",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Date"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("input",{type:"date",value:Pe.date,onChange:t=>vt({...Pe,date:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",style:{maxWidth:"100%",minWidth:0,WebkitAppearance:"none",boxSizing:"border-box",width:"100%"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsx("select",{value:Pe.projectId,onChange:t=>vt({...Pe,projectId:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Notes"}),e.jsx("textarea",{value:Pe.notes,onChange:t=>vt({...Pe,notes:t.target.value}),placeholder:`Paste your meeting notes here...

Best format - Follow-Up table:
| Follow-Up | Owner | Due Date | Status |
| Review proposal | Sarah | 30/12 | Open |
| Send update email | John | Friday | Open |

Or we can extract from:
â€¢ Action items like 'John to send report by Friday'
â€¢ TODO: Review the proposal
â€¢ @Sarah: Update the timeline`,rows:12,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:Dt?"AI will analyze your image for tasks":"Tip: Follow-Up tables are extracted first"}),e.jsx("button",{onClick:aa,disabled:!Pe.notes.trim()&&!Dt||os,className:"px-6 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-medium shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:os?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Extract Tasks"]})})]})]})}),fr&&e.jsx(Ma,{message:fr.message,action:fr.action,actionLabel:fr.actionLabel,onClose:()=>Ks(null)}),Js&&e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Yt(!1)}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-md sm:mx-4 p-4 pr-8 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Quick Add Task"}),e.jsx("button",{type:"button",onClick:()=>{Yt(!1),Kt("")},className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors touch-manipulation active:bg-gray-200 dark:active:bg-gray-700",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{const t=lr(Qt);return e.jsxs("form",{onSubmit:r=>{r.preventDefault(),pa(t.cleanedText||Qt,Br,t.date)},children:[e.jsxs("div",{className:"relative flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:Qt,onChange:r=>Kt(r.target.value),placeholder:'Try "Call mom tomorrow" or "Report due friday"',autoFocus:!0,className:"flex-1 px-4 py-3 text-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),Us&&e.jsx("button",{type:"button",onClick:()=>Qs(r=>Kt(r)),className:`p-3 rounded-xl transition-all ${rr?"bg-red-500 text-white animate-pulse shadow-lg shadow-red-500/40":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400"}`,title:rr?"Stop listening":"Voice input",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:rr?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),rr&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-sm text-red-500",children:"Listening... speak now"})]}),t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due ",Bt(t.date)]}),e.jsxs("span",{className:"text-xs text-gray-400",children:['(from "',t.matched,'")']})]}),!t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Due:"}),Ta.map(r=>e.jsx("button",{type:"button",onClick:()=>Kt(a=>`${a} ${r.label.toLowerCase()}`.trim()),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors whitespace-nowrap",children:r.label},r.label))]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("select",{value:Br,onChange:r=>Ar(r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:x.filter(r=>!r.archived).map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),e.jsx("button",{type:"button",onClick:()=>{const r=lr(Qt),a={title:r.cleanedText||Qt,project_id:Br,due_date:r.date||null};Yt(!1),Kt(""),setTimeout(()=>{it(a),Oe(!0)},100)},className:"px-3 py-2 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors whitespace-nowrap",children:"More options"})]}),e.jsx("button",{type:"submit",disabled:!Qt.trim()||w,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:w?"Adding...":"Add Task"})]})})(),e.jsx("p",{className:"mt-3 text-xs text-center text-gray-400",children:'Try "tomorrow", "next friday", "in 2 weeks"'})]})]}),Rs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>ur(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Save Current View"}),e.jsx("input",{type:"text",value:Gt,onChange:t=>ss(t.target.value),placeholder:"View name (e.g., My Critical Tasks)",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 mb-4",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&Gt.trim()&&fs(Gt.trim())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ur(!1),className:"flex-1 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Gt.trim()&&fs(Gt.trim()),disabled:!Gt.trim(),className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50",children:"Save"})]}),Wt.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Existing views:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Wt.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t.name}),e.jsx("button",{onClick:()=>ka(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",title:"Delete view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]})]})]}),Zs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>$r(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-2xl sm:mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"â˜€ï¸ Plan Your Day"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Pick tasks to focus on today"})]}),e.jsx("button",{onClick:()=>$r(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Energy:"}),Object.entries(zt).map(([t,r])=>e.jsxs("button",{onClick:()=>setActiveFilters(a=>{const o=a.filter(h=>h.type!=="energy");return a.some(h=>h.type==="energy"&&h.value===t)?o:[...o,{type:"energy",value:t}]}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeFilters.some(a=>a.type==="energy"&&a.value===t)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.icon," ",r.label]},t))]}),e.jsxs("div",{className:"space-y-2",children:[g.filter(t=>t.status==="backlog"&&!gt(t,g)).filter(t=>!activeFilters.some(r=>r.type==="energy")||activeFilters.some(r=>r.type==="energy"&&r.value===t.energy_level)).sort((t,r)=>t.critical&&!r.critical?-1:!t.critical&&r.critical?1:t.due_date&&!r.due_date?-1:!t.due_date&&r.due_date?1:0).map(t=>{const r=x.find(h=>h.id===t.project_id),a=zt[t.energy_level],o=or(t);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${t.critical?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":o?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš©"}),o&&e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:r==null?void 0:r.name}),t.time_estimate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:Rt(t.time_estimate)})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded ${a.color}`,children:a.icon})]})]}),e.jsx("button",{onClick:()=>Tt(t.id,"todo"),className:"px-3 py-1.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"+ Today"})]},t.id)}),g.filter(t=>t.status==="backlog"&&!gt(t,g)).length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸŽ‰"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium text-base sm:text-lg mb-1",children:"Backlog is empty!"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"All tasks are either planned or done."})]})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:g.filter(t=>t.status==="todo").length})," tasks in Todo"]}),e.jsx("button",{onClick:()=>{$r(!1),de("myday")},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium",children:"View My Day â†’"})]})})]})]}),e.jsx("button",{onClick:()=>{var t;x.length>0&&(Ar(((t=x[0])==null?void 0:t.id)||""),Yt(!0))},className:"sm:hidden fixed bottom-6 right-6 w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center z-30 active:scale-95 transition-transform",disabled:x.length===0,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("button",{onClick:()=>me(!0),className:"hidden sm:flex fixed bottom-8 right-8 px-4 py-2.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 items-center gap-2 z-30 hover:bg-gray-50 dark:hover:bg-gray-700 hover:scale-105 active:scale-95 transition-all",title:"Send Feedback",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Feedback"})]}),e.jsx(Ba,{isOpen:le,onClose:()=>me(!1),user:s}),e.jsx(Aa,{isOpen:je,onClose:()=>fe(!1),userEmail:s==null?void 0:s.email}),Ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&(Fe(!1),R(!1),Ze(""),ze(!1),n(!1))},children:e.jsxs("div",{className:`w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${b?"bg-gray-800":"bg-white"}`,onKeyDown:t=>{t.key==="Escape"&&(Fe(!1),R(!1),Ze(""),ze(!1),n(!1))},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-inherit",children:[e.jsx("h2",{className:`text-xl font-bold ${b?"text-white":"text-gray-900"}`,children:"Settings"}),e.jsx("button",{onClick:()=>{Fe(!1),R(!1),Ze(""),ze(!1),n(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${b?"text-gray-400":"text-gray-500"}`,children:"Profile"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${b?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:(Ns=ye||((ws=s==null?void 0:s.user_metadata)==null?void 0:ws.display_name)||(s==null?void 0:s.email))==null?void 0:Ns.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm ${b?"text-gray-400":"text-gray-500"}`,children:s==null?void 0:s.email}),e.jsx("div",{className:`text-xs ${b?"text-gray-500":"text-gray-400"}`,children:((Cs=s==null?void 0:s.app_metadata)==null?void 0:Cs.provider)==="google"?"Google Account":"Email Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${b?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),at?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:ye,onChange:t=>Ke(t.target.value),placeholder:"Enter display name",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,autoFocus:!0}),e.jsx("button",{onClick:ne,disabled:Xe,className:"px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50",children:Xe?"...":"Save"}),e.jsx("button",{onClick:()=>{var t;ze(!1),Ke(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||"")},className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${b?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${b?"text-white":"text-gray-900"}`,children:((_s=s==null?void 0:s.user_metadata)==null?void 0:_s.display_name)||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})}),e.jsx("button",{onClick:()=>{var t;Ke(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||""),ze(!0)},className:"text-indigo-500 hover:text-indigo-600 text-sm font-medium",children:"Edit"})]})]})]})]}),((Ss=s==null?void 0:s.app_metadata)==null?void 0:Ss.provider)!=="google"&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${b?"text-gray-400":"text-gray-500"}`,children:"Password"}),e.jsx("div",{className:`p-4 rounded-xl ${b?"bg-gray-700/50":"bg-gray-50"}`,children:mt?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-green-500 text-sm mb-2",children:"âœ“ Password reset email sent!"}),e.jsx("p",{className:`text-xs ${b?"text-gray-400":"text-gray-500"}`,children:"Check your inbox for a link to reset your password."})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${b?"text-white":"text-gray-900"}`,children:"Change Password"}),e.jsx("div",{className:`text-xs ${b?"text-gray-400":"text-gray-500"}`,children:"We'll send a reset link to your email"})]}),e.jsx("button",{onClick:ce,disabled:ct,className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 shrink-0",children:ct?"Sending...":"Send Link"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${b?"text-gray-400":"text-gray-500"}`,children:"Preferences"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${b?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${b?"text-gray-300":"text-gray-700"}`,children:"Default view on login"}),e.jsxs("select",{value:W,onChange:t=>ke("trackli-default-view",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"board",children:"Board"}),e.jsx("option",{value:"myday",children:"My Day"}),e.jsx("option",{value:"calendar",children:"Calendar"}),e.jsx("option",{value:"tasks",children:"All Tasks"}),e.jsx("option",{value:"projects",children:"Projects"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${b?"text-gray-300":"text-gray-700"}`,children:"Week starts on"}),e.jsxs("select",{value:Te,onChange:t=>ke("trackli-week-start",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"0",children:"Sunday"}),e.jsx("option",{value:"1",children:"Monday"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${b?"text-gray-300":"text-gray-700"}`,children:"Show confetti on completion"}),e.jsx("button",{onClick:()=>ke("trackli-show-confetti",Ve?"false":"true"),className:`relative w-12 h-6 rounded-full transition-colors ${Ve?"bg-indigo-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${Ve?"translate-x-6":"translate-x-0.5"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${b?"text-gray-400":"text-gray-500"}`,children:"Data"}),e.jsx("div",{className:`p-4 rounded-xl ${b?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${b?"text-white":"text-gray-900"}`,children:"Clear completed tasks"}),e.jsx("div",{className:`text-xs ${b?"text-gray-400":"text-gray-500"}`,children:"Remove done tasks older than:"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("select",{value:Ne,onChange:t=>Xt(t.target.value),className:`px-2 py-1.5 rounded-lg border text-sm ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"7",children:"7 days"}),e.jsx("option",{value:"14",children:"14 days"}),e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"})]}),e.jsx("button",{onClick:he,disabled:Ye,className:"px-3 py-1.5 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:Ye?"...":"Clear"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${b?"text-gray-400":"text-gray-500"}`,children:"Support"}),e.jsx("div",{className:`p-4 rounded-xl ${b?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${b?"text-white":"text-gray-900"}`,children:"Need help?"}),e.jsx("div",{className:`text-xs ${b?"text-gray-400":"text-gray-500"}`,children:"Get in touch with our support team"})]}),e.jsx("a",{href:"mailto:support@gettrackli.com",className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:"Contact Us"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3 text-red-500",children:"Danger Zone"}),e.jsx("div",{className:`p-4 rounded-xl border-2 border-red-200 dark:border-red-800 ${b?"bg-red-900/20":"bg-red-50"}`,children:qe?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-sm ${b?"text-red-300":"text-red-700"}`,children:"âš ï¸ This will permanently delete all your tasks, projects, and data. This cannot be undone."}),e.jsxs("div",{className:`text-sm ${b?"text-gray-300":"text-gray-700"}`,children:["Type ",e.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," to confirm:"]}),e.jsx("input",{type:"text",value:we,onChange:t=>Ze(t.target.value),placeholder:"Type DELETE",className:`w-full px-3 py-2 rounded-lg border ${b?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-red-500 focus:border-transparent`,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{R(!1),Ze("")},className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${b?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{onClick:$,disabled:we!=="DELETE"||ut,className:"flex-1 px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ut?"Deleting...":"Delete Everything"})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${b?"text-white":"text-gray-900"}`,children:"Delete Account"}),e.jsx("div",{className:`text-sm ${b?"text-gray-400":"text-gray-500"}`,children:"Permanently delete all your data"})]}),e.jsx("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors shrink-0",children:"Delete"})]})})]})]})]})})]})})}export{hn as default};
