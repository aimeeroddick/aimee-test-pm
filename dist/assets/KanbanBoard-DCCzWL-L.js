import{u as As,r as d,s as O,j as e,a as Na,_ as Ca}from"./index-CjdyY71-.js";const _a=()=>Ca(()=>import("./confetti.module-wUsLuJ1J.js"),[]).then(r=>r.default),Ot={high:{bg:"#FEE2E2",text:"#DC2626",icon:"â–°â–°â–°",label:"High Effort"},medium:{bg:"#FEF3C7",text:"#D97706",icon:"â–°â–°",label:"Medium Effort"},low:{bg:"#D1FAE5",text:"#059669",icon:"â–°",label:"Low Effort"}},ot=[{id:"meeting_followup",label:"Meeting Follow-up",color:"#8B5CF6"},{id:"email",label:"Email",color:"#3B82F6"},{id:"deliverable",label:"Deliverable",color:"#10B981"},{id:"admin",label:"Admin",color:"#4B5563"},{id:"review",label:"Review/Approval",color:"#F59E0B"},{id:"call",label:"Call/Meeting",color:"#EC4899"},{id:"research",label:"Research",color:"#14B8A6"}],Wt=[{id:"email",label:"Email",icon:"âœ‰ï¸"},{id:"meeting",label:"Meeting",icon:"ðŸ‘¥"},{id:"slack",label:"Slack/Teams",icon:"ðŸ’¬"},{id:"ad_hoc",label:"Ad-hoc",icon:"ðŸ’¡"},{id:"project_plan",label:"Project Plan",icon:"ðŸ“‹"},{id:"client_request",label:"Client Request",icon:"ðŸŽ¯"}],$s=[{id:null,label:"No recurrence"},{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"biweekly",label:"Bi-weekly (every 2 weeks)"},{id:"monthly",label:"Monthly"}],_t={backlog:"#9CA3AF",todo:"#3B82F6",in_progress:"#EC4899",blocked:"#EF4444",done:"#64748B"},at=[{id:"backlog",title:"Backlog",subtitle:"Future work",color:_t.backlog},{id:"todo",title:"To Do",subtitle:"Ready to start",color:_t.todo},{id:"in_progress",title:"In Progress",subtitle:"Active work",color:_t.in_progress},{id:"done",title:"Done",subtitle:"Completed",color:_t.done}],Vr=5,Hr=10,Ss=[{bg:"#EDE9FE",text:"#7C3AED",border:"#C4B5FD"},{bg:"#DBEAFE",text:"#2563EB",border:"#93C5FD"},{bg:"#D1FAE5",text:"#059669",border:"#6EE7B7"},{bg:"#FEF3C7",text:"#D97706",border:"#FCD34D"},{bg:"#FCE7F3",text:"#DB2777",border:"#F9A8D4"},{bg:"#E0E7FF",text:"#4F46E5",border:"#A5B4FC"},{bg:"#CCFBF1",text:"#0D9488",border:"#5EEAD4"},{bg:"#FEE2E2",text:"#DC2626",border:"#FCA5A5"},{bg:"#F3E8FF",text:"#9333EA",border:"#D8B4FE"},{bg:"#CFFAFE",text:"#0891B2",border:"#67E8F9"}],Gr=r=>{if(!r)return null;let l=0;for(let o=0;o<r.length;o++)l=r.charCodeAt(o)+((l<<5)-l);return Ss[Math.abs(l)%Ss.length]},ct=(r,l)=>{if(!r||l==="done")return null;const o=new Date;o.setHours(0,0,0,0);const b=new Date(r);b.setHours(0,0,0,0);const x=Math.ceil((b-o)/(1e3*60*60*24));return x<0?"overdue":x===0?"today":x<=3?"soon":"ok"},lr=r=>{if(r.status!=="backlog")return!1;if(!r.start_date)return!0;const l=new Date;l.setHours(0,0,0,0);const o=new Date(r.start_date);return o.setHours(0,0,0,0),o<=l},dt=(r,l)=>!r.dependencies||r.dependencies.length===0||r.status==="done"?!1:r.dependencies.some(o=>{const b=l.find(x=>x.id===o.depends_on_id);return b&&b.status!=="done"}),qr=r=>{if(r.status==="done")return!1;const l=new Date;if(l.setHours(0,0,0,0),r.my_day_date){const o=new Date(r.my_day_date);if(o.setHours(0,0,0,0),o<l)return!1;if(o.getTime()===l.getTime())return!0}if(r.start_date){const o=new Date(r.start_date);if(o.setHours(0,0,0,0),o<=l)return!0}return!1},Ds=(r,l,o,b=null)=>{if(!r||!l)return[];const x=[];let D=new Date(r);D.setHours(0,0,0,0);let g=null;b&&(g=new Date(b),g.setHours(23,59,59,999));const c=v=>{switch(l){case"daily":v.setDate(v.getDate()+1);break;case"weekly":v.setDate(v.getDate()+7);break;case"biweekly":v.setDate(v.getDate()+14);break;case"monthly":v.setMonth(v.getMonth()+1);break;default:return null}return v},p=b?365:o;let k=0;for(;k<p&&(c(D),!(g&&D>g||(x.push(D.toISOString().split("T")[0]),k++,!b&&k>=o))););return x},St=r=>r?new Date(r).toLocaleDateString(void 0,{day:"numeric",month:"short"}):"",Yr=()=>{const l=new Date(2e3,0,15).toLocaleDateString();return parseInt(l.split(/[\/\-\.]/)[0])===1},Pt=r=>{if(!r)return"";if(r<60)return`${r}m`;const l=Math.floor(r/60),o=r%60;return o>0?`${l}h ${o}m`:`${l}h`},Ls=r=>{if(!r)return"";let l=r.toString().trim().toLowerCase();if(/^\d{1,2}:\d{2}$/.test(l)){const[g,c]=l.split(":").map(Number);if(g>=0&&g<=23&&c>=0&&c<=59)return`${String(g).padStart(2,"0")}:${String(c).padStart(2,"0")}`}const o=/pm|p\.m\.|p$/.test(l),b=/am|a\.m\.|a$/.test(l);l=l.replace(/\s*(am|pm|a\.m\.|p\.m\.|a|p)\s*/gi,"").trim();let x=0,D=0;if(l.includes(":")){const g=l.split(":");x=parseInt(g[0])||0,D=parseInt(g[1])||0}else if(l.length===1||l.length===2)x=parseInt(l)||0,D=0;else if(l.length===3)x=parseInt(l[0])||0,D=parseInt(l.slice(1))||0;else if(l.length===4)x=parseInt(l.slice(0,2))||0,D=parseInt(l.slice(2))||0;else return"";return o&&x<12?x+=12:b&&x===12&&(x=0),x<0||x>23||D<0||D>59?"":`${String(x).padStart(2,"0")}:${String(D).padStart(2,"0")}`},dr=r=>{if(!r)return{date:null,cleanedText:"",matched:null};const l=new Date;l.setHours(0,0,0,0);const o=r.trim().match(/^([TDWM])([+-]\d+)?$/i);if(o){const c=o[1].toUpperCase(),p=o[2]?parseInt(o[2]):0,k=new Date(l);switch(c){case"T":case"D":k.setDate(k.getDate()+p);break;case"W":k.setDate(k.getDate()+p*7);break;case"M":k.setMonth(k.getMonth()+p);break}return{date:k.toISOString().split("T")[0],cleanedText:"",matched:r.trim()}}const b=[{regex:/\b(today)\b/i,fn:()=>new Date(l)},{regex:/\b(tomorrow)\b/i,fn:()=>{const c=new Date(l);return c.setDate(c.getDate()+1),c}},{regex:/\b(yesterday)\b/i,fn:()=>{const c=new Date(l);return c.setDate(c.getDate()-1),c}},{regex:/\b(next\s+)?(monday)\b/i,fn:c=>x(1,c[1])},{regex:/\b(next\s+)?(tuesday)\b/i,fn:c=>x(2,c[1])},{regex:/\b(next\s+)?(wednesday)\b/i,fn:c=>x(3,c[1])},{regex:/\b(next\s+)?(thursday)\b/i,fn:c=>x(4,c[1])},{regex:/\b(next\s+)?(friday)\b/i,fn:c=>x(5,c[1])},{regex:/\b(next\s+)?(saturday)\b/i,fn:c=>x(6,c[1])},{regex:/\b(next\s+)?(sunday)\b/i,fn:c=>x(0,c[1])},{regex:/\bin\s+(\d+)\s+days?\b/i,fn:c=>{const p=new Date(l);return p.setDate(p.getDate()+parseInt(c[1])),p}},{regex:/\bin\s+(\d+)\s+weeks?\b/i,fn:c=>{const p=new Date(l);return p.setDate(p.getDate()+parseInt(c[1])*7),p}},{regex:/\bin\s+(\d+)\s+months?\b/i,fn:c=>{const p=new Date(l);return p.setMonth(p.getMonth()+parseInt(c[1])),p}},{regex:/\bnext\s+week\b/i,fn:()=>{const c=new Date(l);return c.setDate(c.getDate()+7),c}},{regex:/\bnext\s+month\b/i,fn:()=>{const c=new Date(l);return c.setMonth(c.getMonth()+1),c}},{regex:/\bend\s+of\s+week\b/i,fn:()=>{const c=new Date(l);return c.setDate(c.getDate()+(5-c.getDay())),c}},{regex:/\bend\s+of\s+month\b/i,fn:()=>{const c=new Date(l);return c.setMonth(c.getMonth()+1,0),c}}];function x(c,p){const k=new Date(l),v=k.getDay();let C=c-v;return(C<=0||p)&&(C+=7),p&&C<=7&&(C+=7),k.setDate(k.getDate()+C),k}for(const c of b){const p=r.match(c.regex);if(p){const k=c.fn(p),v=r.replace(c.regex,"").replace(/\s+/g," ").trim();return{date:k.toISOString().split("T")[0],cleanedText:v,matched:p[0]}}}const D=Yr();let g=r.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(g){let c,p;D?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=g[3].length===2?2e3+parseInt(g[3]):parseInt(g[3]),v=new Date(k,p,c);if(!isNaN(v.getTime()))return{date:v.toISOString().split("T")[0],cleanedText:"",matched:r.trim()}}if(g=r.match(/^(\d{1,2})[\/\-](\d{1,2})$/),g){let c,p;D?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=new Date(l.getFullYear(),p,c);if(k<l&&k.setFullYear(k.getFullYear()+1),!isNaN(k.getTime()))return{date:k.toISOString().split("T")[0],cleanedText:"",matched:r.trim()}}return{date:null,cleanedText:r,matched:null}},Sa=[{label:"Today",getValue:()=>new Date().toISOString().split("T")[0]},{label:"Tomorrow",getValue:()=>{const r=new Date;return r.setDate(r.getDate()+1),r.toISOString().split("T")[0]}},{label:"Next Week",getValue:()=>{const r=new Date;return r.setDate(r.getDate()+7),r.toISOString().split("T")[0]}},{label:"Next Month",getValue:()=>{const r=new Date;return r.setMonth(r.getMonth()+1),r.toISOString().split("T")[0]}}],It={success:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 shrink-0",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#10B981"}),e.jsx("path",{d:"M8 12l2.5 2.5L16 9",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),error:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 shrink-0",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#EF4444"}),e.jsx("path",{d:"M12 7v5",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"16",r:"1.5",fill:"white"})]}),warning:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 shrink-0",children:[e.jsx("path",{d:"M12 3L2 21h20L12 3z",fill:"#F59E0B"}),e.jsx("path",{d:"M12 9v5",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"17",r:"1.5",fill:"white"})]}),info:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 shrink-0",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#3B82F6"}),e.jsx("circle",{cx:"12",cy:"8",r:"1.5",fill:"white"}),e.jsx("path",{d:"M12 11v6",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round"})]})},Da={backlog:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("rect",{x:"3",y:"6",width:"18",height:"14",rx:"2",fill:"#9CA3AF"}),e.jsx("rect",{x:"3",y:"6",width:"18",height:"4",rx:"2",fill:"#6B7280"}),e.jsx("rect",{x:"7",y:"12",width:"10",height:"2",rx:"1",fill:"#E5E7EB"}),e.jsx("rect",{x:"7",y:"15",width:"6",height:"2",rx:"1",fill:"#E5E7EB",opacity:"0.7"})]}),todo:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("rect",{x:"4",y:"3",width:"16",height:"18",rx:"2",fill:"#DBEAFE",stroke:"#3B82F6",strokeWidth:"1.5"}),e.jsx("rect",{x:"7",y:"7",width:"10",height:"2",rx:"1",fill:"#3B82F6"}),e.jsx("rect",{x:"7",y:"11",width:"8",height:"2",rx:"1",fill:"#93C5FD"}),e.jsx("rect",{x:"7",y:"15",width:"6",height:"2",rx:"1",fill:"#93C5FD",opacity:"0.7"})]}),in_progress:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"#FCE7F3",stroke:"#EC4899",strokeWidth:"1.5"}),e.jsx("path",{d:"M12 7v5l3 3",stroke:"#EC4899",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),done:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"#D1FAE5",stroke:"#10B981",strokeWidth:"1.5"}),e.jsx("path",{d:"M8 12l2.5 2.5L16 9",stroke:"#10B981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})},La=({message:r,action:l,actionLabel:o,onClose:b,duration:x=5e3,type:D="info"})=>(d.useEffect(()=>{const g=setTimeout(b,x);return()=>clearTimeout(g)},[b,x]),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-xl",children:[D==="success"?It.success():D==="error"?It.error():It.info(),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r}),l&&e.jsx("button",{onClick:()=>{l(),b()},className:"px-3 py-1.5 text-sm font-semibold bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:o||"Undo"}),e.jsx("button",{onClick:b,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})),Ta=({isOpen:r,onClose:l,onConfirm:o,title:b,message:x,confirmLabel:D="Confirm",confirmStyle:g="danger",icon:c="âš ï¸",loading:p=!1})=>{if(d.useEffect(()=>{const v=C=>{C.key==="Escape"&&l(),C.key==="Enter"&&!p&&o()};if(r)return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[r,l,o,p]),!r)return null;const k={danger:"bg-red-500 hover:bg-red-600 active:bg-red-700 text-white focus:ring-red-500 shadow-sm hover:shadow",warning:"bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white focus:ring-amber-500 shadow-sm hover:shadow",primary:"bg-indigo-500 hover:bg-indigo-600 active:bg-indigo-700 text-white focus:ring-indigo-500 shadow-sm hover:shadow"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",onClick:l,children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:c})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:b})]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:x}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:l,disabled:p,className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600 transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancel"}),e.jsx("button",{onClick:o,disabled:p,className:`px-4 py-2 rounded-xl font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 ${k[g]} disabled:opacity-50`,children:p?"Please wait...":D})]})]})})},Ma=({onRefresh:r,children:l})=>{const[o,b]=d.useState(0),[x,D]=d.useState(!1),g=d.useRef(0),c=80,p=m=>{window.scrollY===0&&(g.current=m.touches[0].clientY)},k=m=>{if(x||g.current===0)return;if(window.scrollY>0){g.current=0,b(0);return}const z=m.touches[0].clientY-g.current;if(z>0){const L=Math.min(z*.4,c+40);b(L),L>10&&m.preventDefault()}},v=async()=>{if(o>=c&&!x){D(!0),b(c);try{await r()}finally{D(!1),b(0)}}else b(0);g.current=0};d.useEffect(()=>{if("ontouchstart"in window)return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",v),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",v)}},[x,o]);const C=Math.min(o/c,1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 overflow-hidden bg-gradient-to-b from-indigo-50 to-transparent dark:from-indigo-900/30 sm:hidden",style:{height:o>0?`${o}px`:0},children:e.jsxs("div",{className:`flex items-center gap-2 text-indigo-600 dark:text-indigo-400 ${x?"animate-pulse":""}`,children:[e.jsx("svg",{className:`w-5 h-5 transition-transform duration-200 ${x?"animate-spin":""}`,style:{transform:x?"none":`rotate(${C*180}deg)`},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),e.jsx("span",{className:"text-sm font-medium",children:x?"Refreshing...":C>=1?"Release to refresh":"Pull to refresh"})]})}),l]})},Ea=({isOpen:r,onClose:l,user:o})=>{const[b,x]=d.useState("suggestion"),[D,g]=d.useState(""),[c,p]=d.useState([]),[k,v]=d.useState(!1),[C,m]=d.useState(!1),[j,z]=d.useState(null);d.useEffect(()=>{r||setTimeout(()=>{x("suggestion"),g(""),p([]),m(!1),z(null)},300)},[r]),d.useEffect(()=>{const B=I=>{I.key==="Escape"&&l()};if(r)return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[r,l]),d.useEffect(()=>{const B=I=>{var xe;if(!r)return;const ne=(xe=I.clipboardData)==null?void 0:xe.items;if(ne){for(const be of ne)if(be.type.startsWith("image/")){I.preventDefault();const ve=be.getAsFile();ve&&L(ve);break}}};return window.addEventListener("paste",B),()=>window.removeEventListener("paste",B)},[r,c]);const L=B=>{if(c.length>=3){z("Maximum 3 images allowed");return}const I=new Image,ne=new FileReader;ne.onload=xe=>{I.onload=()=>{let{width:Y,height:ge}=I;if(Y>1500||ge>1500){const f=Math.min(1500/Y,1500/ge);Y=Math.round(Y*f),ge=Math.round(ge*f)}const De=document.createElement("canvas");De.width=Y,De.height=ge,De.getContext("2d").drawImage(I,0,0,Y,ge);const Q=De.toDataURL("image/jpeg",.8),E=Q.split(",")[1];p(f=>[...f,{base64:E,preview:Q}]),z(null)},I.onerror=()=>z("Failed to load image"),I.src=xe.target.result},ne.onerror=()=>z("Failed to read image"),ne.readAsDataURL(B)},R=B=>{var ne;const I=(ne=B.target.files)==null?void 0:ne[0];I&&L(I),B.target.value=""},ee=B=>{p(I=>I.filter((ne,xe)=>xe!==B))},me=async B=>{if(B.preventDefault(),!!D.trim()){v(!0),z(null);try{const I=[];for(const xe of c){const be=`feedback/${(o==null?void 0:o.id)||"anonymous"}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.jpg`,ve=atob(xe.base64),Y=new Array(ve.length);for(let E=0;E<ve.length;E++)Y[E]=ve.charCodeAt(E);const ge=new Uint8Array(Y),De=new Blob([ge],{type:"image/jpeg"}),{data:N,error:Q}=await O.storage.from("attachments").upload(be,De);if(Q)console.error("Upload error:",Q);else{const{data:E}=O.storage.from("attachments").getPublicUrl(be);E!=null&&E.publicUrl&&I.push(E.publicUrl)}}const{error:ne}=await O.from("feedback").insert({user_id:o==null?void 0:o.id,user_email:o==null?void 0:o.email,type:b,message:D.trim(),images:I.length>0?I:null,page:window.location.pathname});if(ne)throw ne;m(!0),setTimeout(()=>l(),2e3)}catch(I){console.error("Error submitting feedback:",I),z("Failed to submit feedback. Please try again.")}finally{v(!1)}}};if(!r)return null;const P=[{id:"bug",label:"ðŸ› Bug",desc:"Something isn't working"},{id:"suggestion",label:"ðŸ’¡ Suggestion",desc:"Ideas for improvement"},{id:"question",label:"â“ Question",desc:"Need help with something"},{id:"other",label:"ðŸ’¬ Other",desc:"General feedback"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:l,children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp",onClick:B=>B.stopPropagation(),children:C?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"âœ“"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"We really appreciate you taking the time to help us improve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send Feedback"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-1",children:"Help us make Trackli better!"})]}),e.jsxs("form",{onSubmit:me,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(B=>e.jsxs("button",{type:"button",onClick:()=>x(B.id),className:`p-3 rounded-xl border-2 text-left transition-all ${b===B.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:B.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-300",children:B.desc})]},B.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:D,onChange:B=>g(B.target.value),placeholder:"Tell us what's on your mind...",rows:4,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshots (optional)"}),c.length>0&&e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:c.map((B,I)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:B.preview,alt:`Screenshot ${I+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>ee(I),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},I))}),c.length<3&&e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Add image or paste from clipboard"}),e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]}),j&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:j})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:l,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!D.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Sending...":"Send Feedback"})]})]})]})})})},Ws="roddickaimee@gmail.com",Fa=({isOpen:r,onClose:l,userEmail:o})=>{const[b,x]=d.useState([]),[D,g]=d.useState(!0),[c,p]=d.useState("all"),k=o===Ws;d.useEffect(()=>{r&&k&&v()},[r,k]);const v=async()=>{g(!0);try{const{data:L,error:R}=await O.from("feedback").select("*").order("created_at",{ascending:!1});if(R)throw R;x(L||[])}catch(L){console.error("Error loading feedback:",L)}finally{g(!1)}},C=async(L,R)=>{try{const{error:ee}=await O.from("feedback").update({status:R}).eq("id",L);if(ee)throw ee;x(me=>me.map(P=>P.id===L?{...P,status:R}:P))}catch(ee){console.error("Error updating feedback:",ee)}};if(d.useEffect(()=>{const L=R=>{R.key==="Escape"&&l()};if(r)return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[r,l]),!r||!k)return null;const m=c==="all"?b:b.filter(L=>L.status===c),j={bug:"ðŸ›",suggestion:"ðŸ’¡",question:"â“",other:"ðŸ’¬"},z={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",read:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:l,children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[85vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp flex flex-col",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Admin"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[b.length," total submissions"]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["all","new","read","resolved"].map(L=>e.jsxs("button",{onClick:()=>p(L),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c===L?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[L.charAt(0).toUpperCase()+L.slice(1),L!=="all"&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",b.filter(R=>L==="all"||R.status===L).length,")"]})]},L))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:D?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading feedback..."}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ðŸ“«"}),"No feedback yet"]}):e.jsx("div",{className:"space-y-4",children:m.map(L=>e.jsx("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:j[L.type]||"ðŸ’¬"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:L.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${z[L.status]}`,children:L.status})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:L.message}),L.images&&L.images.length>0&&e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:L.images.map((R,ee)=>e.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:R,alt:`Screenshot ${ee+1}`,className:"w-24 h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity"})},ee))}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500 dark:text-gray-300",children:[e.jsx("span",{children:L.user_email}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[new Date(L.created_at).toLocaleDateString()," ",new Date(L.created_at).toLocaleTimeString()]}),L.page&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:L.page})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[L.status!=="read"&&e.jsx("button",{onClick:()=>C(L.id,"read"),className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors",title:"Mark as read",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),L.status!=="resolved"&&e.jsx("button",{onClick:()=>C(L.id,"resolved"),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark as resolved",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]})},L.id))})})]})})},Ba=({hour:r})=>r<12?e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunriseGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F97316"}),e.jsx("stop",{offset:"100%",stopColor:"#FBBF24"})]})}),e.jsx("path",{d:"M4 22 L28 22",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"16",cy:"18",r:"6",fill:"url(#sunriseGrad)"}),e.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"9",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"12",x2:"9",y2:"14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"25",y1:"12",x2:"23",y2:"14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"})]}):r<17?e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"afternoonGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"16",cy:"16",r:"6",fill:"url(#afternoonGrad)"}),[0,45,90,135,180,225,270,315].map((l,o)=>e.jsx("line",{x1:"16",y1:"4",x2:"16",y2:"7",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${l} 16 16)`},o))]}):e.jsxs("svg",{viewBox:"0 0 32 32",className:"w-7 h-7 sm:w-8 sm:h-8",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"moonGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"14",cy:"16",r:"8",fill:"url(#moonGrad)"}),e.jsx("circle",{cx:"18",cy:"13",r:"6",fill:"#F8FAFC",className:"dark:fill-gray-800"}),e.jsx("circle",{cx:"26",cy:"8",r:"1.5",fill:"#FCD34D"}),e.jsx("circle",{cx:"24",cy:"22",r:"1",fill:"#FCD34D"}),e.jsx("circle",{cx:"6",cy:"10",r:"1",fill:"#FCD34D"})]}),Ts={celebrate:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"celebrateGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F472B6"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"16",fill:"url(#celebrateGrad)"}),e.jsx("path",{d:"M16 22 Q18 18 20 22 Q22 26 24 22 Q26 18 28 22 Q30 26 32 22",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"18",cy:"18",r:"2",fill:"white"}),e.jsx("circle",{cx:"30",cy:"18",r:"2",fill:"white"}),e.jsx("path",{d:"M8 8 L12 14",stroke:"#FBBF24",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M40 8 L36 14",stroke:"#A78BFA",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M6 24 L10 24",stroke:"#34D399",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M38 24 L42 24",stroke:"#F472B6",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"10",cy:"36",r:"2",fill:"#FBBF24"}),e.jsx("circle",{cx:"38",cy:"36",r:"2",fill:"#A78BFA"})]}),sun:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"emptySunGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#emptySunGrad)"}),[0,45,90,135,180,225,270,315].map((r,l)=>e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"10",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${r} 24 24)`},l))]}),folder:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-10 h-10 sm:w-12 sm:h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"emptyFolderGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("path",{d:"M6 14 L6 38 Q6 40 8 40 L40 40 Q42 40 42 38 L42 18 Q42 16 40 16 L24 16 L20 12 L8 12 Q6 12 6 14 Z",fill:"url(#emptyFolderGrad)"}),e.jsx("line",{x1:"18",y1:"26",x2:"30",y2:"26",stroke:"white",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"}),e.jsx("line",{x1:"18",y1:"32",x2:"26",y2:"32",stroke:"white",strokeWidth:"2",strokeLinecap:"round",opacity:"0.4"})]})},Ms=({icon:r,title:l,description:o,action:b,actionLabel:x,variant:D="default"})=>{const g={default:"from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",success:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30",warning:"from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",celebrate:"from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-6 sm:px-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 w-24 h-24 rounded-full bg-gradient-to-br ${g[D]} opacity-50 animate-pulse`,style:{transform:"scale(1.3)"}}),e.jsx("div",{className:`relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br ${g[D]} flex items-center justify-center shadow-lg`,children:Ts[r]?Ts[r]():e.jsx("div",{className:"text-3xl sm:text-4xl",children:r})})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:l}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-300 mb-6 max-w-xs sm:max-w-sm leading-relaxed",children:o}),b&&e.jsx("button",{onClick:b,className:"group px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-2",children:[x,e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Qr=({isOpen:r,onClose:l,title:o,children:b,wide:x,fullScreenMobile:D})=>(d.useEffect(()=>{const g=c=>{c.key==="Escape"&&l()};if(r)return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[r,l]),r?e.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:l}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-2xl w-full flex flex-col animate-modalSlideUp ${D?"h-full sm:h-auto sm:max-h-[90vh] rounded-none sm:rounded-2xl sm:mx-4":"rounded-t-2xl sm:rounded-2xl sm:mx-4 max-h-[95vh] sm:max-h-[90vh]"} ${x?"sm:max-w-2xl":"sm:max-w-md"}`,children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-between p-4 pr-6 sm:p-6 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 z-20 ${D?"rounded-none sm:rounded-t-2xl":"rounded-t-2xl"}`,children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100",children:o}),e.jsx("button",{type:"button",onClick:l,className:"p-3 -mr-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-300 touch-manipulation",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 overscroll-contain",children:b})]})]}):null),Aa=({isOpen:r,onClose:l,attachment:o,attachments:b,onNavigate:x})=>{var B;if(!r||!o)return null;const D=o.file_name||"",g=o.file_url||"",c=((B=D.split(".").pop())==null?void 0:B.toLowerCase())||"",p=["jpg","jpeg","png","gif","webp","svg","bmp"].includes(c),k=c==="pdf",v=["mp4","webm","ogg","mov"].includes(c),C=["mp3","wav","ogg","m4a"].includes(c),m=["doc","docx","xls","xlsx","ppt","pptx"].includes(c),j=["eml","msg"].includes(c),z=(b==null?void 0:b.findIndex(I=>I.id===o.id))??-1,L=b&&b.length>1,R=z>0,ee=z<((b==null?void 0:b.length)||0)-1,me=()=>{R&&x&&x(b[z-1])},P=()=>{ee&&x&&x(b[z+1])};return d.useEffect(()=>{const I=ne=>{r&&(ne.key==="Escape"&&l(),ne.key==="ArrowLeft"&&R&&me(),ne.key==="ArrowRight"&&ee&&P())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[r,z,b]),e.jsxs("div",{className:"fixed inset-0 z-[310] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/50 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-white/80 text-sm truncate max-w-[300px]",children:D}),L&&e.jsxs("span",{className:"text-white/50 text-sm",children:[z+1," / ",b.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g,download:D,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:l,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),L&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:me,disabled:!R,className:`absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${R?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:P,disabled:!ee,className:`absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${ee?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"relative max-w-[90vw] max-h-[85vh] flex items-center justify-center",children:[p&&e.jsx("img",{src:g,alt:D,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"}),k&&e.jsx("iframe",{src:g,title:D,className:"w-[90vw] h-[85vh] max-w-4xl rounded-lg bg-white"}),v&&e.jsx("video",{src:g,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl",children:"Your browser does not support video playback."}),C&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸŽµ"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-4",children:D}),e.jsx("audio",{src:g,controls:!0,autoPlay:!0,className:"w-full max-w-md",children:"Your browser does not support audio playback."})]}),m&&e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(g)}`,title:D,className:"w-[90vw] h-[85vh] max-w-5xl rounded-lg bg-white"}),j&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ‰ï¸"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:D}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mb-6",children:"Email files can be opened in your email client"}),e.jsxs("a",{href:g,download:D,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Email"]})]}),!p&&!k&&!v&&!C&&!m&&!j&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“„"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:D}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm mb-6",children:"Preview not available for this file type"}),e.jsxs("a",{href:g,download:D,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]})]})},$a=({step:r,onNext:l,onSkip:o,onComplete:b})=>{const D=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒT":"Ctrl+Alt+T",g=[{target:"summary-bar",title:"Welcome to Trackli!",description:"This is your Summary Bar - click any stat to filter tasks. Use the My Day filter to see your daily focus, or filter by assignee, customer, category and more.",position:"bottom"},{target:"columns",title:"Kanban Board",description:"Your tasks flow from Backlog â†’ To Do â†’ In Progress â†’ Done. Drag and drop to move tasks between columns.",position:"top"},{target:"task-card",title:"Task Cards",description:"Each card shows key info at a glance. Look for the sun icon on cards in your My Day list! Hover to see details and attachments.",position:"right"},{target:"views",title:"Multiple Views",description:"Switch between Board, My Day, All Tasks (with sorting & CSV export), Calendar, and Progress views using the menu.",position:"bottom"},{target:"add-task",title:"Create Tasks",description:`Click + Task or press ${D} to create. Set dates, effort level, assignee, customer, category, attachments, subtasks, dependencies, and recurring schedules.`,position:"bottom"},{target:"notes",title:"Meeting Notes â†’ Tasks",description:"Click Notes to quickly capture meeting notes - type, paste, or even speak! AI extracts action items as tasks automatically.",position:"bottom"},{target:"help",title:"Need Help?",description:"Click the ? icon anytime to access the full help guide. You're all set!",position:"bottom"}],c=g[r];return c?e.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:o}),e.jsxs("div",{className:`absolute z-[1001] max-w-sm animate-fadeIn ${r===0?"top-32 left-1/2 -translate-x-1/2":r===1?"top-40 left-1/2 -translate-x-1/2":r===2?"top-60 left-[340px]":r===3?"top-24 left-8":r===4?"top-20 right-48":r===5?"top-20 right-32":"top-20 right-24"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:g.map((p,k)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${k===r?"w-6 bg-indigo-500":k<r?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},k))}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:o,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip tour"}),e.jsxs("div",{className:"flex gap-2",children:[r>0&&e.jsx("button",{onClick:()=>l(r-1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>r<g.length-1?l(r+1):b(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:r<g.length-1?"Next":"Get Started!"})]})]})]}),e.jsx("div",{className:`absolute w-4 h-4 bg-white dark:bg-gray-800 rotate-45 border-gray-200 dark:border-gray-700 ${c.position==="bottom"?"-top-2 left-1/2 -translate-x-1/2 border-t border-l":c.position==="top"?"-bottom-2 left-1/2 -translate-x-1/2 border-b border-r":c.position==="right"?"-left-2 top-8 border-l border-b":"-right-2 top-8 border-r border-t"}`})]})]}):null},Wa=()=>e.jsxs("svg",{viewBox:"0 0 280 120",className:"w-full h-32 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunGlow",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("rect",{x:"10",y:"10",width:"120",height:"100",rx:"8",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"70",y:"26",textAnchor:"middle",fontSize:"9",fill:"#6B7280",children:"ðŸ’¡ Recommendations"}),e.jsx("rect",{x:"18",y:"36",width:"104",height:"32",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"52",r:"6",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"48",width:"50",height:"8",rx:"2",fill:"#9CA3AF"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"108",cy:"52",r:"10",fill:"#FEF3C7",children:e.jsx("animate",{attributeName:"r",values:"10;12;10",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("text",{x:"108",y:"56",textAnchor:"middle",fontSize:"12",children:"â˜€ï¸"}),e.jsxs("circle",{cx:"108",cy:"52",r:"10",fill:"none",stroke:"#F59E0B",strokeWidth:"2",children:[e.jsx("animate",{attributeName:"r",values:"10;20;20",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.8;0;0",dur:"1.5s",repeatCount:"indefinite"})]})]}),e.jsx("rect",{x:"18",y:"74",width:"104",height:"28",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"88",r:"5",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"84",width:"40",height:"8",rx:"2",fill:"#D1D5DB"}),e.jsx("rect",{x:"150",y:"10",width:"120",height:"100",rx:"8",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("text",{x:"210",y:"26",textAnchor:"middle",fontSize:"10",fill:"#D97706",fontWeight:"bold",children:"â˜€ï¸ My Day"}),e.jsx("rect",{x:"158",y:"36",width:"104",height:"32",rx:"6",fill:"#FDE68A",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("circle",{cx:"170",cy:"52",r:"6",fill:"#10B981",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("rect",{x:"182",y:"48",width:"50",height:"8",rx:"2",fill:"#92400E",opacity:"0.5",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;0.5;0.5",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("path",{d:"M125 52 L145 52 L140 47 M145 52 L140 57",stroke:"#F59E0B",strokeWidth:"2",fill:"none",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.2;0.6;1"})})]}),Ia=()=>e.jsxs("svg",{viewBox:"0 0 280 140",className:"w-full h-36 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"calButtonGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"15",y:"20",width:"120",height:"50",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("circle",{cx:"32",cy:"38",r:"6",fill:"#3B82F6"}),e.jsx("rect",{x:"45",y:"32",width:"55",height:"8",rx:"2",fill:"#374151"}),e.jsx("rect",{x:"45",y:"44",width:"35",height:"6",rx:"2",fill:"#9CA3AF"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",y:"30",width:"24",height:"24",rx:"6",fill:"#EEF2FF",children:e.jsx("animate",{attributeName:"fill",values:"#EEF2FF;#C7D2FE;#EEF2FF",dur:"2s",repeatCount:"indefinite"})}),e.jsx("text",{x:"117",y:"47",textAnchor:"middle",fontSize:"14",children:"ðŸ—“"}),e.jsxs("circle",{cx:"117",cy:"42",r:"12",fill:"none",stroke:"#6366F1",strokeWidth:"2",children:[e.jsx("animate",{attributeName:"r",values:"12;18;18",dur:"2s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.8;0;0",dur:"2s",repeatCount:"indefinite"})]})]}),e.jsx("path",{d:"M140 45 L155 45",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round",markerEnd:"url(#arrowhead)",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.7;1"})}),e.jsxs("g",{children:[e.jsx("rect",{x:"160",y:"15",width:"105",height:"110",rx:"8",fill:"white",stroke:"#E5E7EB",strokeWidth:"1",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"212",y:"35",textAnchor:"middle",fontSize:"8",fill:"#374151",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Schedule Task"]}),e.jsxs("text",{x:"170",y:"52",fontSize:"7",fill:"#6B7280",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Date"]}),e.jsx("rect",{x:"170",y:"55",width:"85",height:"18",rx:"4",fill:"#F9FAFB",stroke:"#E5E7EB",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"180",y:"67",fontSize:"8",fill:"#374151",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"02/01/2026"]}),e.jsxs("text",{x:"170",y:"82",fontSize:"7",fill:"#6B7280",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Time"]}),e.jsx("rect",{x:"170",y:"85",width:"85",height:"18",rx:"4",fill:"#F9FAFB",stroke:"#E5E7EB",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"180",y:"97",fontSize:"8",fill:"#374151",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"09:00"]}),e.jsx("rect",{x:"190",y:"107",width:"55",height:"14",rx:"4",fill:"url(#calButtonGradient)",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"})}),e.jsxs("text",{x:"217",y:"117",textAnchor:"middle",fontSize:"7",fill:"white",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"2s",repeatCount:"indefinite",keyTimes:"0;0.3;0.4;1"}),"Schedule"]})]})]}),Oa=()=>e.jsxs("svg",{viewBox:"0 0 200 100",className:"w-full h-28 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"resizeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("text",{x:"15",y:"25",fontSize:"9",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"15",y:"55",fontSize:"9",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"15",y:"85",fontSize:"9",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"45",y1:"18",x2:"190",y2:"18",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"48",x2:"190",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"78",x2:"190",y2:"78",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"50",y:"22",width:"130",rx:"4",fill:"url(#resizeGradient)",children:e.jsx("animate",{attributeName:"height",values:"22;52;22",dur:"3s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"56",y:"28",width:"60",height:"6",rx:"2",fill:"white",opacity:"0.8"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",width:"20",height:"6",rx:"3",fill:"white",opacity:"0.9",children:e.jsx("animate",{attributeName:"y",values:"40;70;40",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M115 0 L115 8 M111 4 L119 4",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"transform",values:"translate(0,48);translate(0,78);translate(0,48)",dur:"3s",repeatCount:"indefinite"})})]})]}),Pa=()=>e.jsxs("svg",{viewBox:"0 0 240 80",className:"w-full h-24 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("rect",{x:"20",y:"20",width:"200",height:"40",rx:"8",fill:"#FEF3C7"}),e.jsx("text",{x:"30",y:"38",fontSize:"10",fill:"#92400E",fontWeight:"bold",children:"Today's Progress"}),e.jsx("rect",{x:"30",y:"45",width:"180",height:"8",rx:"4",fill:"#FDE68A"}),e.jsx("rect",{x:"30",y:"45",height:"8",rx:"4",fill:"url(#progressGradient)",children:e.jsx("animate",{attributeName:"width",values:"0;180;180;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"})}),e.jsxs("text",{x:"200",y:"38",textAnchor:"end",fontSize:"10",fill:"#059669",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"}),"100% âœ“"]}),e.jsxs("circle",{cx:"60",cy:"15",r:"3",fill:"#F59E0B",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.5;0.7"}),e.jsx("animate",{attributeName:"cy",values:"15;5;5",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("circle",{cx:"120",cy:"12",r:"3",fill:"#EC4899",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;0.55;0.75"}),e.jsx("animate",{attributeName:"cy",values:"12;2;2",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;1"})]}),e.jsxs("circle",{cx:"180",cy:"14",r:"3",fill:"#6366F1",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;0.52;0.72"}),e.jsx("animate",{attributeName:"cy",values:"14;4;4",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),Es={sun:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#sunGrad)"}),[0,45,90,135,180,225,270,315].map((r,l)=>e.jsx("line",{x1:"24",y1:"6",x2:"24",y2:"10",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${r} 24 24)`},l))]}),addTask:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"addGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"24",rx:"4",fill:"url(#addGrad)"}),e.jsx("line",{x1:"24",y1:"18",x2:"24",y2:"30",stroke:"white",strokeWidth:"3",strokeLinecap:"round"}),e.jsx("line",{x1:"18",y1:"24",x2:"30",y2:"24",stroke:"white",strokeWidth:"3",strokeLinecap:"round"})]}),chart:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#34D399"})]})}),e.jsx("rect",{x:"8",y:"28",width:"8",height:"12",rx:"2",fill:"url(#chartGrad)",opacity:"0.6"}),e.jsx("rect",{x:"20",y:"20",width:"8",height:"20",rx:"2",fill:"url(#chartGrad)",opacity:"0.8"}),e.jsx("rect",{x:"32",y:"10",width:"8",height:"30",rx:"2",fill:"url(#chartGrad)"})]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"calGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"28",rx:"4",fill:"url(#calGrad)"}),e.jsx("rect",{x:"8",y:"12",width:"32",height:"8",rx:"4",fill:"#4F46E5"}),e.jsx("circle",{cx:"14",cy:"8",r:"2",fill:"#6366F1"}),e.jsx("circle",{cx:"34",cy:"8",r:"2",fill:"#6366F1"}),e.jsx("rect",{x:"14",y:"24",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"24",y:"24",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"14",y:"32",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"24",y:"32",width:"6",height:"4",rx:"1",fill:"white",opacity:"0.6"})]}),sparkle:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sparkGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#A78BFA"}),e.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),e.jsx("path",{d:"M24 4 L26 18 L40 20 L26 22 L24 36 L22 22 L8 20 L22 18 Z",fill:"url(#sparkGrad)"}),e.jsx("circle",{cx:"36",cy:"10",r:"3",fill:"#C4B5FD"}),e.jsx("circle",{cx:"12",cy:"34",r:"2",fill:"#C4B5FD"})]}),timer:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"timerGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("circle",{cx:"24",cy:"26",r:"16",fill:"none",stroke:"url(#timerGrad)",strokeWidth:"4"}),e.jsx("circle",{cx:"24",cy:"26",r:"12",fill:"#EEF2FF"}),e.jsx("line",{x1:"24",y1:"26",x2:"24",y2:"18",stroke:"#4F46E5",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"24",y1:"26",x2:"30",y2:"26",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("rect",{x:"20",y:"4",width:"8",height:"4",rx:"1",fill:"#6366F1"})]}),table:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"tableGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("rect",{x:"6",y:"8",width:"36",height:"32",rx:"4",fill:"url(#tableGrad)"}),e.jsx("rect",{x:"6",y:"8",width:"36",height:"8",rx:"4",fill:"#4F46E5"}),e.jsx("line",{x1:"6",y1:"22",x2:"42",y2:"22",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"6",y1:"30",x2:"42",y2:"30",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"18",y1:"16",x2:"18",y2:"40",stroke:"white",strokeWidth:"1",opacity:"0.3"}),e.jsx("line",{x1:"30",y1:"16",x2:"30",y2:"40",stroke:"white",strokeWidth:"1",opacity:"0.3"})]}),importExport:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"importGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#34D399"}),e.jsx("stop",{offset:"100%",stopColor:"#10B981"})]})}),e.jsx("rect",{x:"10",y:"8",width:"28",height:"32",rx:"3",fill:"url(#importGrad)"}),e.jsx("path",{d:"M18 20 L24 26 L30 20",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("line",{x1:"24",y1:"14",x2:"24",y2:"26",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"16",y1:"32",x2:"32",y2:"32",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]}),folder:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"folderGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FBBF24"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("path",{d:"M6 14 L6 38 Q6 40 8 40 L40 40 Q42 40 42 38 L42 18 Q42 16 40 16 L24 16 L20 12 L8 12 Q6 12 6 14 Z",fill:"url(#folderGrad)"}),e.jsx("rect",{x:"6",y:"16",width:"36",height:"2",fill:"#D97706",opacity:"0.3"})]}),settings:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"settingsGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9CA3AF"}),e.jsx("stop",{offset:"100%",stopColor:"#6B7280"})]})}),e.jsx("path",{d:"M24 8 L27 10 L30 8 L32 11 L36 11 L36 15 L39 17 L37 20 L39 23 L36 25 L36 29 L32 29 L30 32 L27 30 L24 32 L21 30 L18 32 L16 29 L12 29 L12 25 L9 23 L11 20 L9 17 L12 15 L12 11 L16 11 L18 8 L21 10 Z",fill:"url(#settingsGrad)"}),e.jsx("circle",{cx:"24",cy:"20",r:"6",fill:"white"}),e.jsx("circle",{cx:"24",cy:"20",r:"3",fill:"#6B7280"})]}),chartUp:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartUpGrad",x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("polyline",{points:"8,36 18,26 28,30 40,14",fill:"none",stroke:"url(#chartUpGrad)",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polygon",{points:"36,12 42,12 42,18",fill:"#6366F1"}),e.jsx("circle",{cx:"8",cy:"36",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"18",cy:"26",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"28",cy:"30",r:"3",fill:"#A5B4FC"}),e.jsx("circle",{cx:"40",cy:"14",r:"3",fill:"#6366F1"})]}),trophy:()=>e.jsxs("svg",{viewBox:"0 0 48 48",className:"w-12 h-12",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"trophyGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("path",{d:"M14 8 L34 8 L34 20 Q34 28 24 32 Q14 28 14 20 Z",fill:"url(#trophyGrad)"}),e.jsx("path",{d:"M14 12 L10 12 Q6 12 6 16 L6 18 Q6 22 10 22 L14 22",fill:"none",stroke:"#F59E0B",strokeWidth:"3"}),e.jsx("path",{d:"M34 12 L38 12 Q42 12 42 16 L42 18 Q42 22 38 22 L34 22",fill:"none",stroke:"#F59E0B",strokeWidth:"3"}),e.jsx("rect",{x:"20",y:"32",width:"8",height:"4",fill:"#D97706"}),e.jsx("rect",{x:"16",y:"36",width:"16",height:"4",rx:"1",fill:"#92400E"})]})},za=({view:r,step:l,onNext:o,onSkip:b,onComplete:x})=>{const D={myday:[{title:"Welcome to My Day!",description:"This is your personal daily focus list. Plan what to work on today without cluttering your board view.",iconComponent:"sun"},{title:"Add Tasks to My Day",description:"Tasks with today's start date appear automatically. Click the sun button on any recommended task to add it to your day!",iconComponent:"addTask",animation:"addToMyDay"},{title:"Track Your Progress",description:"Watch your progress bar fill up as you complete tasks. Finish everything for a confetti celebration!",iconComponent:"chart",animation:"progressBar"}],calendar:[{title:"Welcome to Calendar!",description:"View your scheduled tasks visually. Switch between daily, weekly, and monthly views using the buttons at the top.",iconComponent:"calendar"},{title:"Schedule a Task",description:"Click the calendar button on any task to set a date and time. The task will appear on the calendar.",iconComponent:"sparkle",animation:"dragToCalendar"},{title:"Task Duration",description:"Set the Time Estimate on a task to control how tall it appears on the calendar. Click any task to edit its details.",iconComponent:"timer"}],tasks:[{title:"All Tasks View",description:"See every task in a powerful table format. Click any column header to sort, or use the Filters button to narrow down results.",iconComponent:"table"},{title:"Import & Export CSV",description:"Export tasks for reporting, or import to bulk create/edit. Use * in the ID column to create new tasks, or include existing IDs to update them.",iconComponent:"importExport"}],projects:[{title:"Projects View",description:"Organize your work into projects. Each project gets its own color that appears on task cards throughout the app.",iconComponent:"folder"},{title:"Manage Projects",description:"Create new projects, edit details, or archive completed ones. Archived projects hide their tasks from the main board.",iconComponent:"settings"}],progress:[{title:"Progress View",description:"Track your productivity across all projects. See completion rates, task counts, and how you're doing over time.",iconComponent:"chartUp"},{title:"Completion Insights",description:"The charts show your completed vs. remaining tasks. Use this to identify bottlenecks and celebrate wins!",iconComponent:"trophy"}]},g={addToMyDay:Wa,dragToCalendar:Ia,resizeTask:Oa,progressBar:Pa},c=D[r]||[],p=c[l];return p?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),e.jsx("div",{className:"relative z-[1001] max-w-md w-full animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[e.jsx("div",{className:"mb-3",children:p.iconComponent&&Es[p.iconComponent]?Es[p.iconComponent]():e.jsx("span",{className:"text-4xl",children:p.icon})}),e.jsx("h3",{className:"text-xl font-semibold",children:p.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 leading-relaxed",children:p.description}),p.animation&&g[p.animation]&&e.jsx("div",{className:"mb-6",children:(()=>{const k=g[p.animation];return e.jsx(k,{})})()}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:c.map((k,v)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${v===l?"w-8 bg-indigo-500":v<l?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},v))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:b,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip"}),e.jsxs("div",{className:"flex gap-2",children:[l>0&&e.jsx("button",{onClick:()=>o(l-1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>l<c.length-1?o(l+1):x(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:l<c.length-1?"Next":"Got it!"})]})]})]})]})})]}):null},Fs={tasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",fill:"#10B981"}),e.jsx("path",{d:"M7 12 L10 15 L17 8",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),board:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#6366F1"}),e.jsx("rect",{x:"4",y:"6",width:"4",height:"12",rx:"1",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"10",y:"6",width:"4",height:"8",rx:"1",fill:"white",opacity:"0.7"}),e.jsx("rect",{x:"16",y:"6",width:"4",height:"5",rx:"1",fill:"white",opacity:"0.5"})]}),myday:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"#F59E0B"}),[0,45,90,135,180,225,270,315].map((r,l)=>e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"5",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${r} 12 12)`},l))]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",fill:"#6366F1"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"5",rx:"2",fill:"#4F46E5"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5",fill:"#6366F1"}),e.jsx("circle",{cx:"17",cy:"3",r:"1.5",fill:"#6366F1"}),e.jsx("rect",{x:"6",y:"12",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.9"}),e.jsx("rect",{x:"10.5",y:"12",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"6",y:"16",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.6"})]}),alltasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#6366F1"}),e.jsx("line",{x1:"5",y1:"8",x2:"19",y2:"8",stroke:"white",strokeWidth:"1.5",opacity:"0.8"}),e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"white",strokeWidth:"1.5",opacity:"0.6"}),e.jsx("line",{x1:"5",y1:"16",x2:"19",y2:"16",stroke:"white",strokeWidth:"1.5",opacity:"0.4"})]}),shortcuts:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",fill:"#6B7280"}),e.jsx("rect",{x:"4",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"8",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"12",y:"8",width:"3",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"16",y:"8",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.8"}),e.jsx("rect",{x:"4",y:"11",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"9",y:"11",width:"6",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"16",y:"11",width:"4",height:"2",rx:"0.5",fill:"white",opacity:"0.6"}),e.jsx("rect",{x:"6",y:"14",width:"12",height:"2",rx:"0.5",fill:"white",opacity:"0.4"})]})},Fe={myday:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"#F59E0B"}),[0,45,90,135,180,225,270,315].map((r,l)=>e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"5",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${r} 12 12)`},l))]}),board:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#D4A574"}),e.jsx("rect",{x:"3",y:"2",width:"10",height:"4",rx:"1",fill:"#B8956E"}),e.jsx("rect",{x:"4",y:"8",width:"16",height:"11",rx:"1",fill:"#FDF6E9"}),e.jsx("line",{x1:"7",y1:"11",x2:"17",y2:"11",stroke:"#E5E7EB",strokeWidth:"1.5"}),e.jsx("line",{x1:"7",y1:"14",x2:"14",y2:"14",stroke:"#E5E7EB",strokeWidth:"1.5"})]}),calendar:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",fill:"#FEE2E2"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"5",rx:"2",fill:"#EF4444"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("circle",{cx:"17",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("rect",{x:"6",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"10.5",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"6",y:"16",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"})]}),alltasks:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2",fill:"#818CF8"}),e.jsx("rect",{x:"2",y:"3",width:"20",height:"5",rx:"2",fill:"#6366F1"}),e.jsx("line",{x1:"5",y1:"11",x2:"19",y2:"11",stroke:"white",strokeWidth:"1.5",opacity:"0.6"}),e.jsx("line",{x1:"5",y1:"15",x2:"19",y2:"15",stroke:"white",strokeWidth:"1.5",opacity:"0.4"})]}),projects:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M3 7 L3 19 Q3 20 4 20 L20 20 Q21 20 21 19 L21 9 Q21 8 20 8 L12 8 L10 6 L4 6 Q3 6 3 7 Z",fill:"#9CA3AF"}),e.jsx("rect",{x:"3",y:"8",width:"18",height:"1",fill:"#6B7280",opacity:"0.3"})]}),progress:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"4",y:"14",width:"4",height:"6",rx:"1",fill:"#EF4444"}),e.jsx("rect",{x:"10",y:"10",width:"4",height:"10",rx:"1",fill:"#F59E0B"}),e.jsx("rect",{x:"16",y:"6",width:"4",height:"14",rx:"1",fill:"#10B981"})]}),lightbulb:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M12 2 C8 2 5 5 5 9 C5 12 7 14 8 15 L8 18 L16 18 L16 15 C17 14 19 12 19 9 C19 5 16 2 12 2 Z",fill:"#FCD34D"}),e.jsx("rect",{x:"9",y:"19",width:"6",height:"2",rx:"1",fill:"#F59E0B"}),e.jsx("rect",{x:"10",y:"21",width:"4",height:"1",rx:"0.5",fill:"#D97706"}),e.jsx("path",{d:"M9 9 L12 12 L15 9",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round",fill:"none"})]}),fire:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"fireGrad",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#DC2626"}),e.jsx("stop",{offset:"50%",stopColor:"#F59E0B"}),e.jsx("stop",{offset:"100%",stopColor:"#FCD34D"})]})}),e.jsx("path",{d:"M12 2 C12 2 8 6 8 10 C8 11 8.5 12 9 12.5 C8.5 11 9 9 12 7 C15 9 15.5 11 15 12.5 C15.5 12 16 11 16 10 C16 6 12 2 12 2 Z M12 22 C8 22 5 19 5 15 C5 11 8 8 12 8 C16 8 19 11 19 15 C19 19 16 22 12 22 Z",fill:"url(#fireGrad)"})]}),checkSquare:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3",fill:"#22C55E"}),e.jsx("path",{d:"M7 12 L10 15 L17 8",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),calendarWeek:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",fill:"#FEE2E2"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"5",rx:"2",fill:"#EF4444"}),e.jsx("circle",{cx:"7",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("circle",{cx:"17",cy:"3",r:"1.5",fill:"#DC2626"}),e.jsx("rect",{x:"6",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"10.5",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"15",y:"12",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"6",y:"16",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"}),e.jsx("rect",{x:"10.5",y:"16",width:"3",height:"2",rx:"0.5",fill:"#FCA5A5"})]}),stopwatch:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("circle",{cx:"12",cy:"13",r:"9",fill:"#E9D5FF",stroke:"#A855F7",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"13",r:"6",fill:"white"}),e.jsx("line",{x1:"12",y1:"13",x2:"12",y2:"9",stroke:"#7C3AED",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"12",y1:"13",x2:"15",y2:"13",stroke:"#A855F7",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("rect",{x:"10",y:"1",width:"4",height:"3",rx:"1",fill:"#A855F7"}),e.jsx("circle",{cx:"12",cy:"13",r:"1",fill:"#7C3AED"})]}),chartBar:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",children:[e.jsx("rect",{x:"4",y:"14",width:"4",height:"6",rx:"1",fill:"#EF4444"}),e.jsx("rect",{x:"10",y:"10",width:"4",height:"10",rx:"1",fill:"#F59E0B"}),e.jsx("rect",{x:"16",y:"6",width:"4",height:"14",rx:"1",fill:"#10B981"})]}),sun:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",fill:"#F59E0B"}),[0,45,90,135,180,225,270,315].map((r,l)=>e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"4",stroke:"#F59E0B",strokeWidth:"2",strokeLinecap:"round",transform:`rotate(${r} 12 12)`},l))]}),moon:()=>e.jsx("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",fill:"#FCD34D"})}),importNotes:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"1.5"}),e.jsx("line",{x1:"8",y1:"7",x2:"16",y2:"7",stroke:"#F59E0B",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"8",y1:"11",x2:"16",y2:"11",stroke:"#FCD34D",strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("line",{x1:"8",y1:"15",x2:"13",y2:"15",stroke:"#FCD34D",strokeWidth:"1.5",strokeLinecap:"round"})]}),feedback:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z",fill:"#DBEAFE",stroke:"#3B82F6",strokeWidth:"1.5"}),e.jsx("circle",{cx:"8",cy:"12",r:"1",fill:"#3B82F6"}),e.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"#3B82F6"}),e.jsx("circle",{cx:"16",cy:"12",r:"1",fill:"#3B82F6"})]}),settingsGear:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#9CA3AF"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z",fill:"none",stroke:"#6B7280",strokeWidth:"1.5"})]}),signOut:()=>e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",fill:"none",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("polyline",{points:"16 17 21 12 16 7",fill:"none",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round"})]})},Ra=({isOpen:r,onClose:l,initialTab:o="tasks",shortcutModifier:b="âŒ˜âŒƒ"})=>{const[x,D]=d.useState(o);if(d.useEffect(()=>{r&&D(o)},[r,o]),!r)return null;const g=[{id:"tasks",label:"Tasks",iconComponent:"tasks"},{id:"board",label:"Board",iconComponent:"board"},{id:"myday",label:"My Day",iconComponent:"myday"},{id:"calendar",label:"Calendar",iconComponent:"calendar"},{id:"alltasks",label:"All Tasks",iconComponent:"alltasks"},{id:"shortcuts",label:"Shortcuts",iconComponent:"shortcuts"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl",children:"â“"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Trackli Help Guide"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use Trackli effectively"})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:g.map(c=>e.jsxs("button",{onClick:()=>D(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x===c.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{children:c.iconComponent&&Fs[c.iconComponent]?Fs[c.iconComponent]():c.icon}),e.jsx("span",{children:c.label})]},c.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-240px)]",children:[x==="board"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Kanban Columns"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"Tasks flow through four columns representing their status:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#9CA3AF",backgroundColor:"#F9FAFB"},children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Backlog"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Future work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#3B82F6",backgroundColor:"#EFF6FF"},children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"To Do"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#EC4899",backgroundColor:"#FDF2F8"},children:[e.jsx("span",{className:"font-semibold text-pink-700",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#64748B",backgroundColor:"#F8FAFC"},children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Done"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:e.jsxs("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:[e.jsx("strong",{children:"ðŸ‘† Drag & Drop:"})," Drag any task card between columns to change its status instantly."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Card Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click Actions:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click card"})," â€“ Open task to edit all details"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click title"})," â€“ Edit title inline (desktop)"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Hover Actions (Desktop):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Hover over a card to reveal quick action buttons:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-700 rounded",children:"â–¶ Start"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:"âœ“ Done"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded",children:"ðŸš© Critical"}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:"â˜€ï¸ My Day"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Mobile Quick Actions:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"On mobile, quick status buttons appear at the bottom of each card."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Task Card Indicators"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Left Border Colors:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-red-500"}),e.jsx("span",{children:"Red = Overdue or Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-orange-500"}),e.jsx("span",{children:"Orange = Blocked or Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-green-500"}),e.jsx("span",{children:"Green = Ready to Start"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-blue-500"}),e.jsx("span",{children:"Blue/Pink/Gray = Column status"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Icons & Badges:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"ðŸš© = Critical/Flagged"}),e.jsx("div",{children:"ðŸ”’ = Blocked by another task"}),e.jsx("div",{children:"ðŸ” = Recurring task"}),e.jsx("div",{children:"â˜€ï¸ = In My Day"}),e.jsx("div",{children:"â–¶ = Start date"}),e.jsx("div",{children:"ðŸ—“ = Due date"}),e.jsx("div",{children:"â± = Time estimate"}),e.jsx("div",{children:"ðŸ“Ž = Has attachments"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Effort Bars:"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â–°"}),e.jsx("span",{children:"Low"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â–°â–°"}),e.jsx("span",{children:"Medium"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"â–°â–°â–°"}),e.jsx("span",{children:"High"})]})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Filtering & Search"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Summary Bar (Quick Filters):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click any stat in the summary bar to filter:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-red-600 font-medium",children:"ðŸš© Critical"})," â€“ Flagged tasks"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600 font-medium",children:"Due Today"})," â€“ Due today"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-red-600 font-medium",children:"Overdue"})," â€“ Past due date"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-amber-600 font-medium",children:"â˜€ï¸ My Day"})," â€“ Daily focus tasks"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Field Filters:"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click the filter icon (ðŸ”) to filter by:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsx("div",{children:"â€¢ Assignee"}),e.jsx("div",{children:"â€¢ Customer"}),e.jsx("div",{children:"â€¢ Category"}),e.jsx("div",{children:"â€¢ Effort Level"}),e.jsx("div",{children:"â€¢ Source"}),e.jsx("div",{children:"â€¢ Due Date"})]})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsx("p",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-1",children:"ðŸ” Quick Search"}),e.jsxs("p",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"âŒ˜K"})," (Mac) or ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"Ctrl+K"})," (Win) to open search. Find tasks by title, description, assignee, or customer."]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:'ðŸ’¡ Active filters show a count badge. Click "Clear" to reset all filters.'})]})]}),x==="myday"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center text-amber-600 dark:text-amber-400",children:"â˜€ï¸"}),"What is My Day?"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"My Day is your personal daily focus list. It helps you plan what to work on today without cluttering your board view."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"How Tasks Appear in My Day"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-1",children:"Auto-included:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks with a start date of today or earlier automatically appear in My Day"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Manually added:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click the â˜€ï¸ button on any task in Recommendations to add it to your focus list"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Sun Icon on Cards (â˜€ï¸)"]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tasks in your My Day list show a ",e.jsx("span",{className:"text-lg",children:"â˜€ï¸"})," sun icon on their card in the board view, right below the effort bars. This helps you quickly identify your daily focus tasks while browsing the board."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Recommendations & All Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"The Recommendations section shows tasks organized by urgency and status. Click the â˜€ï¸ button on any task to add it:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸ”´ Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"ðŸŸ  Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due today"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-yellow-600",children:"ðŸŸ¡ Due Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due in next 3 days"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-green-600",children:"ðŸŸ¢ Quick Wins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low effort tasks"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"ðŸ”µ In Progress"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currently being worked on"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"âšª To Do"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-xl col-span-2",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ðŸ“‹ Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet prioritized"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Daily Reset"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manually added tasks clear from My Day at midnight (or when completed), giving you a fresh start each day. Auto-included tasks based on start date will remain until their start date passes."})]})]}),x==="calendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—“"}),"Calendar View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Schedule tasks on your calendar with start times and durations. Access via the menu or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜L"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Daily"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single day view"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7-day overview"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“ï¸"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full month grid"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Scheduling Tasks"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click the Calendar Button:"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Click the ",e.jsx("span",{className:"text-lg",children:"ðŸ—“"})," calendar button on any task to open the scheduling modal. Set a date and time, then click Schedule."]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Task Duration:"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Set the ",e.jsx("strong",{children:"Time Estimate"})," on a task to control how tall it appears on the calendar (e.g., 30m, 1h, 2h)."]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click to Edit:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click any task on the calendar to open and edit its details, change times, or mark it complete."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"How to Schedule"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"Set a Start Date and Start Time on any task to have it appear on the calendar."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”´"}),e.jsx("span",{children:"Overdue tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ "}),e.jsx("span",{children:"Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"}),e.jsx("span",{children:"Due Soon (3 days)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”µ"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{children:"My Day tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âšª"}),e.jsx("span",{children:"To Do"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Backlog"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¢"}),e.jsx("span",{children:"Quick Wins"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Visual Indicators"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-red-500 font-medium",children:"Red line"})," â€“ Current time indicator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-orange-500 font-medium",children:"âš ï¸ Orange ring"})," â€“ Task overlaps with another scheduled task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"Colored bars"})," â€“ Tasks are color-coded by project"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"30-min slots"})," â€“ Calendar auto-scrolls to 6am on load"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"5"}),"Quick Actions"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"Hover over any scheduled task to reveal action buttons:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"â–¶"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1",children:"Start task"})]}),e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ“"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1",children:"Mark done"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ•"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1",children:"Remove from calendar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Removing a task from calendar clears its scheduled time. If not done, it returns to the sidebar for rescheduling."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"âš™ï¸"}),"Workflow Automation"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When you schedule a task:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:'â€¢ Status automatically changes to "To Do" (if in Backlog)'}),e.jsx("li",{children:"â€¢ Start date is set to the scheduled day"}),e.jsx("li",{children:"â€¢ Start time is set to the slot time"}),e.jsx("li",{children:"â€¢ Task appears in My Day if scheduled for today"})]})]})]})]}),x==="alltasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—ƒï¸"}),"All Tasks View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:['Access all your tasks in a powerful table format. Click the view switcher in the header and select "All Tasks" or press ',e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒA"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+A"})," (Win)."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Sorting"]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Click any column header to sort by that field. Click again to reverse the sort order. An arrow indicator shows the current sort direction."}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Sortable columns: Title, Project, Status, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Created"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Filtering"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-medium",children:"Filters"})," button to show filter inputs for each column"]}),e.jsx("p",{children:"â€¢ Type in the filter boxes below column headers to narrow results"}),e.jsxs("p",{children:["â€¢ Click ",e.jsx("span",{className:"text-red-600",children:"Clear Filters"})," to reset all filters"]}),e.jsx("p",{children:"â€¢ Active filters show a dot indicator on the Filters button"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"3"}),"Export to CSV"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Export CSV"})," button to download your tasks."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Includes: Title, Project, Status, Critical, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Description, and Created date."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Only currently filtered/visible tasks are exported."})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"4"}),"Import from CSV"]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium",children:"Import CSV"})," button to bulk create or update tasks."]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Create new tasks:"})," Use ",e.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:"*"})," in the ID column"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Update existing:"})," Include the task's existing ID"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Template:"})," Export first to get the correct column format"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Great for migrating from other tools or bulk task creation."})]})]})]}),x==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Creating Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-indigo-500 text-white rounded text-sm font-medium",children:"+"})," button in the header"]}),e.jsxs("p",{children:["â€¢ Or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒT"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+T"})," (Win)"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Fields"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Title *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The task name (required)"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Project *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Which project this belongs to"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Start Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When to start working on it"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deadline for completion"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Time Estimate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long it will take"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Effort Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low / Medium / High effort"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Client/customer for the task"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Assignee"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Who's responsible"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type of work"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flag as high priority"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Completing Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover"})," over a task and click the ",e.jsx("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded text-sm",children:"âœ“ Done"})," button"]}),e.jsxs("p",{children:["â€¢ Or ",e.jsx("strong",{children:"drag"}),' the task to the "Done" column']}),e.jsx("p",{children:"â€¢ Or open the task and change its status"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Dependencies (Blocking)"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("p",{children:'â€¢ In the task editor, use "Blocked By" to select tasks that must be completed first'}),e.jsx("p",{children:"â€¢ Blocked tasks show with ðŸ”’ and an orange border"}),e.jsx("p",{children:'â€¢ When the blocking task is completed, the blocked task becomes "ready to start"'})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Recurring Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("p",{children:"â€¢ Set a recurrence pattern: Daily, Weekly, Bi-weekly, Monthly"}),e.jsx("p",{children:"â€¢ When completed, a new instance is automatically created"}),e.jsx("p",{children:"â€¢ Recurring tasks show ðŸ” on the card"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"6"}),"Attachments"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Adding Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Open a task and go to the Details tab"}),e.jsx("p",{children:'â€¢ Drag & drop files or click "Choose files"'}),e.jsx("p",{children:"â€¢ Supports images, PDFs, documents, and more"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Viewing Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Click any attachment to open the viewer"}),e.jsx("p",{children:"â€¢ PDFs display inline with page navigation"}),e.jsx("p",{children:"â€¢ Images show in a lightbox view"}),e.jsx("p",{children:"â€¢ Use â† â†’ arrow keys to navigate between multiple attachments"}),e.jsx("p",{children:"â€¢ Click the download icon to save files locally"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"ðŸ’¡ Tasks with attachments show a ðŸ“Ž icon with count on the card"})]})]})]}),x==="shortcuts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Navigation Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"â˜€ï¸ My Day View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"D"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“‹ Board View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"B"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ—“ Calendar View"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"L"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ” Quick Search"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"/"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Action Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Task"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"T"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Project"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"P"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Import Notes"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[b,"N"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Quick Add Task"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Q"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Help / Shortcuts"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"?"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Close Modal"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Esc"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click task"})," â€“ Open task editor"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task"})," â€“ Move between columns on board"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover task"})," â€“ See quick action buttons (desktop)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click ðŸ—“ button"})," â€“ Schedule task on calendar"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Need more help? ",e.jsx("a",{href:"mailto:support@gettrackli.com",className:"text-indigo-500 hover:text-indigo-600 hover:underline",children:"Contact support"})]}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:"Got it!"})]})]})]})},Va=({isOpen:r,onClose:l,tasks:o,projects:b,onEditTask:x,allTasks:D})=>{const[g,c]=d.useState(""),p=d.useRef(null);if(d.useEffect(()=>{r&&p.current&&p.current.focus(),r||c("")},[r]),d.useEffect(()=>{const v=C=>{C.key==="Escape"&&r&&l()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[r,l]),!r)return null;const k=g.trim()?o.filter(v=>{var m,j,z,L,R;const C=g.toLowerCase();return((m=v.title)==null?void 0:m.toLowerCase().includes(C))||((j=v.description)==null?void 0:j.toLowerCase().includes(C))||((z=v.assignee)==null?void 0:z.toLowerCase().includes(C))||((L=v.customer)==null?void 0:L.toLowerCase().includes(C))||((R=v.notes)==null?void 0:R.toLowerCase().includes(C))}):[];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:p,type:"text",value:g,onChange:v=>c(v.target.value),placeholder:"Search tasks by title, description, assignee, customer...",className:"flex-1 text-lg outline-none placeholder-gray-400 bg-transparent dark:text-white"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300 rounded",children:"ESC"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:g.trim()===""?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{children:"Start typing to search across all tasks"})]}):k.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No results found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-300 mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:k.map(v=>{var z;const C=b.find(L=>L.id===v.project_id),m=ot.find(L=>L.id===v.category),j=ct(v.due_date,v.status);return e.jsx("button",{onClick:()=>{x(v),l()},className:"w-full p-4 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mt-1.5 shrink-0",style:{backgroundColor:_t[v.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white truncate",children:v.title}),v.critical&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("span",{children:C==null?void 0:C.name}),m&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{color:m.color},children:m.label})]}),v.assignee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:v.assignee})]}),v.due_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:j==="overdue"?"text-red-600":j==="today"?"text-orange-600":"",children:["Due ",St(v.due_date)]})]})]}),v.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 truncate",children:v.description})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-lg text-gray-500 shrink-0",children:(z=at.find(L=>L.id===v.status))==null?void 0:z.title})]})},v.id)})})}),k.length>0&&e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-sm text-gray-500",children:[k.length," task",k.length!==1?"s":""," found"]})]})]})},Ha=({task:r,highlight:l,onSelectForScheduling:o,onEditTask:b,COLUMN_COLORS:x,formatTimeEstimate:D,formatDate:g})=>{const c=k=>{k.stopPropagation(),k.preventDefault(),o(r)},p=()=>{b(r)};return e.jsx("div",{onClick:p,className:`relative p-2.5 rounded-lg border shadow-sm cursor-pointer hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 ${l==="red"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":l==="orange"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":l==="yellow"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":l==="pink"?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800":l==="amber"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":l==="green"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":l==="blue"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":l==="gray"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 shrink-0",style:{backgroundColor:x[r.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[r.critical&&"ðŸš© ",r.title]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-[10px] text-gray-500 dark:text-gray-300",children:[r.time_estimate&&e.jsxs("span",{children:["â±",D(r.time_estimate)]}),r.due_date&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),g(r.due_date)]})]})]}),e.jsx("button",{onClick:c,className:"shrink-0 p-1.5 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 transition-colors",title:"Click to schedule",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})},Ga=({tasks:r,projects:l,onEditTask:o,allTasks:b,onUpdateTask:x,onCreateTask:D,onDeleteTask:g,onDuplicateTask:c,viewMode:p,setViewMode:k,onShowConfirm:v})=>{const[C,m]=d.useState(new Date),[j,z]=d.useState(null),[L,R]=d.useState(null),[ee,me]=d.useState(null),[P,B]=d.useState(null),[I,ne]=d.useState(null),[xe,be]=d.useState(null),[ve,Y]=d.useState(null),[ge,De]=d.useState(new Date().toISOString().split("T")[0]),[N,Q]=d.useState("09:00"),E=d.useRef(null),f=d.useRef(!1),se=[{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},{bg:"bg-emerald-100 dark:bg-emerald-900/50",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800"},{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800"},{bg:"bg-cyan-100 dark:bg-cyan-900/50",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-200 dark:border-cyan-800"},{bg:"bg-pink-100 dark:bg-pink-900/50",text:"text-pink-700 dark:text-pink-300",border:"border-pink-200 dark:border-pink-800"},{bg:"bg-amber-100 dark:bg-amber-900/50",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800"},{bg:"bg-teal-100 dark:bg-teal-900/50",text:"text-teal-700 dark:text-teal-300",border:"border-teal-200 dark:border-teal-800"}],M=u=>{if(!u)return{bg:"bg-indigo-100 dark:bg-indigo-900/50",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"};const S=u.split("").reduce((w,V)=>w+V.charCodeAt(0),0)%se.length;return se[S]},ie=(u,S)=>{if(!u.start_time)return!1;const w=S.toISOString().split("T")[0],V=X(u.start_time),Z=V+(u.time_estimate||30);return r.some(J=>{if(J.id===u.id||J.start_date!==w||!J.start_time)return!1;const de=X(J.start_time),ye=de+(J.time_estimate||30);return V<ye&&Z>de})};d.useEffect(()=>{(p==="daily"||p==="weekly")&&E.current&&(E.current.scrollTop=384)},[p,C]),d.useEffect(()=>{if(!P)return;const u=w=>{w.preventDefault()},S=w=>{Lt(w)};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",S)}},[P]);const K=["January","February","March","April","May","June","July","August","September","October","November","December"],oe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Le=Array.from({length:48},(u,S)=>{const w=S*30,V=Math.floor(w/60),Z=w%60,J=V%12||12,de=V<12?"AM":"PM";return{slotIndex:S,minutes:w,label:`${J}:${Z.toString().padStart(2,"0")} ${de}`,isHour:Z===0}}),je=u=>{if(u==null)return"";const S=Math.floor(u/60),w=u%60;return`${S.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`},y=u=>{if(!u)return"";if(u.includes("AM")||u.includes("PM"))return u;const[S,w]=u.split(":").map(Number);if(isNaN(S)||isNaN(w))return u;const V=S%12||12,Z=S<12?"AM":"PM";return`${V}:${w.toString().padStart(2,"0")} ${Z}`},X=u=>{var J;if(!u)return null;const S=u.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);if(!S)return null;let w=parseInt(S[1]);const V=parseInt(S[2]),Z=(J=S[3])==null?void 0:J.toUpperCase();return Z==="PM"&&w!==12&&(w+=12),Z==="AM"&&w===12&&(w=0),w*60+V},te=C.getFullYear(),le=C.getMonth(),pe=new Date(te,le,1),ke=new Date(te,le+1,0),_e=pe.getDay(),ze=ke.getDate(),We=new Date;We.setHours(0,0,0,0);const Je=()=>{const u=new Date(C);p==="daily"?u.setDate(u.getDate()-1):p==="weekly"?u.setDate(u.getDate()-7):u.setMonth(u.getMonth()-1),m(u)},Ie=()=>{const u=new Date(C);p==="daily"?u.setDate(u.getDate()+1):p==="weekly"?u.setDate(u.getDate()+7):u.setMonth(u.getMonth()+1),m(u)},U=()=>m(new Date),Ee=()=>ne(null);d.useEffect(()=>{if(I){const u=()=>Ee();return document.addEventListener("click",u),document.addEventListener("contextmenu",u),()=>{document.removeEventListener("click",u),document.removeEventListener("contextmenu",u)}}},[I]);const nt=u=>{const S=new Date(u),w=S.getDay();return S.setDate(S.getDate()-w),S.setHours(0,0,0,0),S},Be=()=>{const u=nt(C);return Array.from({length:7},(S,w)=>{const V=new Date(u);return V.setDate(V.getDate()+w),V})},we=u=>{const S=u.toISOString().split("T")[0];return r.filter(w=>w.start_date===S||w.due_date===S)},n=(u,S)=>{const w=u.toISOString().split("T")[0],V=S*30,Z=V+30;return r.filter(J=>{if(J.start_date!==w)return!1;const de=J.start_time?X(J.start_time):null;return de===null?!1:de>=V&&de<Z})},$=(u,S)=>{f.current=!0,R(S),u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain",S.id)},H=()=>{R(null),me(null),setTimeout(()=>{f.current=!1},100)},he=u=>{!f.current&&!P&&o(u)},Oe=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{start_time:null,end_time:null})},Qe=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{status:"done"})},Ge=async(u,S)=>{u.stopPropagation(),x&&await x(S.id,{status:"in_progress"})},Ue=(u,S)=>{if(!D)return;const w=u.toISOString().split("T")[0],V=new Date().toISOString().split("T")[0],Z=S*30,J=je(Z),de=je(Z+30),ye={start_date:w,due_date:w,start_time:J,end_time:de,status:"todo"};w===V&&(ye.my_day_date=V),D(ye)},Ke=async(u,S,w)=>{console.log("handleDropOnSlot called",{date:u,slotIndex:S,hasEvent:!!w,draggedTask:L});let V=L;if(!V&&(w!=null&&w.dataTransfer)){const Se=w.dataTransfer.getData("text/plain");console.log("Fallback to dataTransfer, taskId:",Se),V=b.find(Ne=>Ne.id===Se),console.log("Found task from allTasks:",V==null?void 0:V.title)}if(!V||!x){console.log("Drop failed: no task or onUpdateTask",{taskToSchedule:V,hasOnUpdateTask:!!x,allTasksLength:b==null?void 0:b.length});return}const Z=u.toISOString().split("T")[0],J=new Date().toISOString().split("T")[0],de=S*30,ye=je(de),Xe=V.time_estimate||30,W=de+Xe,ce=je(W);console.log("Dropping task:",{taskId:V.id,dateStr:Z,startTime:ye,endTime:ce,duration:Xe});const Re={start_date:Z,start_time:ye,end_time:ce};V.due_date||(Re.due_date=Z),V.status==="backlog"&&(Re.status="todo"),Z===J&&(Re.my_day_date=J);const qe=V.id;R(null);try{await x(qe,Re),console.log("Task updated successfully with:",Re)}catch(Se){console.error("Error updating task:",Se)}},Dt=async u=>{if(!L||!x)return;const S=u.toISOString().split("T")[0];await x(L.id,{start_date:S,start_time:null,end_time:null}),R(null)},Zt=(u,S)=>{u.stopPropagation(),u.preventDefault(),B({task:S,startY:u.clientY,originalDuration:S.time_estimate||30})},Lt=async u=>{if(!P||!x){B(null);return}const S=u.clientY-P.startY,w=Math.round(S/32),V=Math.max(15,P.originalDuration+w*30),Z=X(P.task.start_time);if(Z!==null){const J=Z+V,de=je(J);console.log("Resizing task:",{taskId:P.task.id,oldDuration:P.originalDuration,newDuration:V,newEndTime:de}),await x(P.task.id,{time_estimate:V,end_time:de})}B(null)},Jt=()=>{const u=[];for(let S=0;S<_e;S++)u.push(e.jsx("div",{className:"h-20 sm:h-28 bg-gray-50/50 dark:bg-gray-800/30"},`empty-${S}`));for(let S=1;S<=ze;S++){const w=new Date(te,le,S),V=w.toISOString().split("T")[0],Z=we(w),J=w.getTime()===We.getTime(),de=j===V,ye=w<We,Xe=Z.filter(ce=>ce.status!=="done"&&ye&&!J),W=Z.filter(ce=>ce.critical&&ce.status!=="done");Z.filter(ce=>ce.status==="done"),Z.filter(ce=>ce.status!=="done"),u.push(e.jsxs("div",{"data-dropzone":"calendar-date","data-date":w,onClick:()=>{m(w),k("daily")},onDragOver:ce=>{ce.preventDefault(),ce.dataTransfer.dropEffect="move"},onDrop:ce=>{ce.preventDefault(),Dt(w)},className:`h-20 sm:h-28 p-1.5 sm:p-2 border-b border-r border-gray-100 dark:border-gray-800 cursor-pointer transition-all hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 touch-manipulation ${J?"bg-indigo-50 dark:bg-indigo-900/30 ring-2 ring-inset ring-indigo-400":de?"bg-indigo-100 dark:bg-indigo-900/50":ye?"bg-gray-50/30 dark:bg-gray-800/30":"bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5 sm:mb-1",children:[e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${J?"text-indigo-600 dark:text-indigo-400":ye?"text-gray-400 dark:text-gray-300":"text-gray-700 dark:text-gray-300"}`,children:S}),Z.length>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full ${Xe.length>0?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":W.length>0?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:Z.length})]}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 overflow-hidden",children:[Z.slice(0,2).map(ce=>(l.find(Re=>Re.id===ce.project_id),e.jsxs("div",{draggable:!0,onDragStart:Re=>$(Re,ce),onDragEnd:H,onClick:Re=>{Re.stopPropagation(),he(ce)},className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded truncate cursor-grab active:cursor-grabbing transition-all hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 ${ce.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":ce.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":ye&&!J?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300"}`,title:ce.title,children:[ce.critical&&"ðŸš© ",ce.title]},ce.id))),Z.length>2&&e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-300 px-1.5 sm:px-2",children:["+",Z.length-2," more"]})]})]},S))}return u},xt=j?r.filter(u=>u.due_date===j||u.start_date===j):[],Xt=()=>{if(p==="daily")return C.toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"});if(p==="weekly"){const u=Be(),S=u[0],w=u[6];return S.getMonth()===w.getMonth()?`${S.getDate()} - ${w.getDate()} ${K[S.getMonth()]} ${S.getFullYear()}`:`${S.getDate()} ${K[S.getMonth()].slice(0,3)} - ${w.getDate()} ${K[w.getMonth()].slice(0,3)} ${w.getFullYear()}`}return`${K[le]} ${te}`},Tt=()=>{const u=new Date().toISOString().split("T")[0],S=new Date;S.setHours(0,0,0,0);const w=new Date(S);w.setDate(w.getDate()+3);const V=r.filter(re=>{if(re.status==="done")return!1;if(!re.start_time)return!0;if(re.start_date){const Pe=new Date(re.start_date);if(Pe.setHours(0,0,0,0),Pe<S)return!0}return!1}),Z=re=>{if(re.status==="done")return!1;if(re.my_day_date){const Pe=new Date(re.my_day_date);if(Pe.setHours(0,0,0,0),Pe<S)return!1;if(Pe.getTime()===S.getTime())return!0}return re.start_date===u},J=V.filter(re=>Z(re)),de=V.filter(re=>{if(J.includes(re)||!re.due_date)return!1;const Pe=new Date(re.due_date);return Pe.setHours(0,0,0,0),Pe<S}),ye=V.filter(re=>J.includes(re)?!1:re.due_date===u),Xe=V.filter(re=>{if(J.includes(re)||ye.includes(re)||!re.due_date||re.due_date===u)return!1;const Pe=new Date(re.due_date);return Pe.setHours(0,0,0,0),Pe>S&&Pe<=w}),W=re=>J.includes(re)||de.includes(re)||ye.includes(re)||Xe.includes(re),ce=V.filter(re=>re.status==="in_progress"&&!W(re)),Re=V.filter(re=>re.status==="todo"&&!W(re)&&!ce.includes(re)),qe=V.filter(re=>re.status==="backlog"&&!W(re)&&!ce.includes(re)&&!Re.includes(re)),Se=V.filter(re=>re.energy_level==="low"&&!W(re)&&!ce.includes(re)&&!Re.includes(re)&&!qe.includes(re)),Ne=re=>re.sort((Pe,Ve)=>{if(Pe.critical&&!Ve.critical)return-1;if(!Pe.critical&&Ve.critical)return 1;if(Pe.due_date&&Ve.due_date){const cr=new Date(Pe.due_date)-new Date(Ve.due_date);if(cr!==0)return cr}return Pe.due_date&&!Ve.due_date?-1:!Pe.due_date&&Ve.due_date?1:new Date(Pe.created_at)-new Date(Ve.created_at)});return{overdue:Ne(de),dueToday:Ne(ye),dueSoon:Ne(Xe),inProgress:Ne(ce),myDay:Ne(J),todo:Ne(Re),backlog:Ne(qe),quickWins:Ne(Se)}},Mt=async()=>{ve&&(await x(ve.id,{start_date:ge,start_time:N,status:ve.status==="backlog"?"todo":ve.status}),Y(null))},Te=()=>{const u=C.toISOString().split("T")[0],S=C.toDateString()===new Date().toDateString(),w=Tt(),V=w.overdue.length+w.dueToday.length+w.dueSoon.length+w.inProgress.length+w.myDay.length+w.todo.length+w.backlog.length+w.quickWins.length,Z=({title:J,icon:de,tasks:ye,highlight:Xe,defaultOpen:W=!0})=>ye.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 mb-2 flex items-center gap-1.5",children:[e.jsx("span",{children:de})," ",J,e.jsxs("span",{className:"text-gray-400",children:["(",ye.length,")"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[ye.slice(0,5).map(ce=>e.jsx(Ha,{task:ce,highlight:Xe,onSelectForScheduling:Y,onEditTask:o,COLUMN_COLORS:_t,formatTimeEstimate:Pt,formatDate:St},ce.id)),ye.length>5&&e.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:["+",ye.length-5," more"]})]})]});return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[xe&&e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center justify-between animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"ðŸ—“"}),e.jsxs("span",{className:"text-sm font-medium truncate",children:["Click a time slot to schedule: ",xe.title]})]}),e.jsx("button",{onClick:()=>be(null),className:"shrink-0 p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),e.jsxs("div",{className:`h-12 flex items-center justify-center font-semibold ${S?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300"}`,children:[fe[C.getDay()]," ",C.getDate()]})]}),e.jsx("div",{ref:E,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Le.map(({slotIndex:J,label:de,isHour:ye})=>e.jsx("div",{className:"h-8 px-2 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:ye&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-300",children:de})},J))}),e.jsxs("div",{className:"relative",children:[S&&(()=>{const J=new Date,ye=(J.getHours()*60+J.getMinutes())/30*32;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${ye}px`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("div",{className:"flex-1 h-0.5 bg-red-500"})]})})})(),Le.map(({slotIndex:J,isHour:de})=>{const ye=n(C,J),Xe=ee&&ee.date===u&&ee.slotIndex===J;return e.jsxs("div",{"data-dropzone":"calendar-slot","data-date":C,"data-slot-index":J,className:`h-8 border-b relative transition-all duration-150 ${de?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} ${Xe&&L?"bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-inset ring-indigo-400":"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"} cursor-pointer`,onDragOver:W=>{W.preventDefault(),W.dataTransfer.dropEffect="move",me({date:u,slotIndex:J})},onDragLeave:()=>me(null),onDrop:W=>{W.preventDefault(),me(null),Ke(C,J,W)},onDoubleClick:()=>Ue(C,J),children:[Xe&&L&&e.jsx("div",{className:"absolute inset-x-1 top-0 bg-indigo-200/50 dark:bg-indigo-700/30 border-2 border-dashed border-indigo-400 rounded text-[10px] text-indigo-600 dark:text-indigo-300 px-1 truncate pointer-events-none z-30",style:{height:`${Math.ceil((L.time_estimate||30)/30)*32-2}px`},children:L.title}),ye.map(W=>{const ce=W.time_estimate||30,Re=Math.ceil(ce/30),qe=M(W.project_id),Se=ie(W,C);return e.jsxs("div",{draggable:!P,onDragStart:Ne=>!P&&$(Ne,W),onDragEnd:H,onClick:Ne=>{Ne.stopPropagation(),he(W)},onDoubleClick:Ne=>{Ne.stopPropagation(),he(W)},className:`absolute left-1 right-1 px-2 py-0.5 rounded text-xs font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${W.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":W.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${qe.bg} ${qe.text}`} ${Se?"ring-2 ring-orange-400 dark:ring-orange-500":""}`,style:{height:`${Re*32-2}px`,top:"1px"},title:`${W.title}${W.start_time?` (${y(W.start_time)}${W.end_time?" - "+y(W.end_time):""})`:""}${Se?" âš ï¸ Overlaps with another task":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"truncate text-[11px]",children:[Se&&e.jsx("span",{title:"Time conflict",children:"âš ï¸ "}),W.critical&&"ðŸš© ",W.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[(W.status==="backlog"||W.status==="todo")&&e.jsx("button",{onClick:Ne=>Ge(Ne,W),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Start task",children:"â–¶"}),W.status!=="done"&&e.jsx("button",{onClick:Ne=>Qe(Ne,W),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Ne=>Oe(Ne,W),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from calendar",children:"âœ•"})]})]}),Re>1&&W.start_time&&e.jsxs("div",{className:"text-[9px] opacity-70",children:[y(W.start_time),W.end_time&&` - ${y(W.end_time)}`]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize bg-transparent hover:bg-indigo-300/50 dark:hover:bg-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b",onMouseDown:Ne=>Zt(Ne,W)})]},W.id)})]},J)})]})]})})]}),e.jsx("div",{className:"w-full lg:w-72 lg:shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ—“"})," Schedule Tasks"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300 mb-4",children:["Click ðŸ—“ to set date & time",S?" â€¢ Auto-adds to My Day":""]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-1",children:V===0?e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-300 text-center py-8",children:"All caught up!"}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"My Day",icon:"â˜€ï¸",tasks:w.myDay,highlight:"amber"}),e.jsx(Z,{title:"In Progress",icon:"ðŸŸ£",tasks:w.inProgress,highlight:"pink"}),e.jsx(Z,{title:"To Do",icon:"ðŸ“‹",tasks:w.todo,highlight:"blue"}),e.jsx(Z,{title:"Backlog",icon:"ðŸ“¦",tasks:w.backlog,highlight:"gray"}),e.jsx(Z,{title:"Overdue",icon:"ðŸ”´",tasks:w.overdue,highlight:"red"}),e.jsx(Z,{title:"Due Today",icon:"ðŸŸ ",tasks:w.dueToday,highlight:"orange"}),e.jsx(Z,{title:"Due Soon",icon:"ðŸŸ¡",tasks:w.dueSoon,highlight:"yellow"}),e.jsx(Z,{title:"Quick Wins",icon:"âš¡",tasks:w.quickWins,highlight:"green"})]})})]})})]})},er=()=>{const u=Be(),S=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[700px]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),u.map((w,V)=>{const J=w.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`h-12 flex flex-col items-center justify-center ${J?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:oe[w.getDay()]}),e.jsx("span",{className:`text-sm font-semibold ${J?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:w.getDate()})]},V)})]}),e.jsx("div",{ref:E,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Le.map(({slotIndex:w,label:V,isHour:Z})=>e.jsx("div",{className:"h-6 px-1 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:Z&&e.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-300",children:V})},w))}),u.map((w,V)=>{const J=w.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`min-w-[80px] relative ${J?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:[J&&(()=>{const de=new Date,Xe=(de.getHours()*60+de.getMinutes())/30*24;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${Xe}px`},children:e.jsx("div",{className:"h-0.5 bg-red-500"})})})(),Le.map(({slotIndex:de,isHour:ye})=>{const Xe=n(w,de);return e.jsx("div",{"data-dropzone":"calendar-slot","data-date":w,"data-slot-index":de,className:`h-6 border-b relative transition-colors ${ye?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 cursor-pointer`,onDragOver:W=>{W.preventDefault(),W.dataTransfer.dropEffect="move"},onDrop:W=>{W.preventDefault(),Ke(w,de,W)},onDoubleClick:()=>Ue(w,de),children:Xe.map(W=>{const ce=W.time_estimate||30,Re=Math.min(Math.ceil(ce/30),8),qe=M(W.project_id);return e.jsx("div",{draggable:!0,onDragStart:Se=>$(Se,W),onDragEnd:H,onClick:Se=>{Se.stopPropagation(),he(W)},onDoubleClick:Se=>{Se.stopPropagation(),he(W)},className:`absolute left-0.5 right-0.5 px-1 rounded text-[9px] font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${W.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":W.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${qe.bg} ${qe.text}`}`,style:{height:`${Re*24-2}px`,top:"1px"},title:W.title,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"truncate",children:[W.critical&&"ðŸš©",W.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(W.status==="backlog"||W.status==="todo")&&e.jsx("button",{onClick:Se=>Ge(Se,W),className:"hover:text-blue-500",title:"Start task",children:"â–¶"}),W.status!=="done"&&e.jsx("button",{onClick:Se=>Qe(Se,W),className:"hover:text-green-500",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Se=>Oe(Se,W),className:"hover:text-red-500",title:"Remove from calendar",children:"âœ•"})]})]})},W.id)})},de)})]},V)})]})})]})})})};return e.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-4 sm:py-8 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:Xt()}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300 mt-0.5 sm:mt-1",children:[r.filter(u=>(u.due_date||u.start_date)&&u.status!=="done").length," tasks scheduled"]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:U,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:Je,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:Ie,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-800 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>k("daily"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="daily"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Day"}),e.jsx("button",{onClick:()=>k("weekly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="weekly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>k("monthly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="monthly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Month"})]})]}),p==="daily"&&Te(),p==="weekly"&&er(),p==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:oe.map((u,S)=>e.jsxs("div",{className:"py-2 sm:py-3 text-center text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"hidden sm:inline",children:u}),e.jsx("span",{className:"sm:hidden",children:u.charAt(0)})]},u))}),e.jsx("div",{className:"grid grid-cols-7",children:Jt()})]}),j&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white mb-4",children:["Tasks for ",new Date(j+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})]}),xt.length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm",children:"No tasks due on this date"}):e.jsx("div",{className:"space-y-3",children:xt.map(u=>{var V;const S=l.find(Z=>Z.id===u.project_id),w=ot.find(Z=>Z.id===u.category);return e.jsx("div",{onClick:()=>o(u),className:`p-4 rounded-xl border shadow-sm cursor-pointer hover:shadow-md transition-all ${u.status==="done"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":u.critical?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:_t[u.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:`font-medium ${u.status==="done"?"text-gray-400 line-through":"text-gray-800"}`,children:[u.critical&&"ðŸš© ",u.title]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[S&&e.jsx("span",{children:S.name}),w&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:w.color},children:w.label}),u.assignee&&e.jsxs("span",{children:["â€¢ ",u.assignee]})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${u.status==="done"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(V=at.find(Z=>Z.id===u.status))==null?void 0:V.title})]})},u.id)})})]}),e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-400"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Overdue / Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to reschedule"})]})]})]}),(p==="daily"||p==="weekly")&&e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-100 dark:bg-indigo-900/50"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to schedule time"})]})]}),ve&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Y(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-xs p-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"ðŸ—“ Schedule Task"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mb-3 line-clamp-2",children:ve.title}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:ge,onChange:u=>De(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:N,onChange:u=>Q(u.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsx("button",{onClick:()=>Y(null),className:"flex-1 px-3 py-2.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:Mt,className:"flex-1 px-3 py-2.5 text-sm bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-semibold",children:"Schedule"})]})]})]})]})]})},Ur=({task:r,project:l,showRemove:o=!1,isCompleted:b=!1,blocked:x,dueDateStatus:D,energyStyle:g,onEditTask:c,onQuickStatusChange:p,onRemoveFromMyDay:k,onAddToMyDay:v,showReorder:C=!1,isFirst:m=!1,isLast:j=!1,onMoveUp:z,onMoveDown:L})=>e.jsx("div",{onClick:()=>c(r),className:`group relative p-4 rounded-xl shadow-sm select-none transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 cursor-pointer ${b?"bg-gray-50 dark:bg-gray-800/50 opacity-60":x?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800":r.critical?"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[C&&!b&&e.jsxs("div",{className:"flex flex-col gap-0.5 shrink-0",children:[e.jsx("button",{onClick:R=>{R.stopPropagation(),z==null||z()},disabled:m,className:`p-0.5 rounded transition-colors ${m?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move up",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:R=>{R.stopPropagation(),L==null||L()},disabled:j,className:`p-0.5 rounded transition-colors ${j?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move down",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("button",{onClick:R=>{R.stopPropagation(),p(r.id,r.status==="done"?"todo":"done")},className:`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${r.status==="done"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,children:r.status==="done"&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h4",{className:`font-medium text-sm leading-tight ${b?"text-gray-400 dark:text-gray-300 line-through":"text-gray-800 dark:text-gray-100"}`,children:[r.critical&&!b&&e.jsx("span",{className:"text-red-500 mr-1",children:"ðŸš©"}),x&&!b&&e.jsx("span",{className:"text-orange-500 mr-1",children:"ðŸ”’"}),r.title]}),v&&!b&&e.jsx("button",{onClick:R=>{R.stopPropagation(),v(r.id)},className:"p-1.5 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-all touch-manipulation text-amber-500 hover:text-amber-600 dark:text-amber-400",title:"Add to My Day",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),o&&!b&&e.jsx("button",{onClick:R=>k(R,r),className:"p-2 sm:p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 sm:bg-transparent sm:dark:bg-transparent sm:opacity-0 sm:group-hover:opacity-100 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all touch-manipulation",title:"Remove from My Day",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[l&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-300 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),l.name]}),r.due_date&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${D==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":D==="today"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":D==="soon"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:St(r.due_date)}),g&&e.jsxs("span",{className:"text-xs",title:`${g.label} effort`,children:[r.energy_level==="low"&&e.jsx("span",{style:{color:g.text},children:"â–°"}),r.energy_level==="medium"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°"}),r.energy_level==="high"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°â–°"})]}),r.time_estimate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300",children:r.time_estimate<60?`${r.time_estimate}m`:`${Math.round(r.time_estimate/60)}h`})]})]})]})}),Ua=({tasks:r,projects:l,onEditTask:o,allTasks:b,onQuickStatusChange:x,onUpdateMyDayDate:D,showConfettiPref:g})=>{const[c,p]=d.useState("overdue"),[k,v]=d.useState(!1),C=d.useRef(null),[m,j]=d.useState(()=>{try{const y=localStorage.getItem("trackli-myday-order");return y?JSON.parse(y):[]}catch{return[]}}),z=new Date;z.setHours(0,0,0,0);const L=z.toISOString().split("T")[0],R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ee=["January","February","March","April","May","June","July","August","September","October","November","December"],me=new Date().getHours(),P=me<12?"Good morning":me<17?"Good afternoon":"Good evening",B=y=>{if(y.my_day_date){const X=new Date(y.my_day_date);if(X.setHours(0,0,0,0),X<z)return!1;if(X.getTime()===z.getTime()){if(y.status==="done"){if(!y.completed_at)return!1;const te=new Date(y.completed_at);return te.setHours(0,0,0,0),te.getTime()===z.getTime()}return!0}}if(y.status==="done"){if(!y.completed_at)return!1;const X=new Date(y.completed_at);if(X.setHours(0,0,0,0),X.getTime()!==z.getTime())return!1;if(y.start_date){const te=new Date(y.start_date);if(te.setHours(0,0,0,0),te<=z)return!0}return!1}if(y.start_date){const X=new Date(y.start_date);if(X.setHours(0,0,0,0),X<=z)return!0}return!1},I=d.useMemo(()=>r.filter(y=>B(y)),[r]),ne=d.useMemo(()=>I.filter(y=>y.status!=="done"),[I]),xe=d.useMemo(()=>I.filter(y=>y.status==="done"),[I]),be=d.useMemo(()=>{const y=[...ne];return m.length>0?y.sort((X,te)=>{const le=m.indexOf(X.id),pe=m.indexOf(te.id);return le!==-1&&pe!==-1?le-pe:le!==-1?-1:pe!==-1?1:0}):y.sort((X,te)=>{const le=!!X.start_date,pe=!!te.start_date;if(le&&!pe)return-1;if(!le&&pe)return 1;if(le&&pe){const We=new Date(X.start_date)-new Date(te.start_date);if(We!==0)return We;const Je=X.start_time||X.end_time,Ie=te.start_time||te.end_time;if(Je&&!Ie)return-1;if(!Je&&Ie)return 1;if(Je&&Ie){const U=Je.localeCompare(Ie);if(U!==0)return U}}const ke={in_progress:0,todo:1,backlog:2},_e=ke[X.status]??3,ze=ke[te.status]??3;return _e!==ze?_e-ze:new Date(X.created_at)-new Date(te.created_at)}),y},[ne,m]),ve=(y,X)=>{const te=be.map(_e=>_e.id),le=te.indexOf(y);if(le===-1)return;const pe=X==="up"?le-1:le+1;if(pe<0||pe>=te.length)return;const ke=[...te];[ke[le],ke[pe]]=[ke[pe],ke[le]],j(ke),localStorage.setItem("trackli-myday-order",JSON.stringify(ke))},Y=r.filter(y=>!B(y)&&y.status!=="done"),ge=Y.filter(y=>(y.status==="todo"||y.status==="in_progress")&&!dt(y,b)),De=ge.filter(y=>ct(y.due_date,y.status)==="overdue"),N=ge.filter(y=>ct(y.due_date,y.status)==="today"&&!De.includes(y)),Q=ge.filter(y=>{if(!y.due_date||De.includes(y)||N.includes(y))return!1;const X=new Date(y.due_date);X.setHours(0,0,0,0);const te=Math.ceil((X-z)/(1e3*60*60*24));return te>0&&te<=3}),E=y=>De.includes(y)||N.includes(y)||Q.includes(y),f=Y.filter(y=>y.status==="in_progress"&&!dt(y,b)&&!E(y)),se=Y.filter(y=>y.status==="todo"&&!dt(y,b)&&!E(y)),M=Y.filter(y=>y.status==="backlog"&&!dt(y,b)),ie=Y.filter(y=>y.energy_level==="low"&&!E(y)&&!f.includes(y)&&!se.includes(y)&&!M.includes(y)).slice(0,5),K=ne.reduce((y,X)=>y+(X.time_estimate||0),0),oe=xe.reduce((y,X)=>y+(X.time_estimate||0),0),fe=I.length>0?Math.round(xe.length/I.length*100):0;d.useEffect(()=>{C.current>0&&ne.length===0&&xe.length>0&&!k&&g!==!1&&(v(!0),_a().then(y=>{const te=Date.now()+3e3,le=()=>{y({particleCount:3,angle:60,spread:55,origin:{x:0,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),y({particleCount:3,angle:120,spread:55,origin:{x:1,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),Date.now()<te&&requestAnimationFrame(le)};le()})),C.current=ne.length},[ne.length,xe.length,k,g]);const Le=(y,X)=>{y.stopPropagation();const te=new Date(z);te.setDate(te.getDate()-1);const le=te.toISOString().split("T")[0];D(X.id,le)},je=({title:y,emoji:X,color:te,tasks:le,id:pe})=>{if(le.length===0)return null;const ke=c===pe;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>p(ke?null:pe),className:`w-full px-3 sm:px-4 py-3 sm:py-3 flex items-center justify-between ${te} transition-colors touch-manipulation`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:X}),e.jsx("span",{className:"font-medium text-sm",children:y}),e.jsx("span",{className:"text-xs bg-white/50 dark:bg-black/20 px-2 py-0.5 rounded-full",children:le.length})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${ke?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ke&&e.jsx("div",{className:"p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-900",children:le.map(_e=>{const ze=l.find(U=>U.id===_e.project_id),We=dt(_e,b),Je=ct(_e.due_date,_e.status),Ie=Ot[_e.energy_level];return e.jsx(Ur,{task:_e,project:ze,blocked:We,dueDateStatus:Je,energyStyle:Ie,onEditTask:o,onQuickStatusChange:x,onAddToMyDay:U=>D(U,L)},_e.id)})})]})};return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:p-6 py-4",children:[e.jsx("div",{className:"mb-4 sm:mb-6 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3",children:[e.jsx(Ba,{hour:me})," ",P]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-300 mt-0.5 sm:mt-1",children:[R[z.getDay()],", ",ee[z.getMonth()]," ",z.getDate()]})]})}),I.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Today's Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:[xe.length," of ",I.length," tasks (",fe,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${fe}%`}})}),K>0&&e.jsxs("div",{className:"flex justify-between mt-2 text-[10px] sm:text-xs text-gray-500 dark:text-gray-300",children:[e.jsxs("span",{children:["~",Math.round(K/60),"h remaining"]}),e.jsxs("span",{children:["~",Math.round(oe/60),"h completed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[Fe.myday(),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:"My Day"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:["(",be.length," active)"]})]}),e.jsx("div",{className:"min-h-[150px] sm:min-h-[200px] rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 transition-all",children:be.length===0&&xe.length===0?e.jsx(Ms,{icon:"sun",title:"Your day is wide open",description:"Click the sun button on recommended tasks below to add them here, or create tasks with today's start date.",variant:"default"}):e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[be.map((y,X)=>{const te=l.find(_e=>_e.id===y.project_id),le=dt(y,b),pe=ct(y.due_date,y.status),ke=Ot[y.energy_level];return e.jsx(Ur,{task:y,project:te,showRemove:!0,blocked:le,dueDateStatus:pe,energyStyle:ke,onEditTask:o,onQuickStatusChange:x,onRemoveFromMyDay:Le,showReorder:be.length>1,isFirst:X===0,isLast:X===be.length-1,onMoveUp:()=>ve(y.id,"up"),onMoveDown:()=>ve(y.id,"down")},y.id)}),xe.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-3 sm:pt-4 pb-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-300",children:["Completed today (",xe.length,")"]}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),xe.map(y=>{const X=l.find(ke=>ke.id===y.project_id),te=dt(y,b),le=ct(y.due_date,y.status),pe=Ot[y.energy_level];return e.jsx(Ur,{task:y,project:X,isCompleted:!0,blocked:te,dueDateStatus:le,energyStyle:pe,onEditTask:o,onQuickStatusChange:x},y.id)})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[Fe.lightbulb(),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Recommendations"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-300 mb-3 sm:mb-4",children:"Click the sun button on any task to add it to your focus list"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx(je,{id:"overdue",title:"Overdue",emoji:"ðŸ”´",color:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",tasks:De}),e.jsx(je,{id:"dueToday",title:"Due Today",emoji:"ðŸŸ ",color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",tasks:N}),e.jsx(je,{id:"dueSoon",title:"Due Soon",emoji:"ðŸŸ¡",color:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",tasks:Q}),e.jsx(je,{id:"quickWins",title:"Quick Wins",emoji:"ðŸŸ¢",color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400",tasks:ie}),e.jsx(je,{id:"inProgress",title:"In Progress",emoji:"ðŸ”µ",color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",tasks:f}),e.jsx(je,{id:"todo",title:"To Do",emoji:"âšª",color:"bg-slate-50 dark:bg-slate-900/20 text-slate-700 dark:text-slate-400",tasks:se}),e.jsx(je,{id:"backlog",title:"Backlog",emoji:"ðŸ“‹",color:"bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-300",tasks:M}),De.length===0&&N.length===0&&Q.length===0&&ie.length===0&&f.length===0&&se.length===0&&M.length===0&&e.jsx(Ms,{icon:"celebrate",title:"You're all caught up!",description:"No tasks need your attention right now. Enjoy the moment or create something new.",variant:"celebrate"})]})]})]})]})},qa=({tasks:r,projects:l,onEditTask:o,allTasks:b})=>{var De;const{user:x}=As(),[D,g]=d.useState("created_at"),[c,p]=d.useState("desc"),[k,v]=d.useState({}),[C,m]=d.useState(!1),j=N=>{const Q=r.map(E=>{var f,se,M;return N==="project"?(f=l.find(ie=>ie.id===E.project_id))==null?void 0:f.name:N==="category"?(se=ot.find(ie=>ie.id===E.category))==null?void 0:se.label:N==="source"?(M=Wt.find(ie=>ie.id===E.source))==null?void 0:M.label:E[N]}).filter(Boolean);return[...new Set(Q)].sort()},z=N=>{D===N?p(c==="asc"?"desc":"asc"):(g(N),p("asc"))},L=d.useMemo(()=>r.filter(N=>{var Q,E,f;for(const[se,M]of Object.entries(k)){if(!M)continue;let ie;if(se==="project"?ie=((Q=l.find(K=>K.id===N.project_id))==null?void 0:Q.name)||"":se==="category"?ie=((E=ot.find(K=>K.id===N.category))==null?void 0:E.label)||"":se==="source"?ie=((f=Wt.find(K=>K.id===N.source))==null?void 0:f.label)||"":ie=N[se]||"",M==="__blank__"&&ie||M!=="__blank__"&&String(ie).toLowerCase()!==String(M).toLowerCase())return!1}return!0}),[r,k,l]),R=d.useMemo(()=>[...L].sort((N,Q)=>{var se,M,ie,K;let E,f;return D==="project"?(E=((se=l.find(oe=>oe.id===N.project_id))==null?void 0:se.name)||"",f=((M=l.find(oe=>oe.id===Q.project_id))==null?void 0:M.name)||""):D==="category"?(E=((ie=ot.find(oe=>oe.id===N.category))==null?void 0:ie.label)||"",f=((K=ot.find(oe=>oe.id===Q.category))==null?void 0:K.label)||""):(E=N[D]??"",f=Q[D]??""),(D.includes("date")||D==="created_at")&&(E=E?new Date(E).getTime():0,f=f?new Date(f).getTime():0),typeof E=="boolean"&&(E=E?1:0),typeof f=="boolean"&&(f=f?1:0),E<f?c==="asc"?-1:1:E>f?c==="asc"?1:-1:0}),[L,D,c,l]),ee=()=>{const N=["ID","Title","Project","Project Archived","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description","Created"],Q=R.map(M=>{var K,oe;const ie=l.find(fe=>fe.id===M.project_id);return[M.id||"",M.title||"",(ie==null?void 0:ie.name)||"",ie!=null&&ie.archived?"Yes":"No",M.status||"",M.critical?"Yes":"No",M.due_date||"",M.start_date||"",M.assignee||"",M.customer||"",((K=ot.find(fe=>fe.id===M.category))==null?void 0:K.label)||"",M.energy_level||"",((oe=Wt.find(fe=>fe.id===M.source))==null?void 0:oe.label)||"",M.time_estimate?`${M.time_estimate}m`:"",(M.description||"").replace(/[\n\r,]/g," "),M.created_at?new Date(M.created_at).toLocaleDateString():""]}),E=[N,...Q].map(M=>M.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(",")).join(`
`),f=new Blob([E],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(f),se.download=`trackli-tasks-${new Date().toISOString().split("T")[0]}.csv`,se.click()},me=()=>{var M;const N=["ID","Title","Project","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description"],Q=["*","Example Task",((M=l[0])==null?void 0:M.name)||"Project Name","todo","No","","","","","","","","30m","Task description here"],E=[N,Q].map(ie=>ie.map(K=>`"${String(K).replace(/"/g,'""')}"`).join(",")).join(`
`),f=new Blob([E],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");se.href=URL.createObjectURL(f),se.download="trackli-template.csv",se.click()},[P,B]=d.useState(!1),[I,ne]=d.useState(null),xe=d.useRef(null),be=async N=>{var E,f,se;const Q=(E=N.target.files)==null?void 0:E[0];if(Q){B(!0),ne(null);try{const ie=(await Q.text()).split(`
`).filter(Be=>Be.trim());if(ie.length<2){ne({error:"CSV must have a header row and at least one data row"}),B(!1);return}const K=Be=>{const we=[];let n="",$=!1;for(let H=0;H<Be.length;H++){const he=Be[H];he==='"'?$&&Be[H+1]==='"'?(n+='"',H++):$=!$:he===","&&!$?(we.push(n.trim()),n=""):n+=he}return we.push(n.trim()),we},oe=K(ie[0]).map(Be=>Be.toLowerCase().trim()),fe=oe.indexOf("id"),Le=oe.indexOf("title"),je=oe.indexOf("project"),y=oe.indexOf("status"),X=oe.indexOf("critical"),te=oe.indexOf("due date"),le=oe.indexOf("start date"),pe=oe.indexOf("assignee"),ke=oe.indexOf("customer"),_e=oe.indexOf("category"),ze=oe.indexOf("effort"),We=oe.indexOf("source"),Je=oe.indexOf("time estimate"),Ie=oe.indexOf("description");if(Le===-1){ne({error:"CSV must have a Title column"}),B(!1);return}let U=0,Ee=0,nt=[];for(let Be=1;Be<ie.length;Be++){const we=K(ie[Be]);if(we.length===0||we.every(Te=>!Te))continue;const n=fe>=0?we[fe]:"",$=Le>=0?we[Le]:"";if(!$){nt.push(`Row ${Be+1}: Missing title`);continue}const H=je>=0?we[je]:"",he=l.find(Te=>Te.name.toLowerCase()===H.toLowerCase()),Oe=_e>=0?we[_e]:"",Qe=ot.find(Te=>Te.label.toLowerCase()===Oe.toLowerCase()),Ge=We>=0?we[We]:"",Ue=Wt.find(Te=>Te.label.toLowerCase()===Ge.toLowerCase()),Ke=y>=0?(f=we[y])==null?void 0:f.toLowerCase():"todo",Zt={backlog:"backlog","to do":"todo",todo:"todo","in progress":"in_progress",in_progress:"in_progress",done:"done"}[Ke]||"todo",Lt=X>=0?(se=we[X])==null?void 0:se.toLowerCase():"",Jt=Lt==="yes"||Lt==="true"||Lt==="1",xt=Je>=0?we[Je]:"",Xt=xt&&parseInt(xt.replace(/m$/i,""))||null,Tt=Te=>{if(!Te)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(Te))return Te;const er=Yr(),u=Te.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(u){let S,w;return er?(w=u[1].padStart(2,"0"),S=u[2].padStart(2,"0")):(S=u[1].padStart(2,"0"),w=u[2].padStart(2,"0")),`${u[3]}-${w}-${S}`}return null},Mt={title:$,project_id:(he==null?void 0:he.id)||null,status:Zt,critical:Jt,due_date:Tt(te>=0?we[te]:null),start_date:Tt(le>=0?we[le]:null),assignee:pe>=0&&we[pe]||null,customer:ke>=0&&we[ke]||null,category:(Qe==null?void 0:Qe.id)||null,energy_level:ze>=0&&we[ze]?we[ze].toLowerCase():null,source:(Ue==null?void 0:Ue.id)||null,time_estimate:Xt,description:Ie>=0&&we[Ie]||null};try{if(!n||n==="*"){const{error:Te}=await O.from("tasks").insert(Mt);if(Te)throw Te;U++}else{const{error:Te}=await O.from("tasks").update(Mt).eq("id",n);if(Te)throw Te;Ee++}}catch(Te){nt.push(`Row ${Be+1}: ${Te.message}`)}}if(ne({created:U,updated:Ee,errors:nt}),U>0||Ee>0){const{data:Be}=await O.from("tasks").select("*, dependencies:task_dependencies!task_dependencies_task_id_fkey(depends_on_id)").eq("user_id",x.id).order("created_at",{ascending:!1});Be&&window.location.reload()}}catch(M){ne({error:`Failed to parse CSV: ${M.message}`})}B(!1),xe.current&&(xe.current.value="")}},ve=[{key:"title",label:"Title",width:"min-w-[200px]"},{key:"project",label:"Project",width:"min-w-[120px]"},{key:"status",label:"Status",width:"min-w-[100px]"},{key:"critical",label:"Critical",width:"min-w-[80px]"},{key:"due_date",label:"Due Date",width:"min-w-[100px]"},{key:"start_date",label:"Start Date",width:"min-w-[100px]"},{key:"assignee",label:"Assignee",width:"min-w-[120px]"},{key:"customer",label:"Customer",width:"min-w-[120px]"},{key:"category",label:"Category",width:"min-w-[120px]"},{key:"energy_level",label:"Effort",width:"min-w-[100px]"},{key:"source",label:"Source",width:"min-w-[100px]"},{key:"time_estimate",label:"Est. Time",width:"min-w-[90px]"},{key:"created_at",label:"Created",width:"min-w-[100px]"}],Y=(N,Q)=>{var E,f;switch(Q){case"project":return((E=l.find(M=>M.id===N.project_id))==null?void 0:E.name)||"-";case"status":return{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done"}[N.status]||N.status;case"critical":return N.critical?"ðŸš¨ Yes":"-";case"due_date":case"start_date":return N[Q]?St(N[Q]):"-";case"category":return((f=ot.find(M=>M.id===N.category))==null?void 0:f.label)||"-";case"energy_level":return{high:"â–°â–°â–° High",medium:"â–°â–° Medium",low:"â–° Low"}[N.energy_level]||"-";case"source":const se=Wt.find(M=>M.id===N.source);return se?`${se.icon} ${se.label}`:"-";case"time_estimate":return N.time_estimate?Pt(N.time_estimate):"-";case"created_at":return N.created_at?new Date(N.created_at).toLocaleDateString():"-";default:return N[Q]||"-"}},ge=N=>({backlog:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",todo:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",in_progress:"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300",done:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"})[N]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-100",children:"All Tasks"}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:R.length})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>m(!C),className:`flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${C||Object.values(k).some(N=>N)?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Object.values(k).some(N=>N)&&e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]}),Object.values(k).some(N=>N)&&e.jsx("button",{onClick:()=>v({}),className:"px-2 py-1.5 text-xs sm:text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Clear"}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700"}),e.jsxs("button",{onClick:ee,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 rounded-lg text-sm font-medium transition-colors",title:"Export CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:()=>{var N;return(N=xe.current)==null?void 0:N.click()},disabled:P,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Import CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:P?"Importing...":"Import"})]}),e.jsxs("button",{onClick:me,className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",title:"Download CSV template",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Template"]}),e.jsx("input",{ref:xe,type:"file",accept:".csv",onChange:be,className:"hidden"})]})]}),I&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ne(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:I.error?"Import Error":"Import Complete"}),I.error?e.jsx("p",{className:"text-red-600 dark:text-red-400",children:I.error}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold text-green-600",children:I.created})," tasks created"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:I.updated})," tasks updated"]}),((De=I.errors)==null?void 0:De.length)>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Errors:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:[I.errors.slice(0,5).map((N,Q)=>e.jsx("li",{children:N},Q)),I.errors.length>5&&e.jsxs("li",{children:["...and ",I.errors.length-5," more"]})]})]})]}),e.jsx("button",{onClick:()=>ne(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 z-10",children:[e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800",children:ve.map(N=>e.jsx("th",{className:`${N.width} px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-300 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700`,children:e.jsxs("button",{onClick:()=>z(N.key),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[N.label,D===N.key&&e.jsx("svg",{className:`w-4 h-4 ${c==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},N.key))}),C&&e.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800/50",children:ve.map(N=>e.jsx("th",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:["title","time_estimate","created_at"].includes(N.key)?e.jsx("span",{className:"text-xs text-gray-400",children:"-"}):e.jsxs("select",{value:k[N.key]||"",onChange:Q=>v({...k,[N.key]:Q.target.value}),className:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),N.key==="status"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),N.key==="critical"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),N.key==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),["project","assignee","customer","category","source"].includes(N.key)&&j(N.key).map(Q=>e.jsx("option",{value:Q,children:Q},Q))]})},`filter-${N.key}`))})]}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:ve.length,className:"px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-300 mt-1",children:"Try adjusting your filters or search terms"})]})})}):R.map(N=>{const Q=l.find(f=>f.id===N.project_id),E=Q==null?void 0:Q.archived;return e.jsx("tr",{onClick:()=>o(N),className:`cursor-pointer transition-colors ${E?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,children:ve.map(f=>e.jsx("td",{className:"px-4 py-3 text-sm",children:f.key==="title"?e.jsxs("div",{className:"flex items-center gap-2",children:[N.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš¨"}),E&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:"Archived"}),e.jsx("span",{className:`font-medium truncate max-w-[250px] ${E?"text-gray-500 dark:text-gray-300":"text-gray-900 dark:text-gray-100"}`,children:N.title})]}):f.key==="status"?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ge(N.status)}`,children:Y(N,f.key)}):f.key==="critical"?e.jsx("span",{className:N.critical?"text-red-500 font-medium":"text-gray-400",children:Y(N,f.key)}):e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:Y(N,f.key)})},`${N.id}-${f.key}`))},N.id)})})]})})]})},Ya=({task:r,project:l,onEdit:o,onDragStart:b,showProject:x=!0,allTasks:D=[],onQuickComplete:g,bulkSelectMode:c,isSelected:p,onToggleSelect:k,onStatusChange:v,onSetDueDate:C,onToggleMyDay:m,isDragging:j,onUpdateTitle:z,onToggleCritical:L,isMobile:R})=>{var le,pe,ke,_e,ze,We,Je,Ie;const[ee,me]=d.useState(!1),[P,B]=d.useState(!1),[I,ne]=d.useState(r.title),xe=d.useRef(null),be=d.useRef(!1),ve=U=>{be.current=!0,b(U,r)},Y=()=>{setTimeout(()=>{be.current=!1},100)},ge=()=>{be.current||(c?k==null||k(r.id):o(r))},De=U=>{c||!z||(U.stopPropagation(),B(!0),ne(r.title),setTimeout(()=>{var Ee;return(Ee=xe.current)==null?void 0:Ee.focus()},0))},N=()=>{I.trim()&&I!==r.title&&z(r.id,I.trim()),B(!1)},Q=U=>{U.key==="Enter"?(U.preventDefault(),N()):U.key==="Escape"&&(ne(r.title),B(!1))},E=ct(r.due_date,r.status),f=dt(r,D),se=r.recurrence_type?$s.find(U=>U.id===r.recurrence_type):null,M=r.status==="done",ie=r.status==="in_progress",K=lr(r),oe=ot.find(U=>U.id===r.category),fe=Ot[r.energy_level],Le=qr(r),je=!M&&E==="overdue",y=!M&&E==="today",X=je?"#DC2626":y?"#D97706":f?"#F97316":r.critical?"#EF4444":K?"#10B981":_t[r.status],te=r.description||r.assignee||oe||((le=r.subtasks)==null?void 0:le.length)>0||((pe=r.attachments)==null?void 0:pe.length)>0;return e.jsxs("div",{draggable:!R,onDragStart:ve,onDragEnd:Y,onClick:ge,className:`task-card relative rounded-lg p-2 sm:p-2.5 shadow-sm border cursor-pointer transition-all duration-200 group hover:z-[100] ${j?"opacity-30 scale-95 ring-2 ring-dashed ring-indigo-400 bg-indigo-50 dark:bg-indigo-900/30":"hover:-translate-y-1 hover:shadow-md"} ${!j&&M?"opacity-60 bg-white dark:bg-gray-800":!j&&je?"bg-red-50 dark:bg-red-900/40":!j&&y?"bg-amber-50 dark:bg-amber-900/40":j?"":"bg-white dark:bg-gray-800"} ${p?"ring-2 ring-indigo-500 border-indigo-300":je?"border-red-300 dark:border-red-500 hover:border-red-400 dark:hover:border-red-400":y?"border-amber-300 dark:border-amber-500 hover:border-amber-400 dark:hover:border-amber-400":f?"border-orange-200 dark:border-orange-800 hover:border-orange-300":r.critical?"border-red-200 dark:border-red-800 hover:border-red-300":K?"border-green-200 dark:border-green-800 hover:border-green-300":"border-gray-100 dark:border-gray-700 hover:border-gray-200"}`,style:{borderLeftWidth:"2px",borderLeftColor:X},children:[te&&e.jsxs("div",{className:`hidden md:block absolute top-0 z-[200] w-56 p-3 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none ${r.status==="done"?"right-full mr-2":"left-full ml-2"}`,children:[oe&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:oe.color},children:oe.label})}),r.customer&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-2",children:r.customer}),fe&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:fe.bg,color:fe.text},children:[fe.icon," ",fe.label]})}),r.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mb-2 line-clamp-3",children:r.description}),r.assignee&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-[10px] font-medium flex items-center justify-center flex-shrink-0",children:r.assignee.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:r.assignee})]}),((ke=r.dependencies)==null?void 0:ke.length)>0&&(()=>{const U=r.dependencies.map(Ee=>D.find(nt=>nt.id===Ee.depends_on_id)).filter(Ee=>Ee&&Ee.status!=="done");return U.length===0?null:e.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"ðŸš« Blocked by:"}),U.map(Ee=>e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["â€¢ ",Ee.title]},Ee.id))]})})(),((_e=r.subtasks)==null?void 0:_e.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mb-1",children:"Subtasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${r.subtasks.filter(U=>U.completed).length/r.subtasks.length*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.subtasks.filter(U=>U.completed).length,"/",r.subtasks.length]})]})]}),((ze=r.attachments)==null?void 0:ze.length)>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“Ž ",r.attachments.length," attachment",r.attachments.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col",children:[c&&e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("button",{onClick:U=>{U.stopPropagation(),k==null||k(r.id)},className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${p?"bg-indigo-500 border-indigo-500 text-white":"border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-800"}`,children:p&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[Le&&!M&&e.jsx("span",{className:"text-xs flex-shrink-0",title:"In My Day",children:"â˜€ï¸"}),je&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-red-100 dark:bg-red-500/80 text-red-700 dark:text-white flex-shrink-0",children:"OVERDUE"}),y&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-amber-100 dark:bg-amber-500/80 text-amber-700 dark:text-white flex-shrink-0",children:"TODAY"}),f&&e.jsx("span",{title:"Blocked",className:"text-xs flex-shrink-0",children:"ðŸ”’"}),r.critical&&e.jsx("span",{title:"Critical",className:"text-xs flex-shrink-0",children:"ðŸš©"}),se&&e.jsx("span",{title:se.label,className:"text-xs flex-shrink-0",children:"ðŸ”"}),P?e.jsx("input",{ref:xe,type:"text",value:I,onChange:U=>ne(U.target.value),onBlur:N,onKeyDown:Q,onClick:U=>U.stopPropagation(),className:"flex-1 text-xs font-medium bg-white dark:bg-gray-700 border border-indigo-400 rounded px-1.5 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700 dark:text-gray-200"}):e.jsx("h4",{onClick:U=>z&&U.stopPropagation(),onDoubleClick:De,className:`flex-1 text-xs font-medium line-clamp-2 leading-tight ${je?"text-red-700 dark:text-red-200 group-hover:text-red-800 dark:group-hover:text-red-100":y?"text-amber-700 dark:text-amber-200 group-hover:text-amber-800 dark:group-hover:text-amber-100":"text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"} ${z?"cursor-text":""}`,title:z?"Double-click to edit":"",children:r.title})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-1.5 text-[10px] text-gray-600 dark:text-gray-300",children:[r.start_date&&e.jsxs("span",{className:`flex items-center gap-0.5 ${K?"text-green-600 dark:text-green-400":""}`,children:[e.jsx("span",{children:"â–¶"})," ",St(r.start_date)]}),r.due_date&&e.jsxs("span",{className:`flex items-center gap-0.5 font-medium ${E==="overdue"?"text-red-600 dark:text-red-400":E==="today"?"text-orange-600 dark:text-orange-400":E==="soon"?"text-amber-600 dark:text-amber-400":""}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),St(r.due_date)]}),r.time_estimate&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("span",{children:"â±"})," ",Pt(r.time_estimate)]}),fe&&e.jsxs("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 text-[9px] font-medium rounded-full",style:{backgroundColor:fe.bg,color:fe.text},title:fe.label,children:[fe.icon," ",fe.label]})]}),r.customer&&e.jsx("div",{className:"hidden sm:block mt-1.5",children:e.jsx("span",{className:"inline-block px-2 py-0.5 text-[10px] font-medium rounded-full",style:{backgroundColor:((We=Gr(r.customer))==null?void 0:We.bg)||"#EDE9FE",color:((Je=Gr(r.customer))==null?void 0:Je.text)||"#7C3AED",border:`1px solid ${((Ie=Gr(r.customer))==null?void 0:Ie.border)||"#C4B5FD"}`},children:r.customer})}),x&&l&&e.jsx("div",{className:"hidden sm:block mt-2 pt-1.5 border-t border-gray-100 dark:border-gray-700",children:e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-300",children:l.name})}),g&&e.jsxs("div",{className:"sm:hidden flex items-center gap-1.5 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[r.status==="backlog"&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 rounded hover:bg-blue-100 transition-colors",children:"â†’ To Do"}),r.status==="todo"&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,"in_progress")},className:"flex-1 py-1 text-[10px] font-medium text-pink-600 bg-pink-50 dark:bg-pink-900/30 dark:text-pink-400 rounded hover:bg-pink-100 transition-colors",children:"â–¶ Start"}),(r.status==="backlog"||r.status==="todo"||r.status==="in_progress")&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,"done")},className:"flex-1 py-1 text-[10px] font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 rounded hover:bg-emerald-100 transition-colors",children:"âœ“ Done"}),r.status==="done"&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-amber-600 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 rounded hover:bg-amber-100 transition-colors",children:"â†© Reopen"})]})]})]}),!j&&e.jsx("div",{className:"hidden md:flex absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 scale-90 group-hover:scale-100 z-10",children:e.jsxs("div",{className:"flex items-center gap-0.5 p-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:[!ie&&!M&&g&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,"in_progress")},className:"p-1.5 text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded transition-colors",title:"Start working",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),g&&e.jsx("button",{onClick:U=>{U.stopPropagation(),g(r.id,M?"todo":"done")},className:`p-1.5 rounded transition-colors ${M?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/30":"text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:M?"Reopen task":"Mark done",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),L&&e.jsx("button",{onClick:U=>{U.stopPropagation(),L(r.id,!r.critical)},className:`p-1.5 rounded transition-colors ${r.critical?"text-red-500 bg-red-50 dark:bg-red-900/30":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:r.critical?"Remove critical flag":"Mark as critical",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:r.critical?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),m&&!M&&e.jsx("button",{onClick:U=>{U.stopPropagation(),m(r.id,!Le)},className:`p-1.5 rounded transition-colors ${Le?"text-amber-500 bg-amber-50 dark:bg-amber-900/30":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30"}`,title:Le?"Remove from My Day":"Add to My Day",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:Le?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})})]})},Qa=({tasks:r,projects:l,onEditTask:o,onUndoComplete:b})=>{const[x,D]=d.useState(!1);if(r.length===0)return null;const g=c=>{const p=new Date(c),v=new Date-p,C=Math.floor(v/6e4),m=Math.floor(v/36e5),j=Math.floor(v/864e5);return C<1?"just now":C<60?`${C}m ago`:m<24?`${m}h ago`:`${j}d ago`};return e.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>D(!x),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Recently Completed"}),e.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 px-2 py-0.5 rounded-full",children:r.length})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"px-4 pb-4 space-y-2",children:r.map(c=>{const p=l.find(k=>k.id===c.project_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-gray-200 dark:hover:border-gray-600 transition-colors",children:[e.jsx("button",{onClick:()=>b(c.id),className:"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center shrink-0 hover:bg-amber-500 transition-colors",title:"Mark as incomplete",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>o(c),children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 line-through truncate",children:c.title}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:p&&e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300",children:p.name})})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300 shrink-0",children:g(c.completed_at)})]},c.id)})})]})},Bs=({column:r,tasks:l,projects:o,onEditTask:b,onDragStart:x,onDragOver:D,onDrop:g,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:v,onSetDueDate:C,bulkSelectMode:m,selectedTaskIds:j,onToggleSelect:z,onAddTask:L,onToggleMyDay:R,isMobileFullWidth:ee,draggedTask:me,onUpdateTitle:P,onToggleCritical:B})=>{const[I,ne]=d.useState(!1),[xe,be]=d.useState(!1),[ve,Y]=d.useState(!1),ge=l.reduce((M,ie)=>M+(ie.time_estimate||0),0),De=l.filter(M=>M.critical).length,N=l.filter(M=>lr(M)).length,Q=r.id==="done",E=r.id==="backlog";let f=l,se=0;return Q&&!xe?(f=l.slice(0,Vr),se=Math.max(0,l.length-Vr)):E&&!ve&&(f=l.slice(0,Hr),se=Math.max(0,l.length-Hr)),e.jsxs("div",{className:`${ee?"w-full":"flex-shrink-0 w-[280px] sm:w-[300px] lg:flex-1 lg:min-w-[300px] lg:max-w-[400px] xl:max-w-[450px]"} bg-gray-50/80 dark:bg-gray-800/80 rounded-2xl p-3 sm:p-4 transition-all duration-200 overflow-visible ${I?"ring-2 ring-indigo-400 ring-offset-2 dark:ring-offset-gray-900 bg-indigo-50/50 dark:bg-indigo-900/20 scale-[1.01]":""}`,onDragOver:M=>{M.preventDefault(),ne(!0),D(M,r.id)},onDragLeave:()=>ne(!1),onDrop:M=>{ne(!1),g(M,r.id)},children:[e.jsxs("div",{className:`${ee?"hidden":"flex"} items-center gap-3 mb-2`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color}}),e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:r.title}),e.jsx("span",{className:"ml-auto bg-white dark:bg-gray-700 px-2.5 py-0.5 rounded-full text-sm font-medium text-gray-500 dark:text-gray-300 shadow-sm",children:l.length})]}),e.jsxs("div",{className:`${ee?"hidden":"flex"} items-center gap-2 mb-4 ml-6 text-xs text-gray-500 dark:text-gray-300`,children:[ge>0&&e.jsx("span",{children:Pt(ge)}),r.id!=="done"&&De>0&&e.jsxs("span",{className:"text-red-500",children:[De," critical"]}),r.id==="backlog"&&N>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[N," ready"]})]}),e.jsxs("div",{className:"space-y-2 overflow-visible",children:[f.length===0&&!I&&e.jsxs("div",{className:"py-6 sm:py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-10 sm:h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3 sm:mb-2 opacity-60",children:Da[r.id]()}),e.jsx("p",{className:"text-sm sm:text-xs text-gray-400 dark:text-gray-300 px-4",children:r.id==="done"?"Completed tasks appear here":r.id==="in_progress"?"Tasks you're working on":r.id==="todo"?"Ready to start":"Future tasks"})]}),f.map(M=>e.jsx(Ya,{task:M,project:o.find(ie=>ie.id===M.project_id),onEdit:b,onDragStart:x,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:v,onSetDueDate:C,bulkSelectMode:m,isSelected:j==null?void 0:j.has(M.id),onToggleSelect:z,onToggleMyDay:R,isDragging:(me==null?void 0:me.id)===M.id,onUpdateTitle:P,onToggleCritical:B,isMobile:ee},M.id)),Q&&se>0&&!xe&&e.jsxs("button",{onClick:()=>be(!0),className:"w-full py-3 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 font-medium bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-500 transition-all",children:["View all ",l.length," completed tasks â†’"]}),Q&&xe&&l.length>Vr&&e.jsx("button",{onClick:()=>be(!1),className:"w-full py-3 text-sm text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300 font-medium bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all",children:"Show less â†‘"}),E&&se>0&&!ve&&e.jsxs("button",{onClick:()=>Y(!0),className:"w-full py-3 text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 font-medium bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-500 transition-all",children:["View all ",l.length," backlog tasks â†’"]}),E&&ve&&l.length>Hr&&e.jsx("button",{onClick:()=>Y(!1),className:"w-full py-3 text-sm text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300 font-medium bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all",children:"Show less â†‘"}),me&&me.status!==r.id&&I&&e.jsxs("div",{className:"w-full py-4 rounded-xl border-2 border-dashed border-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20 animate-dropZone flex items-center justify-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Drop here"]}),e.jsxs("button",{onClick:()=>L(r.id),className:"w-full mt-3 py-3 sm:py-2.5 text-sm text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-medium rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 transition-all flex items-center justify-center gap-2 active:scale-95 touch-manipulation",children:[e.jsx("svg",{className:"w-5 h-5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add task"]})]})]})},Ka=({isOpen:r,onClose:l,task:o,projects:b,allTasks:x,onSave:D,onDelete:g,loading:c,onShowConfirm:p})=>{var Be,we;const k=d.useRef(null),[v,C]=d.useState(!1),[m,j]=d.useState({title:"",description:"",project_id:"",status:"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),[z,L]=d.useState([]),[R,ee]=d.useState([]),[me,P]=d.useState([]),[B,I]=d.useState("details"),[ne,xe]=d.useState(""),[be,ve]=d.useState(!1),[Y,ge]=d.useState(!1),[De,N]=d.useState(""),[Q,E]=d.useState(!1),[f,se]=d.useState(""),[M,ie]=d.useState(""),[K,oe]=d.useState([]),[fe,Le]=d.useState(""),[je,y]=d.useState([]),[X,te]=d.useState(""),le=d.useRef(null),[pe,ke]=d.useState(null);d.useEffect(()=>{const n=$=>{var H;v&&($.key==="Escape"&&C(!1),$.key==="Enter"&&(g(o.id),C(!1),l())),($.ctrlKey||$.metaKey)&&$.key==="s"&&!v&&($.preventDefault(),(H=document.querySelector("form"))==null||H.requestSubmit())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[v,o,g,l]);const _e=async n=>{var H;const $=(H=n.clipboardData)==null?void 0:H.items;if($){for(const he of $)if(he.type.startsWith("image/")){n.preventDefault();const Oe=he.getAsFile();if(Oe){const Qe=new Date().toISOString().replace(/[:.]/g,"-"),Ge=Oe.type.split("/")[1]||"png",Ue=new File([Oe],`pasted-image-${Qe}.${Ge}`,{type:Oe.type});if(Ue.size>10*1024*1024){xe("Pasted image is too large. Max size is 10MB.");return}P(Ke=>[...Ke,Ue]),ie("ðŸ“Ž Image captured!"),setTimeout(()=>ie(""),2e3)}break}}};d.useEffect(()=>{var $,H,he,Oe;const n=o!=null&&o.id?`edit-${o.id}`:r?`new-${(o==null?void 0:o.title)||""}-${(o==null?void 0:o.project_id)||""}`:null;if(!(!r||le.current===n)){if(le.current=n,o!=null&&o.id){const Qe=b.find(Ke=>Ke.id===o.project_id),Ge=Qe&&!(($=Qe.members)!=null&&$.includes(o.assignee))&&o.assignee,Ue=Qe&&!((H=Qe.customers)!=null&&H.includes(o.customer))&&o.customer;j({title:o.title||"",description:o.description||"",project_id:o.project_id||"",status:o.status||"backlog",critical:o.critical||!1,start_date:o.start_date||"",start_time:o.start_time||"",end_time:o.end_time||"",due_date:o.due_date||"",assignee:Ge?"":o.assignee||"",time_estimate:o.time_estimate||"",energy_level:o.energy_level||"medium",category:o.category||"deliverable",source:o.source||"ad_hoc",source_link:o.source_link||"",customer:Ue?"":o.customer||"",notes:o.notes||"",recurrence_type:o.recurrence_type||null,recurrence_count:o.recurrence_count||8,recurrence_end_date:o.recurrence_end_date||""}),ee(o.attachments||[]),L(((he=o.dependencies)==null?void 0:he.map(Ke=>Ke.depends_on_id))||[]),ge(Ge),N(Ge?o.assignee:""),E(Ue),se(Ue?o.customer:""),oe(o.subtasks||[]),y(o.comments||[])}else j({title:(o==null?void 0:o.title)||"",description:"",project_id:(o==null?void 0:o.project_id)||((Oe=b[0])==null?void 0:Oe.id)||"",status:(o==null?void 0:o.status)||"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:(o==null?void 0:o.due_date)||"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),ee([]),L([]),ge(!1),N(""),E(!1),se(""),oe([]),y([]);P([]),I("details"),xe(""),Le(""),te("")}},[o==null?void 0:o.id,o==null?void 0:o.title,o==null?void 0:o.project_id,r]),d.useEffect(()=>{r||(le.current=null)},[r]);const ze=b.find(n=>n.id===m.project_id),We=async n=>{const $=Array.from(n.target.files);if($.length===0)return;xe("");const H=[];for(const he of $){if(he.size>10*1024*1024){xe(`File "${he.name}" is too large. Max size is 10MB.`);continue}H.push(he)}P([...me,...H]),k.current&&(k.current.value="")},Je=n=>{P(me.filter(($,H)=>H!==n))},Ie=n=>{ee(R.filter($=>$.id!==n))},U=async n=>{n.preventDefault();const $=Y?De:m.assignee,H=Q?f:m.customer;await D({...m,assignee:$,customer:H,time_estimate:m.time_estimate?parseInt(m.time_estimate):null,id:o==null?void 0:o.id,dependencies:z,subtasks:K,comments:je},me,R),l()},Ee=(x==null?void 0:x.filter(n=>n.project_id===m.project_id&&n.id!==(o==null?void 0:o.id)&&n.status!=="done"))||[],nt=n=>n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB";return e.jsxs(Qr,{isOpen:r,onClose:l,title:o!=null&&o.id?"Edit Task":"New Task",wide:!0,fullScreenMobile:!0,children:[e.jsxs("form",{onSubmit:U,children:[e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 overflow-x-auto",children:[{id:"details",label:"Details",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"additional",label:"More",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})},{id:"subtasks",label:"Subtasks",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"dependencies",label:"Deps",labelFull:"Dependencies",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})},{id:"activity",label:"Activity",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}].map(n=>e.jsxs("button",{type:"button",onClick:()=>I(n.id),className:`flex-1 py-2.5 px-2 sm:px-3 rounded-lg text-xs sm:text-sm font-medium transition-all flex items-center justify-center gap-1.5 ${B===n.id?"bg-white dark:bg-gray-700 shadow-sm text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[e.jsx("span",{className:B===n.id?"text-indigo-600 dark:text-indigo-400":"",children:n.icon}),e.jsx("span",{className:"hidden sm:inline",children:n.labelFull||n.label})]},n.id))}),B==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:m.title,onChange:n=>j({...m,title:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.title?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,placeholder:"What needs to be done?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:n=>j({...m,description:n.target.value}),onPaste:_e,rows:2,className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.description?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Add more context... (paste images here!)"}),M&&B==="details"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:M})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project *"}),e.jsxs("select",{required:!0,value:m.project_id,onChange:n=>j({...m,project_id:n.target.value,assignee:"",customer:""}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.project_id?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,children:[e.jsx("option",{value:"",children:"Select project"}),b.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:m.status,onChange:n=>j({...m,status:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:at.map(n=>e.jsx("option",{value:n.id,children:n.title},n.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer/Client"}),Q?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:n=>se(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Customer name"}),e.jsx("button",{type:"button",onClick:()=>{E(!1),se("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.customer,onChange:n=>{n.target.value==="__other__"?(E(!0),j({...m,customer:""})):j({...m,customer:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.customer?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"No customer"}),(Be=ze==null?void 0:ze.customers)==null?void 0:Be.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Effort Level"}),e.jsx("select",{value:m.energy_level,onChange:n=>j({...m,energy_level:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.energy_level?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:Object.entries(Ot).map(([n,$])=>e.jsxs("option",{value:n,children:[$.icon," ",$.label]},n))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Start Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.start_date,onChange:n=>j({...m,start_date:n.target.value}),onBlur:n=>{const $=n.target.value.trim();if(!$){j({...m,start_date:""});return}const H=dr($);H.date&&j({...m,start_date:H.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.start_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Due Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.due_date,onChange:n=>j({...m,due_date:n.target.value}),onBlur:n=>{const $=n.target.value.trim();if(!$){j({...m,due_date:""});return}const H=dr($);H.date&&j({...m,due_date:H.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.due_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"text",value:m.start_time||"",onChange:n=>j({...m,start_time:n.target.value}),onBlur:n=>{const $=Ls(n.target.value);if($||!n.target.value){const H={start_time:$};if($&&m.time_estimate){const[he,Oe]=$.split(":").map(Number),Ge=he*60+Oe+parseInt(m.time_estimate),Ue=Math.floor(Ge/60),Ke=Ge%60;H.end_time=`${String(Ue).padStart(2,"0")}:${String(Ke).padStart(2,"0")}`}j({...m,...H})}},placeholder:"e.g. 9am, 230pm, 14:30",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"text",value:m.end_time||"",onChange:n=>j({...m,end_time:n.target.value}),onBlur:n=>{const $=Ls(n.target.value);if($||!n.target.value){const H={end_time:$};if(m.start_time&&$){const[he,Oe]=m.start_time.split(":").map(Number),[Qe,Ge]=$.split(":").map(Number),Ue=he*60+Oe,Dt=Qe*60+Ge-Ue;Dt>0&&(H.time_estimate=String(Dt))}j({...m,...H})}},placeholder:"e.g. 10am, 430pm, 16:00",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j({...m,critical:!m.critical}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.critical?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 ring-2 ring-red-300 dark:ring-red-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸš© Critical"}),e.jsx("button",{type:"button",onClick:()=>j({...m,recurrence_type:m.recurrence_type?null:"weekly"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.recurrence_type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-2 ring-blue-300 dark:ring-blue-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸ” Recurring"})]}),m.recurrence_type&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Repeat"}),e.jsx("select",{value:m.recurrence_type||"",onChange:n=>j({...m,recurrence_type:n.target.value||null}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:$s.filter(n=>n.id).map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),m.start_date?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Occurrences"}),e.jsx("input",{type:"number",min:"1",max:"52",value:m.recurrence_count,onChange:n=>j({...m,recurrence_count:parseInt(n.target.value)||1,recurrence_end_date:""}),className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Or until date"}),e.jsx("input",{type:"text",value:m.recurrence_end_date,onChange:n=>j({...m,recurrence_end_date:n.target.value}),onBlur:n=>{const $=n.target.value.trim();if(!$)return;const H=dr($);H.date&&j({...m,recurrence_end_date:H.date,recurrence_count:0})},placeholder:"e.g. M+6",className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["ðŸ—“ ",m.recurrence_end_date?`Will create occurrences until ${m.recurrence_end_date}`:`Will create ${m.recurrence_count} future occurrence${m.recurrence_count!==1?"s":""}`]})]}):e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Set a Start Date above for recurrence to work"]})]})]}),B==="subtasks"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("h3",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:"Checklist"})]}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-300 mb-4",children:"Break down this task into smaller steps"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:fe,onChange:n=>Le(n.target.value),onKeyDown:n=>{n.key==="Enter"&&fe.trim()&&(n.preventDefault(),oe([...K,{id:Date.now().toString(),title:fe.trim(),completed:!1}]),Le(""))},placeholder:"Add a subtask...",className:"flex-1 px-4 py-2.5 border border-indigo-200 dark:border-indigo-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("button",{type:"button",onClick:()=>{fe.trim()&&(oe([...K,{id:Date.now().toString(),title:fe.trim(),completed:!1}]),Le(""))},className:"px-4 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium",children:"Add"})]}),K.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:[e.jsxs("span",{children:[K.filter(n=>n.completed).length," of ",K.length," completed"]}),e.jsxs("span",{children:[Math.round(K.filter(n=>n.completed).length/K.length*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-indigo-200 dark:bg-indigo-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${K.filter(n=>n.completed).length/K.length*100}%`}})})]}),K.length===0?e.jsxs("div",{className:"text-center py-8 text-indigo-400 dark:text-indigo-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No subtasks yet. Add some to track progress!"})]}):e.jsx("div",{className:"space-y-2",children:K.map((n,$)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${n.completed?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>{oe(K.map(H=>H.id===n.id?{...H,completed:!H.completed}:H))},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${n.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-indigo-400"}`,children:n.completed&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`flex-1 ${n.completed?"text-gray-400 dark:text-gray-300 line-through":"text-gray-800 dark:text-gray-200"}`,children:n.title}),e.jsx("button",{type:"button",onClick:()=>oe(K.filter(H=>H.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id))})]})}),B==="additional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"number",min:"0",step:"5",value:m.time_estimate,onChange:n=>{const $=n.target.value,H={time_estimate:$};if(m.start_time&&$){const[he,Oe]=m.start_time.split(":").map(Number),Ge=he*60+Oe+parseInt($),Ue=Math.floor(Ge/60),Ke=Ge%60;H.end_time=`${String(Ue).padStart(2,"0")}:${String(Ke).padStart(2,"0")}`}j({...m,...H})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.time_estimate?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Minutes (e.g., 30)"}),m.time_estimate&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Pt(parseInt(m.time_estimate))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assignee"}),Y?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:De,onChange:n=>N(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Enter name"}),e.jsx("button",{type:"button",onClick:()=>{ge(!1),N("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.assignee,onChange:n=>{n.target.value==="__other__"?(ge(!0),j({...m,assignee:""})):j({...m,assignee:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.assignee?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),(we=ze==null?void 0:ze.members)==null?void 0:we.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:m.category,onChange:n=>j({...m,category:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:ot.map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),e.jsx("select",{value:m.source,onChange:n=>j({...m,source:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Wt.map(n=>e.jsxs("option",{value:n.id,children:[n.icon," ",n.label]},n.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Link"}),e.jsx("input",{type:"text",value:m.source_link,onChange:n=>j({...m,source_link:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"URL or reference to the source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:m.notes,onChange:n=>j({...m,notes:n.target.value}),onPaste:_e,rows:4,className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Running notes, context, updates... (paste images here!)"}),M&&B==="additional"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:M})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:[e.jsx("input",{ref:k,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:We,className:"hidden"}),e.jsx("input",{id:"camera-input",type:"file",accept:"image/*",capture:"environment",onChange:We,className:"hidden"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var n;return(n=document.getElementById("camera-input"))==null?void 0:n.click()},disabled:be,className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"ðŸ“· Take Photo"}),e.jsx("button",{type:"button",onClick:()=>{var n;return(n=k.current)==null?void 0:n.click()},disabled:be,className:"w-full sm:w-auto px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600",children:be?"Uploading...":"ðŸ“Ž Choose Files"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-300 mt-2",children:"Max 10MB â€¢ Paste images with âŒ˜V"})]}),ne&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:ne}),(R.length>0||me.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[R.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>ke(n),children:[e.jsx("span",{className:"text-lg",children:"ðŸ“„"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:n.file_name}),e.jsx("p",{className:"text-xs text-gray-400",children:nt(n.file_size)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>ke(n),className:"p-1.5 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg text-indigo-500",title:"View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("a",{href:n.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",title:"Download",children:"â¬‡ï¸"}),e.jsx("button",{type:"button",onClick:()=>{p?p({title:"Remove Attachment",message:`Remove "${n.file_name||n.name}"? This cannot be undone.`,confirmLabel:"Remove",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>Ie(n.id)}):Ie(n.id)},className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500",title:"Delete",children:"ðŸ—‘ï¸"})]})]},n.id)),me.map((n,$)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"âž•"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:n.name}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["New â€¢ ",nt(n.size)]})]})]}),e.jsx("button",{type:"button",onClick:()=>Je($),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500 flex-shrink-0",children:"âœ•"})]},$))]})]})]}),B==="dependencies"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Blocked by"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-0.5",children:"This task won't start until these are done"})]}),z.length>0&&e.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 rounded-full",children:[z.length," selected"]})]}),m.project_id?Ee.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"No other tasks to link"})]}):e.jsx("div",{className:"space-y-1 max-h-72 overflow-y-auto -mx-1 px-1",children:Ee.map(n=>{var H;const $=z.includes(n.id);return e.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all ${$?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${$?"bg-indigo-500 border-indigo-500":"border-gray-300 dark:border-gray-600"}`,children:$&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("input",{type:"checkbox",checked:$,onChange:he=>{he.target.checked?L([...z,n.id]):L(z.filter(Oe=>Oe!==n.id))},className:"sr-only"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm truncate ${$?"font-medium text-gray-900 dark:text-gray-100":"text-gray-700 dark:text-gray-300"}`,children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n.status==="done"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":n.status==="in_progress"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.status==="todo"?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-300"}`,children:(H=at.find(he=>he.id===n.status))==null?void 0:H.title}),n.critical&&e.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"ðŸš©"})]})]})]},n.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Select a project first"})]})]}),B==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Add a Comment"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Notes and updates about this task"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("textarea",{value:X,onChange:n=>te(n.target.value),placeholder:"Add a comment or note...",rows:2,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"}),e.jsx("button",{type:"button",onClick:()=>{if(X.trim()){const n={id:Date.now().toString(),text:X.trim(),created_at:new Date().toISOString(),type:"comment"};y([n,...je]),te("")}},disabled:!X.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium sm:self-end",children:"Add Comment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Activity & Comments",je.length>0&&e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-300",children:["(",je.length,")"]})]}),je.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-300",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“"}),e.jsx("p",{className:"text-sm",children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Add notes to track progress and context"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:je.map(n=>e.jsx("div",{className:`p-3 rounded-lg border ${n.type==="comment"?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[n.type==="comment"?e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:n.text}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-300",children:n.icon||"â€¢"})," ",n.text]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-300 mt-1",children:new Date(n.created_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),n.type==="comment"&&e.jsx("button",{type:"button",onClick:()=>y(je.filter($=>$.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors touch-manipulation",title:"Delete comment",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},n.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 pt-6 mt-6 border-t border-gray-100 dark:border-gray-700",children:[(o==null?void 0:o.id)&&e.jsx("button",{type:"button",onClick:()=>C(!0),disabled:c,className:"px-3 sm:px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50 text-sm sm:text-base",children:"Delete"}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",onClick:l,className:"px-3 sm:px-4 py-2.5 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600 rounded-xl transition-all text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 sm:px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 active:from-indigo-700 active:to-purple-700 transition-all font-medium shadow-lg shadow-indigo-500/25 hover:shadow-xl disabled:opacity-50 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:c?"Saving...":o!=null&&o.id?"Save":"Create"})]})]}),e.jsx(Aa,{isOpen:!!pe,onClose:()=>ke(null),attachment:pe,attachments:R,onNavigate:ke}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ—‘ï¸"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Task"})]}),e.jsxs("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:['Delete "',o==null?void 0:o.title,'"? This cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 active:bg-gray-200 dark:active:bg-gray-600 transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancel"}),e.jsx("button",{onClick:()=>{g(o.id),C(!1),l()},className:"px-4 py-2 rounded-xl font-medium bg-red-500 hover:bg-red-600 active:bg-red-700 text-white transition-all shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Delete"})]})]})})]})},Za=({isOpen:r,onClose:l,project:o,onSave:b,onDelete:x,onArchive:D,loading:g,onShowConfirm:c})=>{const[p,k]=d.useState({name:"",members:[],customers:[]}),[v,C]=d.useState(""),[m,j]=d.useState("");d.useEffect(()=>{k(o?{name:o.name,members:[...o.members||[]],customers:[...o.customers||[]]}:{name:"",members:[],customers:[]}),C(""),j("")},[o,r]),d.useEffect(()=>{const P=B=>{var I;(B.ctrlKey||B.metaKey)&&B.key==="s"&&r&&(B.preventDefault(),(I=document.querySelector("form"))==null||I.requestSubmit())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[r]);const z=()=>{v.trim()&&!p.members.includes(v.trim())&&(k({...p,members:[...p.members,v.trim()]}),C(""))},L=P=>{k({...p,members:p.members.filter(B=>B!==P)})},R=()=>{m.trim()&&!p.customers.includes(m.trim())&&(k({...p,customers:[...p.customers,m.trim()]}),j(""))},ee=P=>{k({...p,customers:p.customers.filter(B=>B!==P)})},me=async P=>{P.preventDefault(),await b({...p,id:o==null?void 0:o.id}),l()};return e.jsx(Qr,{isOpen:r,onClose:l,title:o?"Edit Project":"New Project",children:e.jsxs("form",{onSubmit:me,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:P=>k({...p,name:P.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:v,onChange:P=>C(P.target.value),onKeyDown:P=>P.key==="Enter"&&(P.preventDefault(),z()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add team member"}),e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2.5 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.members.map(P=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-sm",children:[P,e.jsx("button",{type:"button",onClick:()=>L(P),className:"hover:text-indigo-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},P))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customers/Clients"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:m,onChange:P=>j(P.target.value),onKeyDown:P=>P.key==="Enter"&&(P.preventDefault(),R()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add customer/client"}),e.jsx("button",{type:"button",onClick:R,className:"px-4 py-2.5 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.customers.map(P=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm",children:[P,e.jsx("button",{type:"button",onClick:()=>ee(P),className:"hover:text-purple-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},P))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{c({title:"Delete Project",message:`Delete "${o.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{x(o.id),l()}})},disabled:g,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{D(o.id),l()},disabled:g,className:"px-4 py-2.5 text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl transition-colors disabled:opacity-50",children:o.archived?"Unarchive":"Archive"})]}),e.jsx("button",{type:"button",onClick:l,className:"ml-auto px-4 py-2.5 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 rounded-xl transition-all focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 active:bg-indigo-700 transition-all font-medium disabled:opacity-50 shadow-sm hover:shadow focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:g?"Saving...":o?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Project"]})})]})]})})};function cn(){var vs,ws,Ns,Cs,_s;const{user:r,signOut:l}=As(),b=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒ":"Ctrl+Alt+",[x,D]=d.useState([]),[g,c]=d.useState([]),[p,k]=d.useState(!0),[v,C]=d.useState(!1),[m,j]=d.useState(null),[z,L]=d.useState(!navigator.onLine),[R,ee]=d.useState(null),[me,P]=d.useState(null);d.useEffect(()=>{const t=()=>L(!1),s=()=>L(!0);return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[]);const B=(t,s="success")=>{P({message:t,type:s}),setTimeout(()=>P(null),3e3)},I=async()=>{if(U==="DELETE"){Be(!0);try{await O.from("tasks").delete().eq("user_id",r.id),await O.from("projects").delete().eq("user_id",r.id),await O.from("feedback").delete().eq("user_id",r.id),await O.from("task_templates").delete().eq("user_id",r.id),await l()}catch(t){console.error("Error deleting account:",t),j("Failed to delete account"),Be(!1)}}},ne=async()=>{Oe(!0);try{const{error:t}=await O.auth.updateUser({data:{display_name:we}});if(t)throw t;H(!1),B("Display name saved")}catch(t){console.error("Error saving display name:",t),j("Failed to save display name")}Oe(!1)},xe=async()=>{Ge(!0);try{const{error:t}=await O.auth.resetPasswordForEmail(r.email,{redirectTo:window.location.origin});if(t)throw t;Ke(!0)}catch(t){console.error("Error sending password reset:",t),j("Failed to send password reset email")}Ge(!1)},be=(t,s)=>{localStorage.setItem(t,s),t==="trackli-default-view"&&Zt(s),t==="trackli-week-start"&&Jt(s),t==="trackli-show-confetti"&&Xt(s==="true")},ve=async()=>{Mt(!0);try{const t=new Date;t.setDate(t.getDate()-parseInt(Te));const{data:s,error:a}=await O.from("tasks").select("id").eq("user_id",r.id).eq("status","done").lt("updated_at",t.toISOString());if(a)throw a;if(s.length>0){const{error:i}=await O.from("tasks").delete().in("id",s.map(h=>h.id));if(i)throw i;c(h=>h.filter(_=>!s.find(T=>T.id===_.id))),B(`Cleared ${s.length} completed task${s.length===1?"":"s"}`)}else B("No completed tasks older than "+Te+" days")}catch(t){console.error("Error clearing tasks:",t),j("Failed to clear completed tasks")}Mt(!1)},[Y,ge]=d.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[De,N]=d.useState("monthly"),[Q,E]=d.useState(!1),[f,se]=d.useState(()=>typeof window<"u"?localStorage.getItem("trackli-dark-mode")==="true":!1),[M,ie]=d.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[K,oe]=d.useState(1),[fe,Le]=d.useState(!1),[je,y]=d.useState(!1),[X,te]=d.useState(!1),[le,pe]=d.useState(!1),[ke,_e]=d.useState(!1),[ze,We]=d.useState(!1),[Je,Ie]=d.useState(!1),[U,Ee]=d.useState(""),[nt,Be]=d.useState(!1),[we,n]=d.useState(""),[$,H]=d.useState(!1),[he,Oe]=d.useState(!1),[Qe,Ge]=d.useState(!1),[Ue,Ke]=d.useState(!1),[Dt,Zt]=d.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[Lt,Jt]=d.useState(()=>localStorage.getItem("trackli-week-start")||"0"),[xt,Xt]=d.useState(()=>localStorage.getItem("trackli-show-confetti")!=="false"),[Tt,Mt]=d.useState(!1),[Te,er]=d.useState("30"),[u,S]=d.useState("board"),[w,V]=d.useState(()=>!localStorage.getItem("trackli_onboarding_complete")),[Z,J]=d.useState(0),[de,ye]=d.useState(null),[Xe,W]=d.useState(0),[ce,Re]=d.useState(()=>{const t=localStorage.getItem("trackli_view_tours_completed");return t?JSON.parse(t):{}}),[qe,Se]=d.useState("all"),[Ne,re]=d.useState(!1),[Pe,Ve]=d.useState(!1),[cr,Et]=d.useState(!1),[zt,st]=d.useState(null),[Is,Ft]=d.useState(null),[Ja,Xa]=d.useState(null),[tr,Kr]=d.useState(null),[rr,Cr]=d.useState(null),[gt,xr]=d.useState(!1),[mt,gr]=d.useState(!1),[_r,Zr]=d.useState(!1),[Sr,Jr]=d.useState(!1),[Dr,Xr]=d.useState(!1),[ht,mr]=d.useState(!1),[ut,hr]=d.useState(!1),[Rt,ur]=d.useState(""),[Ae,Bt]=d.useState({}),[Os,es]=d.useState(""),[Ps,en]=d.useState(!1),[Lr,tn]=d.useState("all"),[ts,rn]=d.useState(""),[At,rs]=d.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_saved_views")||"[]")}catch{return[]}}),[zs,pr]=d.useState(!1),[Vt,ss]=d.useState(""),[Rs,as]=d.useState(!1),ns=d.useRef(!1),[Vs,Ht]=d.useState(!1),[He,pt]=d.useState({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),[yt,ft]=d.useState([]),[is,os]=d.useState(!1),[Hs,kt]=d.useState(!1),[vt,Tr]=d.useState(null),[sr,yr]=d.useState(!1),[sn,fr]=d.useState(""),[Gs,Us]=d.useState(!1),br=d.useRef(null);d.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;Us(!!t)},[]);const qs=(t,s=!1)=>{const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a){alert("Voice input is not supported in this browser. Try Chrome or Safari.");return}const i=new a;i.continuous=s,i.interimResults=!0,i.lang="en-GB",i.onstart=()=>{yr(!0)},i.onresult=h=>{let _="";for(let T=0;T<h.results.length;T++)_+=h.results[T][0].transcript;t(_)},i.onerror=h=>{console.error("Speech recognition error:",h.error),yr(!1),h.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access in your browser settings.")},i.onend=()=>{yr(!1)},br.current=i,i.start()},Mr=()=>{br.current&&(br.current.stop(),br.current=null),yr(!1)},Ys=(t,s=!1)=>{sr?Mr():qs(t,s)},[jr,Qs]=d.useState(null),[ar,Er]=d.useState(null),Fr=(t,s=null,a=null)=>{const i=t.includes("Failed to fetch")||t.includes("NetworkError")?"Network error - please check your connection":t.includes("JWT")||t.includes("auth")?"Session expired - please refresh the page":t.includes("duplicate")||t.includes("unique")?"This item already exists":t.includes("permission")||t.includes("denied")?"You don't have permission to do this":t;Er({message:i,retryAction:s,details:a})},[Ye,bt]=d.useState(null),[Gt,wt]=d.useState(!1),[$e,lt]=d.useState(new Set),[an,nn]=d.useState(!1),[Ks,Ut]=d.useState(!1),[qt,Yt]=d.useState(""),[Br,Ar]=d.useState(""),[Zs,$r]=d.useState(!1);d.useEffect(()=>{localStorage.setItem("trackli-dark-mode",f),f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]),d.useEffect(()=>{const t=()=>{ie(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),d.useEffect(()=>{const t=s=>{var h,_,T;if(s.target.tagName==="INPUT"||s.target.tagName==="TEXTAREA"||s.target.tagName==="SELECT")return;const i=navigator.platform.toUpperCase().indexOf("MAC")>=0?s.metaKey&&s.ctrlKey:s.ctrlKey&&s.altKey;if(i&&(s.key==="k"||s.key==="s")){s.preventDefault(),y(!0);return}if(s.key==="/"){s.preventDefault(),y(!0);return}if(s.key==="q"){s.preventDefault(),x.length>0&&(Ar(((h=x[0])==null?void 0:h.id)||""),Ut(!0));return}if(i&&s.key==="t"){s.preventDefault(),x.length>0&&(st(null),Ve(!0));return}if(i&&s.key==="p"){s.preventDefault(),Ft(null),Et(!0);return}if(i&&s.key==="n"){s.preventDefault(),x.length>0&&(pt({...He,projectId:((_=x[0])==null?void 0:_.id)||""}),ft([]),kt(!1),fr(""),Ht(!0));return}if(i&&s.key==="v"){s.preventDefault(),x.length>0&&(pt({...He,projectId:((T=x[0])==null?void 0:T.id)||"",notes:""}),ft([]),kt(!1),fr(" "),Ht(!0));return}if(i&&s.key==="d"){s.preventDefault(),ge("myday");return}if(i&&s.key==="b"){s.preventDefault(),ge("board");return}if(i&&s.key==="l"){s.preventDefault(),ge("calendar");return}if(i&&s.key==="a"){s.preventDefault(),ge("tasks");return}if(s.key==="?"||s.shiftKey&&s.key==="/"){s.preventDefault(),S("shortcuts"),te(!0);return}if(s.key==="Escape"&&Gt){wt(!1),lt(new Set);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[x,He,g]),d.useEffect(()=>{if(M||w)return;if(["myday","calendar","tasks","projects","progress"].includes(Y)&&!ce[Y]){const s=setTimeout(()=>{ye(Y),W(0)},500);return()=>clearTimeout(s)}},[Y,ce,M,w]);const ls=t=>{const s={...ce,[t]:!0};Re(s),localStorage.setItem("trackli_view_tours_completed",JSON.stringify(s)),ye(null),W(0)},Js=async()=>{try{const t=new Date().toISOString().split("T")[0],s=new Date(Date.now()+864e5).toISOString().split("T")[0],a=new Date(Date.now()+7*864e5).toISOString().split("T")[0],{data:i,error:h}=await O.from("projects").insert({name:"Getting Started with Trackli",user_id:r.id}).select().single();if(h)throw console.error("Project creation error:",h),h;const _=[{title:"Welcome! Click me to see task details",description:`This is the task editor. Here you can:

â€¢ Set due dates and start dates
â€¢ Add time estimates
â€¢ Assign to team members
â€¢ Add subtasks
â€¢ Attach files
â€¢ Set up recurring schedules

Try editing this task, then mark it complete!`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:5},{title:"Check out My Day view",description:`My Day is your daily focus list. Tasks appear here if:

â€¢ Their start date is today or earlier
â€¢ You manually add them via the sun icon

Try switching to My Day view in the menu!`,status:"todo",project_id:i.id,start_date:t,energy_level:"medium",time_estimate:10},{title:"Explore the Calendar view",description:`The Calendar view lets you:

â€¢ See tasks on their due dates
â€¢ Drag tasks to reschedule them
â€¢ Switch between daily, weekly, and monthly views

This task is due tomorrow!`,status:"todo",project_id:i.id,due_date:s,energy_level:"medium",time_estimate:15},{title:"Try the Notes feature for meetings",description:`Click the Notes button in the header to:

â€¢ Paste meeting notes
â€¢ Use voice-to-text (speak your notes!)
â€¢ AI extracts action items automatically

Perfect for turning meetings into tasks!`,status:"todo",project_id:i.id,energy_level:"high",time_estimate:20},{title:"Learn keyboard shortcuts",description:`Speed up your workflow with shortcuts:

â€¢ âŒ˜/Ctrl + âŒƒ + T â€” New task
â€¢ âŒ˜/Ctrl + S â€” Save
â€¢ Escape â€” Close modal
â€¢ ? â€” Help menu

Click the ? icon anytime for more!`,status:"backlog",project_id:i.id,due_date:a,energy_level:"low",time_estimate:10},{title:"Complete this task to see the celebration!",description:`When you complete all your My Day tasks, you get a confetti celebration!

Try completing this task by clicking the circle on the left.`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:1}],{data:T,error:F}=await O.from("tasks").insert(_).select();if(F)throw F;const A=T.find(q=>q.title.includes("Welcome!"));A&&await O.from("subtasks").insert([{task_id:A.id,title:"Read this task description",completed:!1,position:0},{task_id:A.id,title:"Check out the different views (My Day, Calendar, etc.)",completed:!1,position:1},{task_id:A.id,title:"Complete a task to see it move to Done",completed:!1,position:2}]),as(!0),await jt()}catch(t){console.error("Error creating welcome project:",t)}};d.useEffect(()=>{jt()},[]);const jt=async()=>{var t,s,a,i,h,_;k(!0),j(null);try{const[T,F,A,q,G,ae,Ce]=await Promise.all([O.from("projects").select("*").order("created_at",{ascending:!1}),O.from("tasks").select("*").order("created_at",{ascending:!1}),O.from("project_members").select("project_id, name"),O.from("project_customers").select("project_id, name"),O.from("attachments").select("*"),O.from("task_dependencies").select("task_id, depends_on_id"),O.auth.getUser()]);if(T.error)throw T.error;if(F.error)throw F.error;const Ze={},Me={};(t=A.data)==null||t.forEach(ue=>{Ze[ue.project_id]||(Ze[ue.project_id]=[]),Ze[ue.project_id].push(ue.name)}),(s=q.data)==null||s.forEach(ue=>{Me[ue.project_id]||(Me[ue.project_id]=[]),Me[ue.project_id].push(ue.name)});const rt=T.data.map(ue=>({...ue,members:Ze[ue.id]||[],customers:Me[ue.id]||[]})),et={},$t={};(a=G.data)==null||a.forEach(ue=>{et[ue.task_id]||(et[ue.task_id]=[]),et[ue.task_id].push({...ue,file_url:O.storage.from("attachments").getPublicUrl(ue.file_path).data.publicUrl})}),(i=ae.data)==null||i.forEach(ue=>{$t[ue.task_id]||($t[ue.task_id]=[]),$t[ue.task_id].push(ue)});const it=F.data.map(ue=>({...ue,attachments:et[ue.id]||[],dependencies:$t[ue.id]||[]}));D(rt),c(it);const tt=(h=Ce.data)==null?void 0:h.user;if(!((_=tt==null?void 0:tt.user_metadata)==null?void 0:_.has_been_welcomed)&&rt.length===0&&it.length===0&&!ns.current){ns.current=!0,await Js(),await O.auth.updateUser({data:{has_been_welcomed:!0}});return}const zr=new Date;zr.setHours(0,0,0,0);const Qt=it.filter(ue=>{if(ue.status!=="backlog"||!ue.start_date)return!1;const Kt=new Date(ue.start_date);return Kt.setHours(0,0,0,0),Kt<=zr});if(Qt.length>0){const ue=Qt.map(Kt=>Kt.id);c(Kt=>Kt.map(Rr=>ue.includes(Rr.id)?{...Rr,status:"todo"}:Rr)),O.from("tasks").update({status:"todo"}).in("id",ue).then(()=>console.log("Auto-moved",ue.length,"tasks to todo"))}}catch(T){console.error("Error fetching data:",T),j(T.message)}finally{k(!1)}},Xs=t=>{const s=t.split(`
`),a=ea(t);return a.length>0?a:ra(s)},ea=t=>{const s=t.split(`
`),a=[];let i=-1,h={followUp:-1,owner:-1,dueDate:-1,status:-1},_="|";for(let F=0;F<s.length;F++){const A=s[F].toLowerCase();if(A.includes("|")&&(A.includes("follow")||A.includes("action")||A.includes("task"))){const q=s[F].split("|").map(G=>G.trim().toLowerCase());for(let G=0;G<q.length;G++){const ae=q[G];ae.includes("follow")||ae.includes("action")||ae.includes("task")||ae.includes("item")?h.followUp=G:ae.includes("owner")||ae.includes("assignee")||ae.includes("who")||ae.includes("responsible")?h.owner=G:ae.includes("due")||ae.includes("date")||ae.includes("when")||ae.includes("deadline")?h.dueDate=G:(ae.includes("status")||ae.includes("state")||ae.includes("progress"))&&(h.status=G)}if(h.followUp!==-1){i=F,_="|";break}}if(A.includes("	")&&(A.includes("follow")||A.includes("action")||A.includes("task"))){const q=s[F].split("	").map(G=>G.trim().toLowerCase());for(let G=0;G<q.length;G++){const ae=q[G];ae.includes("follow")||ae.includes("action")||ae.includes("task")||ae.includes("item")?h.followUp=G:ae.includes("owner")||ae.includes("assignee")||ae.includes("who")?h.owner=G:ae.includes("due")||ae.includes("date")||ae.includes("when")?h.dueDate=G:(ae.includes("status")||ae.includes("state"))&&(h.status=G)}if(h.followUp!==-1){i=F,_="	";break}}}if(i===-1||h.followUp===-1)return[];let T=i+1;T<s.length&&/^[\s|:-]+$/.test(s[T].replace(/\t/g,""))&&T++;for(let F=T;F<s.length;F++){const A=s[F].trim();if(!A||!A.includes(_)&&_==="|"||_==="	"&&!A.includes("	")&&A.split(/\s{2,}/).length<2){if(a.length>0)break;continue}const q=_==="|"?A.split("|").map(et=>et.trim()):A.split("	").map(et=>et.trim()),G=q[h.followUp]||"",ae=h.owner!==-1&&q[h.owner]||"",Ce=h.dueDate!==-1&&q[h.dueDate]||"",Ze=h.status!==-1?(q[h.status]||"").toLowerCase():"";if(!G||G.length<3||Ze.includes("done")||Ze.includes("complete")||Ze.includes("closed"))continue;let Me=He.date;if(Ce){const et=ta(Ce);et&&(Me=et)}const rt=/urgent|asap|critical|important|high/i.test(G)||/urgent|asap|critical|important|high/i.test(Ze);a.push({id:`extracted-table-${F}`,title:G.charAt(0).toUpperCase()+G.slice(1),assignee:ae,dueDate:Me,selected:!0,critical:rt})}return a},ta=t=>{if(!t)return null;const s=t.trim().toLowerCase(),a=new Date,i=Yr();if(s==="today"||s==="eod")return a.toISOString().split("T")[0];if(s==="tomorrow")return a.setDate(a.getDate()+1),a.toISOString().split("T")[0];if(s==="asap")return a.toISOString().split("T")[0];const _=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(s);if(_!==-1){let A=(_-a.getDay()+7)%7;return A===0&&(A=7),a.setDate(a.getDate()+A),a.toISOString().split("T")[0]}let T=t.match(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/);if(T){let A,q;i?(q=parseInt(T[1])-1,A=parseInt(T[2])):(A=parseInt(T[1]),q=parseInt(T[2])-1);const G=T[3].length===2?2e3+parseInt(T[3]):parseInt(T[3]),ae=new Date(G,q,A);if(!isNaN(ae.getTime()))return ae.toISOString().split("T")[0]}if(T=t.match(/(\d{1,2})[\/\-](\d{1,2})(?!\d)/),T){let A,q;i?(q=parseInt(T[1])-1,A=parseInt(T[2])):(A=parseInt(T[1]),q=parseInt(T[2])-1);const G=new Date(a.getFullYear(),q,A);if(!isNaN(G.getTime()))return G.toISOString().split("T")[0]}const F=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(T=t.match(/(\d{1,2})\s*(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i),T){const A=parseInt(T[1]),q=F.indexOf(T[2].toLowerCase()),G=new Date(a.getFullYear(),q,A);if(!isNaN(G.getTime()))return G.toISOString().split("T")[0]}if(T=t.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s*(\d{1,2})/i),T){const A=parseInt(T[2]),q=F.indexOf(T[1].toLowerCase()),G=new Date(a.getFullYear(),q,A);if(!isNaN(G.getTime()))return G.toISOString().split("T")[0]}return null},ra=t=>{var h,_,T,F,A;const s=[],a=[/^[-*â€¢]\s*\[?\s*\]?\s*(.+)/i,/^(?:action|todo|task|to-do|to do)[:\s]+(.+)/i,/^(\d+[.)]\s*.+)/i,/(.+?)\s+(?:will|to|should|must|needs? to|has to)\s+(.+)/i,/(?:@|assigned to:?)\s*(\w+)\s*[-:]\s*(.+)/i,/^(?:ai|action item)[:\s]+(.+)/i,/^follow[ -]?up[:\s]+(.+)/i],i=/^(schedule|send|create|update|review|prepare|draft|complete|finish|follow|contact|call|email|write|set up|organize|coordinate|check|confirm|arrange|book|submit|share|distribute|circulate|research|investigate|look into|find|get|obtain|collect|gather|compile|analyze|assess|evaluate|implement|execute|deliver|present|discuss|meet|sync|align|escalate|resolve|fix|address)/i;for(let q=0;q<t.length;q++){const G=t[q].trim();if(!G)continue;let ae=!1,Ce="",Ze="";for(const Me of a){const rt=G.match(Me);if(rt){Me.toString().includes("will|to|should")?(Ze=((h=rt[1])==null?void 0:h.trim())||"",Ce=`${Ze} ${((_=rt[2])==null?void 0:_.trim())||""}`.trim()):Me.toString().includes("@|assigned")?(Ze=((T=rt[1])==null?void 0:T.trim())||"",Ce=((F=rt[2])==null?void 0:F.trim())||""):Ce=((A=rt[1])==null?void 0:A.trim())||"",ae=!0;break}}if(!ae&&i.test(G)&&(Ce=G,ae=!0),!ae&&G.includes(":")&&!G.startsWith("http")){const Me=G.split(":");if(Me.length>=2&&Me[0].length<30){const rt=Me[0].trim(),et=Me.slice(1).join(":").trim();et.length>5&&i.test(et)&&(Ze=rt,Ce=et,ae=!0)}}if(ae&&Ce.length>3){Ce=Ce.replace(/^[-*â€¢]\s*\[?\s*\]?\s*/,"").replace(/^\d+[.)]\s*/,"").replace(/^(?:action|todo|task|ai|action item|follow[ -]?up)[:\s]*/i,"").trim();let Me=He.date;const rt=[/by\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/by\s+(\d{1,2}\/\d{1,2})/i,/due\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/(eod|end of day|eow|end of week|asap)/i];for(const et of rt){const $t=Ce.match(et);if($t){const it=$t[1].toLowerCase(),tt=new Date;if(it==="today"||it==="eod"||it==="end of day")Me=tt.toISOString().split("T")[0];else if(it==="tomorrow")tt.setDate(tt.getDate()+1),Me=tt.toISOString().split("T")[0];else if(it==="asap")Me=tt.toISOString().split("T")[0];else if(it==="eow"||it==="end of week"){const Pr=(5-tt.getDay()+7)%7||7;tt.setDate(tt.getDate()+Pr),Me=tt.toISOString().split("T")[0]}else if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(it)){let Qt=(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(it)-tt.getDay()+7)%7;Qt===0&&(Qt=7),tt.setDate(tt.getDate()+Qt),Me=tt.toISOString().split("T")[0]}Ce=Ce.replace(et,"").trim()}}Ce.length>3&&s.push({id:`extracted-${q}`,title:Ce.charAt(0).toUpperCase()+Ce.slice(1),assignee:Ze,dueDate:Me,selected:!0,critical:/urgent|asap|critical|important/i.test(Ce)})}}return s},sa=async()=>{if(!(!He.notes.trim()&&!vt)){os(!0);try{if(vt){const t=await fetch("/api/extract-from-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:vt.base64,mediaType:vt.mediaType})});if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to extract tasks from image")}const a=(await t.json()).tasks.map((i,h)=>({id:`img-${Date.now()}-${h}`,title:i.title,assignee:i.assignee||"",dueDate:i.dueDate||He.date,critical:i.isCritical||!1,selected:!0}));ft(a),kt(!0)}else setTimeout(()=>{const t=Xs(He.notes);ft(t),kt(!0)},300)}catch(t){console.error("Extraction error:",t),j(t.message)}finally{os(!1)}}},aa=t=>{var h;const s=(h=t.target.files)==null?void 0:h[0];if(!s){console.log("No file selected");return}console.log("File selected:",s.name,s.type,s.size);const a=new Image,i=new FileReader;i.onload=_=>{a.onload=()=>{let{width:A,height:q}=a;if(A>2e3||q>2e3){const Me=Math.min(2e3/A,2e3/q);A=Math.round(A*Me),q=Math.round(q*Me)}const G=document.createElement("canvas");G.width=A,G.height=q,G.getContext("2d").drawImage(a,0,0,A,q);const Ce=G.toDataURL("image/jpeg",.8),Ze=Ce.split(",")[1];console.log("Compressed image size:",Math.round(Ze.length*.75/1024),"KB"),Tr({base64:Ze,mediaType:"image/jpeg",preview:Ce,name:s.name||"photo.jpg"}),j(null)},a.onerror=()=>{console.error("Failed to load image"),j("Failed to load image")},a.src=_.target.result},i.onerror=()=>{console.error("FileReader error:",i.error),j("Failed to read image file")},i.readAsDataURL(s)},na=async()=>{var s;const t=yt.filter(a=>a.selected);if(t.length!==0){C(!0),j(null);try{const a=He.projectId||((s=x[0])==null?void 0:s.id);if(!a)throw new Error("Please select a project");const i=x.find(_=>_.id===a),h=(i==null?void 0:i.members)||[];for(const _ of t){let T=null;_.assignee&&(T=h.find(q=>q.toLowerCase().includes(_.assignee.toLowerCase())||_.assignee.toLowerCase().includes(q.toLowerCase().split(" ")[0])));const F={title:_.title,description:He.title?`From meeting: ${He.title}`:"",project_id:a,status:"todo",critical:_.critical,start_date:null,due_date:_.dueDate||null,assignee:T||_.assignee||null,time_estimate:null,energy_level:"medium",category:"meeting_followup",source:"meeting",source_link:null,customer:null,notes:null},{error:A}=await O.from("tasks").insert(F);if(A)throw A}await jt(),Ht(!1),pt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),ft([]),kt(!1),fr(""),Mr()}catch(a){console.error("Error creating tasks:",a),j(a.message)}finally{C(!1)}}},nr=(t,s,a)=>{ft(i=>i.map(h=>h.id===t?{...h,[s]:a}:h))},ia=t=>{ft(s=>s.filter(a=>a.id!==t))},oa=async t=>{C(!0),j(null);try{if(t.id){const{error:a}=await O.from("projects").update({name:t.name}).eq("id",t.id);if(a)throw a;await O.from("project_members").delete().eq("project_id",t.id),await O.from("project_customers").delete().eq("project_id",t.id),t.members.length>0&&await O.from("project_members").insert(t.members.map(i=>({project_id:t.id,name:i}))),t.customers.length>0&&await O.from("project_customers").insert(t.customers.map(i=>({project_id:t.id,name:i})))}else{const{data:a,error:i}=await O.from("projects").insert({name:t.name,user_id:r.id}).select().single();if(i)throw i;t.members.length>0&&await O.from("project_members").insert(t.members.map(h=>({project_id:a.id,name:h}))),t.customers.length>0&&await O.from("project_customers").insert(t.customers.map(h=>({project_id:a.id,name:h})))}await jt();const s=!t.id;B(s?"âœ“ Project created":"âœ“ Project saved")}catch(s){console.error("Error saving project:",s),j(s.message)}finally{C(!1)}},ds=async t=>{C(!0);try{const{error:s}=await O.from("projects").delete().eq("id",t);if(s)throw s;qe===t&&Se("all"),await jt()}catch(s){console.error("Error deleting project:",s),j(s.message)}finally{C(!1)}},Wr=async t=>{const s=x.find(i=>i.id===t),a=s!=null&&s.archived?"unarchive":"archive";C(!0);try{const{error:i}=await O.from("projects").update({archived:!(s!=null&&s.archived)}).eq("id",t);if(i)throw i;D(x.map(h=>h.id===t?{...h,archived:!h.archived}:h)),ee({taskId:null,previousStatus:null,taskTitle:`Project ${a}d`}),setTimeout(()=>ee(null),3e3)}catch(i){console.error(`Error ${a}ing project:`,i),Fr(i.message||`Failed to ${a} project`,null,`Project ${a} failed`)}finally{C(!1)}},la=async t=>{if($e.size!==0){C(!0);try{const s=Array.from($e),{error:a}=await O.from("tasks").update({status:t}).in("id",s);if(a)throw a;c(g.map(i=>$e.has(i.id)?{...i,status:t}:i)),ee({taskId:null,previousStatus:null,taskTitle:`${s.length} tasks moved to ${t.replace("_"," ")}`}),setTimeout(()=>ee(null),3e3),wt(!1),lt(new Set)}catch(s){console.error("Error bulk updating tasks:",s),j(s.message)}finally{C(!1)}}},da=async()=>{$e.size!==0&&bt({title:"Delete Tasks",message:`Are you sure you want to delete ${$e.size} selected task${$e.size===1?"":"s"}? This cannot be undone.`,confirmLabel:"Delete",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:async()=>{C(!0);try{const t=Array.from($e),{error:s}=await O.from("tasks").delete().in("id",t);if(s)throw s;c(g.filter(a=>!$e.has(a.id))),ee({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks deleted`}),setTimeout(()=>ee(null),3e3),wt(!1),lt(new Set),bt(null)}catch(t){console.error("Error bulk deleting tasks:",t),j(t.message)}finally{C(!1)}}})},ca=async t=>{var s;if(!($e.size===0||!t)){C(!0);try{const a=Array.from($e),{error:i}=await O.from("tasks").update({project_id:t}).in("id",a);if(i)throw i;const h=((s=x.find(_=>_.id===t))==null?void 0:s.name)||"project";c(g.map(_=>$e.has(_.id)?{..._,project_id:t}:_)),ee({taskId:null,previousStatus:null,taskTitle:`${a.length} tasks moved to ${h}`}),setTimeout(()=>ee(null),3e3),wt(!1),lt(new Set)}catch(a){console.error("Error bulk moving tasks:",a),j(a.message)}finally{C(!1)}}},xa=async t=>{if($e.size!==0){C(!0);try{const s=Array.from($e),{error:a}=await O.from("tasks").update({assignee:t||null}).in("id",s);if(a)throw a;c(g.map(i=>$e.has(i.id)?{...i,assignee:t||null}:i)),ee({taskId:null,previousStatus:null,taskTitle:`${s.length} tasks assigned to ${t||"nobody"}`}),setTimeout(()=>ee(null),3e3),wt(!1),lt(new Set)}catch(s){console.error("Error bulk assigning tasks:",s),j(s.message)}finally{C(!1)}}},ga=async()=>{if($e.size!==0){C(!0);try{const t=Array.from($e),s=g.filter(_=>$e.has(_.id)),i=!(s.filter(_=>_.critical).length>s.length/2),{error:h}=await O.from("tasks").update({critical:i}).in("id",t);if(h)throw h;c(g.map(_=>$e.has(_.id)?{..._,critical:i}:_)),ee({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks ${i?"marked critical":"unmarked"}`}),setTimeout(()=>ee(null),3e3),wt(!1),lt(new Set)}catch(t){console.error("Error bulk toggling critical:",t),j(t.message)}finally{C(!1)}}},ma=()=>{lt(new Set(Ct.map(t=>t.id)))},ha=()=>{lt(new Set)},cs=async(t,s=[],a=[])=>{C(!0),j(null);try{let i=t.id;if(i){const{error:_}=await O.from("tasks").update({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).eq("id",i);if(_)throw _;await O.from("task_dependencies").delete().eq("task_id",i),t.dependencies&&t.dependencies.length>0&&await O.from("task_dependencies").insert(t.dependencies.map(q=>({task_id:i,depends_on_id:q})));const T=a.map(q=>q.id),{data:F}=await O.from("attachments").select("id, file_path").eq("task_id",i),A=(F==null?void 0:F.filter(q=>!T.includes(q.id)))||[];for(const q of A)await O.storage.from("attachments").remove([q.file_path]),await O.from("attachments").delete().eq("id",q.id)}else{const{data:_,error:T}=await O.from("tasks").insert({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).select().single();if(T)throw T;if(i=_.id,t.dependencies&&t.dependencies.length>0&&await O.from("task_dependencies").insert(t.dependencies.map(F=>({task_id:i,depends_on_id:F}))),t.recurrence_type&&t.start_date){const F=t.recurrence_end_date?Ds(t.start_date,t.recurrence_type,0,t.recurrence_end_date):Ds(t.start_date,t.recurrence_type,t.recurrence_count||8);let A=null;t.due_date&&t.start_date&&(A=new Date(t.due_date)-new Date(t.start_date));const q=F.map(G=>{let ae=null;if(A!==null){const Ce=new Date(G);Ce.setTime(Ce.getTime()+A),ae=Ce.toISOString().split("T")[0]}return{title:t.title,description:t.description,project_id:t.project_id,status:"backlog",critical:t.critical,start_date:G,start_time:t.start_time||null,end_time:t.end_time||null,due_date:ae,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type,recurrence_parent_id:i,subtasks:t.subtasks||[]}});if(q.length>0){const{error:G}=await O.from("tasks").insert(q);G&&console.error("Error creating future occurrences:",G)}}}for(const _ of s){const T=`${r.id}/${i}/${Date.now()}_${_.name}`,{error:F}=await O.storage.from("attachments").upload(T,_);if(F)throw F;await O.from("attachments").insert({task_id:i,file_name:_.name,file_path:T,file_size:_.size,file_type:_.type})}await jt();const h=!t.id;B(h?"âœ“ Task created":"âœ“ Task saved")}catch(i){console.error("Error saving task:",i),Fr(i.message||"Failed to save task",()=>cs(t,s,a),"Save failed")}finally{C(!1)}},ir=async(t,s=!1)=>{const a=g.find(i=>i.id===t);if(a&&(a.recurrence_type||a.recurrence_parent_id)&&!s&&!rr){Cr({taskId:t,title:a.title,parentId:a.recurrence_parent_id||a.id});return}C(!0);try{if(s&&a){const i=a.recurrence_parent_id||a.id,h=g.filter(T=>T.id===i||T.recurrence_parent_id===i);for(const T of h){const{data:F}=await O.from("attachments").select("file_path").eq("task_id",T.id);(F==null?void 0:F.length)>0&&await O.storage.from("attachments").remove(F.map(A=>A.file_path))}const{error:_}=await O.from("tasks").delete().or(`id.eq.${i},recurrence_parent_id.eq.${i}`);if(_)throw _;await jt(),B(`Deleted ${h.length} recurring tasks`)}else{const{data:i}=await O.from("attachments").select("file_path").eq("task_id",t);(i==null?void 0:i.length)>0&&await O.storage.from("attachments").remove(i.map(_=>_.file_path));const{error:h}=await O.from("tasks").delete().eq("id",t);if(h)throw h;await jt(),B("Task deleted")}}catch(i){console.error("Error deleting task:",i),Fr(i.message||"Failed to delete task",()=>ir(t,s),"Delete failed")}finally{C(!1),Cr(null)}},ua=async(t,s,a=null)=>{var h;if(!t.trim())return;const i=s||((h=x[0])==null?void 0:h.id);if(i)try{C(!0);const{data:_,error:T}=await O.from("tasks").insert({title:t.trim(),project_id:i,status:"backlog",due_date:a,energy_level:"medium",category:"deliverable",source:"ad_hoc"}).select().single();if(T)throw T;c(F=>[...F,{..._,attachments:[],dependencies:[]}]),Yt(""),Ut(!1)}catch(_){console.error("Error creating task:",_),j(_.message)}finally{C(!1)}},Ir=async(t,s)=>{try{const a=g.find(h=>h.id===t),{error:i}=await O.from("tasks").update({my_day_date:s}).eq("id",t);if(i)throw i;c(h=>h.map(_=>_.id===t?{..._,my_day_date:s}:_)),s&&new Date(s).toDateString()===new Date().toDateString()&&B(`â˜€ï¸ Added "${a==null?void 0:a.title}" to My Day`)}catch(a){console.error("Error updating my_day_date:",a)}},Nt=async(t,s)=>{try{const a=g.find(_=>_.id===t),{error:i}=await O.from("tasks").update({status:s,completed_at:s==="done"?new Date().toISOString():null}).eq("id",t);if(i)throw i;const h=a==null?void 0:a.status;s==="done"&&(a!=null&&a.recurrence_type)?await jt():c(g.map(_=>_.id===t?{..._,status:s,completed_at:s==="done"?new Date().toISOString():null}:_)),s==="done"&&(ee({taskId:t,previousStatus:h,taskTitle:a==null?void 0:a.title}),setTimeout(()=>ee(null),5e3))}catch(a){console.error("Error updating task status:",a),j(a.message)}},xs=async(t,s)=>{try{const{error:a}=await O.from("tasks").update({due_date:s}).eq("id",t);if(a)throw a;c(g.map(i=>i.id===t?{...i,due_date:s}:i))}catch(a){console.error("Error setting due date:",a),j(a.message)}},gs=async(t,s)=>{try{const{error:a}=await O.from("tasks").update({title:s}).eq("id",t);if(a)throw a;c(g.map(i=>i.id===t?{...i,title:s}:i))}catch(a){console.error("Error updating task title:",a),j(a.message)}},ms=async(t,s)=>{try{const{error:a}=await O.from("tasks").update({critical:s}).eq("id",t);if(a)throw a;c(g.map(i=>i.id===t?{...i,critical:s}:i)),B(s?"ðŸš© Marked as critical":"âœ“ Critical flag removed")}catch(a){console.error("Error toggling critical:",a),j(a.message)}},pa=async(t,s)=>{try{const{error:a}=await O.from("tasks").update(s).eq("id",t);if(a)throw a;c(g.map(i=>i.id===t?{...i,...s}:i))}catch(a){console.error("Error updating task from calendar:",a),j(a.message)}},ya=async()=>{if(R)try{await O.from("tasks").update({status:R.previousStatus}).eq("id",R.taskId),c(t=>t.map(s=>s.id===R.taskId?{...s,status:R.previousStatus}:s)),ee(null)}catch(t){console.error("Error undoing:",t),j(t.message)}},hs=(t,s)=>{Kr(s),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",s.id)},us=(t,s)=>{t.preventDefault()},ps=(t,s)=>{t.preventDefault(),tr&&tr.status!==s&&Nt(tr.id,s),Kr(null)},fa=[...new Set(g.map(t=>t.assignee).filter(Boolean))];[...new Set(g.map(t=>t.customer).filter(Boolean))];const or=gt||mt||_r||Sr||Dr||ht||ut||Rt.trim()||Object.keys(Ae).length>0,ys=()=>{xr(!1),gr(!1),Zr(!1),Jr(!1),Xr(!1),mr(!1),hr(!1),ur(""),Bt({}),es("")},fs=t=>{const s={id:Date.now(),name:t,filters:{selectedProjectId:qe,filterCritical:gt,filterOverdue:mt,filterBlocked:_r,filterActive:Sr,filterBacklog:Dr,filterDueToday:ht,filterMyDay:ut,searchQuery:Rt,fieldFilters:Ae}},a=[...At,s];rs(a),localStorage.setItem("trackli_saved_views",JSON.stringify(a)),pr(!1),ss("")},ba=t=>{Se(t.filters.selectedProjectId||"all"),xr(t.filters.filterCritical||!1),gr(t.filters.filterOverdue||!1),Zr(t.filters.filterBlocked||!1),Jr(t.filters.filterActive||!1),Xr(t.filters.filterBacklog||!1),mr(t.filters.filterDueToday||!1),hr(t.filters.filterMyDay||!1),ur(t.filters.searchQuery||""),Bt(t.filters.fieldFilters||{})},ja=t=>{const s=At.filter(a=>a.id!==t);rs(s),localStorage.setItem("trackli_saved_views",JSON.stringify(s))};g.filter(t=>qe!=="all"&&t.project_id!==qe?!1:lr(t)).length;const Ct=g.filter(t=>{var s,a,i,h,_,T;if(!Ne&&t.project_id){const F=x.find(A=>A.id===t.project_id);if(F!=null&&F.archived)return!1}if(qe!=="all"&&t.project_id!==qe||gt&&!t.critical||mt&&ct(t.due_date,t.status)!=="overdue"||_r&&!dt(t,g)||Sr&&!["todo","in_progress"].includes(t.status)||Dr&&t.status!=="backlog"||ht&&ct(t.due_date,t.status)!=="today"||ut&&!qr(t))return!1;if(Rt.trim()){const F=Rt.toLowerCase(),A=(s=t.title)==null?void 0:s.toLowerCase().includes(F),q=(a=t.description)==null?void 0:a.toLowerCase().includes(F),G=(i=t.customer)==null?void 0:i.toLowerCase().includes(F),ae=(h=t.assignee)==null?void 0:h.toLowerCase().includes(F),Ce=(T=(_=x.find(Ze=>Ze.id===t.project_id))==null?void 0:_.name)==null?void 0:T.toLowerCase().includes(F);if(!A&&!q&&!G&&!ae&&!Ce)return!1}for(const[F,A]of Object.entries(Ae))if(A==="__blank__"){if(F==="assignee"&&t.assignee||F==="customer"&&t.customer||F==="category"&&t.category||F==="energy_level"&&t.energy_level||F==="source"&&t.source||F==="due_date"&&t.due_date)return!1}else if(F==="assignee"&&t.assignee!==A||F==="customer"&&t.customer!==A||F==="category"&&t.category!==A||F==="energy_level"&&t.energy_level!==A||F==="source"&&t.source!==A||F==="due_date"&&A==="has_date"&&!t.due_date)return!1;if(Ps&&!lr(t))return!1;if(Lr!=="all"&&ts){const F=parseInt(ts);if(Lr==="lt"&&(t.time_estimate||0)>=F||Lr==="gt"&&(t.time_estimate||0)<=F)return!1}return!0}),bs=t=>{if(!t.start_date)return!1;const s=new Date;s.setHours(0,0,0,0);const a=new Date(t.start_date);return a.setHours(0,0,0,0),a>s},ka=(t,s=!1)=>{const a={high:0,medium:1,low:2};return[...t].sort((i,h)=>{if(s){const q=bs(i),G=bs(h);if(q&&!G)return 1;if(!q&&G)return-1}if(i.critical&&!h.critical)return-1;if(!i.critical&&h.critical)return 1;const _=!!i.due_date,T=!!h.due_date;if(_&&T){const q=new Date(i.due_date)-new Date(h.due_date);if(q!==0)return q}else{if(_&&!T)return-1;if(!_&&T)return 1}const F=a[i.energy_level]??1,A=a[h.energy_level]??1;return F!==A?F-A:new Date(i.created_at)-new Date(h.created_at)})},Or=t=>{const s=Ct.filter(a=>a.status===t);return t==="done"?[...s].sort((a,i)=>{const h=a.completed_at?new Date(a.completed_at):new Date(0);return(i.completed_at?new Date(i.completed_at):new Date(0))-h}):ka(s,t==="backlog")},kr=Ct.filter(t=>t.critical&&t.status!=="done").length,vr=Ct.filter(t=>ct(t.due_date,t.status)==="overdue").length,wr=Ct.filter(t=>ct(t.due_date,t.status)==="today").length;Ct.filter(t=>dt(t,g)&&t.status!=="done").length;const Nr=Ct.filter(t=>qr(t)).length;Ct.filter(t=>t.status!=="done").reduce((t,s)=>t+(s.time_estimate||0),0);const va=(()=>{const t=g.filter(h=>h.status==="done"&&h.completed_at);if(t.length===0)return 0;const s=new Set(t.map(h=>new Date(h.completed_at).toDateString()));let a=0,i=new Date;for(i.setHours(0,0,0,0);s.has(i.toDateString());)a++,i.setDate(i.getDate()-1);if(a===0){const h=new Date;for(h.setDate(h.getDate()-1),h.setHours(0,0,0,0);s.has(h.toDateString());)a++,h.setDate(h.getDate()-1)}return a})(),js=(()=>{const t=new Date,s=new Date(t);s.setDate(s.getDate()-7);const a=g.filter(i=>{if(i.status!=="done"||!i.completed_at)return!1;const h=new Date(i.completed_at);return h>=s&&h<=t});return{count:a.length,time:a.reduce((i,h)=>i+(h.time_estimate||0),0)}})(),ks=new Date;ks.setHours(0,0,0,0);const wa=g.filter(t=>t.status==="done"&&t.completed_at&&new Date(t.completed_at)>=ks).length;return g.filter(t=>t.due_date===new Date().toISOString().split("T")[0]&&t.status!=="done").length,p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full drop-shadow-xl",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"loading-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"loading-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#loading-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#loading-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Trackli"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm",children:"Loading your tasks..."})]})}):e.jsx(Ma,{onRefresh:jt,children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-200",children:[z&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-amber-500 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m-3.536-3.536a4 4 0 010-5.656m-7.072 7.072a9 9 0 010-12.728m3.536 3.536a4 4 0 010 5.656"})}),"You're offline â€” changes won't sync until you reconnect"]})}),ar&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md bg-white dark:bg-gray-800 border border-red-200 dark:border-red-800 rounded-2xl p-4 shadow-xl animate-in slide-in-from-bottom-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[It.error(),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:ar.details||"Error"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-0.5",children:ar.message}),ar.retryAction&&e.jsx("button",{onClick:()=>{Er(null),ar.retryAction()},className:"mt-2 px-3 py-1.5 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white rounded-lg text-xs font-medium transition-all focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Try Again"})]}),e.jsx("button",{onClick:()=>Er(null),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),R&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl px-4 py-3 shadow-xl flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[It.success(),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:['"',R.taskTitle,'" marked as done']}),e.jsx("button",{onClick:ya,className:"px-3 py-1.5 bg-purple-500 hover:bg-purple-600 active:bg-purple-700 text-white rounded-lg text-sm font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Undo"}),e.jsx("button",{onClick:()=>ee(null),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),me&&e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl px-4 py-3 shadow-xl flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[me.type==="success"?It.success():It.info(),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:me.message}),e.jsx("button",{onClick:()=>P(null),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>E(!Q),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",title:"Menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),Q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 sm:bg-black/20 animate-fadeIn",onClick:()=>E(!1)}),e.jsxs("div",{className:"fixed sm:absolute top-0 sm:top-full left-0 h-screen sm:h-auto w-72 sm:w-56 sm:mt-2 sm:rounded-xl shadow-2xl border-r sm:border border-gray-200 dark:border-gray-700 py-2 z-[1000] animate-slideInFromLeft sm:animate-none overflow-y-auto",style:{backgroundColor:f?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"sm:hidden flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Menu"}),e.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Views"}),e.jsxs("button",{onClick:()=>{ge("myday"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="myday"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.myday(),e.jsx("span",{className:"font-medium",children:"My Day"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[b,"D"]})]}),e.jsxs("button",{onClick:()=>{ge("board"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="board"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.board(),e.jsx("span",{className:"font-medium",children:"Board"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[b,"B"]})]}),e.jsxs("button",{onClick:()=>{ge("calendar"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="calendar"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.calendar(),e.jsx("span",{className:"font-medium",children:"Calendar"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[b,"L"]})]}),e.jsxs("button",{onClick:()=>{ge("tasks"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="tasks"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.alltasks(),e.jsx("span",{className:"font-medium",children:"All Tasks"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[b,"A"]})]}),e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Manage"}),e.jsxs("button",{onClick:()=>{ge("projects"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="projects"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.projects(),e.jsx("span",{className:"font-medium",children:"Projects"})]}),e.jsxs("button",{onClick:()=>{ge("progress"),E(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Y==="progress"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[Fe.progress(),e.jsx("span",{className:"font-medium",children:"Progress"})]}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-300 uppercase tracking-wider",children:"Settings"}),e.jsxs("button",{onClick:()=>{se(!f)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[f?Fe.sun():Fe.moon(),e.jsx("span",{className:"font-medium",children:f?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:()=>{var t;pt({...He,projectId:((t=x[0])==null?void 0:t.id)||""}),ft([]),kt(!1),Ht(!0),E(!1)},disabled:x.length===0,className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[Fe.importNotes(),e.jsx("span",{className:"font-medium",children:"Import Notes"})]}),e.jsxs("button",{onClick:()=>{pe(!0),E(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sm:hidden",children:[Fe.feedback(),e.jsx("span",{className:"font-medium",children:"Send Feedback"})]}),e.jsxs("button",{onClick:()=>{We(!0),E(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[Fe.settingsGear(),e.jsx("span",{className:"font-medium",children:"Settings"})]}),e.jsxs("button",{onClick:()=>{l(),E(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[Fe.signOut(),e.jsx("span",{className:"font-medium",children:"Sign Out"})]}),e.jsx("div",{className:"h-8"})]})]})]})]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-300 hidden sm:flex items-center gap-1.5",children:[Y==="myday"&&e.jsxs(e.Fragment,{children:[Fe.myday()," My Day"]}),Y==="board"&&e.jsxs(e.Fragment,{children:[Fe.board()," Board"]}),Y==="calendar"&&e.jsxs(e.Fragment,{children:[Fe.calendar()," Calendar"]}),Y==="tasks"&&e.jsxs(e.Fragment,{children:[Fe.alltasks()," All Tasks"]}),Y==="progress"&&e.jsxs(e.Fragment,{children:[Fe.progress()," Progress"]}),Y==="projects"&&e.jsxs(e.Fragment,{children:[Fe.projects()," Projects"]})]})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"mobile-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"mobile-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#mobile-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#mobile-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("span",{className:"text-base font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden xl:flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"desktop-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"desktop-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#desktop-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#desktop-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h1",{className:"hidden sm:block text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>se(!f),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-300",title:f?"Light mode":"Dark mode",children:f?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),Y==="board"&&e.jsx("button",{onClick:()=>{wt(!Gt),lt(new Set)},className:`hidden sm:block p-2 rounded-xl transition-colors ${Gt?"bg-indigo-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-300"}`,title:"Bulk select",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("button",{onClick:()=>{Ft(null),Et(!0)},className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-teal-500 text-white rounded-lg sm:rounded-xl hover:bg-teal-600 active:bg-teal-700 transition-all text-sm font-medium items-center gap-1.5 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 shadow-sm hover:shadow",title:"âŒ˜P",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"P"}),"roject"]})]}),e.jsxs("button",{onClick:()=>{st(null),Ve(!0)},disabled:x.length===0,className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg sm:rounded-xl hover:from-indigo-600 hover:to-purple-600 active:from-indigo-700 active:to-purple-700 transition-all text-sm font-medium items-center gap-1.5 shadow-lg shadow-indigo-500/25 hover:shadow-xl disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:`${b}T`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"T"}),"ask"]})]}),e.jsxs("button",{onClick:()=>{var t;pt({...He,projectId:((t=x[0])==null?void 0:t.id)||""}),ft([]),kt(!1),Ht(!0)},disabled:x.length===0,className:"hidden sm:flex px-3 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 active:bg-amber-700 transition-all text-sm font-medium items-center gap-1.5 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 shadow-sm hover:shadow",title:"Import Meeting Notes (âŒ˜N)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Notes"})]}),e.jsx("button",{onClick:()=>te(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-300",title:"Help Guide",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(r==null?void 0:r.email)===Ws&&e.jsx("button",{onClick:()=>_e(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-300",title:"View Feedback",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("button",{onClick:()=>We(!0),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-300",title:"Settings",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:l,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-300",title:"Sign Out",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),Y==="board"&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2",children:[e.jsxs("div",{className:"sm:hidden flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:qe,onChange:t=>Se(t.target.value),className:"w-full appearance-none pl-3 pr-7 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),x.filter(t=>!t.archived||Ne).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("button",{onClick:()=>Le(!0),className:`relative p-2.5 rounded-xl border transition-all ${or?"bg-indigo-500 border-indigo-500 text-white":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),or&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:Object.keys(Ae).length+(gt?1:0)+(ht?1:0)+(mt?1:0)+(ut?1:0)})]}),e.jsx("button",{onClick:()=>y(!0),className:"p-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-600 dark:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),fe&&Na.createPortal(e.jsxs("div",{className:"sm:hidden fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>Le(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Filters"}),e.jsx("button",{onClick:()=>Le(!1),className:"p-2 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Quick Filters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>xr(!gt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${gt?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["ðŸš© Critical (",kr,")"]}),e.jsxs("button",{onClick:()=>mr(!ht),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${ht?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Today (",wr,")"]}),e.jsxs("button",{onClick:()=>gr(!mt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${mt?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Overdue (",vr,")"]}),e.jsxs("button",{onClick:()=>hr(!ut),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${ut?"bg-amber-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["â˜€ï¸ My Day (",Nr,")"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-300 mb-2",children:"Filter by Field"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:Ae.assignee||"",onChange:t=>Bt(t.target.value?{...Ae,assignee:t.target.value}:(({assignee:s,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Assignee: All"}),e.jsx("option",{value:"__blank__",children:"Assignee: (Blank)"}),[...new Set(g.map(t=>t.assignee).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ae.customer||"",onChange:t=>Bt(t.target.value?{...Ae,customer:t.target.value}:(({customer:s,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Customer: All"}),e.jsx("option",{value:"__blank__",children:"Customer: (Blank)"}),[...new Set(g.map(t=>t.customer).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ae.category||"",onChange:t=>Bt(t.target.value?{...Ae,category:t.target.value}:(({category:s,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Category: All"}),ot.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]}),e.jsxs("select",{value:Ae.energy_level||"",onChange:t=>Bt(t.target.value?{...Ae,energy_level:t.target.value}:(({energy_level:s,...a})=>a)(Ae)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Effort: All"}),e.jsx("option",{value:"high",children:"High Effort"}),e.jsx("option",{value:"medium",children:"Medium Effort"}),e.jsx("option",{value:"low",children:"Low Effort"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[or&&e.jsx("button",{onClick:()=>{ys(),Le(!1)},className:"flex-1 p-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:()=>Le(!1),className:"flex-1 p-3 bg-indigo-500 text-white rounded-xl text-sm font-medium",children:"Apply"})]})]})]}),document.body),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 min-w-max overflow-x-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:qe,onChange:t=>Se(t.target.value),className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),x.filter(t=>!t.archived||Ne).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>xr(!gt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${gt?"bg-red-500 text-white shadow-sm":kr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"ðŸš©"}),e.jsx("span",{className:"hidden sm:inline",children:"Critical"}),(gt||kr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${gt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:kr})]}),e.jsxs("button",{onClick:()=>mr(!ht),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${ht?"bg-orange-500 text-white shadow-sm":wr>0?"text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/30":"text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Due Today"}),e.jsx("span",{className:"sm:hidden",children:"Today"}),(ht||wr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${ht?"bg-white/20":"bg-orange-100 dark:bg-orange-900/50"}`,children:wr})]}),e.jsxs("button",{onClick:()=>gr(!mt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${mt?"bg-red-600 text-white shadow-sm":vr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"Overdue"}),(mt||vr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${mt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:vr})]}),e.jsxs("button",{onClick:()=>hr(!ut),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${ut?"bg-amber-500 text-white shadow-sm":Nr>0?"text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{className:"hidden sm:inline",children:"My Day"}),(ut||Nr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${ut?"bg-white/20":"bg-amber-100 dark:bg-amber-900/50"}`,children:Nr})]})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Object.entries(Ae).map(([t,s])=>{var h,_;const a={assignee:"Assignee",customer:"Customer",category:"Category",energy_level:"Effort",source:"Source",due_date:"Due Date"};let i=s;return s==="__blank__"?i="(Blank)":t==="category"?i=((h=ot.find(T=>T.id===s))==null?void 0:h.label)||s:t==="energy_level"?i=s==="high"?"High":s==="medium"?"Medium":"Low":t==="source"?i=((_=Wt.find(T=>T.id===s))==null?void 0:_.label)||s:t==="due_date"&&s==="has_date"&&(i="Has Date"),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[a[t],": ",i,e.jsx("button",{onClick:()=>{const T={...Ae};delete T[t],Bt(T)},className:"ml-0.5 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Os,onChange:t=>es(t.target.value),className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-300 focus:ring-1 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"+ Filter"}),!Ae.assignee&&e.jsx("option",{value:"assignee",children:"Assignee"}),!Ae.customer&&e.jsx("option",{value:"customer",children:"Customer"}),!Ae.category&&e.jsx("option",{value:"category",children:"Category"}),!Ae.energy_level&&e.jsx("option",{value:"energy_level",children:"Effort"}),!Ae.source&&e.jsx("option",{value:"source",children:"Source"}),!Ae.due_date&&e.jsx("option",{value:"due_date",children:"Due Date"})]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:Rt,onChange:t=>ur(t.target.value),className:"w-32 sm:w-40 pl-7 pr-2 py-1 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent focus:bg-white dark:focus:bg-gray-700 transition-colors"}),e.jsx("svg",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Rt&&e.jsx("button",{onClick:()=>ur(""),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[or&&e.jsxs("button",{onClick:ys,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-500 hover:text-red-600 dark:text-gray-300 dark:hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]}),e.jsxs("label",{className:"hidden sm:flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-300 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:Ne,onChange:t=>re(t.target.checked),className:"w-3 h-3 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Archived"]})]}),At.length>0&&e.jsxs("div",{className:"relative border-l border-gray-200 dark:border-gray-700 pl-2",children:[e.jsxs("select",{onChange:t=>{const s=At.find(a=>a.id===parseInt(t.target.value));s&&ba(s),t.target.value=""},className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-300 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600",children:[e.jsx("option",{value:"",children:"ðŸ“‘ Views"}),At.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),or&&e.jsx("button",{onClick:()=>pr(!0),className:"p-2 sm:p-1 text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 touch-manipulation",title:"Save current filters as a view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]})]}),x.length===0&&e.jsxs("div",{className:"max-w-md mx-auto mt-12 sm:mt-20 text-center px-6",children:[e.jsx("div",{className:"w-24 h-24 sm:w-20 sm:h-20 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-12 h-12 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 mb-8 text-base sm:text-base",children:"Get started by creating your first project."}),e.jsx("button",{onClick:()=>{Ft(null),Et(!0)},className:"w-full sm:w-auto px-8 py-4 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 text-lg sm:text-base active:scale-95",children:"Create Your First Project"})]}),x.length>0&&e.jsxs(e.Fragment,{children:[Gt&&e.jsx("div",{className:"sticky top-[73px] z-30 bg-indigo-600 dark:bg-indigo-700 border-b border-indigo-500",children:e.jsx("div",{className:"max-w-full mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{wt(!1),lt(new Set)},className:"p-1.5 hover:bg-indigo-500 rounded-lg transition-colors text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("span",{className:"text-white font-medium",children:[$e.size," task",$e.size!==1?"s":""," selected"]}),e.jsx("button",{onClick:ma,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Select all"}),e.jsx("button",{onClick:ha,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Deselect all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>t.target.value&&la(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Status..."}),e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsxs("select",{onChange:t=>t.target.value&&ca(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Project..."}),x.filter(t=>!t.archived).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>xa(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Assign..."}),e.jsx("option",{value:"",children:"Unassign"}),fa.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:ga,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 border border-white/30 text-white rounded-lg text-sm font-medium transition-colors",title:"Toggle critical flag",children:"ðŸš© Critical"}),e.jsx("button",{onClick:da,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})}),Y==="myday"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ua,{tasks:g.filter(t=>{var s;return!t.project_id||!((s=x.find(a=>a.id===t.project_id))!=null&&s.archived)}),projects:x,onEditTask:t=>{st(t),Ve(!0)},allTasks:g.filter(t=>{var s;return!t.project_id||!((s=x.find(a=>a.id===t.project_id))!=null&&s.archived)}),onQuickStatusChange:Nt,onUpdateMyDayDate:Ir,showConfettiPref:xt})},"myday"),Y==="calendar"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ga,{tasks:g.filter(t=>{var s;return!t.project_id||!((s=x.find(a=>a.id===t.project_id))!=null&&s.archived)}),projects:x,onEditTask:t=>{st(t),Ve(!0)},onCreateTask:t=>{st(t),Ve(!0)},allTasks:g.filter(t=>{var s;return!t.project_id||!((s=x.find(a=>a.id===t.project_id))!=null&&s.archived)}),onUpdateTask:pa,onDeleteTask:ir,viewMode:De,setViewMode:N,onShowConfirm:bt})},"calendar"),Y==="tasks"&&e.jsx("div",{className:"animate-fadeIn h-[calc(100vh-140px)]",children:e.jsx(qa,{tasks:g,projects:x,onEditTask:t=>{st(t),Ve(!0)},allTasks:g})},"tasks"),Y==="projects"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-8 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Projects"}),e.jsxs("button",{onClick:()=>{Ft(null),Et(!0)},className:"px-3 sm:px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium flex items-center gap-2 text-sm sm:text-base",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-300 uppercase tracking-wider mb-3 sm:mb-4",children:["Active Projects (",x.filter(t=>!t.archived).length,")"]}),e.jsxs("div",{className:"space-y-3",children:[x.filter(t=>!t.archived).map(t=>{var h,_;const s=g.filter(T=>T.project_id===t.id),a=s.filter(T=>T.status==="done").length,i=s.length>0?Math.round(a/s.length*100):0;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:t.name}),e.jsx("button",{onClick:()=>{Ft(t),Et(!0)},className:"sm:hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1.5 text-sm text-gray-500 dark:text-gray-300",children:[e.jsxs("span",{children:[s.length," tasks"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((h=t.members)==null?void 0:h.length)||0," members"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((_=t.customers)==null?void 0:_.length)||0," customers"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-300 w-10 text-right",children:[i,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-100 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{Se(t.id),ge("board")},className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"View Board"}),e.jsx("button",{onClick:()=>{Ft(t),Et(!0)},className:"hidden sm:block p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>{const T=g.filter(F=>F.project_id===t.id&&F.status!=="done");bt({title:"Archive Project",message:`Archive "${t.name}"?${T.length>0?` This will hide ${T.length} active task${T.length===1?"":"s"} from the board.`:""} You can unarchive it later.`,confirmLabel:"Archive",confirmStyle:"warning",icon:"ðŸ“¦",onConfirm:()=>Wr(t.id)})},className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors touch-manipulation",title:"Archive project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]})]})},t.id)}),x.filter(t=>!t.archived).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"No active projects yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-300 mt-1",children:"Create your first project to organize your tasks"})]})]})]}),x.filter(t=>t.archived).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-300 uppercase tracking-wider mb-3 sm:mb-4",children:["Archived (",x.filter(t=>t.archived).length,")"]}),e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.archived).map(t=>{const s=g.filter(a=>a.project_id===t.id);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4 opacity-75",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¦"}),e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300 truncate",children:t.name})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-1 ml-7",children:[s.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>Wr(t.id),className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"Unarchive"}),e.jsx("button",{onClick:()=>{bt({title:"Delete Project",message:`Delete "${t.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{ds(t.id),bt(null)}})},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors touch-manipulation",title:"Delete permanently",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)})})]})]},"projects"),Y==="progress"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 flex items-center gap-2",children:[Fe.chartBar()," Progress Dashboard"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.fire(),e.jsx("span",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:va})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Day Streak"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.checkSquare(),e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:wa})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Completed Today"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.calendarWeek(),e.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:js.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Fe.stopwatch(),e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Pt(js.time)||"0h"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Time This Week"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Last 7 Days"}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:(()=>{const t=[];for(let a=6;a>=0;a--){const i=new Date;i.setDate(i.getDate()-a),i.setHours(0,0,0,0);const h=i.toDateString(),_=i.toLocaleDateString(void 0,{weekday:"short"}),T=g.filter(F=>F.status==="done"&&F.completed_at&&new Date(F.completed_at).toDateString()===h).length;t.push({dayName:_,count:T,isToday:a===0})}const s=Math.max(...t.map(a=>a.count),1);return t.map((a,i)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"80px"},children:e.jsx("div",{className:`w-full max-w-[40px] rounded-t-lg transition-all ${a.isToday?"bg-gradient-to-t from-indigo-500 to-purple-500":"bg-indigo-200 dark:bg-indigo-800"}`,style:{height:`${Math.max(a.count/s*100,8)}%`}})}),e.jsx("span",{className:`text-xs font-medium ${a.isToday?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-300"}`,children:a.dayName}),e.jsx("span",{className:`text-xs ${a.isToday?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-400 dark:text-gray-300"}`,children:a.count})]},i))})()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Project Progress"}),e.jsx("div",{className:"space-y-4",children:x.filter(t=>!t.archived).map(t=>{const s=g.filter(h=>h.project_id===t.id),a=s.filter(h=>h.status==="done").length,i=s.length>0?Math.round(a/s.length*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-300",children:[a,"/",s.length," tasks"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})})]},t.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Recently Completed"}),e.jsxs("div",{className:"space-y-3",children:[g.filter(t=>t.status==="done"&&t.completed_at).sort((t,s)=>new Date(s.completed_at)-new Date(t.completed_at)).slice(0,10).map(t=>{const s=x.find(h=>h.id===t.project_id),i=new Date(t.completed_at).toDateString()===new Date().toDateString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:s==null?void 0:s.name})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300 whitespace-nowrap",children:i?"Today":St(t.completed_at)})]},t.id)}),g.filter(t=>t.status==="done").length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸ’ª"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-base sm:text-sm",children:"No completed tasks yet"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-300 text-sm mt-1",children:"Get started!"})]})]})]})]}),Y==="board"&&e.jsx("main",{className:"flex-1 px-3 sm:px-6 py-4 sm:py-6 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-900/50 rounded-2xl border border-gray-200/60 dark:border-gray-700/40 shadow-inner p-3 sm:p-4",children:[M&&e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("button",{onClick:()=>oe(Math.max(0,K-1)),disabled:K===0,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:at[K].color}}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:at[K].title}),e.jsx("span",{className:"px-2 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full shadow-sm",children:Or(at[K].id).length})]})}),e.jsx("button",{onClick:()=>oe(Math.min(at.length-1,K+1)),disabled:K===at.length-1,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:at.map((t,s)=>e.jsx("button",{onClick:()=>oe(s),className:`transition-all duration-200 ${s===K?"w-6 h-2 rounded-full":"w-2 h-2 rounded-full"}`,style:{backgroundColor:s===K?t.color:"#D1D5DB"}},t.id))})]}),e.jsx("div",{className:M?"":"flex gap-3 sm:gap-4 lg:gap-6 overflow-x-auto overflow-y-visible pb-4 sm:pb-6 justify-center",children:M?e.jsx(Bs,{column:at[K],tasks:Or(at[K].id),projects:x,onEditTask:t=>{st(t),Ve(!0)},onDragStart:hs,onDragOver:us,onDrop:ps,showProject:qe==="all",allTasks:g,onQuickComplete:Nt,onStatusChange:Nt,onSetDueDate:xs,bulkSelectMode:Gt,selectedTaskIds:$e,onToggleSelect:t=>{const s=new Set($e);s.has(t)?s.delete(t):s.add(t),lt(s)},onAddTask:t=>{st({status:t}),Ve(!0)},onToggleMyDay:(t,s)=>{const a=new Date().toISOString().split("T")[0],i=new Date(Date.now()-864e5).toISOString().split("T")[0];Ir(t,s?a:i)},isMobileFullWidth:!0,draggedTask:tr,onUpdateTitle:gs,onToggleCritical:ms},at[K].id):at.map(t=>e.jsx(Bs,{column:t,tasks:Or(t.id),projects:x,onEditTask:s=>{st(s),Ve(!0)},onDragStart:hs,onDragOver:us,onDrop:ps,showProject:qe==="all",allTasks:g,onQuickComplete:Nt,onStatusChange:Nt,onSetDueDate:xs,bulkSelectMode:Gt,selectedTaskIds:$e,onToggleSelect:s=>{const a=new Set($e);a.has(s)?a.delete(s):a.add(s),lt(a)},onAddTask:s=>{st({status:s}),Ve(!0)},onToggleMyDay:(s,a)=>{const i=new Date().toISOString().split("T")[0],h=new Date(Date.now()-864e5).toISOString().split("T")[0];Ir(s,a?i:h)},draggedTask:tr,onUpdateTitle:gs,onToggleCritical:ms},t.id))}),e.jsx(Qa,{tasks:g.filter(t=>t.status==="done"&&t.completed_at).sort((t,s)=>new Date(s.completed_at)-new Date(t.completed_at)).slice(0,5),projects:x,onEditTask:t=>{st(t),Ve(!0)},onUndoComplete:t=>Nt(t,"todo")})]})})]}),e.jsx(Ka,{isOpen:Pe,onClose:()=>{Ve(!1),st(null)},task:zt!=null&&zt.id&&g.find(t=>t.id===zt.id)||zt,projects:x,allTasks:g,onSave:cs,onDelete:ir,loading:v,onShowConfirm:bt}),e.jsx(Za,{isOpen:cr,onClose:()=>{Et(!1),Ft(null)},project:Is,onSave:oa,onDelete:ds,onArchive:Wr,loading:v,onShowConfirm:bt}),e.jsx(Va,{isOpen:je,onClose:()=>y(!1),tasks:g,projects:x,onEditTask:t=>{st(t),Ve(!0)},allTasks:g}),Rs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl shadow-2xl p-6 ${f?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"ðŸš€"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"We've created a starter project with sample tasks to help you learn the app."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘†"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click on any task"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Each task has tips on features to explore"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Try My Day view"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Your daily focus list - some tasks are already there!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Complete tasks to see them move"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Complete all My Day tasks for a celebration!"})]})]})]}),e.jsx("button",{onClick:()=>as(!1),className:"w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Let's Go! ðŸŽ‰"})]})}),e.jsx(Ra,{isOpen:X,onClose:()=>{te(!1),S("board")},initialTab:u,shortcutModifier:b}),e.jsx(Ta,{isOpen:!!Ye,onClose:()=>bt(null),onConfirm:()=>{var t;(t=Ye==null?void 0:Ye.onConfirm)==null||t.call(Ye),bt(null)},title:(Ye==null?void 0:Ye.title)||"",message:(Ye==null?void 0:Ye.message)||"",confirmLabel:Ye==null?void 0:Ye.confirmLabel,confirmStyle:Ye==null?void 0:Ye.confirmStyle,icon:Ye==null?void 0:Ye.icon,loading:v}),rr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 ${f?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ”"})}),e.jsx("h3",{className:`text-lg font-semibold ${f?"text-white":"text-gray-900"}`,children:"Delete Recurring Task"})]}),e.jsxs("p",{className:`mb-6 ${f?"text-gray-300":"text-gray-600"}`,children:['"',rr.title,'" is part of a recurring series. What would you like to do?']}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>ir(rr.taskId,!1),disabled:v,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${f?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Delete only this occurrence"}),e.jsx("button",{onClick:()=>ir(rr.taskId,!0),disabled:v,className:"w-full py-3 px-4 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-all",children:v?"Deleting...":"Delete all future occurrences"}),e.jsx("button",{onClick:()=>Cr(null),disabled:v,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${f?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cancel"})]})]})}),w&&Y==="board"&&!M&&e.jsx($a,{step:Z,onNext:J,onSkip:()=>{V(!1),localStorage.setItem("trackli_onboarding_complete","true")},onComplete:()=>{V(!1),localStorage.setItem("trackli_onboarding_complete","true")}}),de&&e.jsx(za,{view:de,step:Xe,onNext:W,onSkip:()=>ls(de),onComplete:()=>ls(de)}),e.jsx(Qr,{isOpen:Vs,onClose:()=>{var t;Ht(!1),Mr(),fr(""),pt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:((t=x[0])==null?void 0:t.id)||""}),ft([]),kt(!1),Tr(null)},title:"Import Meeting Notes",wide:!0,children:Hs?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:["Found ",yt.length," potential task",yt.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and edit before creating"})]}),e.jsx("button",{onClick:()=>kt(!1),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"â† Back to Notes"})]}),yt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"No action items found in your notes."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Try adding bullet points or phrases like "Action:", "TODO:", or "@name"'})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:yt.map(t=>e.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${t.selected?"border-indigo-200 bg-indigo-50/50":"border-gray-100 bg-gray-50 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:s=>nr(t.id,"selected",s.target.checked),className:"mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:s=>nr(t.id,"title",s.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm font-medium"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Assignee:"}),e.jsx("input",{type:"text",value:t.assignee||"",onChange:s=>nr(t.id,"assignee",s.target.value),placeholder:"Unassigned",className:"px-2 py-1 border border-gray-200 rounded-lg text-xs w-28 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Due:"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:s=>nr(t.id,"dueDate",s.target.value),className:"px-2 py-1 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:t.critical,onChange:s=>nr(t.id,"critical",s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-red-600",children:"Critical"})]})]})]}),e.jsx("button",{onClick:()=>ia(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[yt.filter(t=>t.selected).length," task",yt.filter(t=>t.selected).length!==1?"s":""," selected"]}),e.jsx("button",{onClick:na,disabled:yt.filter(t=>t.selected).length===0||v,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create ",yt.filter(t=>t.selected).length," Task",yt.filter(t=>t.selected).length!==1?"s":""]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[m&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:m}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Paste notes or upload a photo of your notes. We'll extract action items automatically."}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-colors hover:border-indigo-300 dark:hover:border-indigo-600",children:vt?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:vt.preview,alt:"Uploaded notes",className:"w-full max-h-48 object-contain rounded-lg bg-gray-100 dark:bg-gray-800"}),e.jsx("button",{onClick:()=>Tr(null),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),vt.name," ready for extraction"]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Upload photo of notes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or take a photo on mobile"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:aa,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-300",children:"or paste text notes"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:He.title,onChange:t=>pt({...He,title:t.target.value}),placeholder:"e.g., Weekly Team Sync",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Date"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("input",{type:"date",value:He.date,onChange:t=>pt({...He,date:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",style:{maxWidth:"100%",minWidth:0,WebkitAppearance:"none",boxSizing:"border-box",width:"100%"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsx("select",{value:He.projectId,onChange:t=>pt({...He,projectId:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Notes"}),e.jsx("textarea",{value:He.notes,onChange:t=>pt({...He,notes:t.target.value}),placeholder:`Paste your meeting notes here...

Best format - Follow-Up table:
| Follow-Up | Owner | Due Date | Status |
| Review proposal | Sarah | 30/12 | Open |
| Send update email | John | Friday | Open |

Or we can extract from:
â€¢ Action items like 'John to send report by Friday'
â€¢ TODO: Review the proposal
â€¢ @Sarah: Update the timeline`,rows:12,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-300",children:vt?"AI will analyze your image for tasks":"Tip: Follow-Up tables are extracted first"}),e.jsx("button",{onClick:sa,disabled:!He.notes.trim()&&!vt||is,className:"px-6 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-medium shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:is?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Extract Tasks"]})})]})]})}),jr&&e.jsx(La,{message:jr.message,action:jr.action,actionLabel:jr.actionLabel,onClose:()=>Qs(null)}),Ks&&e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Ut(!1)}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-md sm:mx-4 p-4 pr-8 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Quick Add Task"}),e.jsx("button",{type:"button",onClick:()=>{Ut(!1),Yt("")},className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors touch-manipulation active:bg-gray-200 dark:active:bg-gray-700",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{const t=dr(qt);return e.jsxs("form",{onSubmit:s=>{s.preventDefault(),ua(t.cleanedText||qt,Br,t.date)},children:[e.jsxs("div",{className:"relative flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:qt,onChange:s=>Yt(s.target.value),placeholder:'Try "Call mom tomorrow" or "Report due friday"',autoFocus:!0,className:"flex-1 px-4 py-3 text-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),Gs&&e.jsx("button",{type:"button",onClick:()=>Ys(s=>Yt(s)),className:`p-3 rounded-xl transition-all ${sr?"bg-red-500 text-white animate-pulse shadow-lg shadow-red-500/40":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400"}`,title:sr?"Stop listening":"Voice input",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:sr?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),sr&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-sm text-red-500",children:"Listening... speak now"})]}),t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due ",St(t.date)]}),e.jsxs("span",{className:"text-xs text-gray-400",children:['(from "',t.matched,'")']})]}),!t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Due:"}),Sa.map(s=>e.jsx("button",{type:"button",onClick:()=>Yt(a=>`${a} ${s.label.toLowerCase()}`.trim()),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors whitespace-nowrap",children:s.label},s.label))]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("select",{value:Br,onChange:s=>Ar(s.target.value),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:x.filter(s=>!s.archived).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx("button",{type:"button",onClick:()=>{const s=dr(qt),a={title:s.cleanedText||qt,project_id:Br,due_date:s.date||null};Ut(!1),Yt(""),setTimeout(()=>{st(a),Ve(!0)},100)},className:"px-3 py-2 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors whitespace-nowrap",children:"More options"})]}),e.jsx("button",{type:"submit",disabled:!qt.trim()||v,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:v?"Adding...":"Add Task"})]})})(),e.jsx("p",{className:"mt-3 text-xs text-center text-gray-400",children:'Try "tomorrow", "next friday", "in 2 weeks"'})]})]}),zs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>pr(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Save Current View"}),e.jsx("input",{type:"text",value:Vt,onChange:t=>ss(t.target.value),placeholder:"View name (e.g., My Critical Tasks)",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 mb-4",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&Vt.trim()&&fs(Vt.trim())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>pr(!1),className:"flex-1 px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Vt.trim()&&fs(Vt.trim()),disabled:!Vt.trim(),className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50",children:"Save"})]}),At.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300 mb-2",children:"Existing views:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:At.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t.name}),e.jsx("button",{onClick:()=>ja(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",title:"Delete view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]})]})]}),Zs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>$r(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-2xl sm:mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"â˜€ï¸ Plan Your Day"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-1",children:"Pick tasks to focus on today"})]}),e.jsx("button",{onClick:()=>$r(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:"Energy:"}),Object.entries(Ot).map(([t,s])=>e.jsxs("button",{onClick:()=>setActiveFilters(a=>{const i=a.filter(h=>h.type!=="energy");return a.some(h=>h.type==="energy"&&h.value===t)?i:[...i,{type:"energy",value:t}]}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeFilters.some(a=>a.type==="energy"&&a.value===t)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[s.icon," ",s.label]},t))]}),e.jsxs("div",{className:"space-y-2",children:[g.filter(t=>t.status==="backlog"&&!dt(t,g)).filter(t=>!activeFilters.some(s=>s.type==="energy")||activeFilters.some(s=>s.type==="energy"&&s.value===t.energy_level)).sort((t,s)=>t.critical&&!s.critical?-1:!t.critical&&s.critical?1:t.due_date&&!s.due_date?-1:!t.due_date&&s.due_date?1:0).map(t=>{const s=x.find(h=>h.id===t.project_id),a=Ot[t.energy_level],i=lr(t);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${t.critical?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":i?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš©"}),i&&e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-300",children:[e.jsx("span",{children:s==null?void 0:s.name}),t.time_estimate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:Pt(t.time_estimate)})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded ${a.color}`,children:a.icon})]})]}),e.jsx("button",{onClick:()=>Nt(t.id,"todo"),className:"px-3 py-1.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"+ Today"})]},t.id)}),g.filter(t=>t.status==="backlog"&&!dt(t,g)).length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸŽ‰"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium text-base sm:text-lg mb-1",children:"Backlog is empty!"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-300 text-sm",children:"All tasks are either planned or done."})]})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:g.filter(t=>t.status==="todo").length})," tasks in Todo"]}),e.jsx("button",{onClick:()=>{$r(!1),ge("myday")},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium",children:"View My Day â†’"})]})})]})]}),e.jsx("button",{onClick:()=>{var t;x.length>0&&(Ar(((t=x[0])==null?void 0:t.id)||""),Ut(!0))},className:"sm:hidden fixed bottom-6 right-6 w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center z-30 active:scale-95 transition-transform",disabled:x.length===0,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("button",{onClick:()=>pe(!0),className:"hidden sm:flex fixed bottom-8 right-8 px-4 py-2.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 items-center gap-2 z-30 hover:bg-gray-50 dark:hover:bg-gray-700 hover:scale-105 active:scale-95 transition-all",title:"Send Feedback",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Feedback"})]}),e.jsx(Ea,{isOpen:le,onClose:()=>pe(!1),user:r}),e.jsx(Fa,{isOpen:ke,onClose:()=>_e(!1),userEmail:r==null?void 0:r.email}),ze&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&(We(!1),Ie(!1),Ee(""),H(!1),Ke(!1))},children:e.jsxs("div",{className:`w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${f?"bg-gray-800":"bg-white"}`,onKeyDown:t=>{t.key==="Escape"&&(We(!1),Ie(!1),Ee(""),H(!1),Ke(!1))},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-inherit",children:[e.jsx("h2",{className:`text-xl font-semibold ${f?"text-white":"text-gray-900"}`,children:"Settings"}),e.jsx("button",{onClick:()=>{We(!1),Ie(!1),Ee(""),H(!1),Ke(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 ${f?"text-gray-400":"text-gray-500"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${f?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:(ws=we||((vs=r==null?void 0:r.user_metadata)==null?void 0:vs.display_name)||(r==null?void 0:r.email))==null?void 0:ws.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm ${f?"text-gray-400":"text-gray-500"}`,children:r==null?void 0:r.email}),e.jsx("div",{className:`text-xs ${f?"text-gray-500":"text-gray-400"}`,children:((Ns=r==null?void 0:r.app_metadata)==null?void 0:Ns.provider)==="google"?"Google Account":"Email Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${f?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),$?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:we,onChange:t=>n(t.target.value),placeholder:"Enter display name",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${f?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,autoFocus:!0}),e.jsx("button",{onClick:ne,disabled:he,className:"px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50",children:he?"...":"Save"}),e.jsx("button",{onClick:()=>{var t;H(!1),n(((t=r==null?void 0:r.user_metadata)==null?void 0:t.display_name)||"")},className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${f?"text-white":"text-gray-900"}`,children:((Cs=r==null?void 0:r.user_metadata)==null?void 0:Cs.display_name)||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})}),e.jsx("button",{onClick:()=>{var t;n(((t=r==null?void 0:r.user_metadata)==null?void 0:t.display_name)||""),H(!0)},className:"text-indigo-500 hover:text-indigo-600 text-sm font-medium",children:"Edit"})]})]})]})]}),((_s=r==null?void 0:r.app_metadata)==null?void 0:_s.provider)!=="google"&&e.jsxs("div",{children:[e.jsxs("h3",{className:`flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 ${f?"text-gray-400":"text-gray-500"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Password"]}),e.jsx("div",{className:`p-4 rounded-xl ${f?"bg-gray-700/50":"bg-gray-50"}`,children:Ue?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-green-500 text-sm mb-2",children:"âœ“ Password reset email sent!"}),e.jsx("p",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:"Check your inbox for a link to reset your password."})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${f?"text-white":"text-gray-900"}`,children:"Change Password"}),e.jsx("div",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:"We'll send a reset link to your email"})]}),e.jsx("button",{onClick:xe,disabled:Qe,className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 shrink-0",children:Qe?"Sending...":"Send Link"})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 ${f?"text-gray-400":"text-gray-500"}`,children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferences"]}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${f?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${f?"text-gray-300":"text-gray-700"}`,children:"Default view on login"}),e.jsxs("select",{value:Dt,onChange:t=>be("trackli-default-view",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${f?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"board",children:"Board"}),e.jsx("option",{value:"myday",children:"My Day"}),e.jsx("option",{value:"calendar",children:"Calendar"}),e.jsx("option",{value:"tasks",children:"All Tasks"}),e.jsx("option",{value:"projects",children:"Projects"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${f?"text-gray-300":"text-gray-700"}`,children:"Week starts on"}),e.jsxs("select",{value:Lt,onChange:t=>be("trackli-week-start",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${f?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"0",children:"Sunday"}),e.jsx("option",{value:"1",children:"Monday"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${f?"text-gray-300":"text-gray-700"}`,children:"Show confetti on completion"}),e.jsx("button",{onClick:()=>be("trackli-show-confetti",xt?"false":"true"),className:`relative w-12 h-6 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${xt?"bg-indigo-500":f?"bg-gray-600":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ${xt?"translate-x-6":"translate-x-0.5"}`})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 ${f?"text-gray-400":"text-gray-500"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"Data"]}),e.jsx("div",{className:`p-4 rounded-xl ${f?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${f?"text-white":"text-gray-900"}`,children:"Clear completed tasks"}),e.jsx("div",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:"Remove done tasks older than:"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("select",{value:Te,onChange:t=>er(t.target.value),className:`px-2 py-1.5 rounded-lg border text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent ${f?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"7",children:"7 days"}),e.jsx("option",{value:"14",children:"14 days"}),e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"})]}),e.jsx("button",{onClick:ve,disabled:Tt,className:"px-3 py-1.5 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 active:bg-gray-700 transition-colors disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:Tt?"...":"Clear"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:`flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 ${f?"text-gray-400":"text-gray-500"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),"Support"]}),e.jsx("div",{className:`p-4 rounded-xl ${f?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${f?"text-white":"text-gray-900"}`,children:"Need help?"}),e.jsx("div",{className:`text-xs ${f?"text-gray-400":"text-gray-500"}`,children:"Get in touch with our support team"})]}),e.jsx("a",{href:"mailto:support@gettrackli.com",className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"Contact"})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold uppercase tracking-wide mb-3 text-red-500",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Danger Zone"]}),e.jsx("div",{className:`p-4 rounded-xl border-2 border-red-200 dark:border-red-800 ${f?"bg-red-900/20":"bg-red-50"}`,children:Je?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-sm ${f?"text-red-300":"text-red-700"}`,children:"âš ï¸ This will permanently delete all your tasks, projects, and data. This cannot be undone."}),e.jsxs("div",{className:`text-sm ${f?"text-gray-300":"text-gray-700"}`,children:["Type ",e.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," to confirm:"]}),e.jsx("input",{type:"text",value:U,onChange:t=>Ee(t.target.value),placeholder:"Type DELETE",className:`w-full px-3 py-2 rounded-lg border ${f?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-red-500 focus:border-transparent`,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{Ie(!1),Ee("")},className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${f?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{onClick:I,disabled:U!=="DELETE"||nt,className:"flex-1 px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:nt?"Deleting...":"Delete Everything"})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${f?"text-white":"text-gray-900"}`,children:"Delete Account"}),e.jsx("div",{className:`text-sm ${f?"text-gray-400":"text-gray-500"}`,children:"Permanently delete all your data"})]}),e.jsx("button",{onClick:()=>Ie(!0),className:"px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors shrink-0",children:"Delete"})]})})]})]})]})})]})})}export{cn as default};
