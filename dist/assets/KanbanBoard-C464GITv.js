import{u as Es,r as l,s as W,j as e,a as wa,_ as Na}from"./index-Dl8lyzlP.js";const Ca=()=>Na(()=>import("./confetti.module-wUsLuJ1J.js"),[]).then(s=>s.default),Pt={high:{bg:"#FEE2E2",text:"#DC2626",icon:"â–°â–°â–°",label:"High Effort"},medium:{bg:"#FEF3C7",text:"#D97706",icon:"â–°â–°",label:"Medium Effort"},low:{bg:"#D1FAE5",text:"#059669",icon:"â–°",label:"Low Effort"}},dt=[{id:"meeting_followup",label:"Meeting Follow-up",color:"#8B5CF6"},{id:"email",label:"Email",color:"#3B82F6"},{id:"deliverable",label:"Deliverable",color:"#10B981"},{id:"admin",label:"Admin",color:"#4B5563"},{id:"review",label:"Review/Approval",color:"#F59E0B"},{id:"call",label:"Call/Meeting",color:"#EC4899"},{id:"research",label:"Research",color:"#14B8A6"}],Ot=[{id:"email",label:"Email",icon:"âœ‰ï¸"},{id:"meeting",label:"Meeting",icon:"ğŸ‘¥"},{id:"slack",label:"Slack/Teams",icon:"ğŸ’¬"},{id:"ad_hoc",label:"Ad-hoc",icon:"ğŸ’¡"},{id:"project_plan",label:"Project Plan",icon:"ğŸ“‹"},{id:"client_request",label:"Client Request",icon:"ğŸ¯"}],$s=[{id:null,label:"No recurrence"},{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"biweekly",label:"Bi-weekly (every 2 weeks)"},{id:"monthly",label:"Monthly"}],Et={backlog:"#9CA3AF",todo:"#3B82F6",in_progress:"#EC4899",blocked:"#EF4444",done:"#64748B"},ot=[{id:"backlog",title:"Backlog",subtitle:"Future work",color:Et.backlog},{id:"todo",title:"To Do",subtitle:"Ready to start",color:Et.todo},{id:"in_progress",title:"In Progress",subtitle:"Active work",color:Et.in_progress},{id:"done",title:"Done",subtitle:"Completed",color:Et.done}],Rr=5,Vr=10,Ss=[{bg:"#EDE9FE",text:"#7C3AED",border:"#C4B5FD"},{bg:"#DBEAFE",text:"#2563EB",border:"#93C5FD"},{bg:"#D1FAE5",text:"#059669",border:"#6EE7B7"},{bg:"#FEF3C7",text:"#D97706",border:"#FCD34D"},{bg:"#FCE7F3",text:"#DB2777",border:"#F9A8D4"},{bg:"#E0E7FF",text:"#4F46E5",border:"#A5B4FC"},{bg:"#CCFBF1",text:"#0D9488",border:"#5EEAD4"},{bg:"#FEE2E2",text:"#DC2626",border:"#FCA5A5"},{bg:"#F3E8FF",text:"#9333EA",border:"#D8B4FE"},{bg:"#CFFAFE",text:"#0891B2",border:"#67E8F9"}],Hr=s=>{if(!s)return null;let d=0;for(let i=0;i<s.length;i++)d=s.charCodeAt(i)+((d<<5)-d);return Ss[Math.abs(d)%Ss.length]},ut=(s,d)=>{if(!s||d==="done")return null;const i=new Date;i.setHours(0,0,0,0);const f=new Date(s);f.setHours(0,0,0,0);const x=Math.ceil((f-i)/(1e3*60*60*24));return x<0?"overdue":x===0?"today":x<=3?"soon":"ok"},ir=s=>{if(s.status!=="backlog")return!1;if(!s.start_date)return!0;const d=new Date;d.setHours(0,0,0,0);const i=new Date(s.start_date);return i.setHours(0,0,0,0),i<=d},gt=(s,d)=>!s.dependencies||s.dependencies.length===0||s.status==="done"?!1:s.dependencies.some(i=>{const f=d.find(x=>x.id===i.depends_on_id);return f&&f.status!=="done"}),qr=s=>{if(s.status==="done")return!1;const d=new Date;if(d.setHours(0,0,0,0),s.my_day_date){const i=new Date(s.my_day_date);if(i.setHours(0,0,0,0),i<d)return!1;if(i.getTime()===d.getTime())return!0}if(s.start_date){const i=new Date(s.start_date);if(i.setHours(0,0,0,0),i<=d)return!0}return!1},Ds=(s,d,i,f=null)=>{if(!s||!d)return[];const x=[];let M=new Date(s);M.setHours(0,0,0,0);let g=null;f&&(g=new Date(f),g.setHours(23,59,59,999));const c=v=>{switch(d){case"daily":v.setDate(v.getDate()+1);break;case"weekly":v.setDate(v.getDate()+7);break;case"biweekly":v.setDate(v.getDate()+14);break;case"monthly":v.setMonth(v.getMonth()+1);break;default:return null}return v},p=f?365:i;let k=0;for(;k<p&&(c(M),!(g&&M>g||(x.push(M.toISOString().split("T")[0]),k++,!f&&k>=i))););return x},$t=s=>s?new Date(s).toLocaleDateString(void 0,{day:"numeric",month:"short"}):"",Yr=()=>{const d=new Date(2e3,0,15).toLocaleDateString();return parseInt(d.split(/[\/\-\.]/)[0])===1},zt=s=>{if(!s)return"";if(s<60)return`${s}m`;const d=Math.floor(s/60),i=s%60;return i>0?`${d}h ${i}m`:`${d}h`},Ts=s=>{if(!s)return"";let d=s.toString().trim().toLowerCase();if(/^\d{1,2}:\d{2}$/.test(d)){const[g,c]=d.split(":").map(Number);if(g>=0&&g<=23&&c>=0&&c<=59)return`${String(g).padStart(2,"0")}:${String(c).padStart(2,"0")}`}const i=/pm|p\.m\.|p$/.test(d),f=/am|a\.m\.|a$/.test(d);d=d.replace(/\s*(am|pm|a\.m\.|p\.m\.|a|p)\s*/gi,"").trim();let x=0,M=0;if(d.includes(":")){const g=d.split(":");x=parseInt(g[0])||0,M=parseInt(g[1])||0}else if(d.length===1||d.length===2)x=parseInt(d)||0,M=0;else if(d.length===3)x=parseInt(d[0])||0,M=parseInt(d.slice(1))||0;else if(d.length===4)x=parseInt(d.slice(0,2))||0,M=parseInt(d.slice(2))||0;else return"";return i&&x<12?x+=12:f&&x===12&&(x=0),x<0||x>23||M<0||M>59?"":`${String(x).padStart(2,"0")}:${String(M).padStart(2,"0")}`},or=s=>{if(!s)return{date:null,cleanedText:"",matched:null};const d=new Date;d.setHours(0,0,0,0);const i=s.trim().match(/^([TDWM])([+-]\d+)?$/i);if(i){const c=i[1].toUpperCase(),p=i[2]?parseInt(i[2]):0,k=new Date(d);switch(c){case"T":case"D":k.setDate(k.getDate()+p);break;case"W":k.setDate(k.getDate()+p*7);break;case"M":k.setMonth(k.getMonth()+p);break}return{date:k.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}const f=[{regex:/\b(today)\b/i,fn:()=>new Date(d)},{regex:/\b(tomorrow)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+1),c}},{regex:/\b(yesterday)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()-1),c}},{regex:/\b(next\s+)?(monday)\b/i,fn:c=>x(1,c[1])},{regex:/\b(next\s+)?(tuesday)\b/i,fn:c=>x(2,c[1])},{regex:/\b(next\s+)?(wednesday)\b/i,fn:c=>x(3,c[1])},{regex:/\b(next\s+)?(thursday)\b/i,fn:c=>x(4,c[1])},{regex:/\b(next\s+)?(friday)\b/i,fn:c=>x(5,c[1])},{regex:/\b(next\s+)?(saturday)\b/i,fn:c=>x(6,c[1])},{regex:/\b(next\s+)?(sunday)\b/i,fn:c=>x(0,c[1])},{regex:/\bin\s+(\d+)\s+days?\b/i,fn:c=>{const p=new Date(d);return p.setDate(p.getDate()+parseInt(c[1])),p}},{regex:/\bin\s+(\d+)\s+weeks?\b/i,fn:c=>{const p=new Date(d);return p.setDate(p.getDate()+parseInt(c[1])*7),p}},{regex:/\bin\s+(\d+)\s+months?\b/i,fn:c=>{const p=new Date(d);return p.setMonth(p.getMonth()+parseInt(c[1])),p}},{regex:/\bnext\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+7),c}},{regex:/\bnext\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1),c}},{regex:/\bend\s+of\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+(5-c.getDay())),c}},{regex:/\bend\s+of\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1,0),c}}];function x(c,p){const k=new Date(d),v=k.getDay();let _=c-v;return(_<=0||p)&&(_+=7),p&&_<=7&&(_+=7),k.setDate(k.getDate()+_),k}for(const c of f){const p=s.match(c.regex);if(p){const k=c.fn(p),v=s.replace(c.regex,"").replace(/\s+/g," ").trim();return{date:k.toISOString().split("T")[0],cleanedText:v,matched:p[0]}}}const M=Yr();let g=s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(g){let c,p;M?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=g[3].length===2?2e3+parseInt(g[3]):parseInt(g[3]),v=new Date(k,p,c);if(!isNaN(v.getTime()))return{date:v.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}if(g=s.match(/^(\d{1,2})[\/\-](\d{1,2})$/),g){let c,p;M?(p=parseInt(g[1])-1,c=parseInt(g[2])):(c=parseInt(g[1]),p=parseInt(g[2])-1);const k=new Date(d.getFullYear(),p,c);if(k<d&&k.setFullYear(k.getFullYear()+1),!isNaN(k.getTime()))return{date:k.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}return{date:null,cleanedText:s,matched:null}},_a=[{label:"Today",getValue:()=>new Date().toISOString().split("T")[0]},{label:"Tomorrow",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]}},{label:"Next Week",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]}},{label:"Next Month",getValue:()=>{const s=new Date;return s.setMonth(s.getMonth()+1),s.toISOString().split("T")[0]}}],Sa=({message:s,action:d,actionLabel:i,onClose:f,duration:x=5e3})=>(l.useEffect(()=>{const M=setTimeout(f,x);return()=>clearTimeout(M)},[f,x]),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),d&&e.jsx("button",{onClick:()=>{d(),f()},className:"px-3 py-1 text-sm font-semibold bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg transition-colors",children:i||"Undo"}),e.jsx("button",{onClick:f,className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})),Da=({isOpen:s,onClose:d,onConfirm:i,title:f,message:x,confirmLabel:M="Confirm",confirmStyle:g="danger",icon:c="âš ï¸",loading:p=!1})=>{if(l.useEffect(()=>{const v=_=>{_.key==="Escape"&&d(),_.key==="Enter"&&!p&&i()};if(s)return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[s,d,i,p]),!s)return null;const k={danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",primary:"bg-indigo-500 hover:bg-indigo-600 text-white"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:c})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f})]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:x}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:d,disabled:p,className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:i,disabled:p,className:`px-4 py-2 rounded-xl font-medium transition-colors ${k[g]} disabled:opacity-50`,children:p?"Please wait...":M})]})]})})},Ta=({onRefresh:s,children:d})=>{const[i,f]=l.useState(0),[x,M]=l.useState(!1),g=l.useRef(0),c=80,p=G=>{window.scrollY===0&&(g.current=G.touches[0].clientY)},k=G=>{if(x||g.current===0)return;if(window.scrollY>0){g.current=0,f(0);return}const H=G.touches[0].clientY-g.current;if(H>0){const D=Math.min(H*.4,c+40);f(D),D>10&&G.preventDefault()}},v=async()=>{if(i>=c&&!x){M(!0),f(c);try{await s()}finally{M(!1),f(0)}}else f(0);g.current=0};l.useEffect(()=>{if("ontouchstart"in window)return document.addEventListener("touchstart",p,{passive:!0}),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",v),()=>{document.removeEventListener("touchstart",p),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",v)}},[x,i]);const _=Math.min(i/c,1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex items-center justify-center transition-all duration-200 overflow-hidden bg-gradient-to-b from-indigo-50 to-transparent dark:from-indigo-900/30 sm:hidden",style:{height:i>0?`${i}px`:0},children:e.jsxs("div",{className:`flex items-center gap-2 text-indigo-600 dark:text-indigo-400 ${x?"animate-pulse":""}`,children:[e.jsx("svg",{className:`w-5 h-5 transition-transform duration-200 ${x?"animate-spin":""}`,style:{transform:x?"none":`rotate(${_*180}deg)`},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),e.jsx("span",{className:"text-sm font-medium",children:x?"Refreshing...":_>=1?"Release to refresh":"Pull to refresh"})]})}),d]})},Ma=({isOpen:s,onClose:d,user:i})=>{const[f,x]=l.useState("suggestion"),[M,g]=l.useState(""),[c,p]=l.useState([]),[k,v]=l.useState(!1),[_,G]=l.useState(!1),[A,H]=l.useState(null);l.useEffect(()=>{s||setTimeout(()=>{x("suggestion"),g(""),p([]),G(!1),H(null)},300)},[s]),l.useEffect(()=>{const w=P=>{P.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,d]),l.useEffect(()=>{const w=P=>{var me;if(!s)return;const se=(me=P.clipboardData)==null?void 0:me.items;if(se){for(const je of se)if(je.type.startsWith("image/")){P.preventDefault();const ge=je.getAsFile();ge&&D(ge);break}}};return window.addEventListener("paste",w),()=>window.removeEventListener("paste",w)},[s,c]);const D=w=>{if(c.length>=3){H("Maximum 3 images allowed");return}const P=new Image,se=new FileReader;se.onload=me=>{P.onload=()=>{let{width:K,height:le}=P;if(K>1500||le>1500){const y=Math.min(1500/K,1500/le);K=Math.round(K*y),le=Math.round(le*y)}const Te=document.createElement("canvas");Te.width=K,Te.height=le,Te.getContext("2d").drawImage(P,0,0,K,le);const R=Te.toDataURL("image/jpeg",.8),$=R.split(",")[1];p(y=>[...y,{base64:$,preview:R}]),H(null)},P.onerror=()=>H("Failed to load image"),P.src=me.target.result},se.onerror=()=>H("Failed to read image"),se.readAsDataURL(w)},z=w=>{var se;const P=(se=w.target.files)==null?void 0:se[0];P&&D(P),w.target.value=""},te=w=>{p(P=>P.filter((se,me)=>me!==w))},ue=async w=>{if(w.preventDefault(),!!M.trim()){v(!0),H(null);try{const P=[];for(const me of c){const je=`feedback/${(i==null?void 0:i.id)||"anonymous"}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.jpg`,ge=atob(me.base64),K=new Array(ge.length);for(let $=0;$<ge.length;$++)K[$]=ge.charCodeAt($);const le=new Uint8Array(K),Te=new Blob([le],{type:"image/jpeg"}),{data:N,error:R}=await W.storage.from("attachments").upload(je,Te);if(R)console.error("Upload error:",R);else{const{data:$}=W.storage.from("attachments").getPublicUrl(je);$!=null&&$.publicUrl&&P.push($.publicUrl)}}const{error:se}=await W.from("feedback").insert({user_id:i==null?void 0:i.id,user_email:i==null?void 0:i.email,type:f,message:M.trim(),images:P.length>0?P:null,page:window.location.pathname});if(se)throw se;G(!0),setTimeout(()=>d(),2e3)}catch(P){console.error("Error submitting feedback:",P),H("Failed to submit feedback. Please try again.")}finally{v(!1)}}};if(!s)return null;const m=[{id:"bug",label:"ğŸ› Bug",desc:"Something isn't working"},{id:"suggestion",label:"ğŸ’¡ Suggestion",desc:"Ideas for improvement"},{id:"question",label:"â“ Question",desc:"Need help with something"},{id:"other",label:"ğŸ’¬ Other",desc:"General feedback"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp",onClick:w=>w.stopPropagation(),children:_?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"âœ“"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We really appreciate you taking the time to help us improve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send Feedback"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Help us make Trackli better!"})]}),e.jsxs("form",{onSubmit:ue,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:m.map(w=>e.jsxs("button",{type:"button",onClick:()=>x(w.id),className:`p-3 rounded-xl border-2 text-left transition-all ${f===w.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:w.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.desc})]},w.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:M,onChange:w=>g(w.target.value),placeholder:"Tell us what's on your mind...",rows:4,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshots (optional)"}),c.length>0&&e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:c.map((w,P)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w.preview,alt:`Screenshot ${P+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>te(P),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},P))}),c.length<3&&e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add image or paste from clipboard"}),e.jsx("input",{type:"file",accept:"image/*",onChange:z,className:"hidden"})]}),A&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:A})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!M.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Sending...":"Send Feedback"})]})]})]})})})},As="roddickaimee@gmail.com",La=({isOpen:s,onClose:d,userEmail:i})=>{const[f,x]=l.useState([]),[M,g]=l.useState(!0),[c,p]=l.useState("all"),k=i===As;l.useEffect(()=>{s&&k&&v()},[s,k]);const v=async()=>{g(!0);try{const{data:D,error:z}=await W.from("feedback").select("*").order("created_at",{ascending:!1});if(z)throw z;x(D||[])}catch(D){console.error("Error loading feedback:",D)}finally{g(!1)}},_=async(D,z)=>{try{const{error:te}=await W.from("feedback").update({status:z}).eq("id",D);if(te)throw te;x(ue=>ue.map(m=>m.id===D?{...m,status:z}:m))}catch(te){console.error("Error updating feedback:",te)}};if(l.useEffect(()=>{const D=z=>{z.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[s,d]),!s||!k)return null;const G=c==="all"?f:f.filter(D=>D.status===c),A={bug:"ğŸ›",suggestion:"ğŸ’¡",question:"â“",other:"ğŸ’¬"},H={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",read:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[85vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp flex flex-col",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Admin"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f.length," total submissions"]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["all","new","read","resolved"].map(D=>e.jsxs("button",{onClick:()=>p(D),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c===D?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[D.charAt(0).toUpperCase()+D.slice(1),D!=="all"&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",f.filter(z=>D==="all"||z.status===D).length,")"]})]},D))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:M?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading feedback..."}):G.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ğŸ“«"}),"No feedback yet"]}):e.jsx("div",{className:"space-y-4",children:G.map(D=>e.jsx("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:A[D.type]||"ğŸ’¬"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:D.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${H[D.status]}`,children:D.status})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:D.message}),D.images&&D.images.length>0&&e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:D.images.map((z,te)=>e.jsx("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:z,alt:`Screenshot ${te+1}`,className:"w-24 h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity"})},te))}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:D.user_email}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[new Date(D.created_at).toLocaleDateString()," ",new Date(D.created_at).toLocaleTimeString()]}),D.page&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:D.page})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[D.status!=="read"&&e.jsx("button",{onClick:()=>_(D.id,"read"),className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors",title:"Mark as read",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),D.status!=="resolved"&&e.jsx("button",{onClick:()=>_(D.id,"resolved"),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark as resolved",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]})},D.id))})})]})})},Ms=({icon:s,title:d,description:i,action:f,actionLabel:x,variant:M="default"})=>{const g={default:"from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",success:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30",warning:"from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",celebrate:"from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-6 sm:px-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 w-24 h-24 rounded-full bg-gradient-to-br ${g[M]} opacity-50 animate-pulse`,style:{transform:"scale(1.3)"}}),e.jsx("div",{className:`relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br ${g[M]} flex items-center justify-center shadow-lg`,children:e.jsx("div",{className:"text-3xl sm:text-4xl",children:s})})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:d}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mb-6 max-w-xs sm:max-w-sm leading-relaxed",children:i}),f&&e.jsx("button",{onClick:f,className:"group px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-2",children:[x,e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Gr=({isOpen:s,onClose:d,title:i,children:f,wide:x,fullScreenMobile:M})=>(l.useEffect(()=>{const g=c=>{c.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[s,d]),s?e.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:d}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-2xl w-full flex flex-col animate-modalSlideUp ${M?"h-full sm:h-auto sm:max-h-[90vh] rounded-none sm:rounded-2xl sm:mx-4":"rounded-t-2xl sm:rounded-2xl sm:mx-4 max-h-[95vh] sm:max-h-[90vh]"} ${x?"sm:max-w-2xl":"sm:max-w-md"}`,children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-between p-4 pr-6 sm:p-6 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 z-20 ${M?"rounded-none sm:rounded-t-2xl":"rounded-t-2xl"}`,children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100",children:i}),e.jsx("button",{type:"button",onClick:d,className:"p-3 -mr-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-400 touch-manipulation",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 overscroll-contain",children:f})]})]}):null),Ea=({isOpen:s,onClose:d,attachment:i,attachments:f,onNavigate:x})=>{var w;if(!s||!i)return null;const M=i.file_name||"",g=i.file_url||"",c=((w=M.split(".").pop())==null?void 0:w.toLowerCase())||"",p=["jpg","jpeg","png","gif","webp","svg","bmp"].includes(c),k=c==="pdf",v=["mp4","webm","ogg","mov"].includes(c),_=["mp3","wav","ogg","m4a"].includes(c),G=["doc","docx","xls","xlsx","ppt","pptx"].includes(c),A=["eml","msg"].includes(c),H=(f==null?void 0:f.findIndex(P=>P.id===i.id))??-1,D=f&&f.length>1,z=H>0,te=H<((f==null?void 0:f.length)||0)-1,ue=()=>{z&&x&&x(f[H-1])},m=()=>{te&&x&&x(f[H+1])};return l.useEffect(()=>{const P=se=>{s&&(se.key==="Escape"&&d(),se.key==="ArrowLeft"&&z&&ue(),se.key==="ArrowRight"&&te&&m())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[s,H,f]),e.jsxs("div",{className:"fixed inset-0 z-[310] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/50 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-white/80 text-sm truncate max-w-[300px]",children:M}),D&&e.jsxs("span",{className:"text-white/50 text-sm",children:[H+1," / ",f.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:g,download:M,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:d,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),D&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ue,disabled:!z,className:`absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${z?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:m,disabled:!te,className:`absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${te?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"relative max-w-[90vw] max-h-[85vh] flex items-center justify-center",children:[p&&e.jsx("img",{src:g,alt:M,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"}),k&&e.jsx("iframe",{src:g,title:M,className:"w-[90vw] h-[85vh] max-w-4xl rounded-lg bg-white"}),v&&e.jsx("video",{src:g,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl",children:"Your browser does not support video playback."}),_&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ğŸµ"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-4",children:M}),e.jsx("audio",{src:g,controls:!0,autoPlay:!0,className:"w-full max-w-md",children:"Your browser does not support audio playback."})]}),G&&e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(g)}`,title:M,className:"w-[90vw] h-[85vh] max-w-5xl rounded-lg bg-white"}),A&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ‰ï¸"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:M}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Email files can be opened in your email client"}),e.jsxs("a",{href:g,download:M,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Email"]})]}),!p&&!k&&!v&&!_&&!G&&!A&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ğŸ“„"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:M}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Preview not available for this file type"}),e.jsxs("a",{href:g,download:M,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]})]})},$a=({step:s,onNext:d,onSkip:i,onComplete:f})=>{const M=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒT":"Ctrl+Alt+T",g=[{target:"summary-bar",title:"Welcome to Trackli! ğŸ‘‹",description:"This is your Summary Bar - click any stat to filter tasks. Use the â˜€ï¸ My Day filter to see your daily focus, or filter by assignee, customer, category and more.",position:"bottom"},{target:"columns",title:"Kanban Board",description:"Your tasks flow from Backlog â†’ To Do â†’ In Progress â†’ Done. Drag and drop to move tasks between columns.",position:"top"},{target:"task-card",title:"Task Cards",description:"Each card shows key info at a glance. Look for the â˜€ï¸ sun icon on cards in your My Day list! Hover to see details and attachments.",position:"right"},{target:"views",title:"Multiple Views",description:"Switch between Board, My Day, All Tasks (with sorting & CSV export), Calendar, and Progress views using the menu.",position:"bottom"},{target:"add-task",title:"Create Tasks",description:`Click + Task or press ${M} to create. Set dates, effort level, assignee, customer, category, attachments, subtasks, dependencies, and recurring schedules.`,position:"bottom"},{target:"notes",title:"Meeting Notes â†’ Tasks",description:"Click Notes to quickly capture meeting notes - type, paste, or even speak! AI extracts action items as tasks automatically.",position:"bottom"},{target:"help",title:"Need Help?",description:"Click the ? icon anytime to access the full help guide. You're all set! ğŸ‰",position:"bottom"}],c=g[s];return c?e.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),e.jsxs("div",{className:`absolute z-[1001] max-w-sm animate-fadeIn ${s===0?"top-32 left-1/2 -translate-x-1/2":s===1?"top-40 left-1/2 -translate-x-1/2":s===2?"top-60 left-[340px]":s===3?"top-24 left-8":s===4?"top-20 right-48":s===5?"top-20 right-32":"top-20 right-24"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:g.map((p,k)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${k===s?"w-6 bg-indigo-500":k<s?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},k))}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:i,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip tour"}),e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsx("button",{onClick:()=>d(s-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>s<g.length-1?d(s+1):f(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:s<g.length-1?"Next":"Get Started!"})]})]})]}),e.jsx("div",{className:`absolute w-4 h-4 bg-white dark:bg-gray-800 rotate-45 border-gray-200 dark:border-gray-700 ${c.position==="bottom"?"-top-2 left-1/2 -translate-x-1/2 border-t border-l":c.position==="top"?"-bottom-2 left-1/2 -translate-x-1/2 border-b border-r":c.position==="right"?"-left-2 top-8 border-l border-b":"-right-2 top-8 border-r border-t"}`})]})]}):null},Aa=()=>e.jsxs("svg",{viewBox:"0 0 280 120",className:"w-full h-32 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"sunGlow",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),e.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})}),e.jsx("rect",{x:"10",y:"10",width:"120",height:"100",rx:"8",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"70",y:"26",textAnchor:"middle",fontSize:"9",fill:"#6B7280",children:"ğŸ’¡ Recommendations"}),e.jsx("rect",{x:"18",y:"36",width:"104",height:"32",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"52",r:"6",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"48",width:"50",height:"8",rx:"2",fill:"#9CA3AF"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"108",cy:"52",r:"10",fill:"#FEF3C7",children:e.jsx("animate",{attributeName:"r",values:"10;12;10",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("text",{x:"108",y:"56",textAnchor:"middle",fontSize:"12",children:"â˜€ï¸"}),e.jsxs("circle",{cx:"108",cy:"52",r:"10",fill:"none",stroke:"#F59E0B",strokeWidth:"2",children:[e.jsx("animate",{attributeName:"r",values:"10;20;20",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.8;0;0",dur:"1.5s",repeatCount:"indefinite"})]})]}),e.jsx("rect",{x:"18",y:"74",width:"104",height:"28",rx:"6",fill:"white",className:"dark:fill-gray-500",stroke:"#E5E7EB"}),e.jsx("circle",{cx:"30",cy:"88",r:"5",fill:"#E5E7EB"}),e.jsx("rect",{x:"42",y:"84",width:"40",height:"8",rx:"2",fill:"#D1D5DB"}),e.jsx("rect",{x:"150",y:"10",width:"120",height:"100",rx:"8",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"2"}),e.jsx("text",{x:"210",y:"26",textAnchor:"middle",fontSize:"10",fill:"#D97706",fontWeight:"bold",children:"â˜€ï¸ My Day"}),e.jsx("rect",{x:"158",y:"36",width:"104",height:"32",rx:"6",fill:"#FDE68A",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("circle",{cx:"170",cy:"52",r:"6",fill:"#10B981",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;1;1",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("rect",{x:"182",y:"48",width:"50",height:"8",rx:"2",fill:"#92400E",opacity:"0.5",children:e.jsx("animate",{attributeName:"opacity",values:"0;0;0.5;0.5",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.3;0.5;1"})}),e.jsx("path",{d:"M125 52 L145 52 L140 47 M145 52 L140 57",stroke:"#F59E0B",strokeWidth:"2",fill:"none",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite",keyTimes:"0;0.2;0.6;1"})})]}),Fa=()=>e.jsxs("svg",{viewBox:"0 0 280 140",className:"w-full h-36 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"calCardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]}),e.jsx("filter",{id:"calShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})]}),e.jsx("rect",{x:"10",y:"10",width:"70",height:"120",rx:"6",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"45",y:"26",textAnchor:"middle",fontSize:"8",fill:"#9CA3AF",children:"Tasks"}),e.jsx("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"16",y:"56",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"90",y:"10",width:"180",height:"120",rx:"6",fill:"white",className:"dark:fill-gray-800",stroke:"#E5E7EB"}),e.jsx("text",{x:"100",y:"40",fontSize:"8",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"100",y:"70",fontSize:"8",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"100",y:"100",fontSize:"8",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"125",y1:"32",x2:"260",y2:"32",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"62",x2:"260",y2:"62",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"92",x2:"260",y2:"92",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"122",x2:"260",y2:"122",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"130",y:"36",width:"120",height:"22",rx:"4",fill:"#10B981",opacity:"0.8"}),e.jsx("rect",{x:"136",y:"43",width:"50",height:"6",rx:"2",fill:"white",opacity:"0.7"}),e.jsxs("g",{filter:"url(#calShadow)",children:[e.jsxs("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"url(#calCardGradient)",children:[e.jsx("animate",{attributeName:"x",values:"16;130;130",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"34;66;66",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"58;120;120",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"height",values:"18;22;22",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("rect",{x:"22",y:"40",width:"30",height:"5",rx:"2",fill:"white",opacity:"0.8",children:[e.jsx("animate",{attributeName:"x",values:"22;136;136",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"40;73;73",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"30;50;50",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]})]}),e.jsx("line",{x1:"125",y1:"85",x2:"260",y2:"85",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("circle",{cx:"125",cy:"85",r:"4",fill:"#EF4444"})]}),Ba=()=>e.jsxs("svg",{viewBox:"0 0 200 100",className:"w-full h-28 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"resizeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("text",{x:"15",y:"25",fontSize:"9",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"15",y:"55",fontSize:"9",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"15",y:"85",fontSize:"9",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"45",y1:"18",x2:"190",y2:"18",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"48",x2:"190",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"78",x2:"190",y2:"78",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"50",y:"22",width:"130",rx:"4",fill:"url(#resizeGradient)",children:e.jsx("animate",{attributeName:"height",values:"22;52;22",dur:"3s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"56",y:"28",width:"60",height:"6",rx:"2",fill:"white",opacity:"0.8"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",width:"20",height:"6",rx:"3",fill:"white",opacity:"0.9",children:e.jsx("animate",{attributeName:"y",values:"40;70;40",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M115 0 L115 8 M111 4 L119 4",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"transform",values:"translate(0,48);translate(0,78);translate(0,48)",dur:"3s",repeatCount:"indefinite"})})]})]}),Ia=()=>e.jsxs("svg",{viewBox:"0 0 240 80",className:"w-full h-24 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("rect",{x:"20",y:"20",width:"200",height:"40",rx:"8",fill:"#FEF3C7"}),e.jsx("text",{x:"30",y:"38",fontSize:"10",fill:"#92400E",fontWeight:"bold",children:"Today's Progress"}),e.jsx("rect",{x:"30",y:"45",width:"180",height:"8",rx:"4",fill:"#FDE68A"}),e.jsx("rect",{x:"30",y:"45",height:"8",rx:"4",fill:"url(#progressGradient)",children:e.jsx("animate",{attributeName:"width",values:"0;180;180;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"})}),e.jsxs("text",{x:"120",y:"38",textAnchor:"middle",fontSize:"10",fill:"#059669",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"}),"100% âœ“"]}),e.jsxs("circle",{cx:"60",cy:"15",r:"3",fill:"#F59E0B",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.5;0.7"}),e.jsx("animate",{attributeName:"cy",values:"15;5;5",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("circle",{cx:"120",cy:"12",r:"3",fill:"#EC4899",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;0.55;0.75"}),e.jsx("animate",{attributeName:"cy",values:"12;2;2",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;1"})]}),e.jsxs("circle",{cx:"180",cy:"14",r:"3",fill:"#6366F1",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;0.52;0.72"}),e.jsx("animate",{attributeName:"cy",values:"14;4;4",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),Wa=({view:s,step:d,onNext:i,onSkip:f,onComplete:x})=>{const M={myday:[{title:"â˜€ï¸ Welcome to My Day!",description:"This is your personal daily focus list. Plan what to work on today without cluttering your board view.",icon:"ğŸ¯"},{title:"Add Tasks to My Day",description:"Tasks with today's start date appear automatically. Click the â˜€ï¸ button on any recommended task to add it to your day!",icon:"ğŸ“¥",animation:"addToMyDay"},{title:"Track Your Progress",description:"Watch your progress bar fill up as you complete tasks. Finish everything for a confetti celebration!",icon:"ğŸ“Š",animation:"progressBar"}],calendar:[{title:"ğŸ—“ Welcome to Calendar!",description:"Schedule your tasks visually. Switch between daily, weekly, and monthly views using the buttons at the top.",icon:"ğŸ—“ï¸"},{title:"Drag to Schedule",description:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time updates automatically.",icon:"âœ¨",animation:"dragToCalendar"},{title:"Resize to Adjust Duration",description:"Drag the bottom edge of any scheduled task to change how long it takes. Time estimate updates automatically!",icon:"ğŸ¨",animation:"resizeTask"}],tasks:[{title:"ğŸ—ƒï¸ All Tasks View",description:"See every task in a powerful table format. Click any column header to sort, or use the Filters button to narrow down results.",icon:"ğŸ“‹"},{title:"Import & Export CSV",description:"Export tasks for reporting, or import to bulk create/edit. Use * in the ID column to create new tasks, or include existing IDs to update them.",icon:"ğŸ“¥"}],projects:[{title:"ğŸ“ Projects View",description:"Organize your work into projects. Each project gets its own color that appears on task cards throughout the app.",icon:"ğŸ—ï¸"},{title:"Manage Projects",description:"Create new projects, edit details, or archive completed ones. Archived projects hide their tasks from the main board.",icon:"âš™ï¸"}],progress:[{title:"ğŸ“Š Progress View",description:"Track your productivity across all projects. See completion rates, task counts, and how you're doing over time.",icon:"ğŸ“ˆ"},{title:"Completion Insights",description:"The charts show your completed vs. remaining tasks. Use this to identify bottlenecks and celebrate wins!",icon:"ğŸ†"}]},g={addToMyDay:Aa,dragToCalendar:Fa,resizeTask:Ba,progressBar:Ia},c=M[s]||[],p=c[d];return p?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f}),e.jsx("div",{className:"relative z-[1001] max-w-md w-full animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[e.jsx("div",{className:"text-4xl mb-3",children:p.icon}),e.jsx("h3",{className:"text-xl font-bold",children:p.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:p.description}),p.animation&&g[p.animation]&&e.jsx("div",{className:"mb-6",children:(()=>{const k=g[p.animation];return e.jsx(k,{})})()}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:c.map((k,v)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${v===d?"w-8 bg-indigo-500":v<d?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},v))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip"}),e.jsxs("div",{className:"flex gap-2",children:[d>0&&e.jsx("button",{onClick:()=>i(d-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>d<c.length-1?i(d+1):x(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:d<c.length-1?"Next":"Got it!"})]})]})]})]})})]}):null},Oa=({isOpen:s,onClose:d,initialTab:i="tasks",shortcutModifier:f="âŒ˜âŒƒ"})=>{const[x,M]=l.useState(i);if(l.useEffect(()=>{s&&M(i)},[s,i]),!s)return null;const g=[{id:"tasks",label:"Tasks",icon:"âœ…"},{id:"board",label:"Board",icon:"ğŸ“‹"},{id:"myday",label:"My Day",icon:"â˜€ï¸"},{id:"calendar",label:"Calendar",icon:"ğŸ“…"},{id:"alltasks",label:"All Tasks",icon:"ğŸ—ƒï¸"},{id:"shortcuts",label:"Shortcuts",icon:"âŒ¨ï¸"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl",children:"â“"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Trackli Help Guide"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use Trackli effectively"})]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:g.map(c=>e.jsxs("button",{onClick:()=>M(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x===c.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{children:c.icon}),e.jsx("span",{children:c.label})]},c.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-240px)]",children:[x==="board"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Kanban Columns"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Tasks flow through four columns representing their status:"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#9CA3AF",backgroundColor:"#F9FAFB"},children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Backlog"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Future work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#3B82F6",backgroundColor:"#EFF6FF"},children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"To Do"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#EC4899",backgroundColor:"#FDF2F8"},children:[e.jsx("span",{className:"font-semibold text-pink-700",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#64748B",backgroundColor:"#F8FAFC"},children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Done"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed"})]})]}),e.jsx("div",{className:"mt-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:e.jsxs("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:[e.jsx("strong",{children:"ğŸ‘† Drag & Drop:"})," Drag any task card between columns to change its status instantly."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Card Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Click Actions:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click card"})," â€“ Open task to edit all details"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click title"})," â€“ Edit title inline (desktop)"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Hover Actions (Desktop):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Hover over a card to reveal quick action buttons:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsx("span",{className:"px-2 py-1 bg-pink-100 text-pink-700 rounded",children:"â–¶ Start"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:"âœ“ Done"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded",children:"ğŸš© Critical"}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:"â˜€ï¸ My Day"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Mobile Quick Actions:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"On mobile, quick status buttons appear at the bottom of each card."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Task Card Indicators"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Left Border Colors:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-red-500"}),e.jsx("span",{children:"Red = Overdue or Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-orange-500"}),e.jsx("span",{children:"Orange = Blocked or Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-green-500"}),e.jsx("span",{children:"Green = Ready to Start"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-blue-500"}),e.jsx("span",{children:"Blue/Pink/Gray = Column status"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Icons & Badges:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"ğŸš© = Critical/Flagged"}),e.jsx("div",{children:"ğŸ”’ = Blocked by another task"}),e.jsx("div",{children:"ğŸ” = Recurring task"}),e.jsx("div",{children:"â˜€ï¸ = In My Day"}),e.jsx("div",{children:"â–¶ = Start date"}),e.jsx("div",{children:"ğŸ“… = Due date"}),e.jsx("div",{children:"â± = Time estimate"}),e.jsx("div",{children:"ğŸ“ = Has attachments"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Effort Bars:"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â–°"}),e.jsx("span",{children:"Low"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â–°â–°"}),e.jsx("span",{children:"Medium"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"â–°â–°â–°"}),e.jsx("span",{children:"High"})]})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Filtering & Search"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Summary Bar (Quick Filters):"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click any stat in the summary bar to filter:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:["â˜€ï¸ ",e.jsx("span",{className:"text-amber-600 font-medium",children:"My Day"})," â€“ Daily focus tasks"]}),e.jsxs("div",{children:["ğŸŸ¢ ",e.jsx("span",{className:"text-green-600 font-medium",children:"Active"})," â€“ To Do + In Progress"]}),e.jsxs("div",{children:["ğŸš© ",e.jsx("span",{className:"text-red-600 font-medium",children:"Critical"})," â€“ Flagged tasks"]}),e.jsxs("div",{children:["ğŸŸ  ",e.jsx("span",{className:"text-orange-600 font-medium",children:"Due Today"})]}),e.jsxs("div",{children:["ğŸ”´ ",e.jsx("span",{className:"text-red-600 font-medium",children:"Overdue"})," â€“ Past due date"]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Field Filters:"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Click the filter icon (ğŸ”) to filter by:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsx("div",{children:"â€¢ Assignee"}),e.jsx("div",{children:"â€¢ Customer"}),e.jsx("div",{children:"â€¢ Category"}),e.jsx("div",{children:"â€¢ Effort Level"}),e.jsx("div",{children:"â€¢ Source"}),e.jsx("div",{children:"â€¢ Due Date"})]})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsx("p",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-1",children:"ğŸ” Quick Search"}),e.jsxs("p",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:["Press ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"âŒ˜K"})," (Mac) or ",e.jsx("kbd",{className:"px-1.5 py-0.5 bg-indigo-100 dark:bg-indigo-800 rounded text-xs font-mono",children:"Ctrl+K"})," (Win) to open search. Find tasks by title, description, assignee, or customer."]})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:'ğŸ’¡ Active filters show a count badge. Click "Clear" to reset all filters.'})]})]}),x==="myday"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center text-amber-600 dark:text-amber-400",children:"â˜€ï¸"}),"What is My Day?"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"My Day is your personal daily focus list. It helps you plan what to work on today without cluttering your board view."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"How Tasks Appear in My Day"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-1",children:"Auto-included:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks with a start date of today or earlier automatically appear in My Day"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Manually added:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click the â˜€ï¸ button on any task in Recommendations to add it to your focus list"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Sun Icon on Cards (â˜€ï¸)"]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tasks in your My Day list show a ",e.jsx("span",{className:"text-lg",children:"â˜€ï¸"})," sun icon on their card in the board view, right below the effort bars. This helps you quickly identify your daily focus tasks while browsing the board."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Recommendations & All Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The Recommendations section shows tasks organized by urgency and status. Click the â˜€ï¸ button on any task to add it:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ğŸ”´ Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"ğŸŸ  Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due today"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-yellow-600",children:"ğŸŸ¡ Due Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due in next 3 days"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-green-600",children:"ğŸŸ¢ Quick Wins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low effort tasks"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"ğŸ”µ In Progress"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currently being worked on"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"âšª To Do"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-xl col-span-2",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ğŸ“‹ Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet prioritized"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Daily Reset"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manually added tasks clear from My Day at midnight (or when completed), giving you a fresh start each day. Auto-included tasks based on start date will remain until their start date passes."})]})]}),x==="calendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ğŸ—“"}),"Calendar View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Schedule tasks on your calendar with start times and durations. Access via the menu or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜L"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Daily"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single day view"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ—“"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7-day overview"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ—“ï¸"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full month grid"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Scheduling Tasks"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Drag & Drop:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time and date will be automatically set."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Resize Duration:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag the bottom edge of a scheduled task to adjust its duration. Time estimate updates automatically."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Double-Click:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Double-click any empty time slot to create a new task at that time."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Sidebar Task Sections"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The sidebar organizes unscheduled tasks by priority:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”´"}),e.jsx("span",{children:"Overdue tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸŸ "}),e.jsx("span",{children:"Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸŸ¡"}),e.jsx("span",{children:"Due Soon (3 days)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”µ"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{children:"My Day tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âšª"}),e.jsx("span",{children:"To Do"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“‹"}),e.jsx("span",{children:"Backlog"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ğŸŸ¢"}),e.jsx("span",{children:"Quick Wins"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Visual Indicators"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-red-500 font-medium",children:"Red line"})," â€“ Current time indicator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-orange-500 font-medium",children:"âš ï¸ Orange ring"})," â€“ Task overlaps with another scheduled task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"Colored bars"})," â€“ Tasks are color-coded by project"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"30-min slots"})," â€“ Calendar auto-scrolls to 6am on load"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"5"}),"Quick Actions"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Hover over any scheduled task to reveal action buttons:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"â–¶"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Start task"})]}),e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ“"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Mark done"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ•"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Remove from calendar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ğŸ’¡ Removing a task from calendar clears its scheduled time. If not done, it returns to the sidebar for rescheduling."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"âš™ï¸"}),"Workflow Automation"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When you schedule a task:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:'â€¢ Status automatically changes to "To Do" (if in Backlog)'}),e.jsx("li",{children:"â€¢ Start date is set to the scheduled day"}),e.jsx("li",{children:"â€¢ Start time is set to the slot time"}),e.jsx("li",{children:"â€¢ Task appears in My Day if scheduled for today"})]})]})]})]}),x==="alltasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ğŸ—ƒï¸"}),"All Tasks View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Access all your tasks in a powerful table format. Click the view switcher in the header and select "All Tasks" or press ',e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒA"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+A"})," (Win)."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Sorting"]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Click any column header to sort by that field. Click again to reverse the sort order. An arrow indicator shows the current sort direction."}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Sortable columns: Title, Project, Status, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Created"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Filtering"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-medium",children:"Filters"})," button to show filter inputs for each column"]}),e.jsx("p",{children:"â€¢ Type in the filter boxes below column headers to narrow results"}),e.jsxs("p",{children:["â€¢ Click ",e.jsx("span",{className:"text-red-600",children:"Clear Filters"})," to reset all filters"]}),e.jsx("p",{children:"â€¢ Active filters show a dot indicator on the Filters button"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"3"}),"Export to CSV"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Export CSV"})," button to download your tasks."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Includes: Title, Project, Status, Critical, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Description, and Created date."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ğŸ’¡ Only currently filtered/visible tasks are exported."})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"4"}),"Import from CSV"]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm font-medium",children:"Import CSV"})," button to bulk create or update tasks."]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Create new tasks:"})," Use ",e.jsx("code",{className:"px-1 bg-gray-100 dark:bg-gray-700 rounded",children:"*"})," in the ID column"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Update existing:"})," Include the task's existing ID"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Template:"})," Export first to get the correct column format"]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ğŸ’¡ Great for migrating from other tools or bulk task creation."})]})]})]}),x==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Creating Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-indigo-500 text-white rounded text-sm font-medium",children:"+"})," button in the header"]}),e.jsxs("p",{children:["â€¢ Or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒT"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+T"})," (Win)"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Fields"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Title *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The task name (required)"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Project *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Which project this belongs to"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Start Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When to start working on it"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deadline for completion"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Time Estimate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long it will take"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Effort Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low / Medium / High effort"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Client/customer for the task"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Assignee"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Who's responsible"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type of work"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"ğŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flag as high priority"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Completing Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Click the circle checkbox on the left of the card"}),e.jsx("p",{children:'â€¢ Or drag the task to the "Done" column'}),e.jsx("p",{children:"â€¢ Completed tasks show with a green checkmark"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Dependencies (Blocking)"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:'â€¢ In the task editor, use "Blocked By" to select tasks that must be completed first'}),e.jsx("p",{children:"â€¢ Blocked tasks show with ğŸ”’ and an orange border"}),e.jsx("p",{children:'â€¢ When the blocking task is completed, the blocked task becomes "ready to start"'})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Recurring Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Set a recurrence pattern: Daily, Weekly, Bi-weekly, Monthly"}),e.jsx("p",{children:"â€¢ When completed, a new instance is automatically created"}),e.jsx("p",{children:"â€¢ Recurring tasks show ğŸ” on the card"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"6"}),"Attachments"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Adding Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Open a task and go to the Details tab"}),e.jsx("p",{children:'â€¢ Drag & drop files or click "Choose files"'}),e.jsx("p",{children:"â€¢ Supports images, PDFs, documents, and more"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Viewing Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Click any attachment to open the viewer"}),e.jsx("p",{children:"â€¢ PDFs display inline with page navigation"}),e.jsx("p",{children:"â€¢ Images show in a lightbox view"}),e.jsx("p",{children:"â€¢ Use â† â†’ arrow keys to navigate between multiple attachments"}),e.jsx("p",{children:"â€¢ Click the download icon to save files locally"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"ğŸ’¡ Tasks with attachments show a ğŸ“ icon with count on the card"})]})]})]}),x==="shortcuts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Navigation Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"â˜€ï¸ My Day View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜D"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ğŸ“‹ Board View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜B"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ğŸ—“ Calendar View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜L"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ğŸ” Quick Search"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜K"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Action Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Task"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"T"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Project"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"P"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Import Tasks"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[f,"N"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Help / Shortcuts"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"?"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Close Modal"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Esc"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click task"})," â€“ Open task editor"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task"})," â€“ Move between columns or schedule on calendar"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover task"})," â€“ See details popup (desktop only)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click calendar"})," â€“ Create task at that time"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task edge"})," â€“ Resize duration on calendar"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Need more help? ",e.jsx("a",{href:"mailto:support@gettrackli.com",className:"text-indigo-500 hover:text-indigo-600 hover:underline",children:"Contact support"})]}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:"Got it!"})]})]})]})},Pa=({isOpen:s,onClose:d,tasks:i,projects:f,onEditTask:x,allTasks:M})=>{const[g,c]=l.useState(""),p=l.useRef(null);if(l.useEffect(()=>{s&&p.current&&p.current.focus(),s||c("")},[s]),l.useEffect(()=>{const v=_=>{_.key==="Escape"&&s&&d()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[s,d]),!s)return null;const k=g.trim()?i.filter(v=>{var G,A,H,D,z;const _=g.toLowerCase();return((G=v.title)==null?void 0:G.toLowerCase().includes(_))||((A=v.description)==null?void 0:A.toLowerCase().includes(_))||((H=v.assignee)==null?void 0:H.toLowerCase().includes(_))||((D=v.customer)==null?void 0:D.toLowerCase().includes(_))||((z=v.notes)==null?void 0:z.toLowerCase().includes(_))}):[];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:p,type:"text",value:g,onChange:v=>c(v.target.value),placeholder:"Search tasks by title, description, assignee, customer...",className:"flex-1 text-lg outline-none placeholder-gray-400"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded",children:"ESC"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:g.trim()===""?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{children:"Start typing to search across all tasks"})]}):k.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ğŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No results found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:k.map(v=>{var H;const _=f.find(D=>D.id===v.project_id),G=dt.find(D=>D.id===v.category),A=ut(v.due_date,v.status);return e.jsx("button",{onClick:()=>{x(v),d()},className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mt-1.5 shrink-0",style:{backgroundColor:Et[v.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 truncate",children:v.title}),v.critical&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:_==null?void 0:_.name}),G&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{color:G.color},children:G.label})]}),v.assignee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:v.assignee})]}),v.due_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:A==="overdue"?"text-red-600":A==="today"?"text-orange-600":"",children:["Due ",$t(v.due_date)]})]})]}),v.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 truncate",children:v.description})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-lg text-gray-500 shrink-0",children:(H=ot.find(D=>D.id===v.status))==null?void 0:H.title})]})},v.id)})})}),k.length>0&&e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-sm text-gray-500",children:[k.length," task",k.length!==1?"s":""," found"]})]})]})},za=({task:s,highlight:d,onSelectForScheduling:i,onEditTask:f,COLUMN_COLORS:x,formatTimeEstimate:M,formatDate:g})=>{const c=k=>{k.stopPropagation(),k.preventDefault(),i(s)},p=()=>{f(s)};return e.jsx("div",{onClick:p,className:`relative p-2.5 rounded-lg border cursor-pointer hover:shadow-md hover:-translate-y-0.5 transition-all duration-200 ${d==="red"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":d==="orange"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":d==="yellow"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":d==="pink"?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800":d==="amber"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":d==="green"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":d==="blue"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":d==="gray"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 shrink-0",style:{backgroundColor:x[s.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[s.critical&&"ğŸš© ",s.title]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-[10px] text-gray-500 dark:text-gray-400",children:[s.time_estimate&&e.jsxs("span",{children:["â±",M(s.time_estimate)]}),s.due_date&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),g(s.due_date)]})]})]}),e.jsx("button",{onClick:c,className:"shrink-0 p-1.5 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/50 transition-colors",title:"Click to schedule",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})},Ra=({tasks:s,projects:d,onEditTask:i,allTasks:f,onUpdateTask:x,onCreateTask:M,onDeleteTask:g,onDuplicateTask:c,viewMode:p,setViewMode:k,onShowConfirm:v})=>{const[_,G]=l.useState(new Date),[A,H]=l.useState(null),[D,z]=l.useState(null),[te,ue]=l.useState(null),[m,w]=l.useState(null),[P,se]=l.useState(null),[me,je]=l.useState(null),[ge,K]=l.useState(null),[le,Te]=l.useState(new Date().toISOString().split("T")[0]),[N,R]=l.useState("09:00"),$=l.useRef(null),y=l.useRef(!1),X=[{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},{bg:"bg-emerald-100 dark:bg-emerald-900/50",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800"},{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800"},{bg:"bg-cyan-100 dark:bg-cyan-900/50",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-200 dark:border-cyan-800"},{bg:"bg-pink-100 dark:bg-pink-900/50",text:"text-pink-700 dark:text-pink-300",border:"border-pink-200 dark:border-pink-800"},{bg:"bg-amber-100 dark:bg-amber-900/50",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800"},{bg:"bg-teal-100 dark:bg-teal-900/50",text:"text-teal-700 dark:text-teal-300",border:"border-teal-200 dark:border-teal-800"}],E=h=>{if(!h)return{bg:"bg-indigo-100 dark:bg-indigo-900/50",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"};const S=h.split("").reduce((j,U)=>j+U.charCodeAt(0),0)%X.length;return X[S]},ae=(h,S)=>{if(!h.start_time)return!1;const j=S.toISOString().split("T")[0],U=b(h.start_time),J=U+(h.time_estimate||30);return s.some(Q=>{if(Q.id===h.id||Q.start_date!==j||!Q.start_time)return!1;const ce=b(Q.start_time),fe=ce+(Q.time_estimate||30);return U<fe&&J>ce})};l.useEffect(()=>{(p==="daily"||p==="weekly")&&$.current&&($.current.scrollTop=384)},[p,_]),l.useEffect(()=>{if(!m)return;const h=j=>{j.preventDefault()},S=j=>{De(j)};return document.addEventListener("mousemove",h),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",S)}},[m]);const ie=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Me=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Le=Array.from({length:48},(h,S)=>{const j=S*30,U=Math.floor(j/60),J=j%60,Q=U%12||12,ce=U<12?"AM":"PM";return{slotIndex:S,minutes:j,label:`${Q}:${J.toString().padStart(2,"0")} ${ce}`,isHour:J===0}}),Fe=h=>{if(h==null)return"";const S=Math.floor(h/60),j=h%60;return`${S.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`},Se=h=>{if(!h)return"";if(h.includes("AM")||h.includes("PM"))return h;const[S,j]=h.split(":").map(Number);if(isNaN(S)||isNaN(j))return h;const U=S%12||12,J=S<12?"AM":"PM";return`${U}:${j.toString().padStart(2,"0")} ${J}`},b=h=>{var Q;if(!h)return null;const S=h.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);if(!S)return null;let j=parseInt(S[1]);const U=parseInt(S[2]),J=(Q=S[3])==null?void 0:Q.toUpperCase();return J==="PM"&&j!==12&&(j+=12),J==="AM"&&j===12&&(j=0),j*60+U},O=_.getFullYear(),Z=_.getMonth(),de=new Date(O,Z,1),ye=new Date(O,Z+1,0),he=de.getDay(),ke=ye.getDate(),$e=new Date;$e.setHours(0,0,0,0);const Ze=()=>{const h=new Date(_);p==="daily"?h.setDate(h.getDate()-1):p==="weekly"?h.setDate(h.getDate()-7):h.setMonth(h.getMonth()-1),G(h)},V=()=>{const h=new Date(_);p==="daily"?h.setDate(h.getDate()+1):p==="weekly"?h.setDate(h.getDate()+7):h.setMonth(h.getMonth()+1),G(h)},ve=()=>G(new Date),Ae=()=>se(null);l.useEffect(()=>{if(P){const h=()=>Ae();return document.addEventListener("click",h),document.addEventListener("contextmenu",h),()=>{document.removeEventListener("click",h),document.removeEventListener("contextmenu",h)}}},[P]);const ht=h=>{const S=new Date(h),j=S.getDay();return S.setDate(S.getDate()-j),S.setHours(0,0,0,0),S},Be=()=>{const h=ht(_);return Array.from({length:7},(S,j)=>{const U=new Date(h);return U.setDate(U.getDate()+j),U})},be=h=>{const S=h.toISOString().split("T")[0];return s.filter(j=>j.start_date===S||j.due_date===S)},Je=(h,S)=>{const j=h.toISOString().split("T")[0],U=S*30,J=U+30;return s.filter(Q=>{if(Q.start_date!==j)return!1;const ce=Q.start_time?b(Q.start_time):null;return ce===null?!1:ce>=U&&ce<J})},at=(h,S)=>{y.current=!0,z(S),h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/plain",S.id)},Ve=()=>{z(null),ue(null),setTimeout(()=>{y.current=!1},100)},Xe=h=>{!y.current&&!m&&i(h)},pt=async(h,S)=>{h.stopPropagation(),x&&await x(S.id,{start_time:null,end_time:null})},ct=async(h,S)=>{h.stopPropagation(),x&&await x(S.id,{status:"done"})},yt=async(h,S)=>{h.stopPropagation(),x&&await x(S.id,{status:"in_progress"})},mt=(h,S)=>{if(!M)return;const j=h.toISOString().split("T")[0],U=new Date().toISOString().split("T")[0],J=S*30,Q=Fe(J),ce=Fe(J+30),fe={start_date:j,due_date:j,start_time:Q,end_time:ce,status:"todo"};j===U&&(fe.my_day_date=U),M(fe)},n=async(h,S,j)=>{console.log("handleDropOnSlot called",{date:h,slotIndex:S,hasEvent:!!j,draggedTask:D});let U=D;if(!U&&(j!=null&&j.dataTransfer)){const _e=j.dataTransfer.getData("text/plain");console.log("Fallback to dataTransfer, taskId:",_e),U=f.find(Ne=>Ne.id===_e),console.log("Found task from allTasks:",U==null?void 0:U.title)}if(!U||!x){console.log("Drop failed: no task or onUpdateTask",{taskToSchedule:U,hasOnUpdateTask:!!x,allTasksLength:f==null?void 0:f.length});return}const J=h.toISOString().split("T")[0],Q=new Date().toISOString().split("T")[0],ce=S*30,fe=Fe(ce),tt=U.time_estimate||30,B=ce+tt,xe=Fe(B);console.log("Dropping task:",{taskId:U.id,dateStr:J,startTime:fe,endTime:xe,duration:tt});const Pe={start_date:J,start_time:fe,end_time:xe};U.due_date||(Pe.due_date=J),U.status==="backlog"&&(Pe.status="todo"),J===Q&&(Pe.my_day_date=Q);const qe=U.id;z(null);try{await x(qe,Pe),console.log("Task updated successfully with:",Pe)}catch(_e){console.error("Error updating task:",_e)}},I=async h=>{if(!D||!x)return;const S=h.toISOString().split("T")[0];await x(D.id,{start_date:S,start_time:null,end_time:null}),z(null)},ee=(h,S)=>{h.stopPropagation(),h.preventDefault(),w({task:S,startY:h.clientY,originalDuration:S.time_estimate||30})},De=async h=>{if(!m||!x){w(null);return}const S=h.clientY-m.startY,j=Math.round(S/32),U=Math.max(15,m.originalDuration+j*30),J=b(m.task.start_time);if(J!==null){const Q=J+U,ce=Fe(Q);console.log("Resizing task:",{taskId:m.task.id,oldDuration:m.originalDuration,newDuration:U,newEndTime:ce}),await x(m.task.id,{time_estimate:U,end_time:ce})}w(null)},He=()=>{const h=[];for(let S=0;S<he;S++)h.push(e.jsx("div",{className:"h-20 sm:h-28 bg-gray-50/50 dark:bg-gray-800/30"},`empty-${S}`));for(let S=1;S<=ke;S++){const j=new Date(O,Z,S),U=j.toISOString().split("T")[0],J=be(j),Q=j.getTime()===$e.getTime(),ce=A===U,fe=j<$e,tt=J.filter(xe=>xe.status!=="done"&&fe&&!Q),B=J.filter(xe=>xe.critical&&xe.status!=="done");J.filter(xe=>xe.status==="done"),J.filter(xe=>xe.status!=="done"),h.push(e.jsxs("div",{"data-dropzone":"calendar-date","data-date":j,onClick:()=>{G(j),k("daily")},onDragOver:xe=>{xe.preventDefault(),xe.dataTransfer.dropEffect="move"},onDrop:xe=>{xe.preventDefault(),I(j)},className:`h-20 sm:h-28 p-1.5 sm:p-2 border-b border-r border-gray-100 dark:border-gray-800 cursor-pointer transition-all hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 touch-manipulation ${Q?"bg-indigo-50 dark:bg-indigo-900/30 ring-2 ring-inset ring-indigo-400":ce?"bg-indigo-100 dark:bg-indigo-900/50":fe?"bg-gray-50/30 dark:bg-gray-800/30":"bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5 sm:mb-1",children:[e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${Q?"text-indigo-600 dark:text-indigo-400":fe?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:S}),J.length>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full ${tt.length>0?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":B.length>0?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:J.length})]}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 overflow-hidden",children:[J.slice(0,2).map(xe=>(d.find(Pe=>Pe.id===xe.project_id),e.jsxs("div",{draggable:!0,onDragStart:Pe=>at(Pe,xe),onDragEnd:Ve,onClick:Pe=>{Pe.stopPropagation(),Xe(xe)},className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded truncate cursor-grab active:cursor-grabbing transition-all hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 ${xe.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":xe.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":fe&&!Q?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300"}`,title:xe.title,children:[xe.critical&&"ğŸš© ",xe.title]},xe.id))),J.length>2&&e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500 px-1.5 sm:px-2",children:["+",J.length-2," more"]})]})]},S))}return h},Ue=A?s.filter(h=>h.due_date===A||h.start_date===A):[],Qe=()=>{if(p==="daily")return _.toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"});if(p==="weekly"){const h=Be(),S=h[0],j=h[6];return S.getMonth()===j.getMonth()?`${S.getDate()} - ${j.getDate()} ${ie[S.getMonth()]} ${S.getFullYear()}`:`${S.getDate()} ${ie[S.getMonth()].slice(0,3)} - ${j.getDate()} ${ie[j.getMonth()].slice(0,3)} ${j.getFullYear()}`}return`${ie[Z]} ${O}`},Ge=()=>{const h=new Date().toISOString().split("T")[0],S=new Date;S.setHours(0,0,0,0);const j=new Date(S);j.setDate(j.getDate()+3);const U=s.filter(re=>{if(re.status==="done")return!1;if(!re.start_time)return!0;if(re.start_date){const Oe=new Date(re.start_date);if(Oe.setHours(0,0,0,0),Oe<S)return!0}return!1}),J=re=>{if(re.status==="done")return!1;if(re.my_day_date){const Oe=new Date(re.my_day_date);if(Oe.setHours(0,0,0,0),Oe<S)return!1;if(Oe.getTime()===S.getTime())return!0}return re.start_date===h},Q=U.filter(re=>J(re)),ce=U.filter(re=>{if(Q.includes(re)||!re.due_date)return!1;const Oe=new Date(re.due_date);return Oe.setHours(0,0,0,0),Oe<S}),fe=U.filter(re=>Q.includes(re)?!1:re.due_date===h),tt=U.filter(re=>{if(Q.includes(re)||fe.includes(re)||!re.due_date||re.due_date===h)return!1;const Oe=new Date(re.due_date);return Oe.setHours(0,0,0,0),Oe>S&&Oe<=j}),B=re=>Q.includes(re)||ce.includes(re)||fe.includes(re)||tt.includes(re),xe=U.filter(re=>re.status==="in_progress"&&!B(re)),Pe=U.filter(re=>re.status==="todo"&&!B(re)&&!xe.includes(re)),qe=U.filter(re=>re.status==="backlog"&&!B(re)&&!xe.includes(re)&&!Pe.includes(re)),_e=U.filter(re=>re.energy_level==="low"&&!B(re)&&!xe.includes(re)&&!Pe.includes(re)&&!qe.includes(re)),Ne=re=>re.sort((Oe,ze)=>{if(Oe.critical&&!ze.critical)return-1;if(!Oe.critical&&ze.critical)return 1;if(Oe.due_date&&ze.due_date){const lr=new Date(Oe.due_date)-new Date(ze.due_date);if(lr!==0)return lr}return Oe.due_date&&!ze.due_date?-1:!Oe.due_date&&ze.due_date?1:new Date(Oe.created_at)-new Date(ze.created_at)});return{overdue:Ne(ce),dueToday:Ne(fe),dueSoon:Ne(tt),inProgress:Ne(xe),myDay:Ne(Q),todo:Ne(Pe),backlog:Ne(qe),quickWins:Ne(_e)}},et=async()=>{ge&&(await x(ge.id,{start_date:le,start_time:N,status:ge.status==="backlog"?"todo":ge.status}),K(null))},we=()=>{const h=_.toISOString().split("T")[0],S=_.toDateString()===new Date().toDateString(),j=Ge(),U=j.overdue.length+j.dueToday.length+j.dueSoon.length+j.inProgress.length+j.myDay.length+j.todo.length+j.backlog.length+j.quickWins.length,J=({title:Q,icon:ce,tasks:fe,highlight:tt,defaultOpen:B=!0})=>fe.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx("span",{children:ce})," ",Q,e.jsxs("span",{className:"text-gray-400",children:["(",fe.length,")"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[fe.slice(0,5).map(xe=>e.jsx(za,{task:xe,highlight:tt,onSelectForScheduling:K,onEditTask:i,COLUMN_COLORS:Et,formatTimeEstimate:zt,formatDate:$t},xe.id)),fe.length>5&&e.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:["+",fe.length-5," more"]})]})]});return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[me&&e.jsxs("div",{className:"fixed bottom-4 left-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center justify-between animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"ğŸ—“"}),e.jsxs("span",{className:"text-sm font-medium truncate",children:["Click a time slot to schedule: ",me.title]})]}),e.jsx("button",{onClick:()=>je(null),className:"shrink-0 p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),e.jsxs("div",{className:`h-12 flex items-center justify-center font-semibold ${S?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300"}`,children:[Me[_.getDay()]," ",_.getDate()]})]}),e.jsx("div",{ref:$,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Le.map(({slotIndex:Q,label:ce,isHour:fe})=>e.jsx("div",{className:"h-8 px-2 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:fe&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:ce})},Q))}),e.jsxs("div",{className:"relative",children:[S&&(()=>{const Q=new Date,fe=(Q.getHours()*60+Q.getMinutes())/30*32;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${fe}px`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("div",{className:"flex-1 h-0.5 bg-red-500"})]})})})(),Le.map(({slotIndex:Q,isHour:ce})=>{const fe=Je(_,Q),tt=te&&te.date===h&&te.slotIndex===Q;return e.jsxs("div",{"data-dropzone":"calendar-slot","data-date":_,"data-slot-index":Q,className:`h-8 border-b relative transition-all duration-150 ${ce?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} ${tt&&D?"bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-inset ring-indigo-400":"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"} cursor-pointer`,onDragOver:B=>{B.preventDefault(),B.dataTransfer.dropEffect="move",ue({date:h,slotIndex:Q})},onDragLeave:()=>ue(null),onDrop:B=>{B.preventDefault(),ue(null),n(_,Q,B)},onDoubleClick:()=>mt(_,Q),children:[tt&&D&&e.jsx("div",{className:"absolute inset-x-1 top-0 bg-indigo-200/50 dark:bg-indigo-700/30 border-2 border-dashed border-indigo-400 rounded text-[10px] text-indigo-600 dark:text-indigo-300 px-1 truncate pointer-events-none z-30",style:{height:`${Math.ceil((D.time_estimate||30)/30)*32-2}px`},children:D.title}),fe.map(B=>{const xe=B.time_estimate||30,Pe=Math.ceil(xe/30),qe=E(B.project_id),_e=ae(B,_);return e.jsxs("div",{draggable:!m,onDragStart:Ne=>!m&&at(Ne,B),onDragEnd:Ve,onClick:Ne=>{Ne.stopPropagation(),Xe(B)},onDoubleClick:Ne=>{Ne.stopPropagation(),Xe(B)},className:`absolute left-1 right-1 px-2 py-0.5 rounded text-xs font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${B.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":B.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${qe.bg} ${qe.text}`} ${_e?"ring-2 ring-orange-400 dark:ring-orange-500":""}`,style:{height:`${Pe*32-2}px`,top:"1px"},title:`${B.title}${B.start_time?` (${Se(B.start_time)}${B.end_time?" - "+Se(B.end_time):""})`:""}${_e?" âš ï¸ Overlaps with another task":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"truncate text-[11px]",children:[_e&&e.jsx("span",{title:"Time conflict",children:"âš ï¸ "}),B.critical&&"ğŸš© ",B.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[(B.status==="backlog"||B.status==="todo")&&e.jsx("button",{onClick:Ne=>yt(Ne,B),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Start task",children:"â–¶"}),B.status!=="done"&&e.jsx("button",{onClick:Ne=>ct(Ne,B),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Ne=>pt(Ne,B),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from calendar",children:"âœ•"})]})]}),Pe>1&&B.start_time&&e.jsxs("div",{className:"text-[9px] opacity-70",children:[Se(B.start_time),B.end_time&&` - ${Se(B.end_time)}`]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize bg-transparent hover:bg-indigo-300/50 dark:hover:bg-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b",onMouseDown:Ne=>ee(Ne,B)})]},B.id)})]},Q)})]})]})})]}),e.jsx("div",{className:"w-full lg:w-72 lg:shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—“"})," Schedule Tasks"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Click ğŸ—“ to set date & time",S?" â€¢ Auto-adds to My Day":""]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-1",children:U===0?e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 text-center py-8",children:"All caught up! ğŸ‰"}):e.jsxs(e.Fragment,{children:[e.jsx(J,{title:"My Day",icon:"â˜€ï¸",tasks:j.myDay,highlight:"amber"}),e.jsx(J,{title:"In Progress",icon:"ğŸŸ£",tasks:j.inProgress,highlight:"pink"}),e.jsx(J,{title:"To Do",icon:"ğŸ“‹",tasks:j.todo,highlight:"blue"}),e.jsx(J,{title:"Backlog",icon:"ğŸ“¦",tasks:j.backlog,highlight:"gray"}),e.jsx(J,{title:"Overdue",icon:"ğŸ”´",tasks:j.overdue,highlight:"red"}),e.jsx(J,{title:"Due Today",icon:"ğŸŸ ",tasks:j.dueToday,highlight:"orange"}),e.jsx(J,{title:"Due Soon",icon:"ğŸŸ¡",tasks:j.dueSoon,highlight:"yellow"}),e.jsx(J,{title:"Quick Wins",icon:"âš¡",tasks:j.quickWins,highlight:"green"})]})})]})})]})},Zt=()=>{const h=Be(),S=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[700px]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),h.map((j,U)=>{const Q=j.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`h-12 flex flex-col items-center justify-center ${Q?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ne[j.getDay()]}),e.jsx("span",{className:`text-sm font-semibold ${Q?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:j.getDate()})]},U)})]}),e.jsx("div",{ref:$,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:Le.map(({slotIndex:j,label:U,isHour:J})=>e.jsx("div",{className:"h-6 px-1 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:J&&e.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400",children:U})},j))}),h.map((j,U)=>{const Q=j.toISOString().split("T")[0]===S;return e.jsxs("div",{className:`min-w-[80px] relative ${Q?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:[Q&&(()=>{const ce=new Date,tt=(ce.getHours()*60+ce.getMinutes())/30*24;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${tt}px`},children:e.jsx("div",{className:"h-0.5 bg-red-500"})})})(),Le.map(({slotIndex:ce,isHour:fe})=>{const tt=Je(j,ce);return e.jsx("div",{"data-dropzone":"calendar-slot","data-date":j,"data-slot-index":ce,className:`h-6 border-b relative transition-colors ${fe?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 cursor-pointer`,onDragOver:B=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},onDrop:B=>{B.preventDefault(),n(j,ce,B)},onDoubleClick:()=>mt(j,ce),children:tt.map(B=>{const xe=B.time_estimate||30,Pe=Math.min(Math.ceil(xe/30),8),qe=E(B.project_id);return e.jsx("div",{draggable:!0,onDragStart:_e=>at(_e,B),onDragEnd:Ve,onClick:_e=>{_e.stopPropagation(),Xe(B)},onDoubleClick:_e=>{_e.stopPropagation(),Xe(B)},className:`absolute left-0.5 right-0.5 px-1 rounded text-[9px] font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${B.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":B.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${qe.bg} ${qe.text}`}`,style:{height:`${Pe*24-2}px`,top:"1px"},title:B.title,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"truncate",children:[B.critical&&"ğŸš©",B.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(B.status==="backlog"||B.status==="todo")&&e.jsx("button",{onClick:_e=>yt(_e,B),className:"hover:text-blue-500",title:"Start task",children:"â–¶"}),B.status!=="done"&&e.jsx("button",{onClick:_e=>ct(_e,B),className:"hover:text-green-500",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:_e=>pt(_e,B),className:"hover:text-red-500",title:"Remove from calendar",children:"âœ•"})]})]})},B.id)})},ce)})]},U)})]})})]})})})};return e.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-4 sm:py-8 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:Qe()}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[s.filter(h=>(h.due_date||h.start_date)&&h.status!=="done").length," tasks scheduled"]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:ve,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:Ze,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsxs("div",{className:"inline-flex items-center bg-gray-100 dark:bg-gray-800 rounded-full p-0.5",children:[e.jsx("button",{onClick:()=>k("daily"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="daily"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Day"}),e.jsx("button",{onClick:()=>k("weekly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="weekly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>k("monthly"),className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${p==="monthly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Month"})]})]}),p==="daily"&&we(),p==="weekly"&&Zt(),p==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:ne.map((h,S)=>e.jsxs("div",{className:"py-2 sm:py-3 text-center text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"hidden sm:inline",children:h}),e.jsx("span",{className:"sm:hidden",children:h.charAt(0)})]},h))}),e.jsx("div",{className:"grid grid-cols-7",children:He()})]}),A&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Tasks for ",new Date(A+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})]}),Ue.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No tasks due on this date"}):e.jsx("div",{className:"space-y-3",children:Ue.map(h=>{var U;const S=d.find(J=>J.id===h.project_id),j=dt.find(J=>J.id===h.category);return e.jsx("div",{onClick:()=>i(h),className:`p-4 rounded-xl border cursor-pointer hover:shadow-md transition-all ${h.status==="done"?"bg-green-50 border-green-200":h.critical?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Et[h.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:`font-medium ${h.status==="done"?"text-gray-400 line-through":"text-gray-800"}`,children:[h.critical&&"ğŸš© ",h.title]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[S&&e.jsx("span",{children:S.name}),j&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:j.color},children:j.label}),h.assignee&&e.jsxs("span",{children:["â€¢ ",h.assignee]})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${h.status==="done"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(U=ot.find(J=>J.id===h.status))==null?void 0:U.title})]})},h.id)})})]}),e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-400"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Overdue / Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ğŸ“Œ"}),e.jsx("span",{children:"Drag tasks to reschedule"})]})]})]}),(p==="daily"||p==="weekly")&&e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-100 dark:bg-indigo-900/50"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ğŸ“Œ"}),e.jsx("span",{children:"Drag tasks to schedule time"})]})]}),ge&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>K(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-xs p-4",children:[e.jsx("h4",{className:"text-base font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"ğŸ—“ Schedule Task"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:ge.title}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:le,onChange:h=>Te(h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Time"}),e.jsx("input",{type:"time",value:N,onChange:h=>R(h.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200",style:{fontSize:"16px"}})]}),e.jsxs("div",{className:"flex gap-2 pt-1",children:[e.jsx("button",{onClick:()=>K(null),className:"flex-1 px-3 py-2.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:et,className:"flex-1 px-3 py-2.5 text-sm bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-semibold",children:"Schedule"})]})]})]})]})]})},Ur=({task:s,project:d,showRemove:i=!1,isCompleted:f=!1,blocked:x,dueDateStatus:M,energyStyle:g,onEditTask:c,onQuickStatusChange:p,onRemoveFromMyDay:k,onAddToMyDay:v,showReorder:_=!1,isFirst:G=!1,isLast:A=!1,onMoveUp:H,onMoveDown:D})=>e.jsx("div",{onClick:()=>c(s),className:`group relative p-4 rounded-xl select-none transition-all duration-200 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50 hover:-translate-y-0.5 cursor-pointer ${f?"bg-gray-50 dark:bg-gray-800/50 opacity-60":x?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800":s.critical?"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[_&&!f&&e.jsxs("div",{className:"flex flex-col gap-0.5 shrink-0",children:[e.jsx("button",{onClick:z=>{z.stopPropagation(),H==null||H()},disabled:G,className:`p-0.5 rounded transition-colors ${G?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move up",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),e.jsx("button",{onClick:z=>{z.stopPropagation(),D==null||D()},disabled:A,className:`p-0.5 rounded transition-colors ${A?"text-gray-200 dark:text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Move down",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("button",{onClick:z=>{z.stopPropagation(),p(s.id,s.status==="done"?"todo":"done")},className:`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${s.status==="done"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,children:s.status==="done"&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h4",{className:`font-medium text-sm leading-tight ${f?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-100"}`,children:[s.critical&&!f&&e.jsx("span",{className:"text-red-500 mr-1",children:"ğŸš©"}),x&&!f&&e.jsx("span",{className:"text-orange-500 mr-1",children:"ğŸ”’"}),s.title]}),v&&!f&&e.jsx("button",{onClick:z=>{z.stopPropagation(),v(s.id)},className:"p-1.5 rounded-lg hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-all touch-manipulation text-amber-500 hover:text-amber-600 dark:text-amber-400",title:"Add to My Day",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),i&&!f&&e.jsx("button",{onClick:z=>k(z,s),className:"p-2 sm:p-1.5 rounded-lg bg-gray-100 dark:bg-gray-700 sm:bg-transparent sm:dark:bg-transparent sm:opacity-0 sm:group-hover:opacity-100 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all touch-manipulation",title:"Remove from My Day",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[d&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),d.name]}),s.due_date&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${M==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":M==="today"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":M==="soon"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:$t(s.due_date)}),g&&e.jsxs("span",{className:"text-xs",title:`${g.label} effort`,children:[s.energy_level==="low"&&e.jsx("span",{style:{color:g.text},children:"â–°"}),s.energy_level==="medium"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°"}),s.energy_level==="high"&&e.jsx("span",{style:{color:g.text},children:"â–°â–°â–°"})]}),s.time_estimate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.time_estimate<60?`${s.time_estimate}m`:`${Math.round(s.time_estimate/60)}h`})]})]})]})}),Va=({tasks:s,projects:d,onEditTask:i,allTasks:f,onQuickStatusChange:x,onUpdateMyDayDate:M,showConfettiPref:g})=>{const[c,p]=l.useState("overdue"),[k,v]=l.useState(!1),_=l.useRef(null),[G,A]=l.useState(()=>{try{const b=localStorage.getItem("trackli-myday-order");return b?JSON.parse(b):[]}catch{return[]}}),H=new Date;H.setHours(0,0,0,0);const D=H.toISOString().split("T")[0],z=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],te=["January","February","March","April","May","June","July","August","September","October","November","December"],ue=new Date().getHours(),m=ue<12?"Good morning":ue<17?"Good afternoon":"Good evening",w=ue<12?"ğŸŒ…":ue<17?"â˜€ï¸":"ğŸŒ™",P=b=>{if(b.my_day_date){const O=new Date(b.my_day_date);if(O.setHours(0,0,0,0),O<H)return!1;if(O.getTime()===H.getTime()){if(b.status==="done"){if(!b.completed_at)return!1;const Z=new Date(b.completed_at);return Z.setHours(0,0,0,0),Z.getTime()===H.getTime()}return!0}}if(b.status==="done"){if(!b.completed_at)return!1;const O=new Date(b.completed_at);if(O.setHours(0,0,0,0),O.getTime()!==H.getTime())return!1;if(b.start_date){const Z=new Date(b.start_date);if(Z.setHours(0,0,0,0),Z<=H)return!0}return!1}if(b.start_date){const O=new Date(b.start_date);if(O.setHours(0,0,0,0),O<=H)return!0}return!1},se=l.useMemo(()=>s.filter(b=>P(b)),[s]),me=l.useMemo(()=>se.filter(b=>b.status!=="done"),[se]),je=l.useMemo(()=>se.filter(b=>b.status==="done"),[se]),ge=l.useMemo(()=>{const b=[...me];return G.length>0?b.sort((O,Z)=>{const de=G.indexOf(O.id),ye=G.indexOf(Z.id);return de!==-1&&ye!==-1?de-ye:de!==-1?-1:ye!==-1?1:0}):b.sort((O,Z)=>{const de=!!O.start_date,ye=!!Z.start_date;if(de&&!ye)return-1;if(!de&&ye)return 1;if(de&&ye){const Ze=new Date(O.start_date)-new Date(Z.start_date);if(Ze!==0)return Ze;const V=O.start_time||O.end_time,ve=Z.start_time||Z.end_time;if(V&&!ve)return-1;if(!V&&ve)return 1;if(V&&ve){const Ae=V.localeCompare(ve);if(Ae!==0)return Ae}}const he={in_progress:0,todo:1,backlog:2},ke=he[O.status]??3,$e=he[Z.status]??3;return ke!==$e?ke-$e:new Date(O.created_at)-new Date(Z.created_at)}),b},[me,G]),K=(b,O)=>{const Z=ge.map(ke=>ke.id),de=Z.indexOf(b);if(de===-1)return;const ye=O==="up"?de-1:de+1;if(ye<0||ye>=Z.length)return;const he=[...Z];[he[de],he[ye]]=[he[ye],he[de]],A(he),localStorage.setItem("trackli-myday-order",JSON.stringify(he))},le=s.filter(b=>!P(b)&&b.status!=="done"),Te=le.filter(b=>(b.status==="todo"||b.status==="in_progress")&&!gt(b,f)),N=Te.filter(b=>ut(b.due_date,b.status)==="overdue"),R=Te.filter(b=>ut(b.due_date,b.status)==="today"&&!N.includes(b)),$=Te.filter(b=>{if(!b.due_date||N.includes(b)||R.includes(b))return!1;const O=new Date(b.due_date);O.setHours(0,0,0,0);const Z=Math.ceil((O-H)/(1e3*60*60*24));return Z>0&&Z<=3}),y=b=>N.includes(b)||R.includes(b)||$.includes(b),X=le.filter(b=>b.status==="in_progress"&&!gt(b,f)&&!y(b)),E=le.filter(b=>b.status==="todo"&&!gt(b,f)&&!y(b)),ae=le.filter(b=>b.status==="backlog"&&!gt(b,f)),ie=le.filter(b=>b.energy_level==="low"&&!y(b)&&!X.includes(b)&&!E.includes(b)&&!ae.includes(b)).slice(0,5),ne=me.reduce((b,O)=>b+(O.time_estimate||0),0),Me=je.reduce((b,O)=>b+(O.time_estimate||0),0),Le=se.length>0?Math.round(je.length/se.length*100):0;l.useEffect(()=>{_.current>0&&me.length===0&&je.length>0&&!k&&g!==!1&&(v(!0),Ca().then(b=>{const Z=Date.now()+3e3,de=()=>{b({particleCount:3,angle:60,spread:55,origin:{x:0,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),b({particleCount:3,angle:120,spread:55,origin:{x:1,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),Date.now()<Z&&requestAnimationFrame(de)};de()})),_.current=me.length},[me.length,je.length,k,g]);const Fe=(b,O)=>{b.stopPropagation();const Z=new Date(H);Z.setDate(Z.getDate()-1);const de=Z.toISOString().split("T")[0];M(O.id,de)},Se=({title:b,emoji:O,color:Z,tasks:de,id:ye})=>{if(de.length===0)return null;const he=c===ye;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>p(he?null:ye),className:`w-full px-3 sm:px-4 py-3 sm:py-3 flex items-center justify-between ${Z} transition-colors touch-manipulation`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:O}),e.jsx("span",{className:"font-medium text-sm",children:b}),e.jsx("span",{className:"text-xs bg-white/50 dark:bg-black/20 px-2 py-0.5 rounded-full",children:de.length})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${he?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),he&&e.jsx("div",{className:"p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-900",children:de.map(ke=>{const $e=d.find(Ae=>Ae.id===ke.project_id),Ze=gt(ke,f),V=ut(ke.due_date,ke.status),ve=Pt[ke.energy_level];return e.jsx(Ur,{task:ke,project:$e,blocked:Ze,dueDateStatus:V,energyStyle:ve,onEditTask:i,onQuickStatusChange:x,onAddToMyDay:Ae=>M(Ae,D)},ke.id)})})]})};return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:p-6 py-4",children:[e.jsx("div",{className:"mb-4 sm:mb-6 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3",children:[w," ",m]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[z[H.getDay()],", ",te[H.getMonth()]," ",H.getDate()]})]})}),se.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Today's Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[je.length," of ",se.length," tasks (",Le,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${Le}%`}})}),ne>0&&e.jsxs("div",{className:"flex justify-between mt-2 text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["~",Math.round(ne/60),"h remaining"]}),e.jsxs("span",{children:["~",Math.round(Me/60),"h completed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"â˜€ï¸"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Day"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["(",ge.length," active)"]})]}),e.jsx("div",{className:"min-h-[150px] sm:min-h-[200px] rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 transition-all",children:ge.length===0&&je.length===0?e.jsx(Ms,{icon:"â˜€ï¸",title:"Your day is wide open",description:"Click the â˜€ï¸ button on recommended tasks below to add them here, or create tasks with today's start date.",variant:"default"}):e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[ge.map((b,O)=>{const Z=d.find(ke=>ke.id===b.project_id),de=gt(b,f),ye=ut(b.due_date,b.status),he=Pt[b.energy_level];return e.jsx(Ur,{task:b,project:Z,showRemove:!0,blocked:de,dueDateStatus:ye,energyStyle:he,onEditTask:i,onQuickStatusChange:x,onRemoveFromMyDay:Fe,showReorder:ge.length>1,isFirst:O===0,isLast:O===ge.length-1,onMoveUp:()=>K(b.id,"up"),onMoveDown:()=>K(b.id,"down")},b.id)}),je.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-3 sm:pt-4 pb-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500",children:["Completed today (",je.length,")"]}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),je.map(b=>{const O=d.find(he=>he.id===b.project_id),Z=gt(b,f),de=ut(b.due_date,b.status),ye=Pt[b.energy_level];return e.jsx(Ur,{task:b,project:O,isCompleted:!0,blocked:Z,dueDateStatus:de,energyStyle:ye,onEditTask:i,onQuickStatusChange:x},b.id)})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ğŸ’¡"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recommendations"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-3 sm:mb-4",children:"Click the â˜€ï¸ button on any task to add it to your focus list"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx(Se,{id:"overdue",title:"Overdue",emoji:"ğŸ”´",color:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",tasks:N}),e.jsx(Se,{id:"dueToday",title:"Due Today",emoji:"ğŸŸ ",color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",tasks:R}),e.jsx(Se,{id:"dueSoon",title:"Due Soon",emoji:"ğŸŸ¡",color:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",tasks:$}),e.jsx(Se,{id:"quickWins",title:"Quick Wins",emoji:"ğŸŸ¢",color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400",tasks:ie}),e.jsx(Se,{id:"inProgress",title:"In Progress",emoji:"ğŸ”µ",color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",tasks:X}),e.jsx(Se,{id:"todo",title:"To Do",emoji:"âšª",color:"bg-slate-50 dark:bg-slate-900/20 text-slate-700 dark:text-slate-400",tasks:E}),e.jsx(Se,{id:"backlog",title:"Backlog",emoji:"ğŸ“‹",color:"bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400",tasks:ae}),N.length===0&&R.length===0&&$.length===0&&ie.length===0&&X.length===0&&E.length===0&&ae.length===0&&e.jsx(Ms,{icon:"ğŸ‰",title:"You're all caught up!",description:"No tasks need your attention right now. Enjoy the moment or create something new.",variant:"celebrate"})]})]})]})]})},Ha=({tasks:s,projects:d,onEditTask:i,allTasks:f})=>{var Te;const{user:x}=Es(),[M,g]=l.useState("created_at"),[c,p]=l.useState("desc"),[k,v]=l.useState({}),[_,G]=l.useState(!1),A=N=>{const R=s.map($=>{var y,X,E;return N==="project"?(y=d.find(ae=>ae.id===$.project_id))==null?void 0:y.name:N==="category"?(X=dt.find(ae=>ae.id===$.category))==null?void 0:X.label:N==="source"?(E=Ot.find(ae=>ae.id===$.source))==null?void 0:E.label:$[N]}).filter(Boolean);return[...new Set(R)].sort()},H=N=>{M===N?p(c==="asc"?"desc":"asc"):(g(N),p("asc"))},D=l.useMemo(()=>s.filter(N=>{var R,$,y;for(const[X,E]of Object.entries(k)){if(!E)continue;let ae;if(X==="project"?ae=((R=d.find(ie=>ie.id===N.project_id))==null?void 0:R.name)||"":X==="category"?ae=(($=dt.find(ie=>ie.id===N.category))==null?void 0:$.label)||"":X==="source"?ae=((y=Ot.find(ie=>ie.id===N.source))==null?void 0:y.label)||"":ae=N[X]||"",E==="__blank__"&&ae||E!=="__blank__"&&String(ae).toLowerCase()!==String(E).toLowerCase())return!1}return!0}),[s,k,d]),z=l.useMemo(()=>[...D].sort((N,R)=>{var X,E,ae,ie;let $,y;return M==="project"?($=((X=d.find(ne=>ne.id===N.project_id))==null?void 0:X.name)||"",y=((E=d.find(ne=>ne.id===R.project_id))==null?void 0:E.name)||""):M==="category"?($=((ae=dt.find(ne=>ne.id===N.category))==null?void 0:ae.label)||"",y=((ie=dt.find(ne=>ne.id===R.category))==null?void 0:ie.label)||""):($=N[M]??"",y=R[M]??""),(M.includes("date")||M==="created_at")&&($=$?new Date($).getTime():0,y=y?new Date(y).getTime():0),typeof $=="boolean"&&($=$?1:0),typeof y=="boolean"&&(y=y?1:0),$<y?c==="asc"?-1:1:$>y?c==="asc"?1:-1:0}),[D,M,c,d]),te=()=>{const N=["ID","Title","Project","Project Archived","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description","Created"],R=z.map(E=>{var ie,ne;const ae=d.find(Me=>Me.id===E.project_id);return[E.id||"",E.title||"",(ae==null?void 0:ae.name)||"",ae!=null&&ae.archived?"Yes":"No",E.status||"",E.critical?"Yes":"No",E.due_date||"",E.start_date||"",E.assignee||"",E.customer||"",((ie=dt.find(Me=>Me.id===E.category))==null?void 0:ie.label)||"",E.energy_level||"",((ne=Ot.find(Me=>Me.id===E.source))==null?void 0:ne.label)||"",E.time_estimate?`${E.time_estimate}m`:"",(E.description||"").replace(/[\n\r,]/g," "),E.created_at?new Date(E.created_at).toLocaleDateString():""]}),$=[N,...R].map(E=>E.map(ae=>`"${String(ae).replace(/"/g,'""')}"`).join(",")).join(`
`),y=new Blob([$],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(y),X.download=`trackli-tasks-${new Date().toISOString().split("T")[0]}.csv`,X.click()},ue=()=>{var E;const N=["ID","Title","Project","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description"],R=["*","Example Task",((E=d[0])==null?void 0:E.name)||"Project Name","todo","No","","","","","","","","30m","Task description here"],$=[N,R].map(ae=>ae.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(",")).join(`
`),y=new Blob([$],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(y),X.download="trackli-template.csv",X.click()},[m,w]=l.useState(!1),[P,se]=l.useState(null),me=l.useRef(null),je=async N=>{var $,y,X;const R=($=N.target.files)==null?void 0:$[0];if(R){w(!0),se(null);try{const ae=(await R.text()).split(`
`).filter(Be=>Be.trim());if(ae.length<2){se({error:"CSV must have a header row and at least one data row"}),w(!1);return}const ie=Be=>{const be=[];let Je="",at=!1;for(let Ve=0;Ve<Be.length;Ve++){const Xe=Be[Ve];Xe==='"'?at&&Be[Ve+1]==='"'?(Je+='"',Ve++):at=!at:Xe===","&&!at?(be.push(Je.trim()),Je=""):Je+=Xe}return be.push(Je.trim()),be},ne=ie(ae[0]).map(Be=>Be.toLowerCase().trim()),Me=ne.indexOf("id"),Le=ne.indexOf("title"),Fe=ne.indexOf("project"),Se=ne.indexOf("status"),b=ne.indexOf("critical"),O=ne.indexOf("due date"),Z=ne.indexOf("start date"),de=ne.indexOf("assignee"),ye=ne.indexOf("customer"),he=ne.indexOf("category"),ke=ne.indexOf("effort"),$e=ne.indexOf("source"),Ze=ne.indexOf("time estimate"),V=ne.indexOf("description");if(Le===-1){se({error:"CSV must have a Title column"}),w(!1);return}let ve=0,Ae=0,ht=[];for(let Be=1;Be<ae.length;Be++){const be=ie(ae[Be]);if(be.length===0||be.every(we=>!we))continue;const Je=Me>=0?be[Me]:"",at=Le>=0?be[Le]:"";if(!at){ht.push(`Row ${Be+1}: Missing title`);continue}const Ve=Fe>=0?be[Fe]:"",Xe=d.find(we=>we.name.toLowerCase()===Ve.toLowerCase()),pt=he>=0?be[he]:"",ct=dt.find(we=>we.label.toLowerCase()===pt.toLowerCase()),yt=$e>=0?be[$e]:"",mt=Ot.find(we=>we.label.toLowerCase()===yt.toLowerCase()),n=Se>=0?(y=be[Se])==null?void 0:y.toLowerCase():"todo",ee={backlog:"backlog","to do":"todo",todo:"todo","in progress":"in_progress",in_progress:"in_progress",done:"done"}[n]||"todo",De=b>=0?(X=be[b])==null?void 0:X.toLowerCase():"",He=De==="yes"||De==="true"||De==="1",Ue=Ze>=0?be[Ze]:"",Qe=Ue&&parseInt(Ue.replace(/m$/i,""))||null,Ge=we=>{if(!we)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(we))return we;const Zt=Yr(),h=we.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(h){let S,j;return Zt?(j=h[1].padStart(2,"0"),S=h[2].padStart(2,"0")):(S=h[1].padStart(2,"0"),j=h[2].padStart(2,"0")),`${h[3]}-${j}-${S}`}return null},et={title:at,project_id:(Xe==null?void 0:Xe.id)||null,status:ee,critical:He,due_date:Ge(O>=0?be[O]:null),start_date:Ge(Z>=0?be[Z]:null),assignee:de>=0&&be[de]||null,customer:ye>=0&&be[ye]||null,category:(ct==null?void 0:ct.id)||null,energy_level:ke>=0&&be[ke]?be[ke].toLowerCase():null,source:(mt==null?void 0:mt.id)||null,time_estimate:Qe,description:V>=0&&be[V]||null};try{if(!Je||Je==="*"){const{error:we}=await W.from("tasks").insert(et);if(we)throw we;ve++}else{const{error:we}=await W.from("tasks").update(et).eq("id",Je);if(we)throw we;Ae++}}catch(we){ht.push(`Row ${Be+1}: ${we.message}`)}}if(se({created:ve,updated:Ae,errors:ht}),ve>0||Ae>0){const{data:Be}=await W.from("tasks").select("*, dependencies:task_dependencies!task_dependencies_task_id_fkey(depends_on_id)").eq("user_id",x.id).order("created_at",{ascending:!1});Be&&window.location.reload()}}catch(E){se({error:`Failed to parse CSV: ${E.message}`})}w(!1),me.current&&(me.current.value="")}},ge=[{key:"title",label:"Title",width:"min-w-[200px]"},{key:"project",label:"Project",width:"min-w-[120px]"},{key:"status",label:"Status",width:"min-w-[100px]"},{key:"critical",label:"Critical",width:"min-w-[80px]"},{key:"due_date",label:"Due Date",width:"min-w-[100px]"},{key:"start_date",label:"Start Date",width:"min-w-[100px]"},{key:"assignee",label:"Assignee",width:"min-w-[120px]"},{key:"customer",label:"Customer",width:"min-w-[120px]"},{key:"category",label:"Category",width:"min-w-[120px]"},{key:"energy_level",label:"Effort",width:"min-w-[100px]"},{key:"source",label:"Source",width:"min-w-[100px]"},{key:"time_estimate",label:"Est. Time",width:"min-w-[90px]"},{key:"created_at",label:"Created",width:"min-w-[100px]"}],K=(N,R)=>{var $,y;switch(R){case"project":return(($=d.find(E=>E.id===N.project_id))==null?void 0:$.name)||"-";case"status":return{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done"}[N.status]||N.status;case"critical":return N.critical?"ğŸš¨ Yes":"-";case"due_date":case"start_date":return N[R]?$t(N[R]):"-";case"category":return((y=dt.find(E=>E.id===N.category))==null?void 0:y.label)||"-";case"energy_level":return{high:"â–°â–°â–° High",medium:"â–°â–° Medium",low:"â–° Low"}[N.energy_level]||"-";case"source":const X=Ot.find(E=>E.id===N.source);return X?`${X.icon} ${X.label}`:"-";case"time_estimate":return N.time_estimate?zt(N.time_estimate):"-";case"created_at":return N.created_at?new Date(N.created_at).toLocaleDateString():"-";default:return N[R]||"-"}},le=N=>({backlog:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",todo:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",in_progress:"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300",done:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"})[N]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-100",children:"All Tasks"}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:z.length})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>G(!_),className:`flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${_||Object.values(k).some(N=>N)?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Object.values(k).some(N=>N)&&e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]}),Object.values(k).some(N=>N)&&e.jsx("button",{onClick:()=>v({}),className:"px-2 py-1.5 text-xs sm:text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Clear"}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700"}),e.jsxs("button",{onClick:te,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 rounded-lg text-sm font-medium transition-colors",title:"Export CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:()=>{var N;return(N=me.current)==null?void 0:N.click()},disabled:m,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Import CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:m?"Importing...":"Import"})]}),e.jsxs("button",{onClick:ue,className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",title:"Download CSV template",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Template"]}),e.jsx("input",{ref:me,type:"file",accept:".csv",onChange:je,className:"hidden"})]})]}),P&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>se(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:P.error?"Import Error":"Import Complete"}),P.error?e.jsx("p",{className:"text-red-600 dark:text-red-400",children:P.error}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-green-600",children:P.created})," tasks created"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:P.updated})," tasks updated"]}),((Te=P.errors)==null?void 0:Te.length)>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Errors:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:[P.errors.slice(0,5).map((N,R)=>e.jsx("li",{children:N},R)),P.errors.length>5&&e.jsxs("li",{children:["...and ",P.errors.length-5," more"]})]})]})]}),e.jsx("button",{onClick:()=>se(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 z-10",children:[e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800",children:ge.map(N=>e.jsx("th",{className:`${N.width} px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700`,children:e.jsxs("button",{onClick:()=>H(N.key),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[N.label,M===N.key&&e.jsx("svg",{className:`w-4 h-4 ${c==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},N.key))}),_&&e.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800/50",children:ge.map(N=>e.jsx("th",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:["title","time_estimate","created_at"].includes(N.key)?e.jsx("span",{className:"text-xs text-gray-400",children:"-"}):e.jsxs("select",{value:k[N.key]||"",onChange:R=>v({...k,[N.key]:R.target.value}),className:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),N.key==="status"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),N.key==="critical"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),N.key==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),["project","assignee","customer","category","source"].includes(N.key)&&A(N.key).map(R=>e.jsx("option",{value:R,children:R},R))]})},`filter-${N.key}`))})]}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:ge.length,className:"px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ğŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try adjusting your filters or search terms"})]})})}):z.map(N=>{const R=d.find(y=>y.id===N.project_id),$=R==null?void 0:R.archived;return e.jsx("tr",{onClick:()=>i(N),className:`cursor-pointer transition-colors ${$?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,children:ge.map(y=>e.jsx("td",{className:"px-4 py-3 text-sm",children:y.key==="title"?e.jsxs("div",{className:"flex items-center gap-2",children:[N.critical&&e.jsx("span",{className:"text-red-500",children:"ğŸš¨"}),$&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:"Archived"}),e.jsx("span",{className:`font-medium truncate max-w-[250px] ${$?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:N.title})]}):y.key==="status"?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${le(N.status)}`,children:K(N,y.key)}):y.key==="critical"?e.jsx("span",{className:N.critical?"text-red-500 font-medium":"text-gray-400",children:K(N,y.key)}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:K(N,y.key)})},`${N.id}-${y.key}`))},N.id)})})]})})]})},Ua=({task:s,project:d,onEdit:i,onDragStart:f,showProject:x=!0,allTasks:M=[],onQuickComplete:g,bulkSelectMode:c,isSelected:p,onToggleSelect:k,onStatusChange:v,onSetDueDate:_,onToggleMyDay:G,isDragging:A,onUpdateTitle:H,onToggleCritical:D})=>{var O,Z,de,ye,he,ke,$e,Ze;const[z,te]=l.useState(!1),[ue,m]=l.useState(!1),[w,P]=l.useState(s.title),se=l.useRef(null),me=l.useRef(!1),je=V=>{me.current=!0,f(V,s)},ge=()=>{setTimeout(()=>{me.current=!1},100)},K=()=>{me.current||(c?k==null||k(s.id):i(s))},le=V=>{c||!H||(V.stopPropagation(),m(!0),P(s.title),setTimeout(()=>{var ve;return(ve=se.current)==null?void 0:ve.focus()},0))},Te=()=>{w.trim()&&w!==s.title&&H(s.id,w.trim()),m(!1)},N=V=>{V.key==="Enter"?(V.preventDefault(),Te()):V.key==="Escape"&&(P(s.title),m(!1))},R=ut(s.due_date,s.status),$=gt(s,M),y=s.recurrence_type?$s.find(V=>V.id===s.recurrence_type):null,X=s.status==="done",E=s.status==="in_progress",ae=ir(s),ie=dt.find(V=>V.id===s.category),ne=Pt[s.energy_level],Me=qr(s),Le=!X&&R==="overdue",Fe=!X&&R==="today",Se=Le?"#DC2626":Fe?"#D97706":$?"#F97316":s.critical?"#EF4444":ae?"#10B981":Et[s.status],b=s.description||s.assignee||ie||((O=s.subtasks)==null?void 0:O.length)>0||((Z=s.attachments)==null?void 0:Z.length)>0;return e.jsxs("div",{draggable:!0,onDragStart:je,onDragEnd:ge,onClick:K,className:`task-card relative rounded-lg p-2 sm:p-2.5 shadow-sm border cursor-pointer transition-all duration-200 group hover:z-[100] ${A?"opacity-30 scale-95 ring-2 ring-dashed ring-indigo-400 bg-indigo-50 dark:bg-indigo-900/30":"hover:-translate-y-1 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50"} ${!A&&X?"opacity-60 bg-white dark:bg-gray-800":!A&&Le?"bg-red-50 dark:bg-red-900/40":!A&&Fe?"bg-amber-50 dark:bg-amber-900/40":A?"":"bg-white dark:bg-gray-800"} ${p?"ring-2 ring-indigo-500 border-indigo-300":Le?"border-red-300 dark:border-red-500 hover:border-red-400 dark:hover:border-red-400":Fe?"border-amber-300 dark:border-amber-500 hover:border-amber-400 dark:hover:border-amber-400":$?"border-orange-200 dark:border-orange-800 hover:border-orange-300":s.critical?"border-red-200 dark:border-red-800 hover:border-red-300":ae?"border-green-200 dark:border-green-800 hover:border-green-300":"border-gray-100 dark:border-gray-700 hover:border-gray-200"}`,style:{borderLeftWidth:"2px",borderLeftColor:Se},children:[b&&e.jsxs("div",{className:`hidden md:block absolute top-0 z-[200] w-56 p-3 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none ${s.status==="done"?"right-full mr-2":"left-full ml-2"}`,children:[ie&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:ie.color},children:ie.label})}),s.customer&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-2",children:s.customer}),ne&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:ne.bg,color:ne.text},children:[ne.icon," ",ne.label]})}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 line-clamp-3",children:s.description}),s.assignee&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-[10px] font-medium flex items-center justify-center flex-shrink-0",children:s.assignee.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:s.assignee})]}),((de=s.dependencies)==null?void 0:de.length)>0&&(()=>{const V=s.dependencies.map(ve=>M.find(Ae=>Ae.id===ve.depends_on_id)).filter(ve=>ve&&ve.status!=="done");return V.length===0?null:e.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"ğŸš« Blocked by:"}),V.map(ve=>e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["â€¢ ",ve.title]},ve.id))]})})(),((ye=s.subtasks)==null?void 0:ye.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Subtasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s.subtasks.filter(V=>V.completed).length/s.subtasks.length*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.subtasks.filter(V=>V.completed).length,"/",s.subtasks.length]})]})]}),((he=s.attachments)==null?void 0:he.length)>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ğŸ“ ",s.attachments.length," attachment",s.attachments.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col",children:[c&&e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("button",{onClick:V=>{V.stopPropagation(),k==null||k(s.id)},className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${p?"bg-indigo-500 border-indigo-500 text-white":"border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-800"}`,children:p&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[Me&&!X&&e.jsx("span",{className:"text-xs flex-shrink-0",title:"In My Day",children:"â˜€ï¸"}),Le&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-red-100 dark:bg-red-500/80 text-red-700 dark:text-white flex-shrink-0",children:"OVERDUE"}),Fe&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-amber-100 dark:bg-amber-500/80 text-amber-700 dark:text-white flex-shrink-0",children:"TODAY"}),$&&e.jsx("span",{title:"Blocked",className:"text-xs flex-shrink-0",children:"ğŸ”’"}),s.critical&&e.jsx("span",{title:"Critical",className:"text-xs flex-shrink-0",children:"ğŸš©"}),y&&e.jsx("span",{title:y.label,className:"text-xs flex-shrink-0",children:"ğŸ”"}),ue?e.jsx("input",{ref:se,type:"text",value:w,onChange:V=>P(V.target.value),onBlur:Te,onKeyDown:N,onClick:V=>V.stopPropagation(),className:"flex-1 text-xs font-medium bg-white dark:bg-gray-700 border border-indigo-400 rounded px-1.5 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700 dark:text-gray-200"}):e.jsx("h4",{onClick:V=>H&&V.stopPropagation(),onDoubleClick:le,className:`flex-1 text-xs font-medium line-clamp-2 leading-tight ${Le?"text-red-700 dark:text-red-200 group-hover:text-red-800 dark:group-hover:text-red-100":Fe?"text-amber-700 dark:text-amber-200 group-hover:text-amber-800 dark:group-hover:text-amber-100":"text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"} ${H?"cursor-text":""}`,title:H?"Double-click to edit":"",children:s.title})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-1.5 text-[10px] text-gray-600 dark:text-gray-400",children:[s.start_date&&e.jsxs("span",{className:`flex items-center gap-0.5 ${ae?"text-green-600 dark:text-green-400":""}`,children:[e.jsx("span",{children:"â–¶"})," ",$t(s.start_date)]}),s.due_date&&e.jsxs("span",{className:`flex items-center gap-0.5 font-medium ${R==="overdue"?"text-red-600 dark:text-red-400":R==="today"?"text-orange-600 dark:text-orange-400":R==="soon"?"text-amber-600 dark:text-amber-400":""}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),$t(s.due_date)]}),s.time_estimate&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("span",{children:"â±"})," ",zt(s.time_estimate)]}),ne&&e.jsxs("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 text-[9px] font-medium rounded-full",style:{backgroundColor:ne.bg,color:ne.text},title:ne.label,children:[ne.icon," ",ne.label]})]}),s.customer&&e.jsx("div",{className:"hidden sm:block mt-1.5",children:e.jsx("span",{className:"inline-block px-2 py-0.5 text-[10px] font-medium rounded-full",style:{backgroundColor:((ke=Hr(s.customer))==null?void 0:ke.bg)||"#EDE9FE",color:(($e=Hr(s.customer))==null?void 0:$e.text)||"#7C3AED",border:`1px solid ${((Ze=Hr(s.customer))==null?void 0:Ze.border)||"#C4B5FD"}`},children:s.customer})}),x&&d&&e.jsx("div",{className:"hidden sm:block mt-2 pt-1.5 border-t border-gray-100 dark:border-gray-700",children:e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:d.name})}),g&&e.jsxs("div",{className:"sm:hidden flex items-center gap-1.5 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[s.status==="backlog"&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 rounded hover:bg-blue-100 transition-colors",children:"â†’ To Do"}),s.status==="todo"&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,"in_progress")},className:"flex-1 py-1 text-[10px] font-medium text-pink-600 bg-pink-50 dark:bg-pink-900/30 dark:text-pink-400 rounded hover:bg-pink-100 transition-colors",children:"â–¶ Start"}),(s.status==="backlog"||s.status==="todo"||s.status==="in_progress")&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,"done")},className:"flex-1 py-1 text-[10px] font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 rounded hover:bg-emerald-100 transition-colors",children:"âœ“ Done"}),s.status==="done"&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-amber-600 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 rounded hover:bg-amber-100 transition-colors",children:"â†© Reopen"})]})]})]}),!A&&e.jsx("div",{className:"hidden md:flex absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 scale-90 group-hover:scale-100 z-10",children:e.jsxs("div",{className:"flex items-center gap-0.5 p-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:[!E&&!X&&g&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,"in_progress")},className:"p-1.5 text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded transition-colors",title:"Start working",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),g&&e.jsx("button",{onClick:V=>{V.stopPropagation(),g(s.id,X?"todo":"done")},className:`p-1.5 rounded transition-colors ${X?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/30":"text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:X?"Reopen task":"Mark done",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),D&&e.jsx("button",{onClick:V=>{V.stopPropagation(),D(s.id,!s.critical)},className:`p-1.5 rounded transition-colors ${s.critical?"text-red-500 bg-red-50 dark:bg-red-900/30":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:s.critical?"Remove critical flag":"Mark as critical",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:s.critical?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),G&&!X&&e.jsx("button",{onClick:V=>{V.stopPropagation(),G(s.id,!Me)},className:`p-1.5 rounded transition-colors ${Me?"text-amber-500 bg-amber-50 dark:bg-amber-900/30":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30"}`,title:Me?"Remove from My Day":"Add to My Day",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:Me?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})})]})},qa=({tasks:s,projects:d,onEditTask:i,onUndoComplete:f})=>{const[x,M]=l.useState(!1);if(s.length===0)return null;const g=c=>{const p=new Date(c),v=new Date-p,_=Math.floor(v/6e4),G=Math.floor(v/36e5),A=Math.floor(v/864e5);return _<1?"just now":_<60?`${_}m ago`:G<24?`${G}h ago`:`${A}d ago`};return e.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(!x),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Recently Completed"}),e.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 px-2 py-0.5 rounded-full",children:s.length})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"px-4 pb-4 space-y-2",children:s.map(c=>{const p=d.find(k=>k.id===c.project_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-gray-200 dark:hover:border-gray-600 transition-colors",children:[e.jsx("button",{onClick:()=>f(c.id),className:"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center shrink-0 hover:bg-amber-500 transition-colors",title:"Mark as incomplete",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>i(c),children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-through truncate",children:c.title}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:p&&e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:p.name})})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 shrink-0",children:g(c.completed_at)})]},c.id)})})]})},Ls=({column:s,tasks:d,projects:i,onEditTask:f,onDragStart:x,onDragOver:M,onDrop:g,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:v,onSetDueDate:_,bulkSelectMode:G,selectedTaskIds:A,onToggleSelect:H,onAddTask:D,onToggleMyDay:z,isMobileFullWidth:te,draggedTask:ue,onUpdateTitle:m,onToggleCritical:w})=>{const[P,se]=l.useState(!1),[me,je]=l.useState(!1),[ge,K]=l.useState(!1),le=d.reduce((E,ae)=>E+(ae.time_estimate||0),0),Te=d.filter(E=>E.critical).length,N=d.filter(E=>ir(E)).length,R=s.id==="done",$=s.id==="backlog";let y=d,X=0;return R&&!me?(y=d.slice(0,Rr),X=Math.max(0,d.length-Rr)):$&&!ge&&(y=d.slice(0,Vr),X=Math.max(0,d.length-Vr)),e.jsxs("div",{className:`${te?"w-full":"flex-shrink-0 w-[280px] sm:w-[300px] lg:flex-1 lg:min-w-[300px] lg:max-w-[400px] xl:max-w-[450px]"} bg-gray-50/80 dark:bg-gray-800/80 rounded-2xl p-3 sm:p-4 transition-all duration-200 overflow-visible ${P?"ring-2 ring-indigo-400 ring-offset-2 dark:ring-offset-gray-900 bg-indigo-50/50 dark:bg-indigo-900/20 scale-[1.01]":""}`,onDragOver:E=>{E.preventDefault(),se(!0),M(E,s.id)},onDragLeave:()=>se(!1),onDrop:E=>{se(!1),g(E,s.id)},children:[e.jsxs("div",{className:`${te?"hidden":"flex"} items-center gap-3 mb-2`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:s.title}),e.jsx("span",{className:"ml-auto bg-white dark:bg-gray-700 px-2.5 py-0.5 rounded-full text-sm font-medium text-gray-500 dark:text-gray-300 shadow-sm",children:d.length})]}),e.jsxs("div",{className:`${te?"hidden":"flex"} items-center gap-2 mb-4 ml-6 text-xs text-gray-500 dark:text-gray-400`,children:[le>0&&e.jsx("span",{children:zt(le)}),s.id!=="done"&&Te>0&&e.jsxs("span",{className:"text-red-500",children:[Te," critical"]}),s.id==="backlog"&&N>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[N," ready"]})]}),e.jsxs("div",{className:"space-y-2 overflow-visible",children:[y.length===0&&!P&&e.jsxs("div",{className:"py-6 sm:py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-10 sm:h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3 sm:mb-2 opacity-60",children:e.jsx("span",{className:"text-xl sm:text-lg",children:s.id==="done"?"âœ…":s.id==="in_progress"?"ğŸ’­":s.id==="todo"?"ğŸ“‹":"ğŸ“¦"})}),e.jsx("p",{className:"text-sm sm:text-xs text-gray-400 dark:text-gray-500 px-4",children:s.id==="done"?"Completed tasks appear here":s.id==="in_progress"?"Tasks you're working on":s.id==="todo"?"Ready to start":"Future tasks"})]}),y.map(E=>e.jsx(Ua,{task:E,project:i.find(ae=>ae.id===E.project_id),onEdit:f,onDragStart:x,showProject:c,allTasks:p,onQuickComplete:k,onStatusChange:v,onSetDueDate:_,bulkSelectMode:G,isSelected:A==null?void 0:A.has(E.id),onToggleSelect:H,onToggleMyDay:z,isDragging:(ue==null?void 0:ue.id)===E.id,onUpdateTitle:m,onToggleCritical:w},E.id)),R&&X>0&&!me&&e.jsxs("button",{onClick:()=>je(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-indigo-300 transition-all",children:["View all ",d.length," completed tasks â†’"]}),R&&me&&d.length>Rr&&e.jsx("button",{onClick:()=>je(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all",children:"Show less â†‘"}),$&&X>0&&!ge&&e.jsxs("button",{onClick:()=>K(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-indigo-300 transition-all",children:["View all ",d.length," backlog tasks â†’"]}),$&&ge&&d.length>Vr&&e.jsx("button",{onClick:()=>K(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-gray-300 transition-all",children:"Show less â†‘"}),ue&&ue.status!==s.id&&P&&e.jsxs("div",{className:"w-full py-4 rounded-xl border-2 border-dashed border-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20 animate-dropZone flex items-center justify-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Drop here"]}),e.jsxs("button",{onClick:()=>D(s.id),className:"w-full mt-3 py-3 sm:py-2.5 text-sm text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-medium rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 transition-all flex items-center justify-center gap-2 active:scale-95 touch-manipulation",children:[e.jsx("svg",{className:"w-5 h-5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add task"]})]})]})},Ya=({isOpen:s,onClose:d,task:i,projects:f,allTasks:x,onSave:M,onDelete:g,loading:c,templates:p=[],onSaveTemplate:k,onDeleteTemplate:v,onShowConfirm:_})=>{var yt,mt;const G=l.useRef(null),[A,H]=l.useState(!1),[D,z]=l.useState(!1),[te,ue]=l.useState(""),[m,w]=l.useState({title:"",description:"",project_id:"",status:"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),[P,se]=l.useState([]),[me,je]=l.useState([]),[ge,K]=l.useState([]),[le,Te]=l.useState("details"),[N,R]=l.useState(""),[$,y]=l.useState(!1),[X,E]=l.useState(!1),[ae,ie]=l.useState(""),[ne,Me]=l.useState(!1),[Le,Fe]=l.useState(""),[Se,b]=l.useState(""),[O,Z]=l.useState([]),[de,ye]=l.useState(""),[he,ke]=l.useState([]),[$e,Ze]=l.useState(""),V=l.useRef(null),[ve,Ae]=l.useState(null);l.useEffect(()=>{const n=I=>{var ee;D&&(I.key==="Escape"&&z(!1),I.key==="Enter"&&(g(i.id),z(!1),d())),(I.ctrlKey||I.metaKey)&&I.key==="s"&&!D&&(I.preventDefault(),(ee=document.querySelector("form"))==null||ee.requestSubmit())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[D,i,g,d]);const ht=n=>{n&&(w(I=>({...I,title:n.title||"",description:n.description||"",project_id:n.project_id||I.project_id,category:n.category||"deliverable",energy_level:n.energy_level||"medium",time_estimate:n.time_estimate||"",source:n.source||"ad_hoc",assignee:n.assignee||"",customer:n.customer||"",critical:n.critical||!1,recurrence_type:n.recurrence_type||null,recurrence_count:n.recurrence_count||8})),Z(n.subtasks||[]),n.assignee&&(f.flatMap(ee=>ee.team_members||[]).includes(n.assignee)||(E(!0),ie(n.assignee))),n.customer&&(Me(!0),Fe(n.customer)))},Be=async n=>{var ee;const I=(ee=n.clipboardData)==null?void 0:ee.items;if(I){for(const De of I)if(De.type.startsWith("image/")){n.preventDefault();const He=De.getAsFile();if(He){const Ue=new Date().toISOString().replace(/[:.]/g,"-"),Qe=He.type.split("/")[1]||"png",Ge=new File([He],`pasted-image-${Ue}.${Qe}`,{type:He.type});if(Ge.size>10*1024*1024){R("Pasted image is too large. Max size is 10MB.");return}K(et=>[...et,Ge]),b("ğŸ“ Image captured!"),setTimeout(()=>b(""),2e3)}break}}};l.useEffect(()=>{var I,ee,De,He;const n=i!=null&&i.id?`edit-${i.id}`:s?`new-${(i==null?void 0:i.title)||""}-${(i==null?void 0:i.project_id)||""}`:null;if(!(!s||V.current===n)){if(V.current=n,i!=null&&i.id){const Ue=f.find(et=>et.id===i.project_id),Qe=Ue&&!((I=Ue.members)!=null&&I.includes(i.assignee))&&i.assignee,Ge=Ue&&!((ee=Ue.customers)!=null&&ee.includes(i.customer))&&i.customer;w({title:i.title||"",description:i.description||"",project_id:i.project_id||"",status:i.status||"backlog",critical:i.critical||!1,start_date:i.start_date||"",start_time:i.start_time||"",end_time:i.end_time||"",due_date:i.due_date||"",assignee:Qe?"":i.assignee||"",time_estimate:i.time_estimate||"",energy_level:i.energy_level||"medium",category:i.category||"deliverable",source:i.source||"ad_hoc",source_link:i.source_link||"",customer:Ge?"":i.customer||"",notes:i.notes||"",recurrence_type:i.recurrence_type||null,recurrence_count:i.recurrence_count||8,recurrence_end_date:i.recurrence_end_date||""}),je(i.attachments||[]),se(((De=i.dependencies)==null?void 0:De.map(et=>et.depends_on_id))||[]),E(Qe),ie(Qe?i.assignee:""),Me(Ge),Fe(Ge?i.customer:""),Z(i.subtasks||[]),ke(i.comments||[])}else w({title:(i==null?void 0:i.title)||"",description:"",project_id:(i==null?void 0:i.project_id)||((He=f[0])==null?void 0:He.id)||"",status:(i==null?void 0:i.status)||"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:(i==null?void 0:i.due_date)||"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),je([]),se([]),E(!1),ie(""),Me(!1),Fe(""),Z([]),ke([]);K([]),Te("details"),R(""),ye(""),Ze("")}},[i==null?void 0:i.id,i==null?void 0:i.title,i==null?void 0:i.project_id,s]),l.useEffect(()=>{s||(V.current=null)},[s]);const be=f.find(n=>n.id===m.project_id),Je=async n=>{const I=Array.from(n.target.files);if(I.length===0)return;R("");const ee=[];for(const De of I){if(De.size>10*1024*1024){R(`File "${De.name}" is too large. Max size is 10MB.`);continue}ee.push(De)}K([...ge,...ee]),G.current&&(G.current.value="")},at=n=>{K(ge.filter((I,ee)=>ee!==n))},Ve=n=>{je(me.filter(I=>I.id!==n))},Xe=async n=>{n.preventDefault();const I=X?ae:m.assignee,ee=ne?Le:m.customer;await M({...m,assignee:I,customer:ee,time_estimate:m.time_estimate?parseInt(m.time_estimate):null,id:i==null?void 0:i.id,dependencies:P,subtasks:O,comments:he},ge,me),d()},pt=(x==null?void 0:x.filter(n=>n.project_id===m.project_id&&n.id!==(i==null?void 0:i.id)&&n.status!=="done"))||[],ct=n=>n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB";return e.jsxs(Gr,{isOpen:s,onClose:d,title:i!=null&&i.id?"Edit Task":"New Task",wide:!0,fullScreenMobile:!0,children:[e.jsxs("form",{onSubmit:Xe,children:[!(i!=null&&i.id)&&p.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"ğŸ“‹ Use template:"}),e.jsxs("select",{onChange:n=>{const I=p.find(ee=>ee.id===parseInt(n.target.value));I&&ht(I),n.target.value=""},className:"flex-1 min-w-[150px] px-3 py-1.5 bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",value:"",children:[e.jsx("option",{value:"",children:"Select a template..."}),p.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),v&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{type:"button",className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",title:"Manage templates",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 hidden group-hover:block",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700",children:"Delete template"}),p.map(n=>e.jsxs("button",{type:"button",onClick:()=>v(n.id),className:"w-full px-3 py-1.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n.name]},n.id))]})]})]})}),e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 overflow-x-auto min-h-[44px]",children:[{id:"details",label:"Details"},{id:"additional",label:"More"},{id:"subtasks",label:"Subtasks"},{id:"dependencies",label:"Deps",labelFull:"Dependencies"},{id:"activity",label:"Activity"}].map(n=>e.jsx("button",{type:"button",onClick:()=>Te(n.id),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${le===n.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-800 dark:text-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:n.labelFull?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:n.label}),e.jsx("span",{className:"hidden sm:inline",children:n.labelFull})]}):n.label},n.id))}),le==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:m.title,onChange:n=>w({...m,title:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.title?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,placeholder:"What needs to be done?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:m.description,onChange:n=>w({...m,description:n.target.value}),onPaste:Be,rows:2,className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.description?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Add more context... (paste images here!)"}),Se&&le==="details"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Se})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project *"}),e.jsxs("select",{required:!0,value:m.project_id,onChange:n=>w({...m,project_id:n.target.value,assignee:"",customer:""}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.project_id?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,children:[e.jsx("option",{value:"",children:"Select project"}),f.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:m.status,onChange:n=>w({...m,status:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:ot.map(n=>e.jsx("option",{value:n.id,children:n.title},n.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer/Client"}),ne?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Le,onChange:n=>Fe(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Customer name"}),e.jsx("button",{type:"button",onClick:()=>{Me(!1),Fe("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.customer,onChange:n=>{n.target.value==="__other__"?(Me(!0),w({...m,customer:""})):w({...m,customer:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.customer?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"No customer"}),(yt=be==null?void 0:be.customers)==null?void 0:yt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Effort Level"}),e.jsx("select",{value:m.energy_level,onChange:n=>w({...m,energy_level:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.energy_level?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:Object.entries(Pt).map(([n,I])=>e.jsxs("option",{value:n,children:[I.icon," ",I.label]},n))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Start Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.start_date,onChange:n=>w({...m,start_date:n.target.value}),onBlur:n=>{const I=n.target.value.trim();if(!I){w({...m,start_date:""});return}const ee=or(I);ee.date&&w({...m,start_date:ee.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.start_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Due Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:m.due_date,onChange:n=>w({...m,due_date:n.target.value}),onBlur:n=>{const I=n.target.value.trim();if(!I){w({...m,due_date:""});return}const ee=or(I);ee.date&&w({...m,due_date:ee.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${m.due_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"text",value:m.start_time||"",onChange:n=>w({...m,start_time:n.target.value}),onBlur:n=>{const I=Ts(n.target.value);if(I||!n.target.value){const ee={start_time:I};if(I&&m.time_estimate){const[De,He]=I.split(":").map(Number),Qe=De*60+He+parseInt(m.time_estimate),Ge=Math.floor(Qe/60),et=Qe%60;ee.end_time=`${String(Ge).padStart(2,"0")}:${String(et).padStart(2,"0")}`}w({...m,...ee})}},placeholder:"e.g. 9am, 230pm, 14:30",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"text",value:m.end_time||"",onChange:n=>w({...m,end_time:n.target.value}),onBlur:n=>{const I=Ts(n.target.value);if(I||!n.target.value){const ee={end_time:I};if(m.start_time&&I){const[De,He]=m.start_time.split(":").map(Number),[Ue,Qe]=I.split(":").map(Number),Ge=De*60+He,we=Ue*60+Qe-Ge;we>0&&(ee.time_estimate=String(we))}w({...m,...ee})}},placeholder:"e.g. 10am, 430pm, 16:00",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>w({...m,critical:!m.critical}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.critical?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 ring-2 ring-red-300 dark:ring-red-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ğŸš© Critical"}),e.jsx("button",{type:"button",onClick:()=>w({...m,recurrence_type:m.recurrence_type?null:"weekly"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${m.recurrence_type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-2 ring-blue-300 dark:ring-blue-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ğŸ” Recurring"})]}),m.recurrence_type&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Repeat"}),e.jsx("select",{value:m.recurrence_type||"",onChange:n=>w({...m,recurrence_type:n.target.value||null}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:$s.filter(n=>n.id).map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),m.start_date?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Occurrences"}),e.jsx("input",{type:"number",min:"1",max:"52",value:m.recurrence_count,onChange:n=>w({...m,recurrence_count:parseInt(n.target.value)||1,recurrence_end_date:""}),className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Or until date"}),e.jsx("input",{type:"text",value:m.recurrence_end_date,onChange:n=>w({...m,recurrence_end_date:n.target.value}),onBlur:n=>{const I=n.target.value.trim();if(!I)return;const ee=or(I);ee.date&&w({...m,recurrence_end_date:ee.date,recurrence_count:0})},placeholder:"e.g. M+6",className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["ğŸ—“ ",m.recurrence_end_date?`Will create occurrences until ${m.recurrence_end_date}`:`Will create ${m.recurrence_count} future occurrence${m.recurrence_count!==1?"s":""}`]})]}):e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Set a Start Date above for recurrence to work"]})]})]}),le==="subtasks"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("h3",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:"Checklist"})]}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-300 mb-4",children:"Break down this task into smaller steps"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:de,onChange:n=>ye(n.target.value),onKeyDown:n=>{n.key==="Enter"&&de.trim()&&(n.preventDefault(),Z([...O,{id:Date.now().toString(),title:de.trim(),completed:!1}]),ye(""))},placeholder:"Add a subtask...",className:"flex-1 px-4 py-2.5 border border-indigo-200 dark:border-indigo-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("button",{type:"button",onClick:()=>{de.trim()&&(Z([...O,{id:Date.now().toString(),title:de.trim(),completed:!1}]),ye(""))},className:"px-4 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium",children:"Add"})]}),O.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:[e.jsxs("span",{children:[O.filter(n=>n.completed).length," of ",O.length," completed"]}),e.jsxs("span",{children:[Math.round(O.filter(n=>n.completed).length/O.length*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-indigo-200 dark:bg-indigo-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${O.filter(n=>n.completed).length/O.length*100}%`}})})]}),O.length===0?e.jsxs("div",{className:"text-center py-8 text-indigo-400 dark:text-indigo-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No subtasks yet. Add some to track progress!"})]}):e.jsx("div",{className:"space-y-2",children:O.map((n,I)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${n.completed?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>{Z(O.map(ee=>ee.id===n.id?{...ee,completed:!ee.completed}:ee))},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${n.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-indigo-400"}`,children:n.completed&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`flex-1 ${n.completed?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-200"}`,children:n.title}),e.jsx("button",{type:"button",onClick:()=>Z(O.filter(ee=>ee.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id))})]})}),le==="additional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"number",min:"0",step:"5",value:m.time_estimate,onChange:n=>{const I=n.target.value,ee={time_estimate:I};if(m.start_time&&I){const[De,He]=m.start_time.split(":").map(Number),Qe=De*60+He+parseInt(I),Ge=Math.floor(Qe/60),et=Qe%60;ee.end_time=`${String(Ge).padStart(2,"0")}:${String(et).padStart(2,"0")}`}w({...m,...ee})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.time_estimate?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Minutes (e.g., 30)"}),m.time_estimate&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:zt(parseInt(m.time_estimate))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assignee"}),X?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:ae,onChange:n=>ie(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Enter name"}),e.jsx("button",{type:"button",onClick:()=>{E(!1),ie("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:m.assignee,onChange:n=>{n.target.value==="__other__"?(E(!0),w({...m,assignee:""})):w({...m,assignee:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${m.assignee?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),(mt=be==null?void 0:be.members)==null?void 0:mt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:m.category,onChange:n=>w({...m,category:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:dt.map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),e.jsx("select",{value:m.source,onChange:n=>w({...m,source:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Ot.map(n=>e.jsxs("option",{value:n.id,children:[n.icon," ",n.label]},n.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Link"}),e.jsx("input",{type:"text",value:m.source_link,onChange:n=>w({...m,source_link:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"URL or reference to the source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:m.notes,onChange:n=>w({...m,notes:n.target.value}),onPaste:Be,rows:4,className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Running notes, context, updates... (paste images here!)"}),Se&&le==="additional"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Se})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:[e.jsx("input",{ref:G,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:Je,className:"hidden"}),e.jsx("input",{id:"camera-input",type:"file",accept:"image/*",capture:"environment",onChange:Je,className:"hidden"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var n;return(n=document.getElementById("camera-input"))==null?void 0:n.click()},disabled:$,className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"ğŸ“· Take Photo"}),e.jsx("button",{type:"button",onClick:()=>{var n;return(n=G.current)==null?void 0:n.click()},disabled:$,className:"w-full sm:w-auto px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600",children:$?"Uploading...":"ğŸ“ Choose Files"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Max 10MB â€¢ Paste images with âŒ˜V"})]}),N&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:N}),(me.length>0||ge.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[me.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>Ae(n),children:[e.jsx("span",{className:"text-lg",children:"ğŸ“„"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:n.file_name}),e.jsx("p",{className:"text-xs text-gray-400",children:ct(n.file_size)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Ae(n),className:"p-1.5 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg text-indigo-500",title:"View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("a",{href:n.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",title:"Download",children:"â¬‡ï¸"}),e.jsx("button",{type:"button",onClick:()=>{_?_({title:"Remove Attachment",message:`Remove "${n.file_name||n.name}"? This cannot be undone.`,confirmLabel:"Remove",confirmStyle:"danger",icon:"ğŸ—‘ï¸",onConfirm:()=>Ve(n.id)}):Ve(n.id)},className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500",title:"Delete",children:"ğŸ—‘ï¸"})]})]},n.id)),ge.map((n,I)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"â•"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:n.name}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["New â€¢ ",ct(n.size)]})]})]}),e.jsx("button",{type:"button",onClick:()=>at(I),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500 flex-shrink-0",children:"âœ•"})]},I))]})]})]}),le==="dependencies"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Blocked by"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"This task won't start until these are done"})]}),P.length>0&&e.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 rounded-full",children:[P.length," selected"]})]}),m.project_id?pt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No other tasks to link"})]}):e.jsx("div",{className:"space-y-1 max-h-72 overflow-y-auto -mx-1 px-1",children:pt.map(n=>{var ee;const I=P.includes(n.id);return e.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all ${I?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${I?"bg-indigo-500 border-indigo-500":"border-gray-300 dark:border-gray-600"}`,children:I&&e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("input",{type:"checkbox",checked:I,onChange:De=>{De.target.checked?se([...P,n.id]):se(P.filter(He=>He!==n.id))},className:"sr-only"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm truncate ${I?"font-medium text-gray-900 dark:text-gray-100":"text-gray-700 dark:text-gray-300"}`,children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n.status==="done"?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":n.status==="in_progress"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":n.status==="todo"?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:(ee=ot.find(De=>De.id===n.status))==null?void 0:ee.title}),n.critical&&e.jsx("span",{className:"text-xs text-red-500 dark:text-red-400",children:"ğŸš©"})]})]})]},n.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select a project first"})]})]}),le==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ğŸ’¬"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Add a Comment"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Notes and updates about this task"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("textarea",{value:$e,onChange:n=>Ze(n.target.value),placeholder:"Add a comment or note...",rows:2,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"}),e.jsx("button",{type:"button",onClick:()=>{if($e.trim()){const n={id:Date.now().toString(),text:$e.trim(),created_at:new Date().toISOString(),type:"comment"};ke([n,...he]),Ze("")}},disabled:!$e.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium sm:self-end",children:"Add Comment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“‹"})," Activity & Comments",he.length>0&&e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["(",he.length,")"]})]}),he.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ğŸ“"}),e.jsx("p",{className:"text-sm",children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Add notes to track progress and context"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:he.map(n=>e.jsx("div",{className:`p-3 rounded-lg border ${n.type==="comment"?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[n.type==="comment"?e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:n.text}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:n.icon||"â€¢"})," ",n.text]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(n.created_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),n.type==="comment"&&e.jsx("button",{type:"button",onClick:()=>ke(he.filter(I=>I.id!==n.id)),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors touch-manipulation",title:"Delete comment",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},n.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 pt-6 mt-6 border-t border-gray-100 dark:border-gray-700",children:[(i==null?void 0:i.id)&&e.jsx("button",{type:"button",onClick:()=>z(!0),disabled:c,className:"px-3 sm:px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50 text-sm sm:text-base",children:"Delete"}),e.jsx("div",{className:"hidden sm:block",children:A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:te,onChange:n=>ue(n.target.value),placeholder:"Template name...",className:"px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-800 focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{te.trim()&&k&&(k({...m,name:te.trim(),subtasks:O}),ue(""),H(!1))},disabled:!te.trim(),className:"px-3 py-2 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/60 disabled:opacity-50",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{H(!1),ue("")},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{type:"button",onClick:()=>H(!0),className:"px-4 py-2.5 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors text-sm",title:"Save current task settings as a reusable template",children:"ğŸ’¾ Save as Template"})}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",onClick:d,className:"px-3 sm:px-4 py-2.5 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 sm:px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 text-sm sm:text-base",children:c?"Saving...":i!=null&&i.id?"Save":"Create"})]})]}),e.jsx(Ea,{isOpen:!!ve,onClose:()=>Ae(null),attachment:ve,attachments:me,onNavigate:Ae}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ğŸ—‘ï¸"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Task"})]}),e.jsxs("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:['Delete "',i==null?void 0:i.title,'"? This cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{g(i.id),z(!1),d()},className:"px-4 py-2 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Delete"})]})]})})]})},Ga=({isOpen:s,onClose:d,project:i,onSave:f,onDelete:x,onArchive:M,loading:g,onShowConfirm:c})=>{const[p,k]=l.useState({name:"",members:[],customers:[]}),[v,_]=l.useState(""),[G,A]=l.useState("");l.useEffect(()=>{k(i?{name:i.name,members:[...i.members||[]],customers:[...i.customers||[]]}:{name:"",members:[],customers:[]}),_(""),A("")},[i,s]),l.useEffect(()=>{const m=w=>{var P;(w.ctrlKey||w.metaKey)&&w.key==="s"&&s&&(w.preventDefault(),(P=document.querySelector("form"))==null||P.requestSubmit())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[s]);const H=()=>{v.trim()&&!p.members.includes(v.trim())&&(k({...p,members:[...p.members,v.trim()]}),_(""))},D=m=>{k({...p,members:p.members.filter(w=>w!==m)})},z=()=>{G.trim()&&!p.customers.includes(G.trim())&&(k({...p,customers:[...p.customers,G.trim()]}),A(""))},te=m=>{k({...p,customers:p.customers.filter(w=>w!==m)})},ue=async m=>{m.preventDefault(),await f({...p,id:i==null?void 0:i.id}),d()};return e.jsx(Gr,{isOpen:s,onClose:d,title:i?"Edit Project":"New Project",children:e.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:p.name,onChange:m=>k({...p,name:m.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:v,onChange:m=>_(m.target.value),onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),H()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add team member"}),e.jsx("button",{type:"button",onClick:H,className:"px-4 py-2.5 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.members.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>D(m),className:"hover:text-indigo-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customers/Clients"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:G,onChange:m=>A(m.target.value),onKeyDown:m=>m.key==="Enter"&&(m.preventDefault(),z()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add customer/client"}),e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2.5 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.customers.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>te(m),className:"hover:text-purple-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{c({title:"Delete Project",message:`Delete "${i.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ğŸ—‘ï¸",onConfirm:()=>{x(i.id),d()}})},disabled:g,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{M(i.id),d()},disabled:g,className:"px-4 py-2.5 text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl transition-colors disabled:opacity-50",children:i.archived?"Unarchive":"Archive"})]}),e.jsx("button",{type:"button",onClick:d,className:"ml-auto px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium disabled:opacity-50",children:g?"Saving...":i?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Project"]})})]})]})})};function dn(){var vs,ws,Ns,Cs,_s;const{user:s,signOut:d}=Es(),f=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒ":"Ctrl+Alt+",[x,M]=l.useState([]),[g,c]=l.useState([]),[p,k]=l.useState(!0),[v,_]=l.useState(!1),[G,A]=l.useState(null),[H,D]=l.useState(!navigator.onLine),[z,te]=l.useState(null),[ue,m]=l.useState(null);l.useEffect(()=>{const t=()=>D(!1),r=()=>D(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]);const w=(t,r="success")=>{m({message:t,type:r}),setTimeout(()=>m(null),3e3)},P=async()=>{if(ve==="DELETE"){Be(!0);try{await W.from("tasks").delete().eq("user_id",s.id),await W.from("projects").delete().eq("user_id",s.id),await W.from("feedback").delete().eq("user_id",s.id),await W.from("task_templates").delete().eq("user_id",s.id),await d()}catch(t){console.error("Error deleting account:",t),A("Failed to delete account"),Be(!1)}}},se=async()=>{pt(!0);try{const{error:t}=await W.auth.updateUser({data:{display_name:be}});if(t)throw t;Ve(!1),w("Display name saved")}catch(t){console.error("Error saving display name:",t),A("Failed to save display name")}pt(!1)},me=async()=>{yt(!0);try{const{error:t}=await W.auth.resetPasswordForEmail(s.email,{redirectTo:window.location.origin});if(t)throw t;n(!0)}catch(t){console.error("Error sending password reset:",t),A("Failed to send password reset email")}yt(!1)},je=(t,r)=>{localStorage.setItem(t,r),t==="trackli-default-view"&&ee(r),t==="trackli-week-start"&&He(r),t==="trackli-show-confetti"&&Qe(r==="true")},ge=async()=>{et(!0);try{const t=new Date;t.setDate(t.getDate()-parseInt(we));const{data:r,error:a}=await W.from("tasks").select("id").eq("user_id",s.id).eq("status","done").lt("updated_at",t.toISOString());if(a)throw a;if(r.length>0){const{error:o}=await W.from("tasks").delete().in("id",r.map(u=>u.id));if(o)throw o;c(u=>u.filter(C=>!r.find(T=>T.id===C.id))),w(`Cleared ${r.length} completed task${r.length===1?"":"s"}`)}else w("No completed tasks older than "+we+" days")}catch(t){console.error("Error clearing tasks:",t),A("Failed to clear completed tasks")}et(!1)},[K,le]=l.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[Te,N]=l.useState("monthly"),[R,$]=l.useState(!1),[y,X]=l.useState(()=>typeof window<"u"?localStorage.getItem("trackli-dark-mode")==="true":!1),[E,ae]=l.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[ie,ne]=l.useState(1),[Me,Le]=l.useState(!1),[Fe,Se]=l.useState(!1),[b,O]=l.useState(!1),[Z,de]=l.useState(!1),[ye,he]=l.useState(!1),[ke,$e]=l.useState(!1),[Ze,V]=l.useState(!1),[ve,Ae]=l.useState(""),[ht,Be]=l.useState(!1),[be,Je]=l.useState(""),[at,Ve]=l.useState(!1),[Xe,pt]=l.useState(!1),[ct,yt]=l.useState(!1),[mt,n]=l.useState(!1),[I,ee]=l.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[De,He]=l.useState(()=>localStorage.getItem("trackli-week-start")||"0"),[Ue,Qe]=l.useState(()=>localStorage.getItem("trackli-show-confetti")!=="false"),[Ge,et]=l.useState(!1),[we,Zt]=l.useState("30"),[h,S]=l.useState("board"),[j,U]=l.useState(()=>!localStorage.getItem("trackli_onboarding_complete")),[J,Q]=l.useState(0),[ce,fe]=l.useState(null),[tt,B]=l.useState(0),[xe,Pe]=l.useState(()=>{const t=localStorage.getItem("trackli_view_tours_completed");return t?JSON.parse(t):{}}),[qe,_e]=l.useState("all"),[Ne,re]=l.useState(!1),[Oe,ze]=l.useState(!1),[lr,At]=l.useState(!1),[Rt,it]=l.useState(null),[Fs,Ft]=l.useState(null),[Ka,Ja]=l.useState(null),[Xt,Kr]=l.useState(null),[er,wr]=l.useState(null),[bt,dr]=l.useState(!1),[ft,cr]=l.useState(!1),[Nr,Jr]=l.useState(!1),[Cr,Qr]=l.useState(!1),[_r,Zr]=l.useState(!1),[jt,xr]=l.useState(!1),[kt,gr]=l.useState(!1),[Vt,mr]=l.useState(""),[Ie,Bt]=l.useState({}),[Bs,Xr]=l.useState(""),[Is,Qa]=l.useState(!1),[Sr,Za]=l.useState("all"),[es,Xa]=l.useState(""),[It,ts]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_saved_views")||"[]")}catch{return[]}}),[Ws,ur]=l.useState(!1),[Ht,rs]=l.useState(""),[Dr,ss]=l.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_task_templates")||"[]")}catch{return[]}}),[en,tn]=l.useState(!1),[Os,as]=l.useState(!1),ns=l.useRef(!1),[Ps,Ut]=l.useState(!1),[Re,vt]=l.useState({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),[wt,Nt]=l.useState([]),[is,os]=l.useState(!1),[zs,St]=l.useState(!1),[Dt,Tr]=l.useState(null),[tr,hr]=l.useState(!1),[rn,pr]=l.useState(""),[Rs,Vs]=l.useState(!1),yr=l.useRef(null);l.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;Vs(!!t)},[]);const Hs=(t,r=!1)=>{const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a){alert("Voice input is not supported in this browser. Try Chrome or Safari.");return}const o=new a;o.continuous=r,o.interimResults=!0,o.lang="en-GB",o.onstart=()=>{hr(!0)},o.onresult=u=>{let C="";for(let T=0;T<u.results.length;T++)C+=u.results[T][0].transcript;t(C)},o.onerror=u=>{console.error("Speech recognition error:",u.error),hr(!1),u.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access in your browser settings.")},o.onend=()=>{hr(!1)},yr.current=o,o.start()},Mr=()=>{yr.current&&(yr.current.stop(),yr.current=null),hr(!1)},Us=(t,r=!1)=>{tr?Mr():Hs(t,r)},[br,qs]=l.useState(null),[rr,Lr]=l.useState(null),Er=(t,r=null,a=null)=>{const o=t.includes("Failed to fetch")||t.includes("NetworkError")?"Network error - please check your connection":t.includes("JWT")||t.includes("auth")?"Session expired - please refresh the page":t.includes("duplicate")||t.includes("unique")?"This item already exists":t.includes("permission")||t.includes("denied")?"You don't have permission to do this":t;Lr({message:o,retryAction:r,details:a})},[Ye,Ct]=l.useState(null),[qt,Tt]=l.useState(!1),[We,xt]=l.useState(new Set),[sn,an]=l.useState(!1),[Ys,Yt]=l.useState(!1),[Gt,Kt]=l.useState(""),[$r,Ar]=l.useState(""),[Gs,Fr]=l.useState(!1);l.useEffect(()=>{localStorage.setItem("trackli-dark-mode",y),y?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[y]),l.useEffect(()=>{const t=()=>{ae(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{const t=r=>{var u,C,T;if(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.tagName==="SELECT")return;const o=navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey&&r.ctrlKey:r.ctrlKey&&r.altKey;if(o&&(r.key==="k"||r.key==="s")){r.preventDefault(),Se(!0);return}if(r.key==="/"){r.preventDefault(),Se(!0);return}if(r.key==="q"){r.preventDefault(),x.length>0&&(Ar(((u=x[0])==null?void 0:u.id)||""),Yt(!0));return}if(o&&r.key==="t"){r.preventDefault(),x.length>0&&(it(null),ze(!0));return}if(o&&r.key==="p"){r.preventDefault(),Ft(null),At(!0);return}if(o&&r.key==="n"){r.preventDefault(),x.length>0&&(vt({...Re,projectId:((C=x[0])==null?void 0:C.id)||""}),Nt([]),St(!1),pr(""),Ut(!0));return}if(o&&r.key==="v"){r.preventDefault(),x.length>0&&(vt({...Re,projectId:((T=x[0])==null?void 0:T.id)||"",notes:""}),Nt([]),St(!1),pr(" "),Ut(!0));return}if(o&&r.key==="d"){r.preventDefault(),le("myday");return}if(o&&r.key==="b"){r.preventDefault(),le("board");return}if(o&&r.key==="l"){r.preventDefault(),le("calendar");return}if(o&&r.key==="a"){r.preventDefault(),le("tasks");return}if(r.key==="?"||r.shiftKey&&r.key==="/"){r.preventDefault(),S("shortcuts"),O(!0);return}if(r.key==="Escape"&&qt){Tt(!1),xt(new Set);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[x,Re,g]),l.useEffect(()=>{if(E||j)return;if(["myday","calendar","tasks","projects","progress"].includes(K)&&!xe[K]){const r=setTimeout(()=>{fe(K),B(0)},500);return()=>clearTimeout(r)}},[K,xe,E,j]);const ls=t=>{const r={...xe,[t]:!0};Pe(r),localStorage.setItem("trackli_view_tours_completed",JSON.stringify(r)),fe(null),B(0)},Ks=async()=>{try{const t=new Date().toISOString().split("T")[0],r=new Date(Date.now()+864e5).toISOString().split("T")[0],a=new Date(Date.now()+7*864e5).toISOString().split("T")[0],{data:o,error:u}=await W.from("projects").insert({name:"ğŸš€ Getting Started with Trackli",user_id:s.id}).select().single();if(u)throw console.error("Project creation error:",u),u;const C=[{title:"ğŸ‘‹ Welcome! Click me to see task details",description:`This is the task editor. Here you can:

â€¢ Set due dates and start dates
â€¢ Add time estimates
â€¢ Assign to team members
â€¢ Add subtasks
â€¢ Attach files
â€¢ Set up recurring schedules

Try editing this task, then mark it complete!`,status:"todo",project_id:o.id,my_day_date:t,energy_level:"low",time_estimate:5},{title:"â˜€ï¸ Check out My Day view",description:`My Day is your daily focus list. Tasks appear here if:

â€¢ Their start date is today or earlier
â€¢ You manually add them via the â˜€ï¸ icon

Try switching to My Day view in the menu!`,status:"todo",project_id:o.id,start_date:t,energy_level:"medium",time_estimate:10},{title:"ğŸ—“ Explore the Calendar view",description:`The Calendar view lets you:

â€¢ See tasks on their due dates
â€¢ Drag tasks to reschedule them
â€¢ Switch between daily, weekly, and monthly views

This task is due tomorrow!`,status:"todo",project_id:o.id,due_date:r,energy_level:"medium",time_estimate:15},{title:"ğŸ“ Try the Notes feature for meetings",description:`Click the Notes button in the header to:

â€¢ Paste meeting notes
â€¢ Use voice-to-text (speak your notes!)
â€¢ AI extracts action items automatically

Perfect for turning meetings into tasks!`,status:"todo",project_id:o.id,energy_level:"high",time_estimate:20},{title:"âŒ¨ï¸ Learn keyboard shortcuts",description:`Speed up your workflow with shortcuts:

â€¢ âŒ˜/Ctrl + âŒƒ + T â€” New task
â€¢ âŒ˜/Ctrl + S â€” Save
â€¢ Escape â€” Close modal
â€¢ ? â€” Help menu

Click the ? icon anytime for more!`,status:"backlog",project_id:o.id,due_date:a,energy_level:"low",time_estimate:10},{title:"âœ… Complete this task to see the celebration!",description:`When you complete all your My Day tasks, you get a confetti celebration! ğŸ‰

Try completing this task by clicking the circle on the left.`,status:"todo",project_id:o.id,my_day_date:t,energy_level:"low",time_estimate:1}],{data:T,error:L}=await W.from("tasks").insert(C).select();if(L)throw L;const F=T.find(Y=>Y.title.includes("Welcome!"));F&&await W.from("subtasks").insert([{task_id:F.id,title:"Read this task description",completed:!1,position:0},{task_id:F.id,title:"Check out the different views (My Day, Calendar, etc.)",completed:!1,position:1},{task_id:F.id,title:"Complete a task to see it move to Done",completed:!1,position:2}]),as(!0),await _t()}catch(t){console.error("Error creating welcome project:",t)}};l.useEffect(()=>{_t()},[]);const _t=async()=>{var t,r,a,o,u,C;k(!0),A(null);try{const[T,L,F,Y,q,oe,Ce]=await Promise.all([W.from("projects").select("*").order("created_at",{ascending:!1}),W.from("tasks").select("*").order("created_at",{ascending:!1}),W.from("project_members").select("project_id, name"),W.from("project_customers").select("project_id, name"),W.from("attachments").select("*"),W.from("task_dependencies").select("task_id, depends_on_id"),W.auth.getUser()]);if(T.error)throw T.error;if(L.error)throw L.error;const Ke={},Ee={};(t=F.data)==null||t.forEach(pe=>{Ke[pe.project_id]||(Ke[pe.project_id]=[]),Ke[pe.project_id].push(pe.name)}),(r=Y.data)==null||r.forEach(pe=>{Ee[pe.project_id]||(Ee[pe.project_id]=[]),Ee[pe.project_id].push(pe.name)});const nt=T.data.map(pe=>({...pe,members:Ke[pe.id]||[],customers:Ee[pe.id]||[]})),rt={},Wt={};(a=q.data)==null||a.forEach(pe=>{rt[pe.task_id]||(rt[pe.task_id]=[]),rt[pe.task_id].push({...pe,file_url:W.storage.from("attachments").getPublicUrl(pe.file_path).data.publicUrl})}),(o=oe.data)==null||o.forEach(pe=>{Wt[pe.task_id]||(Wt[pe.task_id]=[]),Wt[pe.task_id].push(pe)});const lt=L.data.map(pe=>({...pe,attachments:rt[pe.id]||[],dependencies:Wt[pe.id]||[]}));M(nt),c(lt);const st=(u=Ce.data)==null?void 0:u.user;if(!((C=st==null?void 0:st.user_metadata)==null?void 0:C.has_been_welcomed)&&nt.length===0&&lt.length===0&&!ns.current){ns.current=!0,await Ks(),await W.auth.updateUser({data:{has_been_welcomed:!0}});return}const Pr=new Date;Pr.setHours(0,0,0,0);const Jt=lt.filter(pe=>{if(pe.status!=="backlog"||!pe.start_date)return!1;const Qt=new Date(pe.start_date);return Qt.setHours(0,0,0,0),Qt<=Pr});if(Jt.length>0){const pe=Jt.map(Qt=>Qt.id);c(Qt=>Qt.map(zr=>pe.includes(zr.id)?{...zr,status:"todo"}:zr)),W.from("tasks").update({status:"todo"}).in("id",pe).then(()=>console.log("Auto-moved",pe.length,"tasks to todo"))}}catch(T){console.error("Error fetching data:",T),A(T.message)}finally{k(!1)}},Js=t=>{const r=t.split(`
`),a=Qs(t);return a.length>0?a:Xs(r)},Qs=t=>{const r=t.split(`
`),a=[];let o=-1,u={followUp:-1,owner:-1,dueDate:-1,status:-1},C="|";for(let L=0;L<r.length;L++){const F=r[L].toLowerCase();if(F.includes("|")&&(F.includes("follow")||F.includes("action")||F.includes("task"))){const Y=r[L].split("|").map(q=>q.trim().toLowerCase());for(let q=0;q<Y.length;q++){const oe=Y[q];oe.includes("follow")||oe.includes("action")||oe.includes("task")||oe.includes("item")?u.followUp=q:oe.includes("owner")||oe.includes("assignee")||oe.includes("who")||oe.includes("responsible")?u.owner=q:oe.includes("due")||oe.includes("date")||oe.includes("when")||oe.includes("deadline")?u.dueDate=q:(oe.includes("status")||oe.includes("state")||oe.includes("progress"))&&(u.status=q)}if(u.followUp!==-1){o=L,C="|";break}}if(F.includes("	")&&(F.includes("follow")||F.includes("action")||F.includes("task"))){const Y=r[L].split("	").map(q=>q.trim().toLowerCase());for(let q=0;q<Y.length;q++){const oe=Y[q];oe.includes("follow")||oe.includes("action")||oe.includes("task")||oe.includes("item")?u.followUp=q:oe.includes("owner")||oe.includes("assignee")||oe.includes("who")?u.owner=q:oe.includes("due")||oe.includes("date")||oe.includes("when")?u.dueDate=q:(oe.includes("status")||oe.includes("state"))&&(u.status=q)}if(u.followUp!==-1){o=L,C="	";break}}}if(o===-1||u.followUp===-1)return[];let T=o+1;T<r.length&&/^[\s|:-]+$/.test(r[T].replace(/\t/g,""))&&T++;for(let L=T;L<r.length;L++){const F=r[L].trim();if(!F||!F.includes(C)&&C==="|"||C==="	"&&!F.includes("	")&&F.split(/\s{2,}/).length<2){if(a.length>0)break;continue}const Y=C==="|"?F.split("|").map(rt=>rt.trim()):F.split("	").map(rt=>rt.trim()),q=Y[u.followUp]||"",oe=u.owner!==-1&&Y[u.owner]||"",Ce=u.dueDate!==-1&&Y[u.dueDate]||"",Ke=u.status!==-1?(Y[u.status]||"").toLowerCase():"";if(!q||q.length<3||Ke.includes("done")||Ke.includes("complete")||Ke.includes("closed"))continue;let Ee=Re.date;if(Ce){const rt=Zs(Ce);rt&&(Ee=rt)}const nt=/urgent|asap|critical|important|high/i.test(q)||/urgent|asap|critical|important|high/i.test(Ke);a.push({id:`extracted-table-${L}`,title:q.charAt(0).toUpperCase()+q.slice(1),assignee:oe,dueDate:Ee,selected:!0,critical:nt})}return a},Zs=t=>{if(!t)return null;const r=t.trim().toLowerCase(),a=new Date,o=Yr();if(r==="today"||r==="eod")return a.toISOString().split("T")[0];if(r==="tomorrow")return a.setDate(a.getDate()+1),a.toISOString().split("T")[0];if(r==="asap")return a.toISOString().split("T")[0];const C=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(r);if(C!==-1){let F=(C-a.getDay()+7)%7;return F===0&&(F=7),a.setDate(a.getDate()+F),a.toISOString().split("T")[0]}let T=t.match(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/);if(T){let F,Y;o?(Y=parseInt(T[1])-1,F=parseInt(T[2])):(F=parseInt(T[1]),Y=parseInt(T[2])-1);const q=T[3].length===2?2e3+parseInt(T[3]):parseInt(T[3]),oe=new Date(q,Y,F);if(!isNaN(oe.getTime()))return oe.toISOString().split("T")[0]}if(T=t.match(/(\d{1,2})[\/\-](\d{1,2})(?!\d)/),T){let F,Y;o?(Y=parseInt(T[1])-1,F=parseInt(T[2])):(F=parseInt(T[1]),Y=parseInt(T[2])-1);const q=new Date(a.getFullYear(),Y,F);if(!isNaN(q.getTime()))return q.toISOString().split("T")[0]}const L=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(T=t.match(/(\d{1,2})\s*(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i),T){const F=parseInt(T[1]),Y=L.indexOf(T[2].toLowerCase()),q=new Date(a.getFullYear(),Y,F);if(!isNaN(q.getTime()))return q.toISOString().split("T")[0]}if(T=t.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s*(\d{1,2})/i),T){const F=parseInt(T[2]),Y=L.indexOf(T[1].toLowerCase()),q=new Date(a.getFullYear(),Y,F);if(!isNaN(q.getTime()))return q.toISOString().split("T")[0]}return null},Xs=t=>{var u,C,T,L,F;const r=[],a=[/^[-*â€¢]\s*\[?\s*\]?\s*(.+)/i,/^(?:action|todo|task|to-do|to do)[:\s]+(.+)/i,/^(\d+[.)]\s*.+)/i,/(.+?)\s+(?:will|to|should|must|needs? to|has to)\s+(.+)/i,/(?:@|assigned to:?)\s*(\w+)\s*[-:]\s*(.+)/i,/^(?:ai|action item)[:\s]+(.+)/i,/^follow[ -]?up[:\s]+(.+)/i],o=/^(schedule|send|create|update|review|prepare|draft|complete|finish|follow|contact|call|email|write|set up|organize|coordinate|check|confirm|arrange|book|submit|share|distribute|circulate|research|investigate|look into|find|get|obtain|collect|gather|compile|analyze|assess|evaluate|implement|execute|deliver|present|discuss|meet|sync|align|escalate|resolve|fix|address)/i;for(let Y=0;Y<t.length;Y++){const q=t[Y].trim();if(!q)continue;let oe=!1,Ce="",Ke="";for(const Ee of a){const nt=q.match(Ee);if(nt){Ee.toString().includes("will|to|should")?(Ke=((u=nt[1])==null?void 0:u.trim())||"",Ce=`${Ke} ${((C=nt[2])==null?void 0:C.trim())||""}`.trim()):Ee.toString().includes("@|assigned")?(Ke=((T=nt[1])==null?void 0:T.trim())||"",Ce=((L=nt[2])==null?void 0:L.trim())||""):Ce=((F=nt[1])==null?void 0:F.trim())||"",oe=!0;break}}if(!oe&&o.test(q)&&(Ce=q,oe=!0),!oe&&q.includes(":")&&!q.startsWith("http")){const Ee=q.split(":");if(Ee.length>=2&&Ee[0].length<30){const nt=Ee[0].trim(),rt=Ee.slice(1).join(":").trim();rt.length>5&&o.test(rt)&&(Ke=nt,Ce=rt,oe=!0)}}if(oe&&Ce.length>3){Ce=Ce.replace(/^[-*â€¢]\s*\[?\s*\]?\s*/,"").replace(/^\d+[.)]\s*/,"").replace(/^(?:action|todo|task|ai|action item|follow[ -]?up)[:\s]*/i,"").trim();let Ee=Re.date;const nt=[/by\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/by\s+(\d{1,2}\/\d{1,2})/i,/due\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/(eod|end of day|eow|end of week|asap)/i];for(const rt of nt){const Wt=Ce.match(rt);if(Wt){const lt=Wt[1].toLowerCase(),st=new Date;if(lt==="today"||lt==="eod"||lt==="end of day")Ee=st.toISOString().split("T")[0];else if(lt==="tomorrow")st.setDate(st.getDate()+1),Ee=st.toISOString().split("T")[0];else if(lt==="asap")Ee=st.toISOString().split("T")[0];else if(lt==="eow"||lt==="end of week"){const Or=(5-st.getDay()+7)%7||7;st.setDate(st.getDate()+Or),Ee=st.toISOString().split("T")[0]}else if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(lt)){let Jt=(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(lt)-st.getDay()+7)%7;Jt===0&&(Jt=7),st.setDate(st.getDate()+Jt),Ee=st.toISOString().split("T")[0]}Ce=Ce.replace(rt,"").trim()}}Ce.length>3&&r.push({id:`extracted-${Y}`,title:Ce.charAt(0).toUpperCase()+Ce.slice(1),assignee:Ke,dueDate:Ee,selected:!0,critical:/urgent|asap|critical|important/i.test(Ce)})}}return r},ea=async()=>{if(!(!Re.notes.trim()&&!Dt)){os(!0);try{if(Dt){const t=await fetch("/api/extract-from-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:Dt.base64,mediaType:Dt.mediaType})});if(!t.ok){const o=await t.json();throw new Error(o.error||"Failed to extract tasks from image")}const a=(await t.json()).tasks.map((o,u)=>({id:`img-${Date.now()}-${u}`,title:o.title,assignee:o.assignee||"",dueDate:o.dueDate||Re.date,critical:o.isCritical||!1,selected:!0}));Nt(a),St(!0)}else setTimeout(()=>{const t=Js(Re.notes);Nt(t),St(!0)},300)}catch(t){console.error("Extraction error:",t),A(t.message)}finally{os(!1)}}},ta=t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];if(!r){console.log("No file selected");return}console.log("File selected:",r.name,r.type,r.size);const a=new Image,o=new FileReader;o.onload=C=>{a.onload=()=>{let{width:F,height:Y}=a;if(F>2e3||Y>2e3){const Ee=Math.min(2e3/F,2e3/Y);F=Math.round(F*Ee),Y=Math.round(Y*Ee)}const q=document.createElement("canvas");q.width=F,q.height=Y,q.getContext("2d").drawImage(a,0,0,F,Y);const Ce=q.toDataURL("image/jpeg",.8),Ke=Ce.split(",")[1];console.log("Compressed image size:",Math.round(Ke.length*.75/1024),"KB"),Tr({base64:Ke,mediaType:"image/jpeg",preview:Ce,name:r.name||"photo.jpg"}),A(null)},a.onerror=()=>{console.error("Failed to load image"),A("Failed to load image")},a.src=C.target.result},o.onerror=()=>{console.error("FileReader error:",o.error),A("Failed to read image file")},o.readAsDataURL(r)},ra=async()=>{var r;const t=wt.filter(a=>a.selected);if(t.length!==0){_(!0),A(null);try{const a=Re.projectId||((r=x[0])==null?void 0:r.id);if(!a)throw new Error("Please select a project");const o=x.find(C=>C.id===a),u=(o==null?void 0:o.members)||[];for(const C of t){let T=null;C.assignee&&(T=u.find(Y=>Y.toLowerCase().includes(C.assignee.toLowerCase())||C.assignee.toLowerCase().includes(Y.toLowerCase().split(" ")[0])));const L={title:C.title,description:Re.title?`From meeting: ${Re.title}`:"",project_id:a,status:"todo",critical:C.critical,start_date:null,due_date:C.dueDate||null,assignee:T||C.assignee||null,time_estimate:null,energy_level:"medium",category:"meeting_followup",source:"meeting",source_link:null,customer:null,notes:null},{error:F}=await W.from("tasks").insert(L);if(F)throw F}await _t(),Ut(!1),vt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),Nt([]),St(!1),pr(""),Mr()}catch(a){console.error("Error creating tasks:",a),A(a.message)}finally{_(!1)}}},sr=(t,r,a)=>{Nt(o=>o.map(u=>u.id===t?{...u,[r]:a}:u))},sa=t=>{Nt(r=>r.filter(a=>a.id!==t))},aa=async t=>{_(!0),A(null);try{if(t.id){const{error:a}=await W.from("projects").update({name:t.name}).eq("id",t.id);if(a)throw a;await W.from("project_members").delete().eq("project_id",t.id),await W.from("project_customers").delete().eq("project_id",t.id),t.members.length>0&&await W.from("project_members").insert(t.members.map(o=>({project_id:t.id,name:o}))),t.customers.length>0&&await W.from("project_customers").insert(t.customers.map(o=>({project_id:t.id,name:o})))}else{const{data:a,error:o}=await W.from("projects").insert({name:t.name,user_id:s.id}).select().single();if(o)throw o;t.members.length>0&&await W.from("project_members").insert(t.members.map(u=>({project_id:a.id,name:u}))),t.customers.length>0&&await W.from("project_customers").insert(t.customers.map(u=>({project_id:a.id,name:u})))}await _t();const r=!t.id;w(r?"âœ“ Project created":"âœ“ Project saved")}catch(r){console.error("Error saving project:",r),A(r.message)}finally{_(!1)}},ds=async t=>{_(!0);try{const{error:r}=await W.from("projects").delete().eq("id",t);if(r)throw r;qe===t&&_e("all"),await _t()}catch(r){console.error("Error deleting project:",r),A(r.message)}finally{_(!1)}},Br=async t=>{const r=x.find(o=>o.id===t),a=r!=null&&r.archived?"unarchive":"archive";_(!0);try{const{error:o}=await W.from("projects").update({archived:!(r!=null&&r.archived)}).eq("id",t);if(o)throw o;M(x.map(u=>u.id===t?{...u,archived:!u.archived}:u)),te({taskId:null,previousStatus:null,taskTitle:`Project ${a}d`}),setTimeout(()=>te(null),3e3)}catch(o){console.error(`Error ${a}ing project:`,o),Er(o.message||`Failed to ${a} project`,null,`Project ${a} failed`)}finally{_(!1)}},na=async t=>{if(We.size!==0){_(!0);try{const r=Array.from(We),{error:a}=await W.from("tasks").update({status:t}).in("id",r);if(a)throw a;c(g.map(o=>We.has(o.id)?{...o,status:t}:o)),te({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks moved to ${t.replace("_"," ")}`}),setTimeout(()=>te(null),3e3),Tt(!1),xt(new Set)}catch(r){console.error("Error bulk updating tasks:",r),A(r.message)}finally{_(!1)}}},ia=async()=>{We.size!==0&&Ct({title:"Delete Tasks",message:`Are you sure you want to delete ${We.size} selected task${We.size===1?"":"s"}? This cannot be undone.`,confirmLabel:"Delete",confirmStyle:"danger",icon:"ğŸ—‘ï¸",onConfirm:async()=>{_(!0);try{const t=Array.from(We),{error:r}=await W.from("tasks").delete().in("id",t);if(r)throw r;c(g.filter(a=>!We.has(a.id))),te({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks deleted`}),setTimeout(()=>te(null),3e3),Tt(!1),xt(new Set),Ct(null)}catch(t){console.error("Error bulk deleting tasks:",t),A(t.message)}finally{_(!1)}}})},oa=async t=>{var r;if(!(We.size===0||!t)){_(!0);try{const a=Array.from(We),{error:o}=await W.from("tasks").update({project_id:t}).in("id",a);if(o)throw o;const u=((r=x.find(C=>C.id===t))==null?void 0:r.name)||"project";c(g.map(C=>We.has(C.id)?{...C,project_id:t}:C)),te({taskId:null,previousStatus:null,taskTitle:`${a.length} tasks moved to ${u}`}),setTimeout(()=>te(null),3e3),Tt(!1),xt(new Set)}catch(a){console.error("Error bulk moving tasks:",a),A(a.message)}finally{_(!1)}}},la=async t=>{if(We.size!==0){_(!0);try{const r=Array.from(We),{error:a}=await W.from("tasks").update({assignee:t||null}).in("id",r);if(a)throw a;c(g.map(o=>We.has(o.id)?{...o,assignee:t||null}:o)),te({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks assigned to ${t||"nobody"}`}),setTimeout(()=>te(null),3e3),Tt(!1),xt(new Set)}catch(r){console.error("Error bulk assigning tasks:",r),A(r.message)}finally{_(!1)}}},da=async()=>{if(We.size!==0){_(!0);try{const t=Array.from(We),r=g.filter(C=>We.has(C.id)),o=!(r.filter(C=>C.critical).length>r.length/2),{error:u}=await W.from("tasks").update({critical:o}).in("id",t);if(u)throw u;c(g.map(C=>We.has(C.id)?{...C,critical:o}:C)),te({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks ${o?"marked critical":"unmarked"}`}),setTimeout(()=>te(null),3e3),Tt(!1),xt(new Set)}catch(t){console.error("Error bulk toggling critical:",t),A(t.message)}finally{_(!1)}}},ca=()=>{xt(new Set(Lt.map(t=>t.id)))},xa=()=>{xt(new Set)},cs=async(t,r=[],a=[])=>{_(!0),A(null);try{let o=t.id;if(o){const{error:C}=await W.from("tasks").update({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).eq("id",o);if(C)throw C;await W.from("task_dependencies").delete().eq("task_id",o),t.dependencies&&t.dependencies.length>0&&await W.from("task_dependencies").insert(t.dependencies.map(Y=>({task_id:o,depends_on_id:Y})));const T=a.map(Y=>Y.id),{data:L}=await W.from("attachments").select("id, file_path").eq("task_id",o),F=(L==null?void 0:L.filter(Y=>!T.includes(Y.id)))||[];for(const Y of F)await W.storage.from("attachments").remove([Y.file_path]),await W.from("attachments").delete().eq("id",Y.id)}else{const{data:C,error:T}=await W.from("tasks").insert({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).select().single();if(T)throw T;if(o=C.id,t.dependencies&&t.dependencies.length>0&&await W.from("task_dependencies").insert(t.dependencies.map(L=>({task_id:o,depends_on_id:L}))),t.recurrence_type&&t.start_date){const L=t.recurrence_end_date?Ds(t.start_date,t.recurrence_type,0,t.recurrence_end_date):Ds(t.start_date,t.recurrence_type,t.recurrence_count||8);let F=null;t.due_date&&t.start_date&&(F=new Date(t.due_date)-new Date(t.start_date));const Y=L.map(q=>{let oe=null;if(F!==null){const Ce=new Date(q);Ce.setTime(Ce.getTime()+F),oe=Ce.toISOString().split("T")[0]}return{title:t.title,description:t.description,project_id:t.project_id,status:"backlog",critical:t.critical,start_date:q,start_time:t.start_time||null,end_time:t.end_time||null,due_date:oe,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type,recurrence_parent_id:o,subtasks:t.subtasks||[]}});if(Y.length>0){const{error:q}=await W.from("tasks").insert(Y);q&&console.error("Error creating future occurrences:",q)}}}for(const C of r){const T=`${s.id}/${o}/${Date.now()}_${C.name}`,{error:L}=await W.storage.from("attachments").upload(T,C);if(L)throw L;await W.from("attachments").insert({task_id:o,file_name:C.name,file_path:T,file_size:C.size,file_type:C.type})}await _t();const u=!t.id;w(u?"âœ“ Task created":"âœ“ Task saved")}catch(o){console.error("Error saving task:",o),Er(o.message||"Failed to save task",()=>cs(t,r,a),"Save failed")}finally{_(!1)}},ar=async(t,r=!1)=>{const a=g.find(o=>o.id===t);if(a&&(a.recurrence_type||a.recurrence_parent_id)&&!r&&!er){wr({taskId:t,title:a.title,parentId:a.recurrence_parent_id||a.id});return}_(!0);try{if(r&&a){const o=a.recurrence_parent_id||a.id,u=g.filter(T=>T.id===o||T.recurrence_parent_id===o);for(const T of u){const{data:L}=await W.from("attachments").select("file_path").eq("task_id",T.id);(L==null?void 0:L.length)>0&&await W.storage.from("attachments").remove(L.map(F=>F.file_path))}const{error:C}=await W.from("tasks").delete().or(`id.eq.${o},recurrence_parent_id.eq.${o}`);if(C)throw C;await _t(),w(`Deleted ${u.length} recurring tasks`)}else{const{data:o}=await W.from("attachments").select("file_path").eq("task_id",t);(o==null?void 0:o.length)>0&&await W.storage.from("attachments").remove(o.map(C=>C.file_path));const{error:u}=await W.from("tasks").delete().eq("id",t);if(u)throw u;await _t(),w("Task deleted")}}catch(o){console.error("Error deleting task:",o),Er(o.message||"Failed to delete task",()=>ar(t,r),"Delete failed")}finally{_(!1),wr(null)}},ga=async(t,r,a=null)=>{var u;if(!t.trim())return;const o=r||((u=x[0])==null?void 0:u.id);if(o)try{_(!0);const{data:C,error:T}=await W.from("tasks").insert({title:t.trim(),project_id:o,status:"backlog",due_date:a,energy_level:"medium",category:"deliverable",source:"ad_hoc"}).select().single();if(T)throw T;c(L=>[...L,{...C,attachments:[],dependencies:[]}]),Kt(""),Yt(!1)}catch(C){console.error("Error creating task:",C),A(C.message)}finally{_(!1)}},Ir=async(t,r)=>{try{const a=g.find(u=>u.id===t),{error:o}=await W.from("tasks").update({my_day_date:r}).eq("id",t);if(o)throw o;c(u=>u.map(C=>C.id===t?{...C,my_day_date:r}:C)),r&&new Date(r).toDateString()===new Date().toDateString()&&w(`â˜€ï¸ Added "${a==null?void 0:a.title}" to My Day`)}catch(a){console.error("Error updating my_day_date:",a)}},Mt=async(t,r)=>{try{const a=g.find(C=>C.id===t),{error:o}=await W.from("tasks").update({status:r,completed_at:r==="done"?new Date().toISOString():null}).eq("id",t);if(o)throw o;const u=a==null?void 0:a.status;r==="done"&&(a!=null&&a.recurrence_type)?await _t():c(g.map(C=>C.id===t?{...C,status:r,completed_at:r==="done"?new Date().toISOString():null}:C)),r==="done"&&(te({taskId:t,previousStatus:u,taskTitle:a==null?void 0:a.title}),setTimeout(()=>te(null),5e3))}catch(a){console.error("Error updating task status:",a),A(a.message)}},xs=async(t,r)=>{try{const{error:a}=await W.from("tasks").update({due_date:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,due_date:r}:o))}catch(a){console.error("Error setting due date:",a),A(a.message)}},gs=async(t,r)=>{try{const{error:a}=await W.from("tasks").update({title:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,title:r}:o))}catch(a){console.error("Error updating task title:",a),A(a.message)}},ms=async(t,r)=>{try{const{error:a}=await W.from("tasks").update({critical:r}).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,critical:r}:o)),w(r?"ğŸš© Marked as critical":"âœ“ Critical flag removed")}catch(a){console.error("Error toggling critical:",a),A(a.message)}},ma=async(t,r)=>{try{const{error:a}=await W.from("tasks").update(r).eq("id",t);if(a)throw a;c(g.map(o=>o.id===t?{...o,...r}:o))}catch(a){console.error("Error updating task from calendar:",a),A(a.message)}},ua=async()=>{if(z)try{await W.from("tasks").update({status:z.previousStatus}).eq("id",z.taskId),c(t=>t.map(r=>r.id===z.taskId?{...r,status:z.previousStatus}:r)),te(null)}catch(t){console.error("Error undoing:",t),A(t.message)}},us=(t,r)=>{Kr(r),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",r.id)},hs=(t,r)=>{t.preventDefault()},ps=(t,r)=>{t.preventDefault(),Xt&&Xt.status!==r&&Mt(Xt.id,r),Kr(null)},ha=[...new Set(g.map(t=>t.assignee).filter(Boolean))];[...new Set(g.map(t=>t.customer).filter(Boolean))];const nr=bt||ft||Nr||Cr||_r||jt||kt||Vt.trim()||Object.keys(Ie).length>0,ys=()=>{dr(!1),cr(!1),Jr(!1),Qr(!1),Zr(!1),xr(!1),gr(!1),mr(""),Bt({}),Xr("")},bs=t=>{const r={id:Date.now(),name:t,filters:{selectedProjectId:qe,filterCritical:bt,filterOverdue:ft,filterBlocked:Nr,filterActive:Cr,filterBacklog:_r,filterDueToday:jt,filterMyDay:kt,searchQuery:Vt,fieldFilters:Ie}},a=[...It,r];ts(a),localStorage.setItem("trackli_saved_views",JSON.stringify(a)),ur(!1),rs("")},pa=t=>{_e(t.filters.selectedProjectId||"all"),dr(t.filters.filterCritical||!1),cr(t.filters.filterOverdue||!1),Jr(t.filters.filterBlocked||!1),Qr(t.filters.filterActive||!1),Zr(t.filters.filterBacklog||!1),xr(t.filters.filterDueToday||!1),gr(t.filters.filterMyDay||!1),mr(t.filters.searchQuery||""),Bt(t.filters.fieldFilters||{})},ya=t=>{const r=It.filter(a=>a.id!==t);ts(r),localStorage.setItem("trackli_saved_views",JSON.stringify(r))},ba=t=>{const r={id:Date.now(),name:t.name,title:t.title||"",description:t.description||"",project_id:t.project_id||"",category:t.category||"deliverable",energy_level:t.energy_level||"medium",time_estimate:t.time_estimate||"",source:t.source||"ad_hoc",assignee:t.assignee||"",customer:t.customer||"",critical:t.critical||!1,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,subtasks:t.subtasks||[]},a=[...Dr,r];return ss(a),localStorage.setItem("trackli_task_templates",JSON.stringify(a)),r},fa=t=>{const r=Dr.filter(a=>a.id!==t);ss(r),localStorage.setItem("trackli_task_templates",JSON.stringify(r))};g.filter(t=>qe!=="all"&&t.project_id!==qe?!1:ir(t)).length;const Lt=g.filter(t=>{var r,a,o,u,C,T;if(!Ne&&t.project_id){const L=x.find(F=>F.id===t.project_id);if(L!=null&&L.archived)return!1}if(qe!=="all"&&t.project_id!==qe||bt&&!t.critical||ft&&ut(t.due_date,t.status)!=="overdue"||Nr&&!gt(t,g)||Cr&&!["todo","in_progress"].includes(t.status)||_r&&t.status!=="backlog"||jt&&ut(t.due_date,t.status)!=="today"||kt&&!qr(t))return!1;if(Vt.trim()){const L=Vt.toLowerCase(),F=(r=t.title)==null?void 0:r.toLowerCase().includes(L),Y=(a=t.description)==null?void 0:a.toLowerCase().includes(L),q=(o=t.customer)==null?void 0:o.toLowerCase().includes(L),oe=(u=t.assignee)==null?void 0:u.toLowerCase().includes(L),Ce=(T=(C=x.find(Ke=>Ke.id===t.project_id))==null?void 0:C.name)==null?void 0:T.toLowerCase().includes(L);if(!F&&!Y&&!q&&!oe&&!Ce)return!1}for(const[L,F]of Object.entries(Ie))if(F==="__blank__"){if(L==="assignee"&&t.assignee||L==="customer"&&t.customer||L==="category"&&t.category||L==="energy_level"&&t.energy_level||L==="source"&&t.source||L==="due_date"&&t.due_date)return!1}else if(L==="assignee"&&t.assignee!==F||L==="customer"&&t.customer!==F||L==="category"&&t.category!==F||L==="energy_level"&&t.energy_level!==F||L==="source"&&t.source!==F||L==="due_date"&&F==="has_date"&&!t.due_date)return!1;if(Is&&!ir(t))return!1;if(Sr!=="all"&&es){const L=parseInt(es);if(Sr==="lt"&&(t.time_estimate||0)>=L||Sr==="gt"&&(t.time_estimate||0)<=L)return!1}return!0}),fs=t=>{if(!t.start_date)return!1;const r=new Date;r.setHours(0,0,0,0);const a=new Date(t.start_date);return a.setHours(0,0,0,0),a>r},ja=(t,r=!1)=>{const a={high:0,medium:1,low:2};return[...t].sort((o,u)=>{if(r){const Y=fs(o),q=fs(u);if(Y&&!q)return 1;if(!Y&&q)return-1}if(o.critical&&!u.critical)return-1;if(!o.critical&&u.critical)return 1;const C=!!o.due_date,T=!!u.due_date;if(C&&T){const Y=new Date(o.due_date)-new Date(u.due_date);if(Y!==0)return Y}else{if(C&&!T)return-1;if(!C&&T)return 1}const L=a[o.energy_level]??1,F=a[u.energy_level]??1;return L!==F?L-F:new Date(o.created_at)-new Date(u.created_at)})},Wr=t=>{const r=Lt.filter(a=>a.status===t);return t==="done"?[...r].sort((a,o)=>{const u=a.completed_at?new Date(a.completed_at):new Date(0);return(o.completed_at?new Date(o.completed_at):new Date(0))-u}):ja(r,t==="backlog")},fr=Lt.filter(t=>t.critical&&t.status!=="done").length,jr=Lt.filter(t=>ut(t.due_date,t.status)==="overdue").length,kr=Lt.filter(t=>ut(t.due_date,t.status)==="today").length;Lt.filter(t=>gt(t,g)&&t.status!=="done").length;const vr=Lt.filter(t=>qr(t)).length;Lt.filter(t=>t.status!=="done").reduce((t,r)=>t+(r.time_estimate||0),0);const ka=(()=>{const t=g.filter(u=>u.status==="done"&&u.completed_at);if(t.length===0)return 0;const r=new Set(t.map(u=>new Date(u.completed_at).toDateString()));let a=0,o=new Date;for(o.setHours(0,0,0,0);r.has(o.toDateString());)a++,o.setDate(o.getDate()-1);if(a===0){const u=new Date;for(u.setDate(u.getDate()-1),u.setHours(0,0,0,0);r.has(u.toDateString());)a++,u.setDate(u.getDate()-1)}return a})(),js=(()=>{const t=new Date,r=new Date(t);r.setDate(r.getDate()-7);const a=g.filter(o=>{if(o.status!=="done"||!o.completed_at)return!1;const u=new Date(o.completed_at);return u>=r&&u<=t});return{count:a.length,time:a.reduce((o,u)=>o+(u.time_estimate||0),0)}})(),ks=new Date;ks.setHours(0,0,0,0);const va=g.filter(t=>t.status==="done"&&t.completed_at&&new Date(t.completed_at)>=ks).length;return g.filter(t=>t.due_date===new Date().toISOString().split("T")[0]&&t.status!=="done").length,p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full drop-shadow-xl",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"loading-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"loading-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#loading-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#loading-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Trackli"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading your tasks..."})]})}):e.jsx(Ta,{onRefresh:_t,children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-200",children:[H&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-amber-500 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m-3.536-3.536a4 4 0 010-5.656m-7.072 7.072a9 9 0 010-12.728m3.536 3.536a4 4 0 010 5.656"})}),"You're offline â€” changes won't sync until you reconnect"]})}),rr&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl p-4 shadow-lg animate-in slide-in-from-bottom-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:rr.details||"Error"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:rr.message}),rr.retryAction&&e.jsx("button",{onClick:()=>{Lr(null),rr.retryAction()},className:"mt-2 px-3 py-1 bg-red-100 dark:bg-red-800/50 hover:bg-red-200 dark:hover:bg-red-800 text-red-700 dark:text-red-200 rounded-lg text-xs font-medium transition-colors",children:"Try Again"})]}),e.jsx("button",{onClick:()=>Lr(null),className:"p-2 sm:p-1 hover:bg-red-100 dark:hover:bg-red-800/50 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),z&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-4 animate-in slide-in-from-bottom-5",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm font-medium",children:['"',z.taskTitle,'" marked as done']}),e.jsx("button",{onClick:ua,className:"px-3 py-1 bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg text-sm font-semibold transition-colors",children:"Undo"}),e.jsx("button",{onClick:()=>te(null),className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ue&&e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[ue.type==="success"?e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-blue-400 dark:text-blue-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:ue.message}),e.jsx("button",{onClick:()=>m(null),className:"p-2 sm:p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>$(!R),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",title:"Menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),R&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 sm:bg-black/20 animate-fadeIn",onClick:()=>$(!1)}),e.jsxs("div",{className:"fixed sm:absolute top-0 sm:top-full left-0 h-screen sm:h-auto w-72 sm:w-56 sm:mt-2 sm:rounded-xl shadow-2xl border-r sm:border border-gray-200 dark:border-gray-700 py-2 z-[1000] animate-slideInFromLeft sm:animate-none overflow-y-auto",style:{backgroundColor:y?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"sm:hidden flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Menu"}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsxs("button",{onClick:()=>{le("myday"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="myday"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"â˜€ï¸"}),e.jsx("span",{className:"font-medium",children:"My Day"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"D"]})]}),e.jsxs("button",{onClick:()=>{le("board"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="board"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ğŸ“‹"}),e.jsx("span",{className:"font-medium",children:"Board"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"B"]})]}),e.jsxs("button",{onClick:()=>{le("calendar"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="calendar"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ğŸ—“"}),e.jsx("span",{className:"font-medium",children:"Calendar"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"L"]})]}),e.jsxs("button",{onClick:()=>{le("tasks"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="tasks"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ğŸ—ƒï¸"}),e.jsx("span",{className:"font-medium",children:"All Tasks"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[f,"A"]})]}),e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Manage"}),e.jsxs("button",{onClick:()=>{le("projects"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="projects"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ğŸ“"}),e.jsx("span",{className:"font-medium",children:"Projects"})]}),e.jsxs("button",{onClick:()=>{le("progress"),$(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${K==="progress"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ğŸ“Š"}),e.jsx("span",{className:"font-medium",children:"Progress"})]}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Settings"}),e.jsxs("button",{onClick:()=>{X(!y)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:y?"â˜€ï¸":"ğŸŒ™"}),e.jsx("span",{className:"font-medium",children:y?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:()=>{var t;vt({...Re,projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Ut(!0),$(!1)},disabled:x.length===0,className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“"}),e.jsx("span",{className:"font-medium",children:"Import Notes"})]}),e.jsxs("button",{onClick:()=>{de(!0),$(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sm:hidden",children:[e.jsx("span",{className:"text-lg",children:"ğŸ’¬"}),e.jsx("span",{className:"font-medium",children:"Send Feedback"})]}),e.jsxs("button",{onClick:()=>{$e(!0),$(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:"âš™ï¸"}),e.jsx("span",{className:"font-medium",children:"Settings"})]}),e.jsxs("button",{onClick:()=>{d(),$(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx("span",{className:"text-lg",children:"ğŸšª"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]}),e.jsx("div",{className:"h-8"})]})]})]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:K==="myday"?"â˜€ï¸ My Day":K==="board"?"ğŸ“‹ Board":K==="calendar"?"ğŸ—“ Calendar":K==="tasks"?"ğŸ—ƒï¸ All Tasks":K==="progress"?"ğŸ“Š Progress":"ğŸ“ Projects"})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"mobile-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"mobile-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#mobile-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#mobile-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("span",{className:"text-base font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden xl:flex items-center gap-2.5",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10",children:e.jsxs("svg",{viewBox:"0 0 56 56",fill:"none",className:"w-full h-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"desktop-left",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5"}),e.jsx("stop",{offset:"100%",stopColor:"#7C3AED"})]}),e.jsxs("linearGradient",{id:"desktop-right",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9333EA"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})]}),e.jsx("path",{d:"M6 18L28 6L28 38L6 26Z",fill:"url(#desktop-left)"}),e.jsx("path",{d:"M28 6L50 18L50 46L28 38Z",fill:"url(#desktop-right)"}),e.jsx("path",{d:"M6 18L28 6L50 18L28 30Z",fill:"#DDD6FE"}),e.jsx("path",{d:"M18 20L25 27L38 14",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h1",{className:"hidden sm:block text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>X(!y),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:y?"Light mode":"Dark mode",children:y?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),K==="board"&&e.jsx("button",{onClick:()=>{Tt(!qt),xt(new Set)},className:`hidden sm:block p-2 rounded-xl transition-colors ${qt?"bg-indigo-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400"}`,title:"Bulk select",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("button",{onClick:()=>{Ft(null),At(!0)},className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-teal-500 text-white rounded-lg sm:rounded-xl hover:bg-teal-600 transition-colors text-sm font-medium items-center gap-1.5",title:"âŒ˜P",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"P"}),"roject"]})]}),e.jsxs("button",{onClick:()=>{it(null),ze(!0)},disabled:x.length===0,className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg sm:rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all text-sm font-medium items-center gap-1.5 shadow-lg shadow-indigo-500/25 disabled:opacity-50",title:`${f}T`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"T"}),"ask"]})]}),e.jsxs("button",{onClick:()=>{var t;vt({...Re,projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Ut(!0)},disabled:x.length===0,className:"hidden sm:flex px-3 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 transition-colors text-sm font-medium items-center gap-1.5 disabled:opacity-50",title:"Import Meeting Notes (âŒ˜N)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Notes"})]}),e.jsx("button",{onClick:()=>O(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Help Guide",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(s==null?void 0:s.email)===As&&e.jsx("button",{onClick:()=>he(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"View Feedback",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("button",{onClick:()=>$e(!0),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Settings",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:d,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Sign Out",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),K==="board"&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2",children:[e.jsxs("div",{className:"sm:hidden flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:qe,onChange:t=>_e(t.target.value),className:"w-full appearance-none pl-3 pr-7 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ğŸ“ All Projects"}),x.filter(t=>!t.archived||Ne).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ğŸ“¦ ":"ğŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("button",{onClick:()=>Le(!0),className:`relative p-2.5 rounded-xl border transition-all ${nr?"bg-indigo-500 border-indigo-500 text-white":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),nr&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:Object.keys(Ie).length+(bt?1:0)+(jt?1:0)+(ft?1:0)+(kt?1:0)})]}),e.jsx("button",{onClick:()=>Se(!0),className:"p-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-600 dark:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),Me&&wa.createPortal(e.jsxs("div",{className:"sm:hidden fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>Le(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Filters"}),e.jsx("button",{onClick:()=>Le(!1),className:"p-2 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Quick Filters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>dr(!bt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${bt?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["ğŸš© Critical (",fr,")"]}),e.jsxs("button",{onClick:()=>xr(!jt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${jt?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Today (",kr,")"]}),e.jsxs("button",{onClick:()=>cr(!ft),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${ft?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Overdue (",jr,")"]}),e.jsxs("button",{onClick:()=>gr(!kt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${kt?"bg-amber-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["â˜€ï¸ My Day (",vr,")"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Filter by Field"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:Ie.assignee||"",onChange:t=>Bt(t.target.value?{...Ie,assignee:t.target.value}:(({assignee:r,...a})=>a)(Ie)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Assignee: All"}),e.jsx("option",{value:"__blank__",children:"Assignee: (Blank)"}),[...new Set(g.map(t=>t.assignee).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ie.customer||"",onChange:t=>Bt(t.target.value?{...Ie,customer:t.target.value}:(({customer:r,...a})=>a)(Ie)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Customer: All"}),e.jsx("option",{value:"__blank__",children:"Customer: (Blank)"}),[...new Set(g.map(t=>t.customer).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Ie.category||"",onChange:t=>Bt(t.target.value?{...Ie,category:t.target.value}:(({category:r,...a})=>a)(Ie)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Category: All"}),dt.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]}),e.jsxs("select",{value:Ie.energy_level||"",onChange:t=>Bt(t.target.value?{...Ie,energy_level:t.target.value}:(({energy_level:r,...a})=>a)(Ie)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Effort: All"}),e.jsx("option",{value:"high",children:"High Effort"}),e.jsx("option",{value:"medium",children:"Medium Effort"}),e.jsx("option",{value:"low",children:"Low Effort"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[nr&&e.jsx("button",{onClick:()=>{ys(),Le(!1)},className:"flex-1 p-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:()=>Le(!1),className:"flex-1 p-3 bg-indigo-500 text-white rounded-xl text-sm font-medium",children:"Apply"})]})]})]}),document.body),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 min-w-max overflow-x-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:qe,onChange:t=>_e(t.target.value),className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"all",children:"ğŸ“ All Projects"}),x.filter(t=>!t.archived||Ne).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ğŸ“¦ ":"ğŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>dr(!bt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${bt?"bg-red-500 text-white shadow-sm":fr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"ğŸš©"}),e.jsx("span",{className:"hidden sm:inline",children:"Critical"}),(bt||fr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${bt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:fr})]}),e.jsxs("button",{onClick:()=>xr(!jt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${jt?"bg-orange-500 text-white shadow-sm":kr>0?"text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Due Today"}),e.jsx("span",{className:"sm:hidden",children:"Today"}),(jt||kr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${jt?"bg-white/20":"bg-orange-100 dark:bg-orange-900/50"}`,children:kr})]}),e.jsxs("button",{onClick:()=>cr(!ft),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${ft?"bg-red-600 text-white shadow-sm":jr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"Overdue"}),(ft||jr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${ft?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:jr})]}),e.jsxs("button",{onClick:()=>gr(!kt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${kt?"bg-amber-500 text-white shadow-sm":vr>0?"text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{className:"hidden sm:inline",children:"My Day"}),(kt||vr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${kt?"bg-white/20":"bg-amber-100 dark:bg-amber-900/50"}`,children:vr})]})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Object.entries(Ie).map(([t,r])=>{var u,C;const a={assignee:"Assignee",customer:"Customer",category:"Category",energy_level:"Effort",source:"Source",due_date:"Due Date"};let o=r;return r==="__blank__"?o="(Blank)":t==="category"?o=((u=dt.find(T=>T.id===r))==null?void 0:u.label)||r:t==="energy_level"?o=r==="high"?"High":r==="medium"?"Medium":"Low":t==="source"?o=((C=Ot.find(T=>T.id===r))==null?void 0:C.label)||r:t==="due_date"&&r==="has_date"&&(o="Has Date"),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[a[t],": ",o,e.jsx("button",{onClick:()=>{const T={...Ie};delete T[t],Bt(T)},className:"ml-0.5 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Bs,onChange:t=>Xr(t.target.value),className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"+ Filter"}),!Ie.assignee&&e.jsx("option",{value:"assignee",children:"Assignee"}),!Ie.customer&&e.jsx("option",{value:"customer",children:"Customer"}),!Ie.category&&e.jsx("option",{value:"category",children:"Category"}),!Ie.energy_level&&e.jsx("option",{value:"energy_level",children:"Effort"}),!Ie.source&&e.jsx("option",{value:"source",children:"Source"}),!Ie.due_date&&e.jsx("option",{value:"due_date",children:"Due Date"})]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:Vt,onChange:t=>mr(t.target.value),className:"w-32 sm:w-40 pl-7 pr-2 py-1 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent focus:bg-white dark:focus:bg-gray-700 transition-colors"}),e.jsx("svg",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Vt&&e.jsx("button",{onClick:()=>mr(""),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[nr&&e.jsxs("button",{onClick:ys,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]}),e.jsxs("label",{className:"hidden sm:flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:Ne,onChange:t=>re(t.target.checked),className:"w-3 h-3 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Archived"]})]}),It.length>0&&e.jsxs("div",{className:"relative border-l border-gray-200 dark:border-gray-700 pl-2",children:[e.jsxs("select",{onChange:t=>{const r=It.find(a=>a.id===parseInt(t.target.value));r&&pa(r),t.target.value=""},className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600",children:[e.jsx("option",{value:"",children:"ğŸ“‘ Views"}),It.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),nr&&e.jsx("button",{onClick:()=>ur(!0),className:"p-2 sm:p-1 text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 touch-manipulation",title:"Save current filters as a view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]})]}),x.length===0&&e.jsxs("div",{className:"max-w-md mx-auto mt-12 sm:mt-20 text-center px-6",children:[e.jsx("div",{className:"w-24 h-24 sm:w-20 sm:h-20 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-12 h-12 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-base sm:text-base",children:"Get started by creating your first project."}),e.jsx("button",{onClick:()=>{Ft(null),At(!0)},className:"w-full sm:w-auto px-8 py-4 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 text-lg sm:text-base active:scale-95",children:"Create Your First Project"})]}),x.length>0&&e.jsxs(e.Fragment,{children:[qt&&e.jsx("div",{className:"sticky top-[73px] z-30 bg-indigo-600 dark:bg-indigo-700 border-b border-indigo-500",children:e.jsx("div",{className:"max-w-full mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{Tt(!1),xt(new Set)},className:"p-1.5 hover:bg-indigo-500 rounded-lg transition-colors text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("span",{className:"text-white font-medium",children:[We.size," task",We.size!==1?"s":""," selected"]}),e.jsx("button",{onClick:ca,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Select all"}),e.jsx("button",{onClick:xa,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Deselect all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>t.target.value&&na(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Status..."}),e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsxs("select",{onChange:t=>t.target.value&&oa(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Project..."}),x.filter(t=>!t.archived).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>la(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Assign..."}),e.jsx("option",{value:"",children:"Unassign"}),ha.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:da,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 border border-white/30 text-white rounded-lg text-sm font-medium transition-colors",title:"Toggle critical flag",children:"ğŸš© Critical"}),e.jsx("button",{onClick:ia,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})}),K==="myday"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Va,{tasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{it(t),ze(!0)},allTasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),onQuickStatusChange:Mt,onUpdateMyDayDate:Ir,showConfettiPref:Ue})},"myday"),K==="calendar"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ra,{tasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{it(t),ze(!0)},onCreateTask:t=>{it(t),ze(!0)},allTasks:g.filter(t=>{var r;return!t.project_id||!((r=x.find(a=>a.id===t.project_id))!=null&&r.archived)}),onUpdateTask:ma,onDeleteTask:ar,viewMode:Te,setViewMode:N,onShowConfirm:Ct})},"calendar"),K==="tasks"&&e.jsx("div",{className:"animate-fadeIn h-[calc(100vh-140px)]",children:e.jsx(Ha,{tasks:g,projects:x,onEditTask:t=>{it(t),ze(!0)},allTasks:g})},"tasks"),K==="projects"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-6 sm:py-8 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Projects"}),e.jsxs("button",{onClick:()=>{Ft(null),At(!0)},className:"px-3 sm:px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium flex items-center gap-2 text-sm sm:text-base",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 sm:mb-4",children:["Active Projects (",x.filter(t=>!t.archived).length,")"]}),e.jsxs("div",{className:"space-y-3",children:[x.filter(t=>!t.archived).map(t=>{var u,C;const r=g.filter(T=>T.project_id===t.id),a=r.filter(T=>T.status==="done").length,o=r.length>0?Math.round(a/r.length*100):0;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-2",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:t.name}),e.jsx("button",{onClick:()=>{Ft(t),At(!0)},className:"sm:hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[r.length," tasks"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((u=t.members)==null?void 0:u.length)||0," members"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((C=t.customers)==null?void 0:C.length)||0," customers"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 w-10 text-right",children:[o,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-100 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>{_e(t.id),le("board")},className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"View Board"}),e.jsx("button",{onClick:()=>{Ft(t),At(!0)},className:"hidden sm:block p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>{const T=g.filter(L=>L.project_id===t.id&&L.status!=="done");Ct({title:"Archive Project",message:`Archive "${t.name}"?${T.length>0?` This will hide ${T.length} active task${T.length===1?"":"s"} from the board.`:""} You can unarchive it later.`,confirmLabel:"Archive",confirmStyle:"warning",icon:"ğŸ“¦",onConfirm:()=>Br(t.id)})},className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors touch-manipulation",title:"Archive project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]})]})},t.id)}),x.filter(t=>!t.archived).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"ğŸ“"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"No active projects yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first project to organize your tasks"})]})]})]}),x.filter(t=>t.archived).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs sm:text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 sm:mb-4",children:["Archived (",x.filter(t=>t.archived).length,")"]}),e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.archived).map(t=>{const r=g.filter(a=>a.project_id===t.id);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4 opacity-75",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ“¦"}),e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400 truncate",children:t.name})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1 ml-7",children:[r.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 pt-2 sm:pt-0 border-t sm:border-t-0 border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>Br(t.id),className:"flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors font-medium touch-manipulation",children:"Unarchive"}),e.jsx("button",{onClick:()=>{Ct({title:"Delete Project",message:`Delete "${t.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ğŸ—‘ï¸",onConfirm:()=>{ds(t.id),Ct(null)}})},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors touch-manipulation",title:"Delete permanently",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)})})]})]},"projects"),K==="progress"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"ğŸ“Š Progress Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ”¥"}),e.jsx("span",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:ka})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:va})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ—“"}),e.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:js.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â±ï¸"}),e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:zt(js.time)||"0h"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time This Week"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Last 7 Days"}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:(()=>{const t=[];for(let a=6;a>=0;a--){const o=new Date;o.setDate(o.getDate()-a),o.setHours(0,0,0,0);const u=o.toDateString(),C=o.toLocaleDateString(void 0,{weekday:"short"}),T=g.filter(L=>L.status==="done"&&L.completed_at&&new Date(L.completed_at).toDateString()===u).length;t.push({dayName:C,count:T,isToday:a===0})}const r=Math.max(...t.map(a=>a.count),1);return t.map((a,o)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"80px"},children:e.jsx("div",{className:`w-full max-w-[40px] rounded-t-lg transition-all ${a.isToday?"bg-gradient-to-t from-indigo-500 to-purple-500":"bg-indigo-200 dark:bg-indigo-800"}`,style:{height:`${Math.max(a.count/r*100,8)}%`}})}),e.jsx("span",{className:`text-xs font-medium ${a.isToday?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:a.dayName}),e.jsx("span",{className:`text-xs ${a.isToday?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-400 dark:text-gray-500"}`,children:a.count})]},o))})()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Project Progress"}),e.jsx("div",{className:"space-y-4",children:x.filter(t=>!t.archived).map(t=>{const r=g.filter(u=>u.project_id===t.id),a=r.filter(u=>u.status==="done").length,o=r.length>0?Math.round(a/r.length*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a,"/",r.length," tasks"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${o}%`}})})]},t.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Recently Completed"}),e.jsxs("div",{className:"space-y-3",children:[g.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,10).map(t=>{const r=x.find(u=>u.id===t.project_id),o=new Date(t.completed_at).toDateString()===new Date().toDateString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==null?void 0:r.name})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:o?"Today":$t(t.completed_at)})]},t.id)}),g.filter(t=>t.status==="done").length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ğŸ’ª"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-base sm:text-sm",children:"No completed tasks yet"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Get started!"})]})]})]})]}),K==="board"&&e.jsx("main",{className:"flex-1 px-3 sm:px-6 py-4 sm:py-6 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-900/50 rounded-2xl border border-gray-200/60 dark:border-gray-700/40 shadow-inner p-3 sm:p-4",children:[E&&e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("button",{onClick:()=>ne(Math.max(0,ie-1)),disabled:ie===0,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:ot[ie].color}}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:ot[ie].title}),e.jsx("span",{className:"px-2 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full shadow-sm",children:Wr(ot[ie].id).length})]})}),e.jsx("button",{onClick:()=>ne(Math.min(ot.length-1,ie+1)),disabled:ie===ot.length-1,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:ot.map((t,r)=>e.jsx("button",{onClick:()=>ne(r),className:`transition-all duration-200 ${r===ie?"w-6 h-2 rounded-full":"w-2 h-2 rounded-full"}`,style:{backgroundColor:r===ie?t.color:"#D1D5DB"}},t.id))})]}),e.jsx("div",{className:E?"":"flex gap-3 sm:gap-4 lg:gap-6 overflow-x-auto overflow-y-visible pb-4 sm:pb-6 justify-center",children:E?e.jsx(Ls,{column:ot[ie],tasks:Wr(ot[ie].id),projects:x,onEditTask:t=>{it(t),ze(!0)},onDragStart:us,onDragOver:hs,onDrop:ps,showProject:qe==="all",allTasks:g,onQuickComplete:Mt,onStatusChange:Mt,onSetDueDate:xs,bulkSelectMode:qt,selectedTaskIds:We,onToggleSelect:t=>{const r=new Set(We);r.has(t)?r.delete(t):r.add(t),xt(r)},onAddTask:t=>{it({status:t}),ze(!0)},onToggleMyDay:(t,r)=>{const a=new Date().toISOString().split("T")[0],o=new Date(Date.now()-864e5).toISOString().split("T")[0];Ir(t,r?a:o)},isMobileFullWidth:!0,draggedTask:Xt,onUpdateTitle:gs,onToggleCritical:ms},ot[ie].id):ot.map(t=>e.jsx(Ls,{column:t,tasks:Wr(t.id),projects:x,onEditTask:r=>{it(r),ze(!0)},onDragStart:us,onDragOver:hs,onDrop:ps,showProject:qe==="all",allTasks:g,onQuickComplete:Mt,onStatusChange:Mt,onSetDueDate:xs,bulkSelectMode:qt,selectedTaskIds:We,onToggleSelect:r=>{const a=new Set(We);a.has(r)?a.delete(r):a.add(r),xt(a)},onAddTask:r=>{it({status:r}),ze(!0)},onToggleMyDay:(r,a)=>{const o=new Date().toISOString().split("T")[0],u=new Date(Date.now()-864e5).toISOString().split("T")[0];Ir(r,a?o:u)},draggedTask:Xt,onUpdateTitle:gs,onToggleCritical:ms},t.id))}),e.jsx(qa,{tasks:g.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,5),projects:x,onEditTask:t=>{it(t),ze(!0)},onUndoComplete:t=>Mt(t,"todo")})]})})]}),e.jsx(Ya,{isOpen:Oe,onClose:()=>{ze(!1),it(null)},task:Rt!=null&&Rt.id&&g.find(t=>t.id===Rt.id)||Rt,projects:x,allTasks:g,onSave:cs,onDelete:ar,loading:v,templates:Dr,onSaveTemplate:ba,onDeleteTemplate:fa,onShowConfirm:Ct}),e.jsx(Ga,{isOpen:lr,onClose:()=>{At(!1),Ft(null)},project:Fs,onSave:aa,onDelete:ds,onArchive:Br,loading:v,onShowConfirm:Ct}),e.jsx(Pa,{isOpen:Fe,onClose:()=>Se(!1),tasks:g,projects:x,onEditTask:t=>{it(t),ze(!0)},allTasks:g}),Os&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl shadow-2xl p-6 ${y?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"ğŸš€"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We've created a starter project with sample tasks to help you learn the app."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"ğŸ‘†"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click on any task"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Each task has tips on features to explore"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Try My Day view"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your daily focus list - some tasks are already there!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Complete tasks to see them move"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete all My Day tasks for a celebration!"})]})]})]}),e.jsx("button",{onClick:()=>as(!1),className:"w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Let's Go! ğŸ‰"})]})}),e.jsx(Oa,{isOpen:b,onClose:()=>{O(!1),S("board")},initialTab:h,shortcutModifier:f}),e.jsx(Da,{isOpen:!!Ye,onClose:()=>Ct(null),onConfirm:()=>{var t;(t=Ye==null?void 0:Ye.onConfirm)==null||t.call(Ye),Ct(null)},title:(Ye==null?void 0:Ye.title)||"",message:(Ye==null?void 0:Ye.message)||"",confirmLabel:Ye==null?void 0:Ye.confirmLabel,confirmStyle:Ye==null?void 0:Ye.confirmStyle,icon:Ye==null?void 0:Ye.icon,loading:v}),er&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 ${y?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ğŸ”"})}),e.jsx("h3",{className:`text-lg font-semibold ${y?"text-white":"text-gray-900"}`,children:"Delete Recurring Task"})]}),e.jsxs("p",{className:`mb-6 ${y?"text-gray-300":"text-gray-600"}`,children:['"',er.title,'" is part of a recurring series. What would you like to do?']}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>ar(er.taskId,!1),disabled:v,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${y?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Delete only this occurrence"}),e.jsx("button",{onClick:()=>ar(er.taskId,!0),disabled:v,className:"w-full py-3 px-4 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-all",children:v?"Deleting...":"Delete all future occurrences"}),e.jsx("button",{onClick:()=>wr(null),disabled:v,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${y?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cancel"})]})]})}),j&&K==="board"&&!E&&e.jsx($a,{step:J,onNext:Q,onSkip:()=>{U(!1),localStorage.setItem("trackli_onboarding_complete","true")},onComplete:()=>{U(!1),localStorage.setItem("trackli_onboarding_complete","true")}}),ce&&e.jsx(Wa,{view:ce,step:tt,onNext:B,onSkip:()=>ls(ce),onComplete:()=>ls(ce)}),e.jsx(Gr,{isOpen:Ps,onClose:()=>{var t;Ut(!1),Mr(),pr(""),vt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:((t=x[0])==null?void 0:t.id)||""}),Nt([]),St(!1),Tr(null)},title:"Import Meeting Notes",wide:!0,children:zs?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:["Found ",wt.length," potential task",wt.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and edit before creating"})]}),e.jsx("button",{onClick:()=>St(!1),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"â† Back to Notes"})]}),wt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"No action items found in your notes."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Try adding bullet points or phrases like "Action:", "TODO:", or "@name"'})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:wt.map(t=>e.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${t.selected?"border-indigo-200 bg-indigo-50/50":"border-gray-100 bg-gray-50 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:r=>sr(t.id,"selected",r.target.checked),className:"mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:r=>sr(t.id,"title",r.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm font-medium"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Assignee:"}),e.jsx("input",{type:"text",value:t.assignee||"",onChange:r=>sr(t.id,"assignee",r.target.value),placeholder:"Unassigned",className:"px-2 py-1 border border-gray-200 rounded-lg text-xs w-28 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Due:"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:r=>sr(t.id,"dueDate",r.target.value),className:"px-2 py-1 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:t.critical,onChange:r=>sr(t.id,"critical",r.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-red-600",children:"Critical"})]})]})]}),e.jsx("button",{onClick:()=>sa(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[wt.filter(t=>t.selected).length," task",wt.filter(t=>t.selected).length!==1?"s":""," selected"]}),e.jsx("button",{onClick:ra,disabled:wt.filter(t=>t.selected).length===0||v,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create ",wt.filter(t=>t.selected).length," Task",wt.filter(t=>t.selected).length!==1?"s":""]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[G&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:G}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paste notes or upload a photo of your notes. We'll extract action items automatically."}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-colors hover:border-indigo-300 dark:hover:border-indigo-600",children:Dt?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Dt.preview,alt:"Uploaded notes",className:"w-full max-h-48 object-contain rounded-lg bg-gray-100 dark:bg-gray-800"}),e.jsx("button",{onClick:()=>Tr(null),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Dt.name," ready for extraction"]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Upload photo of notes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or take a photo on mobile"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:ta,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"or paste text notes"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:Re.title,onChange:t=>vt({...Re,title:t.target.value}),placeholder:"e.g., Weekly Team Sync",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Date"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("input",{type:"date",value:Re.date,onChange:t=>vt({...Re,date:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",style:{maxWidth:"100%",minWidth:0,WebkitAppearance:"none",boxSizing:"border-box",width:"100%"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsx("select",{value:Re.projectId,onChange:t=>vt({...Re,projectId:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Notes"}),e.jsx("textarea",{value:Re.notes,onChange:t=>vt({...Re,notes:t.target.value}),placeholder:`Paste your meeting notes here...

Best format - Follow-Up table:
| Follow-Up | Owner | Due Date | Status |
| Review proposal | Sarah | 30/12 | Open |
| Send update email | John | Friday | Open |

Or we can extract from:
â€¢ Action items like 'John to send report by Friday'
â€¢ TODO: Review the proposal
â€¢ @Sarah: Update the timeline`,rows:12,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:Dt?"AI will analyze your image for tasks":"Tip: Follow-Up tables are extracted first"}),e.jsx("button",{onClick:ea,disabled:!Re.notes.trim()&&!Dt||is,className:"px-6 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-medium shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:is?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Extract Tasks"]})})]})]})}),br&&e.jsx(Sa,{message:br.message,action:br.action,actionLabel:br.actionLabel,onClose:()=>qs(null)}),Ys&&e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Yt(!1)}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-md sm:mx-4 p-4 pr-8 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Quick Add Task"}),e.jsx("button",{type:"button",onClick:()=>{Yt(!1),Kt("")},className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors touch-manipulation active:bg-gray-200 dark:active:bg-gray-700",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{const t=or(Gt);return e.jsxs("form",{onSubmit:r=>{r.preventDefault(),ga(t.cleanedText||Gt,$r,t.date)},children:[e.jsxs("div",{className:"relative flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:Gt,onChange:r=>Kt(r.target.value),placeholder:'Try "Call mom tomorrow" or "Report due friday"',autoFocus:!0,className:"flex-1 px-4 py-3 text-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),Rs&&e.jsx("button",{type:"button",onClick:()=>Us(r=>Kt(r)),className:`p-3 rounded-xl transition-all ${tr?"bg-red-500 text-white animate-pulse shadow-lg shadow-red-500/40":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400"}`,title:tr?"Stop listening":"Voice input",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:tr?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),tr&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-sm text-red-500",children:"Listening... speak now"})]}),t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due ",$t(t.date)]}),e.jsxs("span",{className:"text-xs text-gray-400",children:['(from "',t.matched,'")']})]}),!t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Due:"}),_a.map(r=>e.jsx("button",{type:"button",onClick:()=>Kt(a=>`${a} ${r.label.toLowerCase()}`.trim()),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors whitespace-nowrap",children:r.label},r.label))]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("select",{value:$r,onChange:r=>Ar(r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:x.filter(r=>!r.archived).map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),e.jsx("button",{type:"button",onClick:()=>{const r=or(Gt),a={title:r.cleanedText||Gt,project_id:$r,due_date:r.date||null};Yt(!1),Kt(""),setTimeout(()=>{it(a),ze(!0)},100)},className:"px-3 py-2 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors whitespace-nowrap",children:"More options"})]}),e.jsx("button",{type:"submit",disabled:!Gt.trim()||v,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:v?"Adding...":"Add Task"})]})})(),e.jsx("p",{className:"mt-3 text-xs text-center text-gray-400",children:'Try "tomorrow", "next friday", "in 2 weeks"'})]})]}),Ws&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>ur(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Save Current View"}),e.jsx("input",{type:"text",value:Ht,onChange:t=>rs(t.target.value),placeholder:"View name (e.g., My Critical Tasks)",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 mb-4",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&Ht.trim()&&bs(Ht.trim())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ur(!1),className:"flex-1 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Ht.trim()&&bs(Ht.trim()),disabled:!Ht.trim(),className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50",children:"Save"})]}),It.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Existing views:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:It.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t.name}),e.jsx("button",{onClick:()=>ya(t.id),className:"p-2 sm:p-1 text-gray-400 hover:text-red-500 transition-colors touch-manipulation",title:"Delete view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]})]})]}),Gs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Fr(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-2xl sm:mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"â˜€ï¸ Plan Your Day"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Pick tasks to focus on today"})]}),e.jsx("button",{onClick:()=>Fr(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Energy:"}),Object.entries(Pt).map(([t,r])=>e.jsxs("button",{onClick:()=>setActiveFilters(a=>{const o=a.filter(u=>u.type!=="energy");return a.some(u=>u.type==="energy"&&u.value===t)?o:[...o,{type:"energy",value:t}]}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeFilters.some(a=>a.type==="energy"&&a.value===t)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.icon," ",r.label]},t))]}),e.jsxs("div",{className:"space-y-2",children:[g.filter(t=>t.status==="backlog"&&!gt(t,g)).filter(t=>!activeFilters.some(r=>r.type==="energy")||activeFilters.some(r=>r.type==="energy"&&r.value===t.energy_level)).sort((t,r)=>t.critical&&!r.critical?-1:!t.critical&&r.critical?1:t.due_date&&!r.due_date?-1:!t.due_date&&r.due_date?1:0).map(t=>{const r=x.find(u=>u.id===t.project_id),a=Pt[t.energy_level],o=ir(t);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${t.critical?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":o?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.critical&&e.jsx("span",{className:"text-red-500",children:"ğŸš©"}),o&&e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:r==null?void 0:r.name}),t.time_estimate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:zt(t.time_estimate)})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded ${a.color}`,children:a.icon})]})]}),e.jsx("button",{onClick:()=>Mt(t.id,"todo"),className:"px-3 py-1.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"+ Today"})]},t.id)}),g.filter(t=>t.status==="backlog"&&!gt(t,g)).length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ğŸ‰"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium text-base sm:text-lg mb-1",children:"Backlog is empty!"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"All tasks are either planned or done."})]})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:g.filter(t=>t.status==="todo").length})," tasks in Todo"]}),e.jsx("button",{onClick:()=>{Fr(!1),le("myday")},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium",children:"View My Day â†’"})]})})]})]}),e.jsx("button",{onClick:()=>{var t;x.length>0&&(Ar(((t=x[0])==null?void 0:t.id)||""),Yt(!0))},className:"sm:hidden fixed bottom-6 right-6 w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center z-30 active:scale-95 transition-transform",disabled:x.length===0,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("button",{onClick:()=>de(!0),className:"hidden sm:flex fixed bottom-8 right-8 px-4 py-2.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 items-center gap-2 z-30 hover:bg-gray-50 dark:hover:bg-gray-700 hover:scale-105 active:scale-95 transition-all",title:"Send Feedback",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Feedback"})]}),e.jsx(Ma,{isOpen:Z,onClose:()=>de(!1),user:s}),e.jsx(La,{isOpen:ye,onClose:()=>he(!1),userEmail:s==null?void 0:s.email}),ke&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&($e(!1),V(!1),Ae(""),Ve(!1),n(!1))},children:e.jsxs("div",{className:`w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${y?"bg-gray-800":"bg-white"}`,onKeyDown:t=>{t.key==="Escape"&&($e(!1),V(!1),Ae(""),Ve(!1),n(!1))},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-inherit",children:[e.jsx("h2",{className:`text-xl font-bold ${y?"text-white":"text-gray-900"}`,children:"Settings"}),e.jsx("button",{onClick:()=>{$e(!1),V(!1),Ae(""),Ve(!1),n(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${y?"text-gray-400":"text-gray-500"}`,children:"Profile"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${y?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:(ws=be||((vs=s==null?void 0:s.user_metadata)==null?void 0:vs.display_name)||(s==null?void 0:s.email))==null?void 0:ws.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm ${y?"text-gray-400":"text-gray-500"}`,children:s==null?void 0:s.email}),e.jsx("div",{className:`text-xs ${y?"text-gray-500":"text-gray-400"}`,children:((Ns=s==null?void 0:s.app_metadata)==null?void 0:Ns.provider)==="google"?"Google Account":"Email Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${y?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),at?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:be,onChange:t=>Je(t.target.value),placeholder:"Enter display name",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${y?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,autoFocus:!0}),e.jsx("button",{onClick:se,disabled:Xe,className:"px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50",children:Xe?"...":"Save"}),e.jsx("button",{onClick:()=>{var t;Ve(!1),Je(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||"")},className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${y?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${y?"text-white":"text-gray-900"}`,children:((Cs=s==null?void 0:s.user_metadata)==null?void 0:Cs.display_name)||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})}),e.jsx("button",{onClick:()=>{var t;Je(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||""),Ve(!0)},className:"text-indigo-500 hover:text-indigo-600 text-sm font-medium",children:"Edit"})]})]})]})]}),((_s=s==null?void 0:s.app_metadata)==null?void 0:_s.provider)!=="google"&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${y?"text-gray-400":"text-gray-500"}`,children:"Password"}),e.jsx("div",{className:`p-4 rounded-xl ${y?"bg-gray-700/50":"bg-gray-50"}`,children:mt?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-green-500 text-sm mb-2",children:"âœ“ Password reset email sent!"}),e.jsx("p",{className:`text-xs ${y?"text-gray-400":"text-gray-500"}`,children:"Check your inbox for a link to reset your password."})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${y?"text-white":"text-gray-900"}`,children:"Change Password"}),e.jsx("div",{className:`text-xs ${y?"text-gray-400":"text-gray-500"}`,children:"We'll send a reset link to your email"})]}),e.jsx("button",{onClick:me,disabled:ct,className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 shrink-0",children:ct?"Sending...":"Send Link"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${y?"text-gray-400":"text-gray-500"}`,children:"Preferences"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${y?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${y?"text-gray-300":"text-gray-700"}`,children:"Default view on login"}),e.jsxs("select",{value:I,onChange:t=>je("trackli-default-view",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${y?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"board",children:"Board"}),e.jsx("option",{value:"myday",children:"My Day"}),e.jsx("option",{value:"calendar",children:"Calendar"}),e.jsx("option",{value:"tasks",children:"All Tasks"}),e.jsx("option",{value:"projects",children:"Projects"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${y?"text-gray-300":"text-gray-700"}`,children:"Week starts on"}),e.jsxs("select",{value:De,onChange:t=>je("trackli-week-start",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${y?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"0",children:"Sunday"}),e.jsx("option",{value:"1",children:"Monday"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${y?"text-gray-300":"text-gray-700"}`,children:"Show confetti on completion"}),e.jsx("button",{onClick:()=>je("trackli-show-confetti",Ue?"false":"true"),className:`relative w-12 h-6 rounded-full transition-colors ${Ue?"bg-indigo-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${Ue?"translate-x-6":"translate-x-0.5"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${y?"text-gray-400":"text-gray-500"}`,children:"Data"}),e.jsx("div",{className:`p-4 rounded-xl ${y?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${y?"text-white":"text-gray-900"}`,children:"Clear completed tasks"}),e.jsx("div",{className:`text-xs ${y?"text-gray-400":"text-gray-500"}`,children:"Remove done tasks older than:"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("select",{value:we,onChange:t=>Zt(t.target.value),className:`px-2 py-1.5 rounded-lg border text-sm ${y?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"7",children:"7 days"}),e.jsx("option",{value:"14",children:"14 days"}),e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"})]}),e.jsx("button",{onClick:ge,disabled:Ge,className:"px-3 py-1.5 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:Ge?"...":"Clear"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${y?"text-gray-400":"text-gray-500"}`,children:"Support"}),e.jsx("div",{className:`p-4 rounded-xl ${y?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${y?"text-white":"text-gray-900"}`,children:"Need help?"}),e.jsx("div",{className:`text-xs ${y?"text-gray-400":"text-gray-500"}`,children:"Get in touch with our support team"})]}),e.jsx("a",{href:"mailto:support@gettrackli.com",className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:"Contact Us"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3 text-red-500",children:"Danger Zone"}),e.jsx("div",{className:`p-4 rounded-xl border-2 border-red-200 dark:border-red-800 ${y?"bg-red-900/20":"bg-red-50"}`,children:Ze?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-sm ${y?"text-red-300":"text-red-700"}`,children:"âš ï¸ This will permanently delete all your tasks, projects, and data. This cannot be undone."}),e.jsxs("div",{className:`text-sm ${y?"text-gray-300":"text-gray-700"}`,children:["Type ",e.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," to confirm:"]}),e.jsx("input",{type:"text",value:ve,onChange:t=>Ae(t.target.value),placeholder:"Type DELETE",className:`w-full px-3 py-2 rounded-lg border ${y?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-red-500 focus:border-transparent`,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{V(!1),Ae("")},className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${y?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{onClick:P,disabled:ve!=="DELETE"||ht,className:"flex-1 px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ht?"Deleting...":"Delete Everything"})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${y?"text-white":"text-gray-900"}`,children:"Delete Account"}),e.jsx("div",{className:`text-sm ${y?"text-gray-400":"text-gray-500"}`,children:"Permanently delete all your data"})]}),e.jsx("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors shrink-0",children:"Delete"})]})})]})]})]})})]})})}export{dn as default};
