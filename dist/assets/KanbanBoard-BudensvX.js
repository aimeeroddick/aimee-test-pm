import{u as Hr,r as o,s as R,j as e,_ as Es}from"./index-BLhLlvS4.js";const Fs=()=>Es(()=>import("./confetti.module-wUsLuJ1J.js"),[]).then(s=>s.default),zt={high:{bg:"#FEE2E2",text:"#DC2626",icon:"â–°â–°â–°",label:"High Effort"},medium:{bg:"#FEF3C7",text:"#D97706",icon:"â–°â–°",label:"Medium Effort"},low:{bg:"#D1FAE5",text:"#059669",icon:"â–°",label:"Low Effort"}},it=[{id:"meeting_followup",label:"Meeting Follow-up",color:"#8B5CF6"},{id:"email",label:"Email",color:"#3B82F6"},{id:"deliverable",label:"Deliverable",color:"#10B981"},{id:"admin",label:"Admin",color:"#4B5563"},{id:"review",label:"Review/Approval",color:"#F59E0B"},{id:"call",label:"Call/Meeting",color:"#EC4899"},{id:"research",label:"Research",color:"#14B8A6"}],_t=[{id:"email",label:"Email",icon:"âœ‰ï¸"},{id:"meeting",label:"Meeting",icon:"ðŸ‘¥"},{id:"slack",label:"Slack/Teams",icon:"ðŸ’¬"},{id:"ad_hoc",label:"Ad-hoc",icon:"ðŸ’¡"},{id:"project_plan",label:"Project Plan",icon:"ðŸ“‹"},{id:"client_request",label:"Client Request",icon:"ðŸŽ¯"}],Vr=[{id:null,label:"No recurrence"},{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"biweekly",label:"Bi-weekly (every 2 weeks)"},{id:"monthly",label:"Monthly"}],St={backlog:"#9CA3AF",todo:"#3B82F6",in_progress:"#EC4899",blocked:"#EF4444",done:"#64748B"},lt=[{id:"backlog",title:"Backlog",subtitle:"Future work",color:St.backlog},{id:"todo",title:"To Do",subtitle:"Ready to start",color:St.todo},{id:"in_progress",title:"In Progress",subtitle:"Active work",color:St.in_progress},{id:"done",title:"Done",subtitle:"Completed",color:St.done}],dr=5,cr=10,Wr=[{bg:"#EDE9FE",text:"#7C3AED",border:"#C4B5FD"},{bg:"#DBEAFE",text:"#2563EB",border:"#93C5FD"},{bg:"#D1FAE5",text:"#059669",border:"#6EE7B7"},{bg:"#FEF3C7",text:"#D97706",border:"#FCD34D"},{bg:"#FCE7F3",text:"#DB2777",border:"#F9A8D4"},{bg:"#E0E7FF",text:"#4F46E5",border:"#A5B4FC"},{bg:"#CCFBF1",text:"#0D9488",border:"#5EEAD4"},{bg:"#FEE2E2",text:"#DC2626",border:"#FCA5A5"},{bg:"#F3E8FF",text:"#9333EA",border:"#D8B4FE"},{bg:"#CFFAFE",text:"#0891B2",border:"#67E8F9"}],gr=s=>{if(!s)return null;let c=0;for(let l=0;l<s.length;l++)c=s.charCodeAt(l)+((c<<5)-c);return Wr[Math.abs(c)%Wr.length]},jt=(s,c)=>{if(!s||c==="done")return null;const l=new Date;l.setHours(0,0,0,0);const S=new Date(s);S.setHours(0,0,0,0);const x=Math.ceil((S-l)/(1e3*60*60*24));return x<0?"overdue":x===0?"today":x<=3?"soon":"ok"},Pt=s=>{if(s.status!=="backlog")return!1;if(!s.start_date)return!0;const c=new Date;c.setHours(0,0,0,0);const l=new Date(s.start_date);return l.setHours(0,0,0,0),l<=c},ht=(s,c)=>!s.dependencies||s.dependencies.length===0||s.status==="done"?!1:s.dependencies.some(l=>{const S=c.find(x=>x.id===l.depends_on_id);return S&&S.status!=="done"}),xr=s=>{if(s.status==="done")return!1;const c=new Date;if(c.setHours(0,0,0,0),s.my_day_date){const l=new Date(s.my_day_date);if(l.setHours(0,0,0,0),l<c)return!1;if(l.getTime()===c.getTime())return!0}if(s.start_date){const l=new Date(s.start_date);if(l.setHours(0,0,0,0),l<=c)return!0}return!1},Or=(s,c,l,S=null)=>{if(!s||!c)return[];const x=[];let M=new Date(s);M.setHours(0,0,0,0);let m=null;S&&(m=new Date(S),m.setHours(23,59,59,999));const g=w=>{switch(c){case"daily":w.setDate(w.getDate()+1);break;case"weekly":w.setDate(w.getDate()+7);break;case"biweekly":w.setDate(w.getDate()+14);break;case"monthly":w.setMonth(w.getMonth()+1);break;default:return null}return w},k=S?365:l;let _=0;for(;_<k&&(g(M),!(m&&M>m||(x.push(M.toISOString().split("T")[0]),_++,!S&&_>=l))););return x},Dt=s=>s?new Date(s).toLocaleDateString(void 0,{day:"numeric",month:"short"}):"",mr=()=>{const c=new Date(2e3,0,15).toLocaleDateString();return parseInt(c.split(/[\/\-\.]/)[0])===1},Mt=s=>{if(!s)return"";if(s<60)return`${s}m`;const c=Math.floor(s/60),l=s%60;return l>0?`${c}h ${l}m`:`${c}h`},Pr=s=>{if(!s)return"";let c=s.toString().trim().toLowerCase();if(/^\d{1,2}:\d{2}$/.test(c)){const[m,g]=c.split(":").map(Number);if(m>=0&&m<=23&&g>=0&&g<=59)return`${String(m).padStart(2,"0")}:${String(g).padStart(2,"0")}`}const l=/pm|p\.m\.|p$/.test(c),S=/am|a\.m\.|a$/.test(c);c=c.replace(/\s*(am|pm|a\.m\.|p\.m\.|a|p)\s*/gi,"").trim();let x=0,M=0;if(c.includes(":")){const m=c.split(":");x=parseInt(m[0])||0,M=parseInt(m[1])||0}else if(c.length===1||c.length===2)x=parseInt(c)||0,M=0;else if(c.length===3)x=parseInt(c[0])||0,M=parseInt(c.slice(1))||0;else if(c.length===4)x=parseInt(c.slice(0,2))||0,M=parseInt(c.slice(2))||0;else return"";return l&&x<12?x+=12:S&&x===12&&(x=0),x<0||x>23||M<0||M>59?"":`${String(x).padStart(2,"0")}:${String(M).padStart(2,"0")}`},Qt=s=>{if(!s)return{date:null,cleanedText:"",matched:null};const c=new Date;c.setHours(0,0,0,0);const l=s.trim().match(/^([TDWM])([+-]\d+)?$/i);if(l){const g=l[1].toUpperCase(),k=l[2]?parseInt(l[2]):0,_=new Date(c);switch(g){case"T":case"D":_.setDate(_.getDate()+k);break;case"W":_.setDate(_.getDate()+k*7);break;case"M":_.setMonth(_.getMonth()+k);break}return{date:_.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}const S=[{regex:/\b(today)\b/i,fn:()=>new Date(c)},{regex:/\b(tomorrow)\b/i,fn:()=>{const g=new Date(c);return g.setDate(g.getDate()+1),g}},{regex:/\b(yesterday)\b/i,fn:()=>{const g=new Date(c);return g.setDate(g.getDate()-1),g}},{regex:/\b(next\s+)?(monday)\b/i,fn:g=>x(1,g[1])},{regex:/\b(next\s+)?(tuesday)\b/i,fn:g=>x(2,g[1])},{regex:/\b(next\s+)?(wednesday)\b/i,fn:g=>x(3,g[1])},{regex:/\b(next\s+)?(thursday)\b/i,fn:g=>x(4,g[1])},{regex:/\b(next\s+)?(friday)\b/i,fn:g=>x(5,g[1])},{regex:/\b(next\s+)?(saturday)\b/i,fn:g=>x(6,g[1])},{regex:/\b(next\s+)?(sunday)\b/i,fn:g=>x(0,g[1])},{regex:/\bin\s+(\d+)\s+days?\b/i,fn:g=>{const k=new Date(c);return k.setDate(k.getDate()+parseInt(g[1])),k}},{regex:/\bin\s+(\d+)\s+weeks?\b/i,fn:g=>{const k=new Date(c);return k.setDate(k.getDate()+parseInt(g[1])*7),k}},{regex:/\bin\s+(\d+)\s+months?\b/i,fn:g=>{const k=new Date(c);return k.setMonth(k.getMonth()+parseInt(g[1])),k}},{regex:/\bnext\s+week\b/i,fn:()=>{const g=new Date(c);return g.setDate(g.getDate()+7),g}},{regex:/\bnext\s+month\b/i,fn:()=>{const g=new Date(c);return g.setMonth(g.getMonth()+1),g}},{regex:/\bend\s+of\s+week\b/i,fn:()=>{const g=new Date(c);return g.setDate(g.getDate()+(5-g.getDay())),g}},{regex:/\bend\s+of\s+month\b/i,fn:()=>{const g=new Date(c);return g.setMonth(g.getMonth()+1,0),g}}];function x(g,k){const _=new Date(c),w=_.getDay();let C=g-w;return(C<=0||k)&&(C+=7),k&&C<=7&&(C+=7),_.setDate(_.getDate()+C),_}for(const g of S){const k=s.match(g.regex);if(k){const _=g.fn(k),w=s.replace(g.regex,"").replace(/\s+/g," ").trim();return{date:_.toISOString().split("T")[0],cleanedText:w,matched:k[0]}}}const M=mr();let m=s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(m){let g,k;M?(k=parseInt(m[1])-1,g=parseInt(m[2])):(g=parseInt(m[1]),k=parseInt(m[2])-1);const _=m[3].length===2?2e3+parseInt(m[3]):parseInt(m[3]),w=new Date(_,k,g);if(!isNaN(w.getTime()))return{date:w.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}if(m=s.match(/^(\d{1,2})[\/\-](\d{1,2})$/),m){let g,k;M?(k=parseInt(m[1])-1,g=parseInt(m[2])):(g=parseInt(m[1]),k=parseInt(m[2])-1);const _=new Date(c.getFullYear(),k,g);if(_<c&&_.setFullYear(_.getFullYear()+1),!isNaN(_.getTime()))return{date:_.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}return{date:null,cleanedText:s,matched:null}},As=[{label:"Today",getValue:()=>new Date().toISOString().split("T")[0]},{label:"Tomorrow",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]}},{label:"Next Week",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]}},{label:"Next Month",getValue:()=>{const s=new Date;return s.setMonth(s.getMonth()+1),s.toISOString().split("T")[0]}}],Is=({message:s,action:c,actionLabel:l,onClose:S,duration:x=5e3})=>(o.useEffect(()=>{const M=setTimeout(S,x);return()=>clearTimeout(M)},[S,x]),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),c&&e.jsx("button",{onClick:()=>{c(),S()},className:"px-3 py-1 text-sm font-semibold bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg transition-colors",children:l||"Undo"}),e.jsx("button",{onClick:S,className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})),$s=({isOpen:s,onClose:c,onConfirm:l,title:S,message:x,confirmLabel:M="Confirm",confirmStyle:m="danger",icon:g="âš ï¸",loading:k=!1})=>{if(o.useEffect(()=>{const w=C=>{C.key==="Escape"&&c(),C.key==="Enter"&&!k&&l()};if(s)return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,c,l,k]),!s)return null;const _={danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",primary:"bg-indigo-500 hover:bg-indigo-600 text-white"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",onClick:c,children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:g})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:S})]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:x}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:c,disabled:k,className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:k,className:`px-4 py-2 rounded-xl font-medium transition-colors ${_[m]} disabled:opacity-50`,children:k?"Please wait...":M})]})]})})},Bs=({isOpen:s,onClose:c,user:l})=>{const[S,x]=o.useState("suggestion"),[M,m]=o.useState(""),[g,k]=o.useState([]),[_,w]=o.useState(!1),[C,ce]=o.useState(!1),[I,U]=o.useState(null);o.useEffect(()=>{s||setTimeout(()=>{x("suggestion"),m(""),k([]),ce(!1),U(null)},300)},[s]),o.useEffect(()=>{const F=H=>{H.key==="Escape"&&c()};if(s)return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[s,c]),o.useEffect(()=>{const F=H=>{var pe;if(!s)return;const se=(pe=H.clipboardData)==null?void 0:pe.items;if(se){for(const ge of se)if(ge.type.startsWith("image/")){H.preventDefault();const ae=ge.getAsFile();ae&&v(ae);break}}};return window.addEventListener("paste",F),()=>window.removeEventListener("paste",F)},[s,g]);const v=F=>{if(g.length>=3){U("Maximum 3 images allowed");return}const H=new Image,se=new FileReader;se.onload=pe=>{H.onload=()=>{let{width:me,height:ke}=H;if(me>1500||ke>1500){const V=Math.min(1500/me,1500/ke);me=Math.round(me*V),ke=Math.round(ke*V)}const Le=document.createElement("canvas");Le.width=me,Le.height=ke,Le.getContext("2d").drawImage(H,0,0,me,ke);const K=Le.toDataURL("image/jpeg",.8),q=K.split(",")[1];k(V=>[...V,{base64:q,preview:K}]),U(null)},H.onerror=()=>U("Failed to load image"),H.src=pe.target.result},se.onerror=()=>U("Failed to read image"),se.readAsDataURL(F)},re=F=>{var se;const H=(se=F.target.files)==null?void 0:se[0];H&&v(H),F.target.value=""},be=F=>{k(H=>H.filter((se,pe)=>pe!==F))},b=async F=>{if(F.preventDefault(),!!M.trim()){w(!0),U(null);try{const H=[];for(const pe of g){const ge=`feedback/${(l==null?void 0:l.id)||"anonymous"}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.jpg`,ae=atob(pe.base64),me=new Array(ae.length);for(let q=0;q<ae.length;q++)me[q]=ae.charCodeAt(q);const ke=new Uint8Array(me),Le=new Blob([ke],{type:"image/jpeg"}),{data:j,error:K}=await R.storage.from("attachments").upload(ge,Le);if(K)console.error("Upload error:",K);else{const{data:q}=R.storage.from("attachments").getPublicUrl(ge);q!=null&&q.publicUrl&&H.push(q.publicUrl)}}const{error:se}=await R.from("feedback").insert({user_id:l==null?void 0:l.id,user_email:l==null?void 0:l.email,type:S,message:M.trim(),images:H.length>0?H:null,page:window.location.pathname});if(se)throw se;ce(!0),setTimeout(()=>c(),2e3)}catch(H){console.error("Error submitting feedback:",H),U("Failed to submit feedback. Please try again.")}finally{w(!1)}}};if(!s)return null;const y=[{id:"bug",label:"ðŸ› Bug",desc:"Something isn't working"},{id:"suggestion",label:"ðŸ’¡ Suggestion",desc:"Ideas for improvement"},{id:"question",label:"â“ Question",desc:"Need help with something"},{id:"other",label:"ðŸ’¬ Other",desc:"General feedback"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:c,children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp",onClick:F=>F.stopPropagation(),children:C?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"âœ“"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We really appreciate you taking the time to help us improve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send Feedback"}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Help us make Trackli better!"})]}),e.jsxs("form",{onSubmit:b,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.map(F=>e.jsxs("button",{type:"button",onClick:()=>x(F.id),className:`p-3 rounded-xl border-2 text-left transition-all ${S===F.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:F.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:F.desc})]},F.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:M,onChange:F=>m(F.target.value),placeholder:"Tell us what's on your mind...",rows:4,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshots (optional)"}),g.length>0&&e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:g.map((F,H)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:F.preview,alt:`Screenshot ${H+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>be(H),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},H))}),g.length<3&&e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add image or paste from clipboard"}),e.jsx("input",{type:"file",accept:"image/*",onChange:re,className:"hidden"})]}),I&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:I})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:c,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_||!M.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Sending...":"Send Feedback"})]})]})]})})})},Ur="roddickaimee@gmail.com",Ws=({isOpen:s,onClose:c,userEmail:l})=>{const[S,x]=o.useState([]),[M,m]=o.useState(!0),[g,k]=o.useState("all"),_=l===Ur;o.useEffect(()=>{s&&_&&w()},[s,_]);const w=async()=>{m(!0);try{const{data:v,error:re}=await R.from("feedback").select("*").order("created_at",{ascending:!1});if(re)throw re;x(v||[])}catch(v){console.error("Error loading feedback:",v)}finally{m(!1)}},C=async(v,re)=>{try{const{error:be}=await R.from("feedback").update({status:re}).eq("id",v);if(be)throw be;x(b=>b.map(y=>y.id===v?{...y,status:re}:y))}catch(be){console.error("Error updating feedback:",be)}};if(o.useEffect(()=>{const v=re=>{re.key==="Escape"&&c()};if(s)return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[s,c]),!s||!_)return null;const ce=g==="all"?S:S.filter(v=>v.status===g),I={bug:"ðŸ›",suggestion:"ðŸ’¡",question:"â“",other:"ðŸ’¬"},U={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",read:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:c,children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[85vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp flex flex-col",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Admin"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[S.length," total submissions"]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["all","new","read","resolved"].map(v=>e.jsxs("button",{onClick:()=>k(v),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${g===v?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[v.charAt(0).toUpperCase()+v.slice(1),v!=="all"&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",S.filter(re=>v==="all"||re.status===v).length,")"]})]},v))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:M?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading feedback..."}):ce.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ðŸ“«"}),"No feedback yet"]}):e.jsx("div",{className:"space-y-4",children:ce.map(v=>e.jsx("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:I[v.type]||"ðŸ’¬"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:v.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${U[v.status]}`,children:v.status})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:v.message}),v.images&&v.images.length>0&&e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:v.images.map((re,be)=>e.jsx("a",{href:re,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:re,alt:`Screenshot ${be+1}`,className:"w-24 h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity"})},be))}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:v.user_email}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[new Date(v.created_at).toLocaleDateString()," ",new Date(v.created_at).toLocaleTimeString()]}),v.page&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:v.page})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[v.status!=="read"&&e.jsx("button",{onClick:()=>C(v.id,"read"),className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors",title:"Mark as read",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),v.status!=="resolved"&&e.jsx("button",{onClick:()=>C(v.id,"resolved"),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark as resolved",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]})},v.id))})})]})})},zr=({icon:s,title:c,description:l,action:S,actionLabel:x,variant:M="default"})=>{const m={default:"from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",success:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30",warning:"from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",celebrate:"from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-6 sm:px-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 w-24 h-24 rounded-full bg-gradient-to-br ${m[M]} opacity-50 animate-pulse`,style:{transform:"scale(1.3)"}}),e.jsx("div",{className:`relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br ${m[M]} flex items-center justify-center shadow-lg`,children:e.jsx("div",{className:"text-3xl sm:text-4xl",children:s})})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:c}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mb-6 max-w-xs sm:max-w-sm leading-relaxed",children:l}),S&&e.jsx("button",{onClick:S,className:"group px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-2",children:[x,e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},ur=({isOpen:s,onClose:c,title:l,children:S,wide:x})=>(o.useEffect(()=>{const M=m=>{m.key==="Escape"&&c()};if(s)return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[s,c]),s?e.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:c}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:mx-4 max-h-[95vh] sm:max-h-[90vh] overflow-y-auto animate-modalSlideUp ${x?"sm:max-w-2xl":"sm:max-w-md"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800 sticky top-0 bg-white dark:bg-gray-900 rounded-t-2xl z-10",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100",children:l}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 sm:p-6 overflow-x-hidden",children:S})]})]}):null),Os=({isOpen:s,onClose:c,attachment:l,attachments:S,onNavigate:x})=>{var F;if(!s||!l)return null;const M=l.file_name||"",m=l.file_url||"",g=((F=M.split(".").pop())==null?void 0:F.toLowerCase())||"",k=["jpg","jpeg","png","gif","webp","svg","bmp"].includes(g),_=g==="pdf",w=["mp4","webm","ogg","mov"].includes(g),C=["mp3","wav","ogg","m4a"].includes(g),ce=["doc","docx","xls","xlsx","ppt","pptx"].includes(g),I=["eml","msg"].includes(g),U=(S==null?void 0:S.findIndex(H=>H.id===l.id))??-1,v=S&&S.length>1,re=U>0,be=U<((S==null?void 0:S.length)||0)-1,b=()=>{re&&x&&x(S[U-1])},y=()=>{be&&x&&x(S[U+1])};return o.useEffect(()=>{const H=se=>{s&&(se.key==="Escape"&&c(),se.key==="ArrowLeft"&&re&&b(),se.key==="ArrowRight"&&be&&y())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[s,U,S]),e.jsxs("div",{className:"fixed inset-0 z-[310] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/50 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-white/80 text-sm truncate max-w-[300px]",children:M}),v&&e.jsxs("span",{className:"text-white/50 text-sm",children:[U+1," / ",S.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:m,download:M,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:c,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,disabled:!re,className:`absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${re?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:y,disabled:!be,className:`absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${be?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"relative max-w-[90vw] max-h-[85vh] flex items-center justify-center",children:[k&&e.jsx("img",{src:m,alt:M,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"}),_&&e.jsx("iframe",{src:m,title:M,className:"w-[90vw] h-[85vh] max-w-4xl rounded-lg bg-white"}),w&&e.jsx("video",{src:m,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl",children:"Your browser does not support video playback."}),C&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸŽµ"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-4",children:M}),e.jsx("audio",{src:m,controls:!0,autoPlay:!0,className:"w-full max-w-md",children:"Your browser does not support audio playback."})]}),ce&&e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(m)}`,title:M,className:"w-[90vw] h-[85vh] max-w-5xl rounded-lg bg-white"}),I&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ‰ï¸"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:M}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Email files can be opened in your email client"}),e.jsxs("a",{href:m,download:M,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Email"]})]}),!k&&!_&&!w&&!C&&!ce&&!I&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“„"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:M}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Preview not available for this file type"}),e.jsxs("a",{href:m,download:M,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]})]})},Ps=({step:s,onNext:c,onSkip:l,onComplete:S})=>{const M=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒT":"Ctrl+Alt+T",m=[{target:"summary-bar",title:"Welcome to Trackli! ðŸ‘‹",description:"This is your Summary Bar - click any stat to filter tasks. Use the â˜€ï¸ My Day filter to see your daily focus, or filter by assignee, customer, category and more.",position:"bottom"},{target:"columns",title:"Kanban Board",description:"Your tasks flow from Backlog â†’ To Do â†’ In Progress â†’ Done. Drag and drop to move tasks between columns.",position:"top"},{target:"task-card",title:"Task Cards",description:"Each card shows key info at a glance. Look for the â˜€ï¸ sun icon on cards in your My Day list! Hover to see details and attachments.",position:"right"},{target:"views",title:"Multiple Views",description:"Switch between Board, My Day, All Tasks (with sorting & CSV export), Calendar, and Progress views using the menu.",position:"bottom"},{target:"add-task",title:"Create Tasks",description:`Click + Task or press ${M} to create. Set dates, effort level, assignee, customer, category, attachments, subtasks, dependencies, and recurring schedules.`,position:"bottom"},{target:"notes",title:"Meeting Notes â†’ Tasks",description:"Click Notes to quickly capture meeting notes - type, paste, or even speak! AI extracts action items as tasks automatically.",position:"bottom"},{target:"help",title:"Need Help?",description:"Click the ? icon anytime to access the full help guide. You're all set! ðŸŽ‰",position:"bottom"}],g=m[s];return g?e.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:l}),e.jsxs("div",{className:`absolute z-[1001] max-w-sm animate-fadeIn ${s===0?"top-32 left-1/2 -translate-x-1/2":s===1?"top-40 left-1/2 -translate-x-1/2":s===2?"top-60 left-[340px]":s===3?"top-24 left-8":s===4?"top-20 right-48":s===5?"top-20 right-32":"top-20 right-24"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:m.map((k,_)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${_===s?"w-6 bg-indigo-500":_<s?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},_))}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:g.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:g.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:l,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip tour"}),e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsx("button",{onClick:()=>c(s-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>s<m.length-1?c(s+1):S(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:s<m.length-1?"Next":"Get Started!"})]})]})]}),e.jsx("div",{className:`absolute w-4 h-4 bg-white dark:bg-gray-800 rotate-45 border-gray-200 dark:border-gray-700 ${g.position==="bottom"?"-top-2 left-1/2 -translate-x-1/2 border-t border-l":g.position==="top"?"-bottom-2 left-1/2 -translate-x-1/2 border-b border-r":g.position==="right"?"-left-2 top-8 border-l border-b":"-right-2 top-8 border-r border-t"}`})]})]}):null},zs=()=>e.jsxs("svg",{viewBox:"0 0 280 120",className:"w-full h-32 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"cardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]}),e.jsx("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})]}),e.jsx("rect",{x:"10",y:"10",width:"80",height:"100",rx:"8",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"50",y:"28",textAnchor:"middle",fontSize:"9",fill:"#9CA3AF",children:"Tasks"}),e.jsx("rect",{x:"18",y:"38",width:"64",height:"20",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"18",y:"62",width:"64",height:"20",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"110",y:"10",width:"160",height:"100",rx:"8",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"2",strokeDasharray:"4"}),e.jsx("text",{x:"190",y:"28",textAnchor:"middle",fontSize:"10",fill:"#D97706",fontWeight:"bold",children:"â˜€ï¸ My Day"}),e.jsx("rect",{x:"120",y:"38",width:"140",height:"24",rx:"6",fill:"#FDE68A"}),e.jsx("circle",{cx:"132",cy:"50",r:"6",fill:"#10B981"}),e.jsx("rect",{x:"144",y:"46",width:"60",height:"8",rx:"2",fill:"#92400E",opacity:"0.3"}),e.jsxs("g",{filter:"url(#shadow)",children:[e.jsxs("rect",{x:"18",y:"38",width:"64",height:"20",rx:"4",fill:"url(#cardGradient)",children:[e.jsx("animate",{attributeName:"x",values:"18;120;120",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"38;70;70",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"64;140;140",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"height",values:"20;24;24",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("rect",{x:"24",y:"44",width:"40",height:"6",rx:"2",fill:"white",opacity:"0.8",children:[e.jsx("animate",{attributeName:"x",values:"24;132;132",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"44;78;78",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"40;80;80",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]})]}),e.jsx("path",{d:"M95 55 L105 55 L100 60 Z",fill:"#6366F1",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"1s",repeatCount:"indefinite"})})]}),Rs=()=>e.jsxs("svg",{viewBox:"0 0 280 140",className:"w-full h-36 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"calCardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]}),e.jsx("filter",{id:"calShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})]}),e.jsx("rect",{x:"10",y:"10",width:"70",height:"120",rx:"6",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"45",y:"26",textAnchor:"middle",fontSize:"8",fill:"#9CA3AF",children:"Tasks"}),e.jsx("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"16",y:"56",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"90",y:"10",width:"180",height:"120",rx:"6",fill:"white",className:"dark:fill-gray-800",stroke:"#E5E7EB"}),e.jsx("text",{x:"100",y:"40",fontSize:"8",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"100",y:"70",fontSize:"8",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"100",y:"100",fontSize:"8",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"125",y1:"32",x2:"260",y2:"32",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"62",x2:"260",y2:"62",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"92",x2:"260",y2:"92",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"122",x2:"260",y2:"122",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"130",y:"36",width:"120",height:"22",rx:"4",fill:"#10B981",opacity:"0.8"}),e.jsx("rect",{x:"136",y:"43",width:"50",height:"6",rx:"2",fill:"white",opacity:"0.7"}),e.jsxs("g",{filter:"url(#calShadow)",children:[e.jsxs("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"url(#calCardGradient)",children:[e.jsx("animate",{attributeName:"x",values:"16;130;130",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"34;66;66",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"58;120;120",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"height",values:"18;22;22",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("rect",{x:"22",y:"40",width:"30",height:"5",rx:"2",fill:"white",opacity:"0.8",children:[e.jsx("animate",{attributeName:"x",values:"22;136;136",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"40;73;73",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"30;50;50",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]})]}),e.jsx("line",{x1:"125",y1:"85",x2:"260",y2:"85",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("circle",{cx:"125",cy:"85",r:"4",fill:"#EF4444"})]}),Hs=()=>e.jsxs("svg",{viewBox:"0 0 200 100",className:"w-full h-28 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"resizeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("text",{x:"15",y:"25",fontSize:"9",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"15",y:"55",fontSize:"9",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"15",y:"85",fontSize:"9",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"45",y1:"18",x2:"190",y2:"18",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"48",x2:"190",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"78",x2:"190",y2:"78",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"50",y:"22",width:"130",rx:"4",fill:"url(#resizeGradient)",children:e.jsx("animate",{attributeName:"height",values:"22;52;22",dur:"3s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"56",y:"28",width:"60",height:"6",rx:"2",fill:"white",opacity:"0.8"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",width:"20",height:"6",rx:"3",fill:"white",opacity:"0.9",children:e.jsx("animate",{attributeName:"y",values:"40;70;40",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M115 0 L115 8 M111 4 L119 4",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"transform",values:"translate(0,48);translate(0,78);translate(0,48)",dur:"3s",repeatCount:"indefinite"})})]})]}),Vs=()=>e.jsxs("svg",{viewBox:"0 0 240 80",className:"w-full h-24 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("rect",{x:"20",y:"20",width:"200",height:"40",rx:"8",fill:"#FEF3C7"}),e.jsx("text",{x:"30",y:"38",fontSize:"10",fill:"#92400E",fontWeight:"bold",children:"Today's Progress"}),e.jsx("rect",{x:"30",y:"45",width:"180",height:"8",rx:"4",fill:"#FDE68A"}),e.jsx("rect",{x:"30",y:"45",height:"8",rx:"4",fill:"url(#progressGradient)",children:e.jsx("animate",{attributeName:"width",values:"0;180;180;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"})}),e.jsxs("text",{x:"120",y:"38",textAnchor:"middle",fontSize:"10",fill:"#059669",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"}),"100% âœ“"]}),e.jsxs("circle",{cx:"60",cy:"15",r:"3",fill:"#F59E0B",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.5;0.7"}),e.jsx("animate",{attributeName:"cy",values:"15;5;5",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("circle",{cx:"120",cy:"12",r:"3",fill:"#EC4899",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;0.55;0.75"}),e.jsx("animate",{attributeName:"cy",values:"12;2;2",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;1"})]}),e.jsxs("circle",{cx:"180",cy:"14",r:"3",fill:"#6366F1",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;0.52;0.72"}),e.jsx("animate",{attributeName:"cy",values:"14;4;4",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),Us=({view:s,step:c,onNext:l,onSkip:S,onComplete:x})=>{const M={myday:[{title:"â˜€ï¸ Welcome to My Day!",description:"This is your personal daily focus list. Plan what to work on today without cluttering your board view.",icon:"ðŸŽ¯"},{title:"Drag Tasks to My Day",description:"Tasks with today's start date appear automatically. Drag any task from the sidebar to add it manually!",icon:"ðŸ“¥",animation:"dragToMyDay"},{title:"Track Your Progress",description:"Watch your progress bar fill up as you complete tasks. Finish everything for a confetti celebration!",icon:"ðŸ“Š",animation:"progressBar"}],calendar:[{title:"ðŸ“† Welcome to Calendar!",description:"Schedule your tasks visually. Switch between daily, weekly, and monthly views using the buttons at the top.",icon:"ðŸ—“ï¸"},{title:"Drag to Schedule",description:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time updates automatically.",icon:"âœ¨",animation:"dragToCalendar"},{title:"Resize to Adjust Duration",description:"Drag the bottom edge of any scheduled task to change how long it takes. Time estimate updates automatically!",icon:"ðŸŽ¨",animation:"resizeTask"}],tasks:[{title:"ðŸ—ƒï¸ All Tasks View",description:"See every task in a powerful table format. Click any column header to sort, or use the Filters button to narrow down results.",icon:"ðŸ“‹"},{title:"Import & Export CSV",description:"Export tasks for reporting, or import to bulk create/edit. Use * in the ID column to create new tasks, or include existing IDs to update them.",icon:"ðŸ“¥"}],projects:[{title:"ðŸ“ Projects View",description:"Organize your work into projects. Each project gets its own color that appears on task cards throughout the app.",icon:"ðŸ—ï¸"},{title:"Manage Projects",description:"Create new projects, edit details, or archive completed ones. Archived projects hide their tasks from the main board.",icon:"âš™ï¸"}],progress:[{title:"ðŸ“Š Progress View",description:"Track your productivity across all projects. See completion rates, task counts, and how you're doing over time.",icon:"ðŸ“ˆ"},{title:"Completion Insights",description:"The charts show your completed vs. remaining tasks. Use this to identify bottlenecks and celebrate wins!",icon:"ðŸ†"}]},m={dragToMyDay:zs,dragToCalendar:Rs,resizeTask:Hs,progressBar:Vs},g=M[s]||[],k=g[c];return k?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:S}),e.jsx("div",{className:"relative z-[1001] max-w-md w-full animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[e.jsx("div",{className:"text-4xl mb-3",children:k.icon}),e.jsx("h3",{className:"text-xl font-bold",children:k.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:k.description}),k.animation&&m[k.animation]&&e.jsx("div",{className:"mb-6",children:(()=>{const _=m[k.animation];return e.jsx(_,{})})()}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:g.map((_,w)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${w===c?"w-8 bg-indigo-500":w<c?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},w))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:S,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip"}),e.jsxs("div",{className:"flex gap-2",children:[c>0&&e.jsx("button",{onClick:()=>l(c-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>c<g.length-1?l(c+1):x(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:c<g.length-1?"Next":"Got it!"})]})]})]})]})})]}):null},qs=({isOpen:s,onClose:c,initialTab:l="board",shortcutModifier:S="âŒ˜âŒƒ"})=>{const[x,M]=o.useState(l);if(o.useEffect(()=>{s&&M(l)},[s,l]),!s)return null;const m=[{id:"board",label:"Board",icon:"ðŸ“‹"},{id:"myday",label:"My Day",icon:"â˜€ï¸"},{id:"calendar",label:"Calendar",icon:"ðŸ“†"},{id:"alltasks",label:"All Tasks",icon:"ðŸ—ƒï¸"},{id:"tasks",label:"Tasks",icon:"âœ…"},{id:"shortcuts",label:"Shortcuts",icon:"âŒ¨ï¸"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl",children:"â“"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Trackli Help Guide"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use Trackli effectively"})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:m.map(g=>e.jsxs("button",{onClick:()=>M(g.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x===g.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{children:g.icon}),e.jsx("span",{children:g.label})]},g.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-180px)]",children:[x==="board"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Summary Bar (Filter Stats)"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Click any stat to filter your tasks:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-indigo-600",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks in To Do + In Progress"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-purple-600",children:"Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet started"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"High priority flagged tasks"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks due today"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Kanban Columns"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#9CA3AF",backgroundColor:"#F9FAFB"},children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Backlog"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Future work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#3B82F6",backgroundColor:"#EFF6FF"},children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"To Do"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#EC4899",backgroundColor:"#FDF2F8"},children:[e.jsx("span",{className:"font-semibold text-pink-700",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#64748B",backgroundColor:"#F8FAFC"},children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Done"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"ðŸ’¡ Drag and drop tasks between columns to change status"})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Task Card Indicators"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Left Border Colors:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-orange-500"}),e.jsx("span",{children:"Orange = Blocked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-red-500"}),e.jsx("span",{children:"Red = Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-green-500"}),e.jsx("span",{children:"Green = Ready to Start"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-blue-500"}),e.jsx("span",{children:"Blue/Pink/Gray = Column"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Effort Indicator (under checkbox):"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â–°"}),e.jsx("span",{children:"Low Effort"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â–°â–°"}),e.jsx("span",{children:"Medium Effort"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"â–°â–°â–°"}),e.jsx("span",{children:"High Effort"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Other Indicators:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"ðŸš© = Critical/Flagged"}),e.jsx("div",{children:"ðŸ”’ = Blocked by another task"}),e.jsx("div",{children:"ðŸ” = Recurring task"}),e.jsx("div",{children:"ðŸ“… = Due date (red if overdue)"}),e.jsx("div",{children:"â–¶ = Start date"}),e.jsx("div",{children:"â± = Time estimate"})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Hover Popup"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hover over any task card to see additional details:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"â€¢ Category badge"}),e.jsx("li",{children:"â€¢ Customer name"}),e.jsx("li",{children:"â€¢ Effort level badge"}),e.jsx("li",{children:"â€¢ Full description"}),e.jsx("li",{children:"â€¢ Assignee"}),e.jsx("li",{children:"â€¢ Subtask progress"}),e.jsx("li",{children:"â€¢ Attachments count"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Filtering Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Use the filter bar above the board to narrow down your tasks:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Quick Filters (Summary Bar):"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"â˜€ï¸ My Day â€“ Tasks in your daily focus"}),e.jsx("div",{children:"ðŸŸ¢ Active â€“ To Do + In Progress"}),e.jsx("div",{children:"ðŸŸ£ Backlog â€“ Future work"}),e.jsx("div",{children:"ðŸŸ  Due Today"}),e.jsx("div",{children:"ðŸ”´ Overdue"}),e.jsx("div",{children:"ðŸš© Critical â€“ Flagged tasks"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Field Filters:"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:'Use the "Filter by..." dropdown to filter by:'}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"â€¢ Assignee"}),e.jsx("div",{children:"â€¢ Customer"}),e.jsx("div",{children:"â€¢ Category"}),e.jsx("div",{children:"â€¢ Effort Level"}),e.jsx("div",{children:"â€¢ Source"}),e.jsx("div",{children:"â€¢ Due Date"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Search:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type in the search box to find tasks by title or description. Press âŒ˜K to jump to search."})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:'ðŸ’¡ Active filters show a count badge. Click "Clear" to reset all filters.'})]})]}),x==="myday"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center text-amber-600 dark:text-amber-400",children:"â˜€ï¸"}),"What is My Day?"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"My Day is your personal daily focus list. It helps you plan what to work on today without cluttering your board view."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"How Tasks Appear in My Day"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-1",children:"Auto-included:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks with a start date of today or earlier automatically appear in My Day"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Manually added:"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Drag tasks from Recommendations into the "My Day" section to add them to your focus list'})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Sun Icon on Cards (â˜€ï¸)"]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tasks in your My Day list show a ",e.jsx("span",{className:"text-lg",children:"â˜€ï¸"})," sun icon on their card in the board view, right below the effort bars. This helps you quickly identify your daily focus tasks while browsing the board."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Recommendations & All Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The sidebar shows all available tasks organized by urgency and status. Drag any task to My Day to add it:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸ”´ Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"ðŸŸ  Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due today"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-yellow-600",children:"ðŸŸ¡ Due Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due in next 3 days"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-green-600",children:"ðŸŸ¢ Quick Wins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low effort tasks"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"ðŸ”µ In Progress"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currently being worked on"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"âšª To Do"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-xl col-span-2",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ðŸ“‹ Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet prioritized"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Daily Reset"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manually added tasks clear from My Day at midnight (or when completed), giving you a fresh start each day. Auto-included tasks based on start date will remain until their start date passes."})]})]}),x==="calendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ“†"}),"Calendar View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Schedule tasks on your calendar with start times and durations. Access via the menu or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜L"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Daily"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single day view"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“†"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7-day overview"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“ï¸"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full month grid"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Scheduling Tasks"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Drag & Drop:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time and date will be automatically set."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Resize Duration:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag the bottom edge of a scheduled task to adjust its duration. Time estimate updates automatically."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Double-Click:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Double-click any empty time slot to create a new task at that time."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Sidebar Task Sections"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The sidebar organizes unscheduled tasks by priority:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”´"}),e.jsx("span",{children:"Overdue tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ "}),e.jsx("span",{children:"Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"}),e.jsx("span",{children:"Due Soon (3 days)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”µ"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{children:"My Day tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âšª"}),e.jsx("span",{children:"To Do"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Backlog"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¢"}),e.jsx("span",{children:"Quick Wins"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Visual Indicators"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-red-500 font-medium",children:"Red line"})," â€“ Current time indicator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-orange-500 font-medium",children:"âš ï¸ Orange ring"})," â€“ Task overlaps with another scheduled task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"Colored bars"})," â€“ Tasks are color-coded by project"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"30-min slots"})," â€“ Calendar auto-scrolls to 6am on load"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"5"}),"Quick Actions"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Hover over any scheduled task to reveal action buttons:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"â–¶"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Start task"})]}),e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ“"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Mark done"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ•"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Remove from calendar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Removing a task from calendar clears its scheduled time. If not done, it returns to the sidebar for rescheduling."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"âš™ï¸"}),"Workflow Automation"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When you schedule a task:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:'â€¢ Status automatically changes to "To Do" (if in Backlog)'}),e.jsx("li",{children:"â€¢ Start date is set to the scheduled day"}),e.jsx("li",{children:"â€¢ Start time is set to the slot time"}),e.jsx("li",{children:"â€¢ Task appears in My Day if scheduled for today"})]})]})]})]}),x==="alltasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—ƒï¸"}),"All Tasks View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Access all your tasks in a powerful table format. Click the view switcher in the header and select "All Tasks" or press ',e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒA"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+A"})," (Win)."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Sorting"]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Click any column header to sort by that field. Click again to reverse the sort order. An arrow indicator shows the current sort direction."}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Sortable columns: Title, Project, Status, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Created"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Filtering"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-medium",children:"Filters"})," button to show filter inputs for each column"]}),e.jsx("p",{children:"â€¢ Type in the filter boxes below column headers to narrow results"}),e.jsxs("p",{children:["â€¢ Click ",e.jsx("span",{className:"text-red-600",children:"Clear Filters"})," to reset all filters"]}),e.jsx("p",{children:"â€¢ Active filters show a dot indicator on the Filters button"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"3"}),"Export to CSV"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Export CSV"})," button to download your tasks."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"The export includes: Title, Project, Status, Critical, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Description, and Created date."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Only currently filtered/visible tasks are exported, making it easy to export specific subsets of your data."})]})]})]}),x==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Creating Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-indigo-500 text-white rounded text-sm font-medium",children:"+"})," button in the header"]}),e.jsxs("p",{children:["â€¢ Or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒT"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+T"})," (Win)"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Fields"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Title *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The task name (required)"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Project *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Which project this belongs to"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Start Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When to start working on it"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deadline for completion"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Time Estimate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long it will take"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Effort Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low / Medium / High effort"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Client/customer for the task"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Assignee"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Who's responsible"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type of work"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flag as high priority"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Completing Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Click the circle checkbox on the left of the card"}),e.jsx("p",{children:'â€¢ Or drag the task to the "Done" column'}),e.jsx("p",{children:"â€¢ Completed tasks show with a green checkmark"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Dependencies (Blocking)"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:'â€¢ In the task editor, use "Blocked By" to select tasks that must be completed first'}),e.jsx("p",{children:"â€¢ Blocked tasks show with ðŸ”’ and an orange border"}),e.jsx("p",{children:'â€¢ When the blocking task is completed, the blocked task becomes "ready to start"'})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Recurring Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Set a recurrence pattern: Daily, Weekly, Bi-weekly, Monthly"}),e.jsx("p",{children:"â€¢ When completed, a new instance is automatically created"}),e.jsx("p",{children:"â€¢ Recurring tasks show ðŸ” on the card"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"6"}),"Attachments"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Adding Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Open a task and go to the Details tab"}),e.jsx("p",{children:'â€¢ Drag & drop files or click "Choose files"'}),e.jsx("p",{children:"â€¢ Supports images, PDFs, documents, and more"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Viewing Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Click any attachment to open the viewer"}),e.jsx("p",{children:"â€¢ PDFs display inline with page navigation"}),e.jsx("p",{children:"â€¢ Images show in a lightbox view"}),e.jsx("p",{children:"â€¢ Use â† â†’ arrow keys to navigate between multiple attachments"}),e.jsx("p",{children:"â€¢ Click the download icon to save files locally"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"ðŸ’¡ Tasks with attachments show a ðŸ“Ž icon with count on the card"})]})]})]}),x==="shortcuts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Navigation Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"â˜€ï¸ My Day View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜D"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“‹ Board View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜B"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“† Calendar View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜L"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ” Quick Search"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜K"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Action Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Task"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[S,"T"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Project"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[S,"P"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Import Tasks"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[S,"N"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Help / Shortcuts"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"?"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Close Modal"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Esc"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click task"})," â€“ Open task editor"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task"})," â€“ Move between columns or schedule on calendar"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover task"})," â€“ See details popup (desktop only)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click calendar"})," â€“ Create task at that time"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task edge"})," â€“ Resize duration on calendar"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Need more help? Contact support"}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:"Got it!"})]})]})]})},Ys=({isOpen:s,onClose:c,tasks:l,projects:S,onEditTask:x,allTasks:M})=>{const[m,g]=o.useState(""),k=o.useRef(null);if(o.useEffect(()=>{s&&k.current&&k.current.focus(),s||g("")},[s]),o.useEffect(()=>{const w=C=>{C.key==="Escape"&&s&&c()};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,c]),!s)return null;const _=m.trim()?l.filter(w=>{var ce,I,U,v,re;const C=m.toLowerCase();return((ce=w.title)==null?void 0:ce.toLowerCase().includes(C))||((I=w.description)==null?void 0:I.toLowerCase().includes(C))||((U=w.assignee)==null?void 0:U.toLowerCase().includes(C))||((v=w.customer)==null?void 0:v.toLowerCase().includes(C))||((re=w.notes)==null?void 0:re.toLowerCase().includes(C))}):[];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:c}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:k,type:"text",value:m,onChange:w=>g(w.target.value),placeholder:"Search tasks by title, description, assignee, customer...",className:"flex-1 text-lg outline-none placeholder-gray-400"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded",children:"ESC"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:m.trim()===""?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{children:"Start typing to search across all tasks"})]}):_.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No results found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:_.map(w=>{var U;const C=S.find(v=>v.id===w.project_id),ce=it.find(v=>v.id===w.category),I=jt(w.due_date,w.status);return e.jsx("button",{onClick:()=>{x(w),c()},className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mt-1.5 shrink-0",style:{backgroundColor:St[w.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 truncate",children:w.title}),w.critical&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:C==null?void 0:C.name}),ce&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{color:ce.color},children:ce.label})]}),w.assignee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:w.assignee})]}),w.due_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:I==="overdue"?"text-red-600":I==="today"?"text-orange-600":"",children:["Due ",Dt(w.due_date)]})]})]}),w.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 truncate",children:w.description})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-lg text-gray-500 shrink-0",children:(U=lt.find(v=>v.id===w.status))==null?void 0:U.title})]})},w.id)})})}),_.length>0&&e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-sm text-gray-500",children:[_.length," task",_.length!==1?"s":""," found"]})]})]})},Ks=({tasks:s,projects:c,onEditTask:l,allTasks:S,onUpdateTask:x,onCreateTask:M,onDeleteTask:m,onDuplicateTask:g,viewMode:k,setViewMode:_,onShowConfirm:w})=>{const[C,ce]=o.useState(new Date),[I,U]=o.useState(null),[v,re]=o.useState(null),[be,b]=o.useState(null),[y,F]=o.useState(null),[H,se]=o.useState(null),[pe,ge]=o.useState(null),ae=o.useRef(null),me=o.useRef(!1),ke=[{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},{bg:"bg-emerald-100 dark:bg-emerald-900/50",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800"},{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800"},{bg:"bg-cyan-100 dark:bg-cyan-900/50",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-200 dark:border-cyan-800"},{bg:"bg-pink-100 dark:bg-pink-900/50",text:"text-pink-700 dark:text-pink-300",border:"border-pink-200 dark:border-pink-800"},{bg:"bg-amber-100 dark:bg-amber-900/50",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800"},{bg:"bg-teal-100 dark:bg-teal-900/50",text:"text-teal-700 dark:text-teal-300",border:"border-teal-200 dark:border-teal-800"}],Le=d=>{if(!d)return{bg:"bg-indigo-100 dark:bg-indigo-900/50",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"};const f=d.split("").reduce((p,D)=>p+D.charCodeAt(0),0)%ke.length;return ke[f]},j=(d,f)=>{if(!d.start_time)return!1;const p=f.toISOString().split("T")[0],D=je(d.start_time),J=D+(d.time_estimate||30);return s.some(O=>{if(O.id===d.id||O.start_date!==p||!O.start_time)return!1;const z=je(O.start_time),oe=z+(O.time_estimate||30);return D<oe&&J>z})};o.useEffect(()=>{(k==="daily"||k==="weekly")&&ae.current&&(ae.current.scrollTop=384)},[k,C]),o.useEffect(()=>{if(!y)return;const d=p=>{p.preventDefault()},f=p=>{qe(p)};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f)}},[y]);const K=["January","February","March","April","May","June","July","August","September","October","November","December"],q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],X=Array.from({length:48},(d,f)=>{const p=f*30,D=Math.floor(p/60),J=p%60,O=D%12||12,z=D<12?"AM":"PM";return{slotIndex:f,minutes:p,label:`${O}:${J.toString().padStart(2,"0")} ${z}`,isHour:J===0}}),E=d=>{if(d==null)return"";const f=Math.floor(d/60),p=d%60;return`${f.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`},Z=d=>{if(!d)return"";if(d.includes("AM")||d.includes("PM"))return d;const[f,p]=d.split(":").map(Number);if(isNaN(f)||isNaN(p))return d;const D=f%12||12,J=f<12?"AM":"PM";return`${D}:${p.toString().padStart(2,"0")} ${J}`},je=d=>{var O;if(!d)return null;const f=d.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);if(!f)return null;let p=parseInt(f[1]);const D=parseInt(f[2]),J=(O=f[3])==null?void 0:O.toUpperCase();return J==="PM"&&p!==12&&(p+=12),J==="AM"&&p===12&&(p=0),p*60+D},xe=C.getFullYear(),Oe=C.getMonth(),Ke=new Date(xe,Oe,1),Qe=new Date(xe,Oe+1,0),Ze=Ke.getDay(),Se=Qe.getDate(),Ee=new Date;Ee.setHours(0,0,0,0);const h=()=>{const d=new Date(C);k==="daily"?d.setDate(d.getDate()-1):k==="weekly"?d.setDate(d.getDate()-7):d.setMonth(d.getMonth()-1),ce(d)},ne=()=>{const d=new Date(C);k==="daily"?d.setDate(d.getDate()+1):k==="weekly"?d.setDate(d.getDate()+7):d.setMonth(d.getMonth()+1),ce(d)},ie=()=>ce(new Date),$=()=>se(null);o.useEffect(()=>{if(H){const d=()=>$();return document.addEventListener("click",d),document.addEventListener("contextmenu",d),()=>{document.removeEventListener("click",d),document.removeEventListener("contextmenu",d)}}},[H]);const he=d=>{const f=new Date(d),p=f.getDay();return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f},Ae=()=>{const d=he(C);return Array.from({length:7},(f,p)=>{const D=new Date(d);return D.setDate(D.getDate()+p),D})},Ue=d=>{const f=d.toISOString().split("T")[0];return s.filter(p=>p.start_date===f||p.due_date===f)},ye=(d,f)=>{const p=d.toISOString().split("T")[0],D=f*30,J=D+30;return s.filter(O=>{if(O.start_date!==p)return!1;const z=O.start_time?je(O.start_time):null;return z===null?!1:z>=D&&z<J})},ve=(d,f)=>{me.current=!0,re(f),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",f.id)},Ve=()=>{re(null),b(null),setTimeout(()=>{me.current=!1},100)},ze=d=>{!me.current&&!y&&l(d)},Te=async(d,f)=>{d.stopPropagation(),x&&await x(f.id,{start_time:null,end_time:null})},de=async(d,f)=>{d.stopPropagation(),x&&await x(f.id,{status:"done"})},$e=async(d,f)=>{d.stopPropagation(),x&&await x(f.id,{status:"in_progress"})},Ie=(d,f)=>{if(!M)return;const p=d.toISOString().split("T")[0],D=new Date().toISOString().split("T")[0],J=f*30,O=E(J),z=E(J+30),oe={start_date:p,due_date:p,start_time:O,end_time:z,status:"todo"};p===D&&(oe.my_day_date=D),M(oe)},Pe=async(d,f,p)=>{console.log("handleDropOnSlot called",{date:d,slotIndex:f,hasEvent:!!p,draggedTask:v});let D=v;if(!D&&(p!=null&&p.dataTransfer)){const Me=p.dataTransfer.getData("text/plain");console.log("Fallback to dataTransfer, taskId:",Me),D=S.find(De=>De.id===Me),console.log("Found task from allTasks:",D==null?void 0:D.title)}if(!D||!x){console.log("Drop failed: no task or onUpdateTask",{taskToSchedule:D,hasOnUpdateTask:!!x,allTasksLength:S==null?void 0:S.length});return}const J=d.toISOString().split("T")[0],O=new Date().toISOString().split("T")[0],z=f*30,oe=E(z),le=D.time_estimate||30,ee=z+le,A=E(ee);console.log("Dropping task:",{taskId:D.id,dateStr:J,startTime:oe,endTime:A,duration:le});const we={start_date:J,start_time:oe,end_time:A};D.due_date||(we.due_date=J),D.status==="backlog"&&(we.status="todo"),J===O&&(we.my_day_date=O);const Ye=D.id;re(null);try{await x(Ye,we),console.log("Task updated successfully with:",we)}catch(Me){console.error("Error updating task:",Me)}},Ne=async d=>{if(!v||!x)return;const f=d.toISOString().split("T")[0];await x(v.id,{start_date:f,start_time:null,end_time:null}),re(null)},dt=(d,f)=>{d.stopPropagation(),d.preventDefault(),F({task:f,startY:d.clientY,originalDuration:f.time_estimate||30})},qe=async d=>{if(!y||!x){F(null);return}const f=d.clientY-y.startY,p=Math.round(f/32),D=Math.max(15,y.originalDuration+p*30),J=je(y.task.start_time);if(J!==null){const O=J+D,z=E(O);console.log("Resizing task:",{taskId:y.task.id,oldDuration:y.originalDuration,newDuration:D,newEndTime:z}),await x(y.task.id,{time_estimate:D,end_time:z})}F(null)},pt=()=>{const d=[];for(let f=0;f<Ze;f++)d.push(e.jsx("div",{className:"h-28 bg-gray-50/50"},`empty-${f}`));for(let f=1;f<=Se;f++){const p=new Date(xe,Oe,f),D=p.toISOString().split("T")[0],J=Ue(p),O=p.getTime()===Ee.getTime(),z=I===D,oe=p<Ee,le=J.filter(A=>A.status!=="done"&&oe&&!O),ee=J.filter(A=>A.critical&&A.status!=="done");J.filter(A=>A.status==="done"),J.filter(A=>A.status!=="done"),d.push(e.jsxs("div",{"data-dropzone":"calendar-date","data-date":p,onClick:()=>{ce(p),_("daily")},onDragOver:A=>{A.preventDefault(),A.dataTransfer.dropEffect="move"},onDrop:A=>{A.preventDefault(),Ne(p)},className:`h-28 p-2 border-b border-r border-gray-100 dark:border-gray-800 cursor-pointer transition-all hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 ${O?"bg-indigo-50 dark:bg-indigo-900/30 ring-2 ring-inset ring-indigo-400":z?"bg-indigo-100 dark:bg-indigo-900/50":oe?"bg-gray-50/30 dark:bg-gray-800/30":"bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`text-sm font-semibold ${O?"text-indigo-600 dark:text-indigo-400":oe?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:f}),J.length>0&&e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${le.length>0?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":ee.length>0?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:J.length})]}),e.jsxs("div",{className:"space-y-1 overflow-hidden",children:[J.slice(0,3).map(A=>(c.find(we=>we.id===A.project_id),e.jsxs("div",{draggable:!0,onDragStart:we=>ve(we,A),onDragEnd:Ve,onClick:we=>{we.stopPropagation(),ze(A)},className:`text-xs px-2 py-1 rounded truncate cursor-grab active:cursor-grabbing transition-all hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 ${A.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":A.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":oe&&!O?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300"}`,title:A.title,children:[A.critical&&"ðŸš© ",A.title]},A.id))),J.length>3&&e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 px-2",children:["+",J.length-3," more"]})]})]},f))}return d},a=I?s.filter(d=>d.due_date===I||d.start_date===I):[],W=()=>{if(k==="daily")return C.toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"});if(k==="weekly"){const d=Ae(),f=d[0],p=d[6];return f.getMonth()===p.getMonth()?`${f.getDate()} - ${p.getDate()} ${K[f.getMonth()]} ${f.getFullYear()}`:`${f.getDate()} ${K[f.getMonth()].slice(0,3)} - ${p.getDate()} ${K[p.getMonth()].slice(0,3)} ${p.getFullYear()}`}return`${K[Oe]} ${xe}`},te=()=>{const d=new Date().toISOString().split("T")[0],f=new Date;f.setHours(0,0,0,0);const p=new Date(f);p.setDate(p.getDate()+3);const D=s.filter(B=>{if(B.status==="done")return!1;if(!B.start_time)return!0;if(B.start_date){const fe=new Date(B.start_date);if(fe.setHours(0,0,0,0),fe<f)return!0}return!1}),J=B=>{if(B.status==="done")return!1;if(B.my_day_date){const fe=new Date(B.my_day_date);if(fe.setHours(0,0,0,0),fe<f)return!1;if(fe.getTime()===f.getTime())return!0}return B.start_date===d},O=D.filter(B=>J(B)),z=D.filter(B=>{if(O.includes(B)||!B.due_date)return!1;const fe=new Date(B.due_date);return fe.setHours(0,0,0,0),fe<f}),oe=D.filter(B=>O.includes(B)?!1:B.due_date===d),le=D.filter(B=>{if(O.includes(B)||oe.includes(B)||!B.due_date||B.due_date===d)return!1;const fe=new Date(B.due_date);return fe.setHours(0,0,0,0),fe>f&&fe<=p}),ee=B=>O.includes(B)||z.includes(B)||oe.includes(B)||le.includes(B),A=D.filter(B=>B.status==="in_progress"&&!ee(B)),we=D.filter(B=>B.status==="todo"&&!ee(B)&&!A.includes(B)),Ye=D.filter(B=>B.status==="backlog"&&!ee(B)&&!A.includes(B)&&!we.includes(B)),Me=D.filter(B=>B.energy_level==="low"&&!ee(B)&&!A.includes(B)&&!we.includes(B)&&!Ye.includes(B)),De=B=>B.sort((fe,tt)=>{if(fe.critical&&!tt.critical)return-1;if(!fe.critical&&tt.critical)return 1;if(fe.due_date&&tt.due_date){const st=new Date(fe.due_date)-new Date(tt.due_date);if(st!==0)return st}return fe.due_date&&!tt.due_date?-1:!fe.due_date&&tt.due_date?1:new Date(fe.created_at)-new Date(tt.created_at)});return{overdue:De(z),dueToday:De(oe),dueSoon:De(le),inProgress:De(A),myDay:De(O),todo:De(we),backlog:De(Ye),quickWins:De(Me)}},Ce=()=>{const d=C.toISOString().split("T")[0],f=C.toDateString()===new Date().toDateString(),p=te(),D=p.overdue.length+p.dueToday.length+p.dueSoon.length+p.inProgress.length+p.myDay.length+p.todo.length+p.backlog.length+p.quickWins.length,J=({task:z,highlight:oe})=>{const le=o.useRef(null),ee=o.useRef(!1),[A,we]=o.useState(!1),[Ye,Me]=o.useState(!1),De=o.useRef(!1),B=o.useRef(null),[fe,tt]=o.useState(!1),st=at=>{at.target.closest("button")||(De.current=!1,le.current=setTimeout(()=>{ee.current=!0,we(!0)},200))},Lt=()=>{le.current&&clearTimeout(le.current),Me(!1),setTimeout(()=>{ee.current=!1,we(!1),De.current=!1},100)},Jt=at=>{if(!ee.current){at.preventDefault();return}De.current=!0,Me(!0),ve(at,z)},Xt=()=>{!De.current&&!ee.current&&l(z)},It=at=>{if(at.target.closest("button"))return;const Ge=at.touches[0];B.current={x:Ge.clientX,y:Ge.clientY},De.current=!1,le.current=setTimeout(()=>{ee.current=!0,we(!0),navigator.vibrate&&navigator.vibrate(50)},200)},hr=at=>{if(!ee.current){if(B.current){const Je=at.touches[0],Tt=Math.abs(Je.clientX-B.current.x),$t=Math.abs(Je.clientY-B.current.y);(Tt>10||$t>10)&&le.current&&(clearTimeout(le.current),le.current=null)}return}at.preventDefault(),tt(!0),De.current=!0,re(z);const Ge=at.touches[0],et=document.elementFromPoint(Ge.clientX,Ge.clientY),vt=et==null?void 0:et.closest('[data-dropzone="calendar-slot"]'),ct=et==null?void 0:et.closest('[data-dropzone="calendar-date"]');document.querySelectorAll('[data-dropzone="calendar-slot"], [data-dropzone="calendar-date"]').forEach(Je=>{Je.classList.remove("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")}),vt?vt.classList.add("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40"):ct&&ct.classList.add("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")},Rt=at=>{if(le.current&&(clearTimeout(le.current),le.current=null),document.querySelectorAll('[data-dropzone="calendar-slot"], [data-dropzone="calendar-date"]').forEach(Ge=>{Ge.classList.remove("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")}),fe&&ee.current){const Ge=at.changedTouches[0],et=document.elementFromPoint(Ge.clientX,Ge.clientY),vt=et==null?void 0:et.closest('[data-dropzone="calendar-slot"]'),ct=et==null?void 0:et.closest('[data-dropzone="calendar-date"]');if(vt){const Je=vt.dataset.date,Tt=parseInt(vt.dataset.slotIndex,10);Je&&!isNaN(Tt)&&Pe(Je,Tt,null)}else if(ct){const Je=ct.dataset.date;Je&&Ne(Je)}}else!De.current&&!ee.current&&l(z);tt(!1),re(null),setTimeout(()=>{ee.current=!1,we(!1),De.current=!1},100),B.current=null};return e.jsx("div",{draggable:!0,onMouseDown:st,onMouseUp:Lt,onMouseLeave:()=>le.current&&clearTimeout(le.current),onDragStart:Jt,onDragEnd:Lt,onClick:Xt,onTouchStart:It,onTouchMove:hr,onTouchEnd:Rt,className:`p-2.5 rounded-lg border transition-all duration-200 select-none ${Ye||fe?"opacity-40 scale-[0.98]":A?"cursor-grabbing ring-2 ring-indigo-400 scale-[1.02] shadow-lg":"cursor-pointer hover:shadow-md hover:-translate-y-0.5"} ${oe==="red"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":oe==="orange"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":oe==="yellow"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":oe==="pink"?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800":oe==="amber"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":oe==="green"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":oe==="blue"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":oe==="gray"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 shrink-0",style:{backgroundColor:St[z.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[z.critical&&"ðŸš© ",z.title]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-[10px] text-gray-500 dark:text-gray-400",children:[z.time_estimate&&e.jsxs("span",{children:["â±",Mt(z.time_estimate)]}),z.due_date&&e.jsxs("span",{children:["ðŸ“…",Dt(z.due_date)]})]})]})]})})},O=({title:z,icon:oe,tasks:le,highlight:ee,defaultOpen:A=!0})=>le.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx("span",{children:oe})," ",z,e.jsxs("span",{className:"text-gray-400",children:["(",le.length,")"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[le.slice(0,5).map(we=>e.jsx(J,{task:we,highlight:ee},we.id)),le.length>5&&e.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:["+",le.length-5," more"]})]})]});return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[pe&&e.jsxs("div",{className:"lg:hidden fixed bottom-4 left-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center justify-between animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“Œ"}),e.jsxs("span",{className:"text-sm font-medium truncate",children:["Tap a time slot to schedule: ",pe.title]})]}),e.jsx("button",{onClick:()=>ge(null),className:"shrink-0 p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),e.jsxs("div",{className:`h-12 flex items-center justify-center font-semibold ${f?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300"}`,children:[V[C.getDay()]," ",C.getDate()]})]}),e.jsx("div",{ref:ae,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:X.map(({slotIndex:z,label:oe,isHour:le})=>e.jsx("div",{className:"h-8 px-2 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:le&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:oe})},z))}),e.jsxs("div",{className:"relative",children:[f&&(()=>{const z=new Date,le=(z.getHours()*60+z.getMinutes())/30*32;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${le}px`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("div",{className:"flex-1 h-0.5 bg-red-500"})]})})})(),X.map(({slotIndex:z,isHour:oe})=>{const le=ye(C,z),ee=be&&be.date===d&&be.slotIndex===z;return e.jsxs("div",{"data-dropzone":"calendar-slot","data-date":C,"data-slot-index":z,className:`h-8 border-b relative transition-all duration-150 ${oe?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} ${ee&&v?"bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-inset ring-indigo-400":"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"} cursor-pointer`,onDragOver:A=>{A.preventDefault(),A.dataTransfer.dropEffect="move",b({date:d,slotIndex:z})},onDragLeave:()=>b(null),onDrop:A=>{A.preventDefault(),b(null),Pe(C,z,A)},onDoubleClick:()=>Ie(C,z),children:[ee&&v&&e.jsx("div",{className:"absolute inset-x-1 top-0 bg-indigo-200/50 dark:bg-indigo-700/30 border-2 border-dashed border-indigo-400 rounded text-[10px] text-indigo-600 dark:text-indigo-300 px-1 truncate pointer-events-none z-30",style:{height:`${Math.ceil((v.time_estimate||30)/30)*32-2}px`},children:v.title}),le.map(A=>{const we=A.time_estimate||30,Ye=Math.ceil(we/30),Me=Le(A.project_id),De=j(A,C);return e.jsxs("div",{draggable:!y,onDragStart:B=>!y&&ve(B,A),onDragEnd:Ve,onClick:B=>{B.stopPropagation(),ze(A)},onDoubleClick:B=>{B.stopPropagation(),ze(A)},className:`absolute left-1 right-1 px-2 py-0.5 rounded text-xs font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${A.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":A.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${Me.bg} ${Me.text}`} ${De?"ring-2 ring-orange-400 dark:ring-orange-500":""}`,style:{height:`${Ye*32-2}px`,top:"1px"},title:`${A.title}${A.start_time?` (${Z(A.start_time)}${A.end_time?" - "+Z(A.end_time):""})`:""}${De?" âš ï¸ Overlaps with another task":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"truncate text-[11px]",children:[De&&e.jsx("span",{title:"Time conflict",children:"âš ï¸ "}),A.critical&&"ðŸš© ",A.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[(A.status==="backlog"||A.status==="todo")&&e.jsx("button",{onClick:B=>$e(B,A),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Start task",children:"â–¶"}),A.status!=="done"&&e.jsx("button",{onClick:B=>de(B,A),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:B=>Te(B,A),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from calendar",children:"âœ•"})]})]}),Ye>1&&A.start_time&&e.jsxs("div",{className:"text-[9px] opacity-70",children:[Z(A.start_time),A.end_time&&` - ${Z(A.end_time)}`]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize bg-transparent hover:bg-indigo-300/50 dark:hover:bg-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b",onMouseDown:B=>dt(B,A)})]},A.id)})]},z)})]})]})})]}),e.jsx("div",{className:"w-full lg:w-72 lg:shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“…"})," Schedule Tasks"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Drag to calendar â€¢ ",f?"Auto-adds to My Day":""]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-1",children:D===0?e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 text-center py-8",children:"All caught up! ðŸŽ‰"}):e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"My Day",icon:"â˜€ï¸",tasks:p.myDay,highlight:"amber"}),e.jsx(O,{title:"In Progress",icon:"ðŸŸ£",tasks:p.inProgress,highlight:"pink"}),e.jsx(O,{title:"To Do",icon:"ðŸ“‹",tasks:p.todo,highlight:"blue"}),e.jsx(O,{title:"Backlog",icon:"ðŸ“¦",tasks:p.backlog,highlight:"gray"}),e.jsx(O,{title:"Overdue",icon:"ðŸ”´",tasks:p.overdue,highlight:"red"}),e.jsx(O,{title:"Due Today",icon:"ðŸŸ ",tasks:p.dueToday,highlight:"orange"}),e.jsx(O,{title:"Due Soon",icon:"ðŸŸ¡",tasks:p.dueSoon,highlight:"yellow"}),e.jsx(O,{title:"Quick Wins",icon:"âš¡",tasks:p.quickWins,highlight:"green"})]})})]})})]})},Fe=()=>{const d=Ae(),f=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[700px]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),d.map((p,D)=>{const O=p.toISOString().split("T")[0]===f;return e.jsxs("div",{className:`h-12 flex flex-col items-center justify-center ${O?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:q[p.getDay()]}),e.jsx("span",{className:`text-sm font-semibold ${O?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:p.getDate()})]},D)})]}),e.jsx("div",{ref:ae,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:X.map(({slotIndex:p,label:D,isHour:J})=>e.jsx("div",{className:"h-6 px-1 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:J&&e.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400",children:D})},p))}),d.map((p,D)=>{const O=p.toISOString().split("T")[0]===f;return e.jsxs("div",{className:`min-w-[80px] relative ${O?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:[O&&(()=>{const z=new Date,le=(z.getHours()*60+z.getMinutes())/30*24;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${le}px`},children:e.jsx("div",{className:"h-0.5 bg-red-500"})})})(),X.map(({slotIndex:z,isHour:oe})=>{const le=ye(p,z);return e.jsx("div",{"data-dropzone":"calendar-slot","data-date":p,"data-slot-index":z,className:`h-6 border-b relative transition-colors ${oe?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 cursor-pointer`,onDragOver:ee=>{ee.preventDefault(),ee.dataTransfer.dropEffect="move"},onDrop:ee=>{ee.preventDefault(),Pe(p,z,ee)},onDoubleClick:()=>Ie(p,z),children:le.map(ee=>{const A=ee.time_estimate||30,we=Math.min(Math.ceil(A/30),8),Ye=Le(ee.project_id);return e.jsx("div",{draggable:!0,onDragStart:Me=>ve(Me,ee),onDragEnd:Ve,onClick:Me=>{Me.stopPropagation(),ze(ee)},onDoubleClick:Me=>{Me.stopPropagation(),ze(ee)},className:`absolute left-0.5 right-0.5 px-1 rounded text-[9px] font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${ee.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":ee.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${Ye.bg} ${Ye.text}`}`,style:{height:`${we*24-2}px`,top:"1px"},title:ee.title,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"truncate",children:[ee.critical&&"ðŸš©",ee.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(ee.status==="backlog"||ee.status==="todo")&&e.jsx("button",{onClick:Me=>$e(Me,ee),className:"hover:text-blue-500",title:"Start task",children:"â–¶"}),ee.status!=="done"&&e.jsx("button",{onClick:Me=>de(Me,ee),className:"hover:text-green-500",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Me=>Te(Me,ee),className:"hover:text-red-500",title:"Remove from calendar",children:"âœ•"})]})]})},ee.id)})},z)})]},D)})]})})]})})})};return e.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-4 sm:py-8 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:W()}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[s.filter(d=>(d.due_date||d.start_date)&&d.status!=="done").length," tasks scheduled"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>_("daily"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${k==="daily"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>_("weekly"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${k==="weekly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>_("monthly"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${k==="monthly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Month"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:ie,className:"px-4 py-2 text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:ne,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]}),k==="daily"&&Ce(),k==="weekly"&&Fe(),k==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:q.map(d=>e.jsx("div",{className:"py-3 text-center text-sm font-semibold text-gray-600 dark:text-gray-400",children:d},d))}),e.jsx("div",{className:"grid grid-cols-7",children:pt()})]}),I&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Tasks for ",new Date(I+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})]}),a.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No tasks due on this date"}):e.jsx("div",{className:"space-y-3",children:a.map(d=>{var D;const f=c.find(J=>J.id===d.project_id),p=it.find(J=>J.id===d.category);return e.jsx("div",{onClick:()=>l(d),className:`p-4 rounded-xl border cursor-pointer hover:shadow-md transition-all ${d.status==="done"?"bg-green-50 border-green-200":d.critical?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:St[d.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:`font-medium ${d.status==="done"?"text-gray-400 line-through":"text-gray-800"}`,children:[d.critical&&"ðŸš© ",d.title]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[f&&e.jsx("span",{children:f.name}),p&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:p.color},children:p.label}),d.assignee&&e.jsxs("span",{children:["â€¢ ",d.assignee]})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${d.status==="done"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(D=lt.find(J=>J.id===d.status))==null?void 0:D.title})]})},d.id)})})]}),e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-400"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Overdue / Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to reschedule"})]})]})]}),(k==="daily"||k==="weekly")&&e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-100 dark:bg-indigo-900/50"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to schedule time"})]})]})]})},Gs=({tasks:s,projects:c,onEditTask:l,onDragStart:S,allTasks:x,onQuickStatusChange:M,onUpdateMyDayDate:m})=>{const[g,k]=o.useState(!1),[_,w]=o.useState("overdue"),[C,ce]=o.useState(!1),I=o.useRef(null);o.useRef(!1);const U=new Date;U.setHours(0,0,0,0);const v=U.toISOString().split("T")[0],re=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],be=["January","February","March","April","May","June","July","August","September","October","November","December"],b=new Date().getHours(),y=b<12?"Good morning":b<17?"Good afternoon":"Good evening",F=b<12?"ðŸŒ…":b<17?"â˜€ï¸":"ðŸŒ™",H=h=>{if(h.my_day_date){const ne=new Date(h.my_day_date);if(ne.setHours(0,0,0,0),ne<U)return!1;if(ne.getTime()===U.getTime()){if(h.status==="done"){if(!h.completed_at)return!1;const ie=new Date(h.completed_at);return ie.setHours(0,0,0,0),ie.getTime()===U.getTime()}return!0}}if(h.status==="done"){if(!h.completed_at)return!1;const ne=new Date(h.completed_at);if(ne.setHours(0,0,0,0),ne.getTime()!==U.getTime())return!1;if(h.start_date){const ie=new Date(h.start_date);if(ie.setHours(0,0,0,0),ie<=U)return!0}return!1}if(h.start_date){const ne=new Date(h.start_date);if(ne.setHours(0,0,0,0),ne<=U)return!0}return!1},se=o.useMemo(()=>s.filter(h=>H(h)),[s]),pe=o.useMemo(()=>se.filter(h=>h.status!=="done"),[se]),ge=o.useMemo(()=>se.filter(h=>h.status==="done"),[se]);pe.sort((h,ne)=>{const ie=!!h.start_date,$=!!ne.start_date;if(ie&&!$)return-1;if(!ie&&$)return 1;if(ie&&$){const ye=new Date(h.start_date)-new Date(ne.start_date);if(ye!==0)return ye;const ve=h.start_time||h.end_time,Ve=ne.start_time||ne.end_time;if(ve&&!Ve)return-1;if(!ve&&Ve)return 1;if(ve&&Ve){const ze=ve.localeCompare(Ve);if(ze!==0)return ze}}const he={in_progress:0,todo:1,backlog:2},Ae=he[h.status]??3,Ue=he[ne.status]??3;return Ae!==Ue?Ae-Ue:new Date(h.created_at)-new Date(ne.created_at)});const ae=s.filter(h=>!H(h)&&h.status!=="done"),me=ae.filter(h=>(h.status==="todo"||h.status==="in_progress")&&!ht(h,x)),ke=me.filter(h=>jt(h.due_date,h.status)==="overdue"),Le=me.filter(h=>jt(h.due_date,h.status)==="today"&&!ke.includes(h)),j=me.filter(h=>{if(!h.due_date||ke.includes(h)||Le.includes(h))return!1;const ne=new Date(h.due_date);ne.setHours(0,0,0,0);const ie=Math.ceil((ne-U)/(1e3*60*60*24));return ie>0&&ie<=3}),K=h=>ke.includes(h)||Le.includes(h)||j.includes(h),q=ae.filter(h=>h.status==="in_progress"&&!ht(h,x)&&!K(h)),V=ae.filter(h=>h.status==="todo"&&!ht(h,x)&&!K(h)),X=ae.filter(h=>h.status==="backlog"&&!ht(h,x)),E=ae.filter(h=>h.energy_level==="low"&&!K(h)&&!q.includes(h)&&!V.includes(h)&&!X.includes(h)).slice(0,5),Z=pe.reduce((h,ne)=>h+(ne.time_estimate||0),0),je=ge.reduce((h,ne)=>h+(ne.time_estimate||0),0),xe=se.length>0?Math.round(ge.length/se.length*100):0;o.useEffect(()=>{I.current>0&&pe.length===0&&ge.length>0&&!C&&(ce(!0),Fs().then(h=>{const ie=Date.now()+3e3,$=()=>{h({particleCount:3,angle:60,spread:55,origin:{x:0,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),h({particleCount:3,angle:120,spread:55,origin:{x:1,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),Date.now()<ie&&requestAnimationFrame($)};$()})),I.current=pe.length},[pe.length,ge.length,C]);const Oe=h=>{h.preventDefault(),k(!0)},Ke=()=>{k(!1)},Qe=h=>{h.preventDefault(),k(!1);const ne=h.dataTransfer.getData("taskId");ne&&m(ne,v)},Ze=(h,ne)=>{h.stopPropagation();const ie=new Date(U);ie.setDate(ie.getDate()-1);const $=ie.toISOString().split("T")[0];m(ne.id,$)},Se=({task:h,showRemove:ne=!1,isCompleted:ie=!1})=>{const $=c.find(d=>d.id===h.project_id),he=zt[h.energy_level],Ae=jt(h.due_date,h.status),Ue=ht(h,x),ye=o.useRef(null),ve=o.useRef(!1),[Ve,ze]=o.useState(!1),[Te,de]=o.useState(!1),$e=o.useRef(!1),Ie=o.useRef(null),[Pe,Ne]=o.useState(!1),dt=d=>{ie||d.target.closest("button")||($e.current=!1,ye.current=setTimeout(()=>{ve.current=!0,ze(!0)},200))},qe=()=>{ye.current&&(clearTimeout(ye.current),ye.current=null),de(!1),setTimeout(()=>{ve.current=!1,ze(!1),$e.current=!1},100)},pt=()=>{ye.current&&(clearTimeout(ye.current),ye.current=null)},a=()=>{!$e.current&&!ve.current&&l(h)},W=d=>{if(!ve.current){d.preventDefault();return}$e.current=!0,de(!0),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("taskId",h.id),S&&S(d,h)},te=d=>{if(ie||d.target.closest("button"))return;const f=d.touches[0];Ie.current={x:f.clientX,y:f.clientY},$e.current=!1,ye.current=setTimeout(()=>{ve.current=!0,ze(!0),navigator.vibrate&&navigator.vibrate(50)},200)},Ce=d=>{if(!ve.current){if(Ie.current){const J=d.touches[0],O=Math.abs(J.clientX-Ie.current.x),z=Math.abs(J.clientY-Ie.current.y);(O>10||z>10)&&ye.current&&(clearTimeout(ye.current),ye.current=null)}return}d.preventDefault(),Ne(!0),$e.current=!0;const f=d.touches[0],p=document.elementFromPoint(f.clientX,f.clientY),D=p==null?void 0:p.closest('[data-dropzone="myday"]');document.querySelectorAll('[data-dropzone="myday"]').forEach(J=>{J.classList.remove("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")}),D&&D.classList.add("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")},Fe=d=>{if(ye.current&&(clearTimeout(ye.current),ye.current=null),document.querySelectorAll('[data-dropzone="myday"]').forEach(f=>{f.classList.remove("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")}),Pe&&ve.current){const f=d.changedTouches[0],p=document.elementFromPoint(f.clientX,f.clientY);(p==null?void 0:p.closest('[data-dropzone="myday"]'))&&m(h.id,new Date().toISOString().split("T")[0])}else!$e.current&&!ve.current&&l(h);Ne(!1),setTimeout(()=>{ve.current=!1,ze(!1),$e.current=!1},100),Ie.current=null};return e.jsx("div",{draggable:!ie,onMouseDown:dt,onMouseUp:qe,onMouseLeave:pt,onDragStart:W,onDragEnd:qe,onClick:a,onTouchStart:te,onTouchMove:Ce,onTouchEnd:Fe,className:`group relative p-4 rounded-xl select-none transition-all duration-200 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50 hover:-translate-y-0.5 ${Te||Pe?"opacity-40 scale-[0.98]":Ve?"cursor-grabbing ring-2 ring-indigo-400 scale-[1.02] shadow-lg":"cursor-pointer"} ${ie?"bg-gray-50 dark:bg-gray-800/50 opacity-60":Ue?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800":h.critical?"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),M(h.id,h.status==="done"?"todo":"done")},className:`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${h.status==="done"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,children:h.status==="done"&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h4",{className:`font-medium text-sm leading-tight ${ie?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-100"}`,children:[h.critical&&!ie&&e.jsx("span",{className:"text-red-500 mr-1",children:"ðŸš©"}),Ue&&!ie&&e.jsx("span",{className:"text-orange-500 mr-1",children:"ðŸ”’"}),h.title]}),ne&&!ie&&e.jsx("button",{onClick:d=>Ze(d,h),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",title:"Remove from My Day",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[$&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),$.name]}),h.due_date&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${Ae==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":Ae==="today"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":Ae==="soon"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Dt(h.due_date)}),he&&e.jsxs("span",{className:"text-xs",title:`${he.label} effort`,children:[h.energy_level==="low"&&e.jsx("span",{style:{color:he.text},children:"â–°"}),h.energy_level==="medium"&&e.jsx("span",{style:{color:he.text},children:"â–°â–°"}),h.energy_level==="high"&&e.jsx("span",{style:{color:he.text},children:"â–°â–°â–°"})]}),h.time_estimate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:h.time_estimate<60?`${h.time_estimate}m`:`${Math.round(h.time_estimate/60)}h`})]})]})]})})},Ee=({title:h,emoji:ne,color:ie,tasks:$,id:he})=>{if($.length===0)return null;const Ae=_===he;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>w(Ae?null:he),className:`w-full px-4 py-3 flex items-center justify-between ${ie} transition-colors`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:ne}),e.jsx("span",{className:"font-medium text-sm",children:h}),e.jsx("span",{className:"text-xs bg-white/50 dark:bg-black/20 px-2 py-0.5 rounded-full",children:$.length})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${Ae?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Ae&&e.jsx("div",{className:"p-3 space-y-2 bg-white dark:bg-gray-900",children:$.map(Ue=>e.jsx(Se,{task:Ue},Ue.id))})]})};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"mb-6 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[F," ",y]}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[re[U.getDay()],", ",be[U.getMonth()]," ",U.getDate()]})]})}),se.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Today's Progress"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ge.length," of ",se.length," tasks (",xe,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${xe}%`}})}),Z>0&&e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["~",Math.round(Z/60),"h remaining"]}),e.jsxs("span",{children:["~",Math.round(je/60),"h completed"]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Day"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",pe.length," active)"]})]}),e.jsx("div",{"data-dropzone":"myday",onDragOver:Oe,onDragLeave:Ke,onDrop:Qe,className:`min-h-[200px] rounded-xl border-2 border-dashed transition-all ${g?"border-indigo-400 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-700"}`,children:pe.length===0&&ge.length===0?e.jsx(zr,{icon:"â˜€ï¸",title:"Your day is wide open",description:"Drag tasks here from the recommendations, or add tasks with today's start date to build your focus list.",variant:"default"}):e.jsxs("div",{className:"p-4 space-y-3",children:[pe.map(h=>e.jsx(Se,{task:h,showRemove:!0},h.id)),ge.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-4 pb-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Completed today (",ge.length,")"]}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),ge.map(h=>e.jsx(Se,{task:h,isCompleted:!0},h.id))]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’¡"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recommendations"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Drag tasks to My Day to add them to your focus list"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ee,{id:"overdue",title:"Overdue",emoji:"ðŸ”´",color:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",tasks:ke}),e.jsx(Ee,{id:"dueToday",title:"Due Today",emoji:"ðŸŸ ",color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",tasks:Le}),e.jsx(Ee,{id:"dueSoon",title:"Due Soon",emoji:"ðŸŸ¡",color:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",tasks:j}),e.jsx(Ee,{id:"quickWins",title:"Quick Wins",emoji:"ðŸŸ¢",color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400",tasks:E}),e.jsx(Ee,{id:"inProgress",title:"In Progress",emoji:"ðŸ”µ",color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",tasks:q}),e.jsx(Ee,{id:"todo",title:"To Do",emoji:"âšª",color:"bg-slate-50 dark:bg-slate-900/20 text-slate-700 dark:text-slate-400",tasks:V}),e.jsx(Ee,{id:"backlog",title:"Backlog",emoji:"ðŸ“‹",color:"bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400",tasks:X}),ke.length===0&&Le.length===0&&j.length===0&&E.length===0&&q.length===0&&V.length===0&&X.length===0&&e.jsx(zr,{icon:"ðŸŽ‰",title:"You're all caught up!",description:"No tasks need your attention right now. Enjoy the moment or create something new.",variant:"celebrate"})]})]})]})]})},Qs=({tasks:s,projects:c,onEditTask:l,allTasks:S})=>{var Le;const{user:x}=Hr(),[M,m]=o.useState("created_at"),[g,k]=o.useState("desc"),[_,w]=o.useState({}),[C,ce]=o.useState(!1),I=j=>{const K=s.map(q=>{var V,X,E;return j==="project"?(V=c.find(Z=>Z.id===q.project_id))==null?void 0:V.name:j==="category"?(X=it.find(Z=>Z.id===q.category))==null?void 0:X.label:j==="source"?(E=_t.find(Z=>Z.id===q.source))==null?void 0:E.label:q[j]}).filter(Boolean);return[...new Set(K)].sort()},U=j=>{M===j?k(g==="asc"?"desc":"asc"):(m(j),k("asc"))},v=o.useMemo(()=>s.filter(j=>{var K,q,V;for(const[X,E]of Object.entries(_)){if(!E)continue;let Z;if(X==="project"?Z=((K=c.find(je=>je.id===j.project_id))==null?void 0:K.name)||"":X==="category"?Z=((q=it.find(je=>je.id===j.category))==null?void 0:q.label)||"":X==="source"?Z=((V=_t.find(je=>je.id===j.source))==null?void 0:V.label)||"":Z=j[X]||"",E==="__blank__"&&Z||E!=="__blank__"&&String(Z).toLowerCase()!==String(E).toLowerCase())return!1}return!0}),[s,_,c]),re=o.useMemo(()=>[...v].sort((j,K)=>{var X,E,Z,je;let q,V;return M==="project"?(q=((X=c.find(xe=>xe.id===j.project_id))==null?void 0:X.name)||"",V=((E=c.find(xe=>xe.id===K.project_id))==null?void 0:E.name)||""):M==="category"?(q=((Z=it.find(xe=>xe.id===j.category))==null?void 0:Z.label)||"",V=((je=it.find(xe=>xe.id===K.category))==null?void 0:je.label)||""):(q=j[M]??"",V=K[M]??""),(M.includes("date")||M==="created_at")&&(q=q?new Date(q).getTime():0,V=V?new Date(V).getTime():0),typeof q=="boolean"&&(q=q?1:0),typeof V=="boolean"&&(V=V?1:0),q<V?g==="asc"?-1:1:q>V?g==="asc"?1:-1:0}),[v,M,g,c]),be=()=>{const j=["ID","Title","Project","Project Archived","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description","Created"],K=re.map(E=>{var je,xe;const Z=c.find(Oe=>Oe.id===E.project_id);return[E.id||"",E.title||"",(Z==null?void 0:Z.name)||"",Z!=null&&Z.archived?"Yes":"No",E.status||"",E.critical?"Yes":"No",E.due_date||"",E.start_date||"",E.assignee||"",E.customer||"",((je=it.find(Oe=>Oe.id===E.category))==null?void 0:je.label)||"",E.energy_level||"",((xe=_t.find(Oe=>Oe.id===E.source))==null?void 0:xe.label)||"",E.time_estimate?`${E.time_estimate}m`:"",(E.description||"").replace(/[\n\r,]/g," "),E.created_at?new Date(E.created_at).toLocaleDateString():""]}),q=[j,...K].map(E=>E.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(",")).join(`
`),V=new Blob([q],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(V),X.download=`trackli-tasks-${new Date().toISOString().split("T")[0]}.csv`,X.click()},b=()=>{var E;const j=["ID","Title","Project","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description"],K=["*","Example Task",((E=c[0])==null?void 0:E.name)||"Project Name","todo","No","","","","","","","","30m","Task description here"],q=[j,K].map(Z=>Z.map(je=>`"${String(je).replace(/"/g,'""')}"`).join(",")).join(`
`),V=new Blob([q],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a");X.href=URL.createObjectURL(V),X.download="trackli-template.csv",X.click()},[y,F]=o.useState(!1),[H,se]=o.useState(null),pe=o.useRef(null),ge=async j=>{var q,V,X;const K=(q=j.target.files)==null?void 0:q[0];if(K){F(!0),se(null);try{const Z=(await K.text()).split(`
`).filter(Te=>Te.trim());if(Z.length<2){se({error:"CSV must have a header row and at least one data row"}),F(!1);return}const je=Te=>{const de=[];let $e="",Ie=!1;for(let Pe=0;Pe<Te.length;Pe++){const Ne=Te[Pe];Ne==='"'?Ie&&Te[Pe+1]==='"'?($e+='"',Pe++):Ie=!Ie:Ne===","&&!Ie?(de.push($e.trim()),$e=""):$e+=Ne}return de.push($e.trim()),de},xe=je(Z[0]).map(Te=>Te.toLowerCase().trim()),Oe=xe.indexOf("id"),Ke=xe.indexOf("title"),Qe=xe.indexOf("project"),Ze=xe.indexOf("status"),Se=xe.indexOf("critical"),Ee=xe.indexOf("due date"),h=xe.indexOf("start date"),ne=xe.indexOf("assignee"),ie=xe.indexOf("customer"),$=xe.indexOf("category"),he=xe.indexOf("effort"),Ae=xe.indexOf("source"),Ue=xe.indexOf("time estimate"),ye=xe.indexOf("description");if(Ke===-1){se({error:"CSV must have a Title column"}),F(!1);return}let ve=0,Ve=0,ze=[];for(let Te=1;Te<Z.length;Te++){const de=je(Z[Te]);if(de.length===0||de.every(O=>!O))continue;const $e=Oe>=0?de[Oe]:"",Ie=Ke>=0?de[Ke]:"";if(!Ie){ze.push(`Row ${Te+1}: Missing title`);continue}const Pe=Qe>=0?de[Qe]:"",Ne=c.find(O=>O.name.toLowerCase()===Pe.toLowerCase()),dt=$>=0?de[$]:"",qe=it.find(O=>O.label.toLowerCase()===dt.toLowerCase()),pt=Ae>=0?de[Ae]:"",a=_t.find(O=>O.label.toLowerCase()===pt.toLowerCase()),W=Ze>=0?(V=de[Ze])==null?void 0:V.toLowerCase():"todo",Ce={backlog:"backlog","to do":"todo",todo:"todo","in progress":"in_progress",in_progress:"in_progress",done:"done"}[W]||"todo",Fe=Se>=0?(X=de[Se])==null?void 0:X.toLowerCase():"",d=Fe==="yes"||Fe==="true"||Fe==="1",f=Ue>=0?de[Ue]:"",p=f&&parseInt(f.replace(/m$/i,""))||null,D=O=>{if(!O)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(O))return O;const z=mr(),oe=O.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(oe){let le,ee;return z?(ee=oe[1].padStart(2,"0"),le=oe[2].padStart(2,"0")):(le=oe[1].padStart(2,"0"),ee=oe[2].padStart(2,"0")),`${oe[3]}-${ee}-${le}`}return null},J={title:Ie,project_id:(Ne==null?void 0:Ne.id)||null,status:Ce,critical:d,due_date:D(Ee>=0?de[Ee]:null),start_date:D(h>=0?de[h]:null),assignee:ne>=0&&de[ne]||null,customer:ie>=0&&de[ie]||null,category:(qe==null?void 0:qe.id)||null,energy_level:he>=0&&de[he]?de[he].toLowerCase():null,source:(a==null?void 0:a.id)||null,time_estimate:p,description:ye>=0&&de[ye]||null};try{if(!$e||$e==="*"){const{error:O}=await R.from("tasks").insert(J);if(O)throw O;ve++}else{const{error:O}=await R.from("tasks").update(J).eq("id",$e);if(O)throw O;Ve++}}catch(O){ze.push(`Row ${Te+1}: ${O.message}`)}}if(se({created:ve,updated:Ve,errors:ze}),ve>0||Ve>0){const{data:Te}=await R.from("tasks").select("*, dependencies:task_dependencies!task_dependencies_task_id_fkey(depends_on_id)").eq("user_id",x.id).order("created_at",{ascending:!1});Te&&window.location.reload()}}catch(E){se({error:`Failed to parse CSV: ${E.message}`})}F(!1),pe.current&&(pe.current.value="")}},ae=[{key:"title",label:"Title",width:"min-w-[200px]"},{key:"project",label:"Project",width:"min-w-[120px]"},{key:"status",label:"Status",width:"min-w-[100px]"},{key:"critical",label:"Critical",width:"min-w-[80px]"},{key:"due_date",label:"Due Date",width:"min-w-[100px]"},{key:"start_date",label:"Start Date",width:"min-w-[100px]"},{key:"assignee",label:"Assignee",width:"min-w-[120px]"},{key:"customer",label:"Customer",width:"min-w-[120px]"},{key:"category",label:"Category",width:"min-w-[120px]"},{key:"energy_level",label:"Effort",width:"min-w-[100px]"},{key:"source",label:"Source",width:"min-w-[100px]"},{key:"time_estimate",label:"Est. Time",width:"min-w-[90px]"},{key:"created_at",label:"Created",width:"min-w-[100px]"}],me=(j,K)=>{var q,V;switch(K){case"project":return((q=c.find(E=>E.id===j.project_id))==null?void 0:q.name)||"-";case"status":return{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done"}[j.status]||j.status;case"critical":return j.critical?"ðŸš¨ Yes":"-";case"due_date":case"start_date":return j[K]?Dt(j[K]):"-";case"category":return((V=it.find(E=>E.id===j.category))==null?void 0:V.label)||"-";case"energy_level":return{high:"â–°â–°â–° High",medium:"â–°â–° Medium",low:"â–° Low"}[j.energy_level]||"-";case"source":const X=_t.find(E=>E.id===j.source);return X?`${X.icon} ${X.label}`:"-";case"time_estimate":return j.time_estimate?Mt(j.time_estimate):"-";case"created_at":return j.created_at?new Date(j.created_at).toLocaleDateString():"-";default:return j[K]||"-"}},ke=j=>({backlog:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",todo:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",in_progress:"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300",done:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"})[j]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"All Tasks"}),e.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-sm text-gray-600 dark:text-gray-300",children:[re.length," ",re.length===1?"task":"tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>ce(!C),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${C||Object.values(_).some(j=>j)?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters",Object.values(_).some(j=>j)&&e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]}),Object.values(_).some(j=>j)&&e.jsx("button",{onClick:()=>w({}),className:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Clear Filters"}),e.jsx("div",{className:"w-px h-6 bg-gray-200 dark:bg-gray-700"}),e.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 rounded-lg text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",title:"Download blank CSV template with example row",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Template"]}),e.jsxs("button",{onClick:()=>{var j;return(j=pe.current)==null?void 0:j.click()},disabled:y,className:"flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Import CSV to create or update tasks",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),y?"Importing...":"Import CSV"]}),e.jsx("input",{ref:pe,type:"file",accept:".csv",onChange:ge,className:"hidden"})]})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>se(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:H.error?"Import Error":"Import Complete"}),H.error?e.jsx("p",{className:"text-red-600 dark:text-red-400",children:H.error}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-green-600",children:H.created})," tasks created"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:H.updated})," tasks updated"]}),((Le=H.errors)==null?void 0:Le.length)>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Errors:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:[H.errors.slice(0,5).map((j,K)=>e.jsx("li",{children:j},K)),H.errors.length>5&&e.jsxs("li",{children:["...and ",H.errors.length-5," more"]})]})]})]}),e.jsx("button",{onClick:()=>se(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 z-10",children:[e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800",children:ae.map(j=>e.jsx("th",{className:`${j.width} px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700`,children:e.jsxs("button",{onClick:()=>U(j.key),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[j.label,M===j.key&&e.jsx("svg",{className:`w-4 h-4 ${g==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},j.key))}),C&&e.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800/50",children:ae.map(j=>e.jsx("th",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:["title","time_estimate","created_at"].includes(j.key)?e.jsx("span",{className:"text-xs text-gray-400",children:"-"}):e.jsxs("select",{value:_[j.key]||"",onChange:K=>w({..._,[j.key]:K.target.value}),className:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),j.key==="status"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),j.key==="critical"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),j.key==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),["project","assignee","customer","category","source"].includes(j.key)&&I(j.key).map(K=>e.jsx("option",{value:K,children:K},K))]})},`filter-${j.key}`))})]}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:re.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:ae.length,className:"px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try adjusting your filters or search terms"})]})})}):re.map(j=>{const K=c.find(V=>V.id===j.project_id),q=K==null?void 0:K.archived;return e.jsx("tr",{onClick:()=>l(j),className:`cursor-pointer transition-colors ${q?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,children:ae.map(V=>e.jsx("td",{className:"px-4 py-3 text-sm",children:V.key==="title"?e.jsxs("div",{className:"flex items-center gap-2",children:[j.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš¨"}),q&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:"Archived"}),e.jsx("span",{className:`font-medium truncate max-w-[250px] ${q?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:j.title})]}):V.key==="status"?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ke(j.status)}`,children:me(j,V.key)}):V.key==="critical"?e.jsx("span",{className:j.critical?"text-red-500 font-medium":"text-gray-400",children:me(j,V.key)}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:me(j,V.key)})},`${j.id}-${V.key}`))},j.id)})})]})})]})},Js=({task:s,project:c,onEdit:l,onDragStart:S,showProject:x=!0,allTasks:M=[],onQuickComplete:m,bulkSelectMode:g,isSelected:k,onToggleSelect:_,onStatusChange:w,onSetDueDate:C,onToggleMyDay:ce,isDragging:I,onUpdateTitle:U,onToggleCritical:v})=>{var Ke,Qe,Ze,Se,Ee,h,ne,ie;const[re,be]=o.useState(!1),[b,y]=o.useState(!1),[F,H]=o.useState(s.title),se=o.useRef(null),pe=$=>{g||!U||($.stopPropagation(),y(!0),H(s.title),setTimeout(()=>{var he;return(he=se.current)==null?void 0:he.focus()},0))},ge=()=>{F.trim()&&F!==s.title&&U(s.id,F.trim()),y(!1)},ae=$=>{$.key==="Enter"?($.preventDefault(),ge()):$.key==="Escape"&&(H(s.title),y(!1))},me=jt(s.due_date,s.status),ke=ht(s,M),Le=s.recurrence_type?Vr.find($=>$.id===s.recurrence_type):null,j=s.status==="done",K=s.status==="in_progress",q=Pt(s),V=it.find($=>$.id===s.category),X=zt[s.energy_level],E=xr(s),Z=!j&&me==="overdue",je=!j&&me==="today",xe=Z?"#DC2626":je?"#D97706":ke?"#F97316":s.critical?"#EF4444":q?"#10B981":St[s.status],Oe=s.description||s.assignee||V||((Ke=s.subtasks)==null?void 0:Ke.length)>0||((Qe=s.attachments)==null?void 0:Qe.length)>0;return e.jsxs("div",{draggable:!0,onDragStart:$=>S($,s),onClick:()=>g?_==null?void 0:_(s.id):l(s),className:`task-card relative rounded-lg p-2.5 shadow-sm border cursor-pointer transition-all duration-200 group hover:z-[100] ${I?"opacity-30 scale-95 ring-2 ring-dashed ring-indigo-400 bg-indigo-50 dark:bg-indigo-900/30":"hover:-translate-y-1 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50"} ${!I&&j?"opacity-60 bg-white dark:bg-gray-800":!I&&Z?"bg-red-50 dark:bg-red-900/40":!I&&je?"bg-amber-50 dark:bg-amber-900/40":I?"":"bg-white dark:bg-gray-800"} ${k?"ring-2 ring-indigo-500 border-indigo-300":Z?"border-red-300 dark:border-red-500 hover:border-red-400 dark:hover:border-red-400":je?"border-amber-300 dark:border-amber-500 hover:border-amber-400 dark:hover:border-amber-400":ke?"border-orange-200 dark:border-orange-800 hover:border-orange-300":s.critical?"border-red-200 dark:border-red-800 hover:border-red-300":q?"border-green-200 dark:border-green-800 hover:border-green-300":"border-gray-100 dark:border-gray-700 hover:border-gray-200"}`,style:{borderLeftWidth:"2px",borderLeftColor:xe},children:[Oe&&e.jsxs("div",{className:`hidden md:block absolute top-0 z-[200] w-56 p-3 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none ${s.status==="done"?"right-full mr-2":"left-full ml-2"}`,children:[V&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:V.color},children:V.label})}),s.customer&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-2",children:s.customer}),X&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:X.bg,color:X.text},children:[X.icon," ",X.label]})}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 line-clamp-3",children:s.description}),s.assignee&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-[10px] font-medium flex items-center justify-center flex-shrink-0",children:s.assignee.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:s.assignee})]}),((Ze=s.dependencies)==null?void 0:Ze.length)>0&&(()=>{const $=s.dependencies.map(he=>M.find(Ae=>Ae.id===he.depends_on_id)).filter(he=>he&&he.status!=="done");return $.length===0?null:e.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"ðŸš« Blocked by:"}),$.map(he=>e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["â€¢ ",he.title]},he.id))]})})(),((Se=s.subtasks)==null?void 0:Se.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Subtasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s.subtasks.filter($=>$.completed).length/s.subtasks.length*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.subtasks.filter($=>$.completed).length,"/",s.subtasks.length]})]})]}),((Ee=s.attachments)==null?void 0:Ee.length)>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“Ž ",s.attachments.length," attachment",s.attachments.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col",children:[g&&e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("button",{onClick:$=>{$.stopPropagation(),_==null||_(s.id)},className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${k?"bg-indigo-500 border-indigo-500 text-white":"border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-800"}`,children:k&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[E&&!j&&e.jsx("span",{className:"text-xs flex-shrink-0",title:"In My Day",children:"â˜€ï¸"}),Z&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-red-100 dark:bg-red-500/80 text-red-700 dark:text-white flex-shrink-0",children:"OVERDUE"}),je&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-amber-100 dark:bg-amber-500/80 text-amber-700 dark:text-white flex-shrink-0",children:"TODAY"}),ke&&e.jsx("span",{title:"Blocked",className:"text-xs flex-shrink-0",children:"ðŸ”’"}),s.critical&&e.jsx("span",{title:"Critical",className:"text-xs flex-shrink-0",children:"ðŸš©"}),Le&&e.jsx("span",{title:Le.label,className:"text-xs flex-shrink-0",children:"ðŸ”"}),b?e.jsx("input",{ref:se,type:"text",value:F,onChange:$=>H($.target.value),onBlur:ge,onKeyDown:ae,onClick:$=>$.stopPropagation(),className:"flex-1 text-xs font-medium bg-white dark:bg-gray-700 border border-indigo-400 rounded px-1.5 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700 dark:text-gray-200"}):e.jsx("h4",{onClick:$=>U&&$.stopPropagation(),onDoubleClick:pe,className:`flex-1 text-xs font-medium line-clamp-2 leading-tight ${Z?"text-red-700 dark:text-red-200 group-hover:text-red-800 dark:group-hover:text-red-100":je?"text-amber-700 dark:text-amber-200 group-hover:text-amber-800 dark:group-hover:text-amber-100":"text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"} ${U?"cursor-text":""}`,title:U?"Double-click to edit":"",children:s.title})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-1.5 text-[10px] text-gray-600 dark:text-gray-400",children:[s.start_date&&e.jsxs("span",{className:`flex items-center gap-0.5 ${q?"text-green-600 dark:text-green-400":""}`,children:[e.jsx("span",{children:"â–¶"})," ",Dt(s.start_date)]}),s.due_date&&e.jsxs("span",{className:`flex items-center gap-0.5 font-medium ${me==="overdue"?"text-red-600 dark:text-red-400":me==="today"?"text-orange-600 dark:text-orange-400":me==="soon"?"text-amber-600 dark:text-amber-400":""}`,children:[e.jsx("span",{children:"ðŸ“…"})," ",Dt(s.due_date)]}),s.time_estimate&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("span",{children:"â±"})," ",Mt(s.time_estimate)]}),X&&e.jsxs("span",{className:"px-1.5 py-0.5 text-[9px] font-medium rounded-full",style:{backgroundColor:X.bg,color:X.text},title:X.label,children:[X.icon," ",X.label]})]}),s.customer&&e.jsx("div",{className:"mt-1.5",children:e.jsx("span",{className:"inline-block px-2 py-0.5 text-[10px] font-medium rounded-full",style:{backgroundColor:((h=gr(s.customer))==null?void 0:h.bg)||"#EDE9FE",color:((ne=gr(s.customer))==null?void 0:ne.text)||"#7C3AED",border:`1px solid ${((ie=gr(s.customer))==null?void 0:ie.border)||"#C4B5FD"}`},children:s.customer})}),x&&c&&e.jsx("div",{className:"mt-2 pt-1.5 border-t border-gray-100 dark:border-gray-700",children:e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:c.name})})]})]}),!I&&e.jsx("div",{className:"hidden md:flex absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 scale-90 group-hover:scale-100 z-10",children:e.jsxs("div",{className:"flex items-center gap-0.5 p-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:[!K&&!j&&m&&e.jsx("button",{onClick:$=>{$.stopPropagation(),m(s.id,"in_progress")},className:"p-1.5 text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded transition-colors",title:"Start working",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),m&&e.jsx("button",{onClick:$=>{$.stopPropagation(),m(s.id,j?"todo":"done")},className:`p-1.5 rounded transition-colors ${j?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/30":"text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:j?"Reopen task":"Mark done",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),v&&e.jsx("button",{onClick:$=>{$.stopPropagation(),v(s.id,!s.critical)},className:`p-1.5 rounded transition-colors ${s.critical?"text-red-500 bg-red-50 dark:bg-red-900/30":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:s.critical?"Remove critical flag":"Mark as critical",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:s.critical?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),ce&&!E&&!j&&e.jsx("button",{onClick:$=>{$.stopPropagation(),ce(s.id,!0)},className:"p-1.5 text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded transition-colors",title:"Add to My Day",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),w&&e.jsx("div",{className:"sm:hidden mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:re?e.jsx("div",{className:"flex gap-1",children:lt.map($=>e.jsx("button",{onClick:he=>{he.stopPropagation(),$.id!==s.status&&w(s.id,$.id),be(!1)},className:`flex-1 py-1 rounded text-xs font-medium ${$.id===s.status?"bg-gray-200 dark:bg-gray-600":"bg-gray-100 dark:bg-gray-700"}`,style:$.id===s.status?{backgroundColor:$.color+"30",color:$.color}:{},children:$.id==="backlog"?"ðŸ“¥":$.id==="todo"?"ðŸ“‹":$.id==="in_progress"?"â³":"âœ…"},$.id))}):e.jsx("button",{onClick:$=>{$.stopPropagation(),be(!0)},className:"w-full py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-300",children:"Move to..."})})]})},Xs=({tasks:s,projects:c,onEditTask:l,onUndoComplete:S})=>{const[x,M]=o.useState(!1);if(s.length===0)return null;const m=g=>{const k=new Date(g),w=new Date-k,C=Math.floor(w/6e4),ce=Math.floor(w/36e5),I=Math.floor(w/864e5);return C<1?"just now":C<60?`${C}m ago`:ce<24?`${ce}h ago`:`${I}d ago`};return e.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>M(!x),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Recently Completed"}),e.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 px-2 py-0.5 rounded-full",children:s.length})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"px-4 pb-4 space-y-2",children:s.map(g=>{const k=c.find(_=>_.id===g.project_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-gray-200 dark:hover:border-gray-600 transition-colors",children:[e.jsx("button",{onClick:()=>S(g.id),className:"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center shrink-0 hover:bg-amber-500 transition-colors",title:"Mark as incomplete",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>l(g),children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-through truncate",children:g.title}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:k&&e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:k.name})})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 shrink-0",children:m(g.completed_at)})]},g.id)})})]})},Rr=({column:s,tasks:c,projects:l,onEditTask:S,onDragStart:x,onDragOver:M,onDrop:m,showProject:g,allTasks:k,onQuickComplete:_,onStatusChange:w,onSetDueDate:C,bulkSelectMode:ce,selectedTaskIds:I,onToggleSelect:U,onAddTask:v,onToggleMyDay:re,isMobileFullWidth:be,draggedTask:b,onUpdateTitle:y,onToggleCritical:F})=>{const[H,se]=o.useState(!1),[pe,ge]=o.useState(!1),[ae,me]=o.useState(!1),ke=c.reduce((E,Z)=>E+(Z.time_estimate||0),0),Le=c.filter(E=>E.critical).length,j=c.filter(E=>Pt(E)).length,K=s.id==="done",q=s.id==="backlog";let V=c,X=0;return K&&!pe?(V=c.slice(0,dr),X=Math.max(0,c.length-dr)):q&&!ae&&(V=c.slice(0,cr),X=Math.max(0,c.length-cr)),e.jsxs("div",{className:`${be?"w-full":"flex-shrink-0 w-[280px] sm:w-[300px] lg:flex-1 lg:min-w-[300px] lg:max-w-[400px] xl:max-w-[450px]"} bg-gray-50/80 dark:bg-gray-800/80 rounded-2xl p-3 sm:p-4 transition-all duration-200 overflow-visible ${H?"ring-2 ring-indigo-400 ring-offset-2 dark:ring-offset-gray-900 bg-indigo-50/50 dark:bg-indigo-900/20 scale-[1.01]":""}`,onDragOver:E=>{E.preventDefault(),se(!0),M(E,s.id)},onDragLeave:()=>se(!1),onDrop:E=>{se(!1),m(E,s.id)},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:s.title}),e.jsx("span",{className:"ml-auto bg-white dark:bg-gray-700 px-2.5 py-0.5 rounded-full text-sm font-medium text-gray-500 dark:text-gray-300 shadow-sm",children:c.length})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 ml-6 text-xs text-gray-500 dark:text-gray-400",children:[ke>0&&e.jsx("span",{children:Mt(ke)}),s.id!=="done"&&Le>0&&e.jsxs("span",{className:"text-red-500",children:[Le," critical"]}),s.id==="backlog"&&j>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[j," ready"]})]}),e.jsxs("div",{className:"space-y-2 overflow-visible",children:[V.length===0&&!H&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-2 opacity-60",children:e.jsx("span",{className:"text-lg",children:s.id==="done"?"âœ…":s.id==="in_progress"?"ðŸ’­":s.id==="todo"?"ðŸ“‹":"ðŸ“¦"})}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:s.id==="done"?"Completed tasks appear here":s.id==="in_progress"?"Tasks you're working on":s.id==="todo"?"Ready to start":"Future tasks"})]}),V.map(E=>e.jsx(Js,{task:E,project:l.find(Z=>Z.id===E.project_id),onEdit:S,onDragStart:x,showProject:g,allTasks:k,onQuickComplete:_,onStatusChange:w,onSetDueDate:C,bulkSelectMode:ce,isSelected:I==null?void 0:I.has(E.id),onToggleSelect:U,onToggleMyDay:re,isDragging:(b==null?void 0:b.id)===E.id,onUpdateTitle:y,onToggleCritical:F},E.id)),K&&X>0&&!pe&&e.jsxs("button",{onClick:()=>ge(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-indigo-300 transition-all",children:["View all ",c.length," completed tasks â†’"]}),K&&pe&&c.length>dr&&e.jsx("button",{onClick:()=>ge(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all",children:"Show less â†‘"}),q&&X>0&&!ae&&e.jsxs("button",{onClick:()=>me(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-indigo-300 transition-all",children:["View all ",c.length," backlog tasks â†’"]}),q&&ae&&c.length>cr&&e.jsx("button",{onClick:()=>me(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-gray-300 transition-all",children:"Show less â†‘"}),b&&b.status!==s.id&&H&&e.jsxs("div",{className:"w-full py-4 rounded-xl border-2 border-dashed border-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20 animate-dropZone flex items-center justify-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Drop here"]}),e.jsxs("button",{onClick:()=>v(s.id),className:"w-full mt-3 py-2.5 text-sm text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-medium rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 transition-all flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add task"]})]})]})},Zs=({isOpen:s,onClose:c,task:l,projects:S,allTasks:x,onSave:M,onDelete:m,loading:g,templates:k=[],onSaveTemplate:_,onDeleteTemplate:w})=>{var qe,pt;const C=o.useRef(null),[ce,I]=o.useState(!1),[U,v]=o.useState(!1),[re,be]=o.useState(""),[b,y]=o.useState({title:"",description:"",project_id:"",status:"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),[F,H]=o.useState([]),[se,pe]=o.useState([]),[ge,ae]=o.useState([]),[me,ke]=o.useState("details"),[Le,j]=o.useState(""),[K,q]=o.useState(!1),[V,X]=o.useState(!1),[E,Z]=o.useState(""),[je,xe]=o.useState(!1),[Oe,Ke]=o.useState(""),[Qe,Ze]=o.useState(""),[Se,Ee]=o.useState([]),[h,ne]=o.useState(""),[ie,$]=o.useState([]),[he,Ae]=o.useState(""),Ue=o.useRef(null),[ye,ve]=o.useState(null);o.useEffect(()=>{const a=W=>{var te;U&&(W.key==="Escape"&&v(!1),W.key==="Enter"&&(m(l.id),v(!1),c())),(W.ctrlKey||W.metaKey)&&W.key==="s"&&!U&&(W.preventDefault(),(te=document.querySelector("form"))==null||te.requestSubmit())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[U,l,m,c]);const Ve=a=>{a&&(y(W=>({...W,title:a.title||"",description:a.description||"",project_id:a.project_id||W.project_id,category:a.category||"deliverable",energy_level:a.energy_level||"medium",time_estimate:a.time_estimate||"",source:a.source||"ad_hoc",assignee:a.assignee||"",customer:a.customer||"",critical:a.critical||!1,recurrence_type:a.recurrence_type||null,recurrence_count:a.recurrence_count||8})),Ee(a.subtasks||[]),a.assignee&&(S.flatMap(te=>te.team_members||[]).includes(a.assignee)||(X(!0),Z(a.assignee))),a.customer&&(xe(!0),Ke(a.customer)))},ze=async a=>{var te;const W=(te=a.clipboardData)==null?void 0:te.items;if(W){for(const Ce of W)if(Ce.type.startsWith("image/")){a.preventDefault();const Fe=Ce.getAsFile();if(Fe){const d=new Date().toISOString().replace(/[:.]/g,"-"),f=Fe.type.split("/")[1]||"png",p=new File([Fe],`pasted-image-${d}.${f}`,{type:Fe.type});if(p.size>10*1024*1024){j("Pasted image is too large. Max size is 10MB.");return}ae(D=>[...D,p]),Ze("ðŸ“Ž Image captured!"),setTimeout(()=>Ze(""),2e3)}break}}};o.useEffect(()=>{var W,te,Ce,Fe;const a=(l==null?void 0:l.id)||(s?"new":null);if(!(!s||Ue.current===a)){if(Ue.current=a,l!=null&&l.id){const d=S.find(D=>D.id===l.project_id),f=d&&!((W=d.members)!=null&&W.includes(l.assignee))&&l.assignee,p=d&&!((te=d.customers)!=null&&te.includes(l.customer))&&l.customer;y({title:l.title||"",description:l.description||"",project_id:l.project_id||"",status:l.status||"backlog",critical:l.critical||!1,start_date:l.start_date||"",start_time:l.start_time||"",end_time:l.end_time||"",due_date:l.due_date||"",assignee:f?"":l.assignee||"",time_estimate:l.time_estimate||"",energy_level:l.energy_level||"medium",category:l.category||"deliverable",source:l.source||"ad_hoc",source_link:l.source_link||"",customer:p?"":l.customer||"",notes:l.notes||"",recurrence_type:l.recurrence_type||null,recurrence_count:l.recurrence_count||8,recurrence_end_date:l.recurrence_end_date||""}),pe(l.attachments||[]),H(((Ce=l.dependencies)==null?void 0:Ce.map(D=>D.depends_on_id))||[]),X(f),Z(f?l.assignee:""),xe(p),Ke(p?l.customer:""),Ee(l.subtasks||[]),$(l.comments||[])}else y({title:"",description:"",project_id:(l==null?void 0:l.project_id)||((Fe=S[0])==null?void 0:Fe.id)||"",status:(l==null?void 0:l.status)||"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),pe([]),H([]),X(!1),Z(""),xe(!1),Ke(""),Ee([]),$([]);ae([]),ke("details"),j(""),ne(""),Ae("")}},[l==null?void 0:l.id,s]),o.useEffect(()=>{s||(Ue.current=null)},[s]);const Te=S.find(a=>a.id===b.project_id),de=async a=>{const W=Array.from(a.target.files);if(W.length===0)return;j("");const te=[];for(const Ce of W){if(Ce.size>10*1024*1024){j(`File "${Ce.name}" is too large. Max size is 10MB.`);continue}te.push(Ce)}ae([...ge,...te]),C.current&&(C.current.value="")},$e=a=>{ae(ge.filter((W,te)=>te!==a))},Ie=a=>{pe(se.filter(W=>W.id!==a))},Pe=async a=>{a.preventDefault();const W=V?E:b.assignee,te=je?Oe:b.customer;await M({...b,assignee:W,customer:te,time_estimate:b.time_estimate?parseInt(b.time_estimate):null,id:l==null?void 0:l.id,dependencies:F,subtasks:Se,comments:ie},ge,se),c()},Ne=(x==null?void 0:x.filter(a=>a.project_id===b.project_id&&a.id!==(l==null?void 0:l.id)&&a.status!=="done"))||[],dt=a=>a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":(a/(1024*1024)).toFixed(1)+" MB";return e.jsxs(ur,{isOpen:s,onClose:c,title:l?"Edit Task":"New Task",wide:!0,children:[e.jsxs("form",{onSubmit:Pe,children:[!l&&k.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"ðŸ“‹ Use template:"}),e.jsxs("select",{onChange:a=>{const W=k.find(te=>te.id===parseInt(a.target.value));W&&Ve(W),a.target.value=""},className:"flex-1 min-w-[150px] px-3 py-1.5 bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",value:"",children:[e.jsx("option",{value:"",children:"Select a template..."}),k.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),w&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{type:"button",className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",title:"Manage templates",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 hidden group-hover:block",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700",children:"Delete template"}),k.map(a=>e.jsxs("button",{type:"button",onClick:()=>w(a.id),className:"w-full px-3 py-1.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.name]},a.id))]})]})]})}),e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 overflow-x-auto",children:[{id:"details",label:"Details"},{id:"additional",label:"More"},{id:"subtasks",label:"Subtasks"},{id:"dependencies",label:"Deps"},{id:"activity",label:"Activity"}].map(a=>e.jsx("button",{type:"button",onClick:()=>ke(a.id),className:`sm:flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${me===a.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-800 dark:text-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:a.label},a.id))}),me==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:b.title,onChange:a=>y({...b,title:a.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.title?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,placeholder:"What needs to be done?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:a=>y({...b,description:a.target.value}),onPaste:ze,rows:2,className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.description?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Add more context... (paste images here!)"}),Qe&&me==="details"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Qe})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project *"}),e.jsxs("select",{required:!0,value:b.project_id,onChange:a=>y({...b,project_id:a.target.value,assignee:"",customer:""}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.project_id?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,children:[e.jsx("option",{value:"",children:"Select project"}),S.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:b.status,onChange:a=>y({...b,status:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:lt.map(a=>e.jsx("option",{value:a.id,children:a.title},a.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer/Client"}),je?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Oe,onChange:a=>Ke(a.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Customer name"}),e.jsx("button",{type:"button",onClick:()=>{xe(!1),Ke("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:b.customer,onChange:a=>{a.target.value==="__other__"?(xe(!0),y({...b,customer:""})):y({...b,customer:a.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.customer?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"No customer"}),(qe=Te==null?void 0:Te.customers)==null?void 0:qe.map(a=>e.jsx("option",{value:a,children:a},a)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Effort Level"}),e.jsx("select",{value:b.energy_level,onChange:a=>y({...b,energy_level:a.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.energy_level?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:Object.entries(zt).map(([a,W])=>e.jsxs("option",{value:a,children:[W.icon," ",W.label]},a))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Start Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:b.start_date,onChange:a=>y({...b,start_date:a.target.value}),onBlur:a=>{const W=a.target.value.trim();if(!W){y({...b,start_date:""});return}const te=Qt(W);te.date&&y({...b,start_date:te.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${b.start_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Due Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:b.due_date,onChange:a=>y({...b,due_date:a.target.value}),onBlur:a=>{const W=a.target.value.trim();if(!W){y({...b,due_date:""});return}const te=Qt(W);te.date&&y({...b,due_date:te.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${b.due_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"text",value:b.start_time||"",onChange:a=>y({...b,start_time:a.target.value}),onBlur:a=>{const W=Pr(a.target.value);if(W||!a.target.value){const te={start_time:W};if(W&&b.time_estimate){const[Ce,Fe]=W.split(":").map(Number),f=Ce*60+Fe+parseInt(b.time_estimate),p=Math.floor(f/60),D=f%60;te.end_time=`${String(p).padStart(2,"0")}:${String(D).padStart(2,"0")}`}y({...b,...te})}},placeholder:"e.g. 9am, 230pm, 14:30",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"text",value:b.end_time||"",onChange:a=>y({...b,end_time:a.target.value}),onBlur:a=>{const W=Pr(a.target.value);if(W||!a.target.value){const te={end_time:W};if(b.start_time&&W){const[Ce,Fe]=b.start_time.split(":").map(Number),[d,f]=W.split(":").map(Number),p=Ce*60+Fe,J=d*60+f-p;J>0&&(te.time_estimate=String(J))}y({...b,...te})}},placeholder:"e.g. 10am, 430pm, 16:00",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>y({...b,critical:!b.critical}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${b.critical?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 ring-2 ring-red-300 dark:ring-red-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸš© Critical"}),e.jsx("button",{type:"button",onClick:()=>y({...b,recurrence_type:b.recurrence_type?null:"weekly"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${b.recurrence_type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-2 ring-blue-300 dark:ring-blue-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸ” Recurring"})]}),b.recurrence_type&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Repeat"}),e.jsx("select",{value:b.recurrence_type||"",onChange:a=>y({...b,recurrence_type:a.target.value||null}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:Vr.filter(a=>a.id).map(a=>e.jsx("option",{value:a.id,children:a.label},a.id))})]}),b.start_date?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Occurrences"}),e.jsx("input",{type:"number",min:"1",max:"52",value:b.recurrence_count,onChange:a=>y({...b,recurrence_count:parseInt(a.target.value)||1,recurrence_end_date:""}),className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Or until date"}),e.jsx("input",{type:"text",value:b.recurrence_end_date,onChange:a=>y({...b,recurrence_end_date:a.target.value}),onBlur:a=>{const W=a.target.value.trim();if(!W)return;const te=Qt(W);te.date&&y({...b,recurrence_end_date:te.date,recurrence_count:0})},placeholder:"e.g. M+6",className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["ðŸ“… ",b.recurrence_end_date?`Will create occurrences until ${b.recurrence_end_date}`:`Will create ${b.recurrence_count} future occurrence${b.recurrence_count!==1?"s":""}`]})]}):e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Set a Start Date above for recurrence to work"]})]})]}),me==="subtasks"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("h3",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:"Checklist"})]}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-300 mb-4",children:"Break down this task into smaller steps"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:h,onChange:a=>ne(a.target.value),onKeyDown:a=>{a.key==="Enter"&&h.trim()&&(a.preventDefault(),Ee([...Se,{id:Date.now().toString(),title:h.trim(),completed:!1}]),ne(""))},placeholder:"Add a subtask...",className:"flex-1 px-4 py-2.5 border border-indigo-200 dark:border-indigo-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("button",{type:"button",onClick:()=>{h.trim()&&(Ee([...Se,{id:Date.now().toString(),title:h.trim(),completed:!1}]),ne(""))},className:"px-4 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium",children:"Add"})]}),Se.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:[e.jsxs("span",{children:[Se.filter(a=>a.completed).length," of ",Se.length," completed"]}),e.jsxs("span",{children:[Math.round(Se.filter(a=>a.completed).length/Se.length*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-indigo-200 dark:bg-indigo-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${Se.filter(a=>a.completed).length/Se.length*100}%`}})})]}),Se.length===0?e.jsxs("div",{className:"text-center py-8 text-indigo-400 dark:text-indigo-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No subtasks yet. Add some to track progress!"})]}):e.jsx("div",{className:"space-y-2",children:Se.map((a,W)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${a.completed?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>{Ee(Se.map(te=>te.id===a.id?{...te,completed:!te.completed}:te))},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${a.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-indigo-400"}`,children:a.completed&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`flex-1 ${a.completed?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-200"}`,children:a.title}),e.jsx("button",{type:"button",onClick:()=>Ee(Se.filter(te=>te.id!==a.id)),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},a.id))})]})}),me==="additional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"number",min:"0",step:"5",value:b.time_estimate,onChange:a=>{const W=a.target.value,te={time_estimate:W};if(b.start_time&&W){const[Ce,Fe]=b.start_time.split(":").map(Number),f=Ce*60+Fe+parseInt(W),p=Math.floor(f/60),D=f%60;te.end_time=`${String(p).padStart(2,"0")}:${String(D).padStart(2,"0")}`}y({...b,...te})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.time_estimate?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Minutes (e.g., 30)"}),b.time_estimate&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Mt(parseInt(b.time_estimate))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assignee"}),V?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:E,onChange:a=>Z(a.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Enter name"}),e.jsx("button",{type:"button",onClick:()=>{X(!1),Z("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:b.assignee,onChange:a=>{a.target.value==="__other__"?(X(!0),y({...b,assignee:""})):y({...b,assignee:a.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${b.assignee?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),(pt=Te==null?void 0:Te.members)==null?void 0:pt.map(a=>e.jsx("option",{value:a,children:a},a)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:b.category,onChange:a=>y({...b,category:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:it.map(a=>e.jsx("option",{value:a.id,children:a.label},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),e.jsx("select",{value:b.source,onChange:a=>y({...b,source:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:_t.map(a=>e.jsxs("option",{value:a.id,children:[a.icon," ",a.label]},a.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Link"}),e.jsx("input",{type:"text",value:b.source_link,onChange:a=>y({...b,source_link:a.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"URL or reference to the source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:a=>y({...b,notes:a.target.value}),onPaste:ze,rows:4,className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Running notes, context, updates... (paste images here!)"}),Qe&&me==="additional"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Qe})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:[e.jsx("input",{ref:C,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:de,className:"hidden"}),e.jsx("input",{id:"camera-input",type:"file",accept:"image/*",capture:"environment",onChange:de,className:"hidden"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var a;return(a=document.getElementById("camera-input"))==null?void 0:a.click()},disabled:K,className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"ðŸ“· Take Photo"}),e.jsx("button",{type:"button",onClick:()=>{var a;return(a=C.current)==null?void 0:a.click()},disabled:K,className:"w-full sm:w-auto px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600",children:K?"Uploading...":"ðŸ“Ž Choose Files"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Max 10MB â€¢ Paste images with âŒ˜V"})]}),Le&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:Le}),(se.length>0||ge.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[se.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>ve(a),children:[e.jsx("span",{className:"text-lg",children:"ðŸ“„"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:a.file_name}),e.jsx("p",{className:"text-xs text-gray-400",children:dt(a.file_size)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>ve(a),className:"p-1.5 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg text-indigo-500",title:"View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",title:"Download",children:"â¬‡ï¸"}),e.jsx("button",{type:"button",onClick:()=>Ie(a.id),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500",title:"Delete",children:"ðŸ—‘ï¸"})]})]},a.id)),ge.map((a,W)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"âž•"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:a.name}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["New â€¢ ",dt(a.size)]})]})]}),e.jsx("button",{type:"button",onClick:()=>$e(W),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500 flex-shrink-0",children:"âœ•"})]},W))]})]})]}),me==="dependencies"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”—"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-orange-800 dark:text-orange-300",children:"Task Dependencies"}),e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"This task will be blocked until selected tasks are completed"})]})]}),b.project_id?Ne.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No other tasks available to link as dependencies"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Ne.map(a=>{var te;const W=F.includes(a.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${W?"border-orange-300 dark:border-orange-600 bg-orange-100 dark:bg-orange-900/40":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-orange-200 dark:hover:border-orange-700"}`,children:[e.jsx("input",{type:"checkbox",checked:W,onChange:Ce=>{Ce.target.checked?H([...F,a.id]):H(F.filter(Fe=>Fe!==a.id))},className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-orange-600 focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:a.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(te=lt.find(Ce=>Ce.id===a.status))==null?void 0:te.title,a.assignee&&` â€¢ ${a.assignee}`]})]}),a.critical&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400 rounded-full",children:"Critical"})]},a.id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Select a project first to add dependencies"}),F.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-orange-200 dark:border-orange-800",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-400 font-medium",children:["âœ“ ",F.length," dependenc",F.length===1?"y":"ies"," selected - task will be blocked until complete"]})})]})}),me==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Add a Comment"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Notes and updates about this task"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("textarea",{value:he,onChange:a=>Ae(a.target.value),placeholder:"Add a comment or note...",rows:2,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"}),e.jsx("button",{type:"button",onClick:()=>{if(he.trim()){const a={id:Date.now().toString(),text:he.trim(),created_at:new Date().toISOString(),type:"comment"};$([a,...ie]),Ae("")}},disabled:!he.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium sm:self-end",children:"Add Comment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Activity & Comments",ie.length>0&&e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["(",ie.length,")"]})]}),ie.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“"}),e.jsx("p",{className:"text-sm",children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Add notes to track progress and context"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:ie.map(a=>e.jsx("div",{className:`p-3 rounded-lg border ${a.type==="comment"?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[a.type==="comment"?e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:a.text}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:a.icon||"â€¢"})," ",a.text]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(a.created_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.type==="comment"&&e.jsx("button",{type:"button",onClick:()=>$(ie.filter(W=>W.id!==a.id)),className:"p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete comment",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},a.id))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 mt-6 border-t border-gray-100 dark:border-gray-700",children:[l&&e.jsx("button",{type:"button",onClick:()=>v(!0),disabled:g,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),ce?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:re,onChange:a=>be(a.target.value),placeholder:"Template name...",className:"px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-800 focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{re.trim()&&_&&(_({...b,name:re.trim(),subtasks:Se}),be(""),I(!1))},disabled:!re.trim(),className:"px-3 py-2 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/60 disabled:opacity-50",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{I(!1),be("")},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{type:"button",onClick:()=>I(!0),className:"px-4 py-2.5 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors text-sm",title:"Save current task settings as a reusable template",children:"ðŸ’¾ Save as Template"}),e.jsx("button",{type:"button",onClick:c,className:"ml-auto px-4 py-2.5 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:g?"Saving...":l?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Task"]})})]})]}),e.jsx(Os,{isOpen:!!ye,onClose:()=>ve(null),attachment:ye,attachments:se,onNavigate:ve}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ—‘ï¸"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Task"})]}),e.jsxs("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:['Delete "',l==null?void 0:l.title,'"? This cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{m(l.id),v(!1),c()},className:"px-4 py-2 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Delete"})]})]})})]})},ea=({isOpen:s,onClose:c,project:l,onSave:S,onDelete:x,onArchive:M,loading:m,onShowConfirm:g})=>{const[k,_]=o.useState({name:"",members:[],customers:[]}),[w,C]=o.useState(""),[ce,I]=o.useState("");o.useEffect(()=>{_(l?{name:l.name,members:[...l.members||[]],customers:[...l.customers||[]]}:{name:"",members:[],customers:[]}),C(""),I("")},[l,s]),o.useEffect(()=>{const y=F=>{var H;(F.ctrlKey||F.metaKey)&&F.key==="s"&&s&&(F.preventDefault(),(H=document.querySelector("form"))==null||H.requestSubmit())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[s]);const U=()=>{w.trim()&&!k.members.includes(w.trim())&&(_({...k,members:[...k.members,w.trim()]}),C(""))},v=y=>{_({...k,members:k.members.filter(F=>F!==y)})},re=()=>{ce.trim()&&!k.customers.includes(ce.trim())&&(_({...k,customers:[...k.customers,ce.trim()]}),I(""))},be=y=>{_({...k,customers:k.customers.filter(F=>F!==y)})},b=async y=>{y.preventDefault(),await S({...k,id:l==null?void 0:l.id}),c()};return e.jsx(ur,{isOpen:s,onClose:c,title:l?"Edit Project":"New Project",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:k.name,onChange:y=>_({...k,name:y.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:w,onChange:y=>C(y.target.value),onKeyDown:y=>y.key==="Enter"&&(y.preventDefault(),U()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add team member"}),e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2.5 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.members.map(y=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-sm",children:[y,e.jsx("button",{type:"button",onClick:()=>v(y),className:"hover:text-indigo-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customers/Clients"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:ce,onChange:y=>I(y.target.value),onKeyDown:y=>y.key==="Enter"&&(y.preventDefault(),re()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add customer/client"}),e.jsx("button",{type:"button",onClick:re,className:"px-4 py-2.5 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.customers.map(y=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm",children:[y,e.jsx("button",{type:"button",onClick:()=>be(y),className:"hover:text-purple-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},y))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{g({title:"Delete Project",message:`Delete "${l.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{x(l.id),c()}})},disabled:m,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{M(l.id),c()},disabled:m,className:"px-4 py-2.5 text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl transition-colors disabled:opacity-50",children:l.archived?"Unarchive":"Archive"})]}),e.jsx("button",{type:"button",onClick:c,className:"ml-auto px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium disabled:opacity-50",children:m?"Saving...":l?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Project"]})})]})]})})};function ca(){const{user:s,signOut:c}=Hr(),S=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒ":"Ctrl+Alt+",[x,M]=o.useState([]),[m,g]=o.useState([]),[k,_]=o.useState(!0),[w,C]=o.useState(!1),[ce,I]=o.useState(null),[U,v]=o.useState(null),[re,be]=o.useState(null),b=(t,r="success")=>{be({message:t,type:r}),setTimeout(()=>be(null),3e3)},[y,F]=o.useState("board"),[H,se]=o.useState("monthly"),[pe,ge]=o.useState(!1),[ae,me]=o.useState(()=>typeof window<"u"?localStorage.getItem("trackli-dark-mode")==="true":!1),[ke,Le]=o.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[j,K]=o.useState(1),[q,V]=o.useState(!1),[X,E]=o.useState(!1),[Z,je]=o.useState(!1),[xe,Oe]=o.useState(!1),[Ke,Qe]=o.useState("board"),[Ze,Se]=o.useState(()=>!localStorage.getItem("trackli_onboarding_complete")),[Ee,h]=o.useState(0),[ne,ie]=o.useState(null),[$,he]=o.useState(0),[Ae,Ue]=o.useState(()=>{const t=localStorage.getItem("trackli_view_tours_completed");return t?JSON.parse(t):{}}),[ye,ve]=o.useState("all"),[Ve,ze]=o.useState(!1),[Te,de]=o.useState(!1),[$e,Ie]=o.useState(!1),[Pe,Ne]=o.useState(null),[dt,qe]=o.useState(null),[pt,a]=o.useState(null),[W,te]=o.useState(null),[Ce,Fe]=o.useState(null),[d,f]=o.useState(!1),[p,D]=o.useState(!1),[J,O]=o.useState(!1),[z,oe]=o.useState(!1),[le,ee]=o.useState(!1),[A,we]=o.useState(!1),[Ye,Me]=o.useState(!1),[De,B]=o.useState(""),[fe,tt]=o.useState({}),[st,Lt]=o.useState(""),[Jt,Xt]=o.useState(!1),[It,hr]=o.useState("all"),[Rt,at]=o.useState(""),[Ge,et]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_saved_views")||"[]")}catch{return[]}}),[vt,ct]=o.useState(!1),[Je,Tt]=o.useState(""),[$t,pr]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_task_templates")||"[]")}catch{return[]}}),[ta,ra]=o.useState(!1),[qr,yr]=o.useState(!1),[Yr,Et]=o.useState(!1),[Re,gt]=o.useState({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),[xt,mt]=o.useState([]),[br,fr]=o.useState(!1),[Kr,yt]=o.useState(!1),[bt,Zt]=o.useState(null),[Bt,Ht]=o.useState(!1),[sa,Vt]=o.useState(""),[Gr,Qr]=o.useState(!1),Ut=o.useRef(null);o.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;Qr(!!t)},[]);const Jr=(t,r=!1)=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;if(!n){alert("Voice input is not supported in this browser. Try Chrome or Safari.");return}const i=new n;i.continuous=r,i.interimResults=!0,i.lang="en-GB",i.onstart=()=>{Ht(!0)},i.onresult=u=>{let N="";for(let T=0;T<u.results.length;T++)N+=u.results[T][0].transcript;t(N)},i.onerror=u=>{console.error("Speech recognition error:",u.error),Ht(!1),u.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access in your browser settings.")},i.onend=()=>{Ht(!1)},Ut.current=i,i.start()},er=()=>{Ut.current&&(Ut.current.stop(),Ut.current=null),Ht(!1)},Xr=(t,r=!1)=>{Bt?er():Jr(t,r)},[qt,Zr]=o.useState(null),[He,wt]=o.useState(null),[Ft,Nt]=o.useState(!1),[We,ot]=o.useState(new Set),[aa,na]=o.useState(!1),[es,At]=o.useState(!1),[Yt,Kt]=o.useState(""),[kr,tr]=o.useState(""),[ts,rr]=o.useState(!1);o.useEffect(()=>{localStorage.setItem("trackli-dark-mode",ae),ae?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[ae]),o.useEffect(()=>{const t=()=>{Le(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{const t=r=>{var u,N,T;if(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.tagName==="SELECT")return;const i=navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey&&r.ctrlKey:r.ctrlKey&&r.altKey;if(i&&(r.key==="k"||r.key==="s")){r.preventDefault(),V(!0);return}if(r.key==="/"){r.preventDefault(),V(!0);return}if(r.key==="q"){r.preventDefault(),x.length>0&&(tr(((u=x[0])==null?void 0:u.id)||""),At(!0));return}if(i&&r.key==="t"){r.preventDefault(),x.length>0&&(Ne(null),de(!0));return}if(i&&r.key==="p"){r.preventDefault(),qe(null),Ie(!0);return}if(i&&r.key==="n"){r.preventDefault(),x.length>0&&(gt({...Re,projectId:((N=x[0])==null?void 0:N.id)||""}),mt([]),yt(!1),Vt(""),Et(!0));return}if(i&&r.key==="v"){r.preventDefault(),x.length>0&&(gt({...Re,projectId:((T=x[0])==null?void 0:T.id)||"",notes:""}),mt([]),yt(!1),Vt(" "),Et(!0));return}if(i&&r.key==="d"){r.preventDefault(),F("myday");return}if(i&&r.key==="b"){r.preventDefault(),F("board");return}if(i&&r.key==="l"){r.preventDefault(),F("calendar");return}if(i&&r.key==="a"){r.preventDefault(),F("tasks");return}if(r.key==="?"||r.shiftKey&&r.key==="/"){r.preventDefault(),Qe("shortcuts"),E(!0);return}if(r.key==="Escape"&&Ft){Nt(!1),ot(new Set);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[x,Re,m]),o.useEffect(()=>{if(ke||Ze)return;if(["myday","calendar","tasks","projects","progress"].includes(y)&&!Ae[y]){const r=setTimeout(()=>{ie(y),he(0)},500);return()=>clearTimeout(r)}},[y,Ae,ke,Ze]);const jr=t=>{const r={...Ae,[t]:!0};Ue(r),localStorage.setItem("trackli_view_tours_completed",JSON.stringify(r)),ie(null),he(0)},rs=async()=>{try{const t=new Date().toISOString().split("T")[0],r=new Date(Date.now()+864e5).toISOString().split("T")[0],n=new Date(Date.now()+7*864e5).toISOString().split("T")[0],{data:i,error:u}=await R.from("projects").insert({name:"ðŸš€ Getting Started with Trackli",user_id:s.id}).select().single();if(u)throw console.error("Project creation error:",u),u;const N=[{title:"ðŸ‘‹ Welcome! Click me to see task details",description:`This is the task editor. Here you can:

â€¢ Set due dates and start dates
â€¢ Add time estimates
â€¢ Assign to team members
â€¢ Add subtasks
â€¢ Attach files
â€¢ Set up recurring schedules

Try editing this task, then mark it complete!`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:5},{title:"â˜€ï¸ Check out My Day view",description:`My Day is your daily focus list. Tasks appear here if:

â€¢ Their start date is today or earlier
â€¢ You manually add them via the â˜€ï¸ icon

Try switching to My Day view in the menu!`,status:"todo",project_id:i.id,start_date:t,energy_level:"medium",time_estimate:10},{title:"ðŸ“… Explore the Calendar view",description:`The Calendar view lets you:

â€¢ See tasks on their due dates
â€¢ Drag tasks to reschedule them
â€¢ Switch between daily, weekly, and monthly views

This task is due tomorrow!`,status:"todo",project_id:i.id,due_date:r,energy_level:"medium",time_estimate:15},{title:"ðŸ“ Try the Notes feature for meetings",description:`Click the Notes button in the header to:

â€¢ Paste meeting notes
â€¢ Use voice-to-text (speak your notes!)
â€¢ AI extracts action items automatically

Perfect for turning meetings into tasks!`,status:"todo",project_id:i.id,energy_level:"high",time_estimate:20},{title:"âŒ¨ï¸ Learn keyboard shortcuts",description:`Speed up your workflow with shortcuts:

â€¢ âŒ˜/Ctrl + âŒƒ + T â€” New task
â€¢ âŒ˜/Ctrl + S â€” Save
â€¢ Escape â€” Close modal
â€¢ ? â€” Help menu

Click the ? icon anytime for more!`,status:"backlog",project_id:i.id,due_date:n,energy_level:"low",time_estimate:10},{title:"âœ… Complete this task to see the celebration!",description:`When you complete all your My Day tasks, you get a confetti celebration! ðŸŽ‰

Try completing this task by clicking the circle on the left.`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:1}],{data:T,error:L}=await R.from("tasks").insert(N).select();if(L)throw L;const P=T.find(G=>G.title.includes("Welcome!"));P&&await R.from("subtasks").insert([{task_id:P.id,title:"Read this task description",completed:!1,position:0},{task_id:P.id,title:"Check out the different views (My Day, Calendar, etc.)",completed:!1,position:1},{task_id:P.id,title:"Complete a task to see it move to Done",completed:!1,position:2}]),yr(!0),await ft()}catch(t){console.error("Error creating welcome project:",t)}};o.useEffect(()=>{ft()},[]);const ft=async()=>{var t;_(!0),I(null);try{const{data:r,error:n}=await R.from("projects").select("*").order("created_at",{ascending:!1});if(n)throw n;const i=await Promise.all(r.map(async Q=>{const{data:ue}=await R.from("project_members").select("name").eq("project_id",Q.id),{data:Be}=await R.from("project_customers").select("name").eq("project_id",Q.id);return{...Q,members:(ue==null?void 0:ue.map(_e=>_e.name))||[],customers:(Be==null?void 0:Be.map(_e=>_e.name))||[]}})),{data:u,error:N}=await R.from("tasks").select("*").order("created_at",{ascending:!1});if(N)throw N;const T=await Promise.all(u.map(async Q=>{const{data:ue}=await R.from("attachments").select("*").eq("task_id",Q.id),Be=(ue==null?void 0:ue.map(Xe=>({...Xe,file_url:R.storage.from("attachments").getPublicUrl(Xe.file_path).data.publicUrl})))||[],{data:_e}=await R.from("task_dependencies").select("depends_on_id").eq("task_id",Q.id);return{...Q,attachments:Be,dependencies:_e||[]}}));M(i),g(T);const{data:{user:L}}=await R.auth.getUser();if(!((t=L==null?void 0:L.user_metadata)==null?void 0:t.has_been_welcomed)&&i.length===0&&T.length===0){await rs(),await R.auth.updateUser({data:{has_been_welcomed:!0}});return}const G=new Date;G.setHours(0,0,0,0);const Y=T.filter(Q=>{if(Q.status!=="backlog"||!Q.start_date)return!1;const ue=new Date(Q.start_date);return ue.setHours(0,0,0,0),ue<=G});for(const Q of Y)await R.from("tasks").update({status:"todo"}).eq("id",Q.id);if(Y.length>0){const{data:Q}=await R.from("tasks").select("*").order("created_at",{ascending:!1}),ue=await Promise.all(Q.map(async Be=>{const{data:_e}=await R.from("attachments").select("*").eq("task_id",Be.id),Xe=(_e==null?void 0:_e.map(Ot=>({...Ot,file_url:R.storage.from("attachments").getPublicUrl(Ot.file_path).data.publicUrl})))||[],{data:rt}=await R.from("task_dependencies").select("depends_on_id").eq("task_id",Be.id);return{...Be,attachments:Xe,dependencies:rt||[]}}));g(ue)}}catch(r){console.error("Error fetching data:",r),I(r.message)}finally{_(!1)}},ss=t=>{const r=t.split(`
`),n=as(t);return n.length>0?n:is(r)},as=t=>{const r=t.split(`
`),n=[];let i=-1,u={followUp:-1,owner:-1,dueDate:-1,status:-1},N="|";for(let L=0;L<r.length;L++){const P=r[L].toLowerCase();if(P.includes("|")&&(P.includes("follow")||P.includes("action")||P.includes("task"))){const G=r[L].split("|").map(Y=>Y.trim().toLowerCase());for(let Y=0;Y<G.length;Y++){const Q=G[Y];Q.includes("follow")||Q.includes("action")||Q.includes("task")||Q.includes("item")?u.followUp=Y:Q.includes("owner")||Q.includes("assignee")||Q.includes("who")||Q.includes("responsible")?u.owner=Y:Q.includes("due")||Q.includes("date")||Q.includes("when")||Q.includes("deadline")?u.dueDate=Y:(Q.includes("status")||Q.includes("state")||Q.includes("progress"))&&(u.status=Y)}if(u.followUp!==-1){i=L,N="|";break}}if(P.includes("	")&&(P.includes("follow")||P.includes("action")||P.includes("task"))){const G=r[L].split("	").map(Y=>Y.trim().toLowerCase());for(let Y=0;Y<G.length;Y++){const Q=G[Y];Q.includes("follow")||Q.includes("action")||Q.includes("task")||Q.includes("item")?u.followUp=Y:Q.includes("owner")||Q.includes("assignee")||Q.includes("who")?u.owner=Y:Q.includes("due")||Q.includes("date")||Q.includes("when")?u.dueDate=Y:(Q.includes("status")||Q.includes("state"))&&(u.status=Y)}if(u.followUp!==-1){i=L,N="	";break}}}if(i===-1||u.followUp===-1)return[];let T=i+1;T<r.length&&/^[\s|:-]+$/.test(r[T].replace(/\t/g,""))&&T++;for(let L=T;L<r.length;L++){const P=r[L].trim();if(!P||!P.includes(N)&&N==="|"||N==="	"&&!P.includes("	")&&P.split(/\s{2,}/).length<2){if(n.length>0)break;continue}const G=N==="|"?P.split("|").map(rt=>rt.trim()):P.split("	").map(rt=>rt.trim()),Y=G[u.followUp]||"",Q=u.owner!==-1&&G[u.owner]||"",ue=u.dueDate!==-1&&G[u.dueDate]||"",Be=u.status!==-1?(G[u.status]||"").toLowerCase():"";if(!Y||Y.length<3||Be.includes("done")||Be.includes("complete")||Be.includes("closed"))continue;let _e=Re.date;if(ue){const rt=ns(ue);rt&&(_e=rt)}const Xe=/urgent|asap|critical|important|high/i.test(Y)||/urgent|asap|critical|important|high/i.test(Be);n.push({id:`extracted-table-${L}`,title:Y.charAt(0).toUpperCase()+Y.slice(1),assignee:Q,dueDate:_e,selected:!0,critical:Xe})}return n},ns=t=>{if(!t)return null;const r=t.trim().toLowerCase(),n=new Date,i=mr();if(r==="today"||r==="eod")return n.toISOString().split("T")[0];if(r==="tomorrow")return n.setDate(n.getDate()+1),n.toISOString().split("T")[0];if(r==="asap")return n.toISOString().split("T")[0];const N=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(r);if(N!==-1){let P=(N-n.getDay()+7)%7;return P===0&&(P=7),n.setDate(n.getDate()+P),n.toISOString().split("T")[0]}let T=t.match(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/);if(T){let P,G;i?(G=parseInt(T[1])-1,P=parseInt(T[2])):(P=parseInt(T[1]),G=parseInt(T[2])-1);const Y=T[3].length===2?2e3+parseInt(T[3]):parseInt(T[3]),Q=new Date(Y,G,P);if(!isNaN(Q.getTime()))return Q.toISOString().split("T")[0]}if(T=t.match(/(\d{1,2})[\/\-](\d{1,2})(?!\d)/),T){let P,G;i?(G=parseInt(T[1])-1,P=parseInt(T[2])):(P=parseInt(T[1]),G=parseInt(T[2])-1);const Y=new Date(n.getFullYear(),G,P);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}const L=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(T=t.match(/(\d{1,2})\s*(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i),T){const P=parseInt(T[1]),G=L.indexOf(T[2].toLowerCase()),Y=new Date(n.getFullYear(),G,P);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}if(T=t.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s*(\d{1,2})/i),T){const P=parseInt(T[2]),G=L.indexOf(T[1].toLowerCase()),Y=new Date(n.getFullYear(),G,P);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}return null},is=t=>{var u,N,T,L,P;const r=[],n=[/^[-*â€¢]\s*\[?\s*\]?\s*(.+)/i,/^(?:action|todo|task|to-do|to do)[:\s]+(.+)/i,/^(\d+[.)]\s*.+)/i,/(.+?)\s+(?:will|to|should|must|needs? to|has to)\s+(.+)/i,/(?:@|assigned to:?)\s*(\w+)\s*[-:]\s*(.+)/i,/^(?:ai|action item)[:\s]+(.+)/i,/^follow[ -]?up[:\s]+(.+)/i],i=/^(schedule|send|create|update|review|prepare|draft|complete|finish|follow|contact|call|email|write|set up|organize|coordinate|check|confirm|arrange|book|submit|share|distribute|circulate|research|investigate|look into|find|get|obtain|collect|gather|compile|analyze|assess|evaluate|implement|execute|deliver|present|discuss|meet|sync|align|escalate|resolve|fix|address)/i;for(let G=0;G<t.length;G++){const Y=t[G].trim();if(!Y)continue;let Q=!1,ue="",Be="";for(const _e of n){const Xe=Y.match(_e);if(Xe){_e.toString().includes("will|to|should")?(Be=((u=Xe[1])==null?void 0:u.trim())||"",ue=`${Be} ${((N=Xe[2])==null?void 0:N.trim())||""}`.trim()):_e.toString().includes("@|assigned")?(Be=((T=Xe[1])==null?void 0:T.trim())||"",ue=((L=Xe[2])==null?void 0:L.trim())||""):ue=((P=Xe[1])==null?void 0:P.trim())||"",Q=!0;break}}if(!Q&&i.test(Y)&&(ue=Y,Q=!0),!Q&&Y.includes(":")&&!Y.startsWith("http")){const _e=Y.split(":");if(_e.length>=2&&_e[0].length<30){const Xe=_e[0].trim(),rt=_e.slice(1).join(":").trim();rt.length>5&&i.test(rt)&&(Be=Xe,ue=rt,Q=!0)}}if(Q&&ue.length>3){ue=ue.replace(/^[-*â€¢]\s*\[?\s*\]?\s*/,"").replace(/^\d+[.)]\s*/,"").replace(/^(?:action|todo|task|ai|action item|follow[ -]?up)[:\s]*/i,"").trim();let _e=Re.date;const Xe=[/by\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/by\s+(\d{1,2}\/\d{1,2})/i,/due\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/(eod|end of day|eow|end of week|asap)/i];for(const rt of Xe){const Ot=ue.match(rt);if(Ot){const kt=Ot[1].toLowerCase(),nt=new Date;if(kt==="today"||kt==="eod"||kt==="end of day")_e=nt.toISOString().split("T")[0];else if(kt==="tomorrow")nt.setDate(nt.getDate()+1),_e=nt.toISOString().split("T")[0];else if(kt==="asap")_e=nt.toISOString().split("T")[0];else if(kt==="eow"||kt==="end of week"){const Br=(5-nt.getDay()+7)%7||7;nt.setDate(nt.getDate()+Br),_e=nt.toISOString().split("T")[0]}else if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(kt)){let lr=(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(kt)-nt.getDay()+7)%7;lr===0&&(lr=7),nt.setDate(nt.getDate()+lr),_e=nt.toISOString().split("T")[0]}ue=ue.replace(rt,"").trim()}}ue.length>3&&r.push({id:`extracted-${G}`,title:ue.charAt(0).toUpperCase()+ue.slice(1),assignee:Be,dueDate:_e,selected:!0,critical:/urgent|asap|critical|important/i.test(ue)})}}return r},os=async()=>{if(!(!Re.notes.trim()&&!bt)){fr(!0);try{if(bt){const t=await fetch("/api/extract-from-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:bt.base64,mediaType:bt.mediaType})});if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to extract tasks from image")}const n=(await t.json()).tasks.map((i,u)=>({id:`img-${Date.now()}-${u}`,title:i.title,assignee:i.assignee||"",dueDate:i.dueDate||Re.date,critical:i.isCritical||!1,selected:!0}));mt(n),yt(!0)}else setTimeout(()=>{const t=ss(Re.notes);mt(t),yt(!0)},300)}catch(t){console.error("Extraction error:",t),I(t.message)}finally{fr(!1)}}},ls=t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];if(!r){console.log("No file selected");return}console.log("File selected:",r.name,r.type,r.size);const n=new Image,i=new FileReader;i.onload=N=>{n.onload=()=>{let{width:P,height:G}=n;if(P>2e3||G>2e3){const _e=Math.min(2e3/P,2e3/G);P=Math.round(P*_e),G=Math.round(G*_e)}const Y=document.createElement("canvas");Y.width=P,Y.height=G,Y.getContext("2d").drawImage(n,0,0,P,G);const ue=Y.toDataURL("image/jpeg",.8),Be=ue.split(",")[1];console.log("Compressed image size:",Math.round(Be.length*.75/1024),"KB"),Zt({base64:Be,mediaType:"image/jpeg",preview:ue,name:r.name||"photo.jpg"}),I(null)},n.onerror=()=>{console.error("Failed to load image"),I("Failed to load image")},n.src=N.target.result},i.onerror=()=>{console.error("FileReader error:",i.error),I("Failed to read image file")},i.readAsDataURL(r)},ds=async()=>{var r;const t=xt.filter(n=>n.selected);if(t.length!==0){C(!0),I(null);try{const n=Re.projectId||((r=x[0])==null?void 0:r.id);if(!n)throw new Error("Please select a project");const i=x.find(N=>N.id===n),u=(i==null?void 0:i.members)||[];for(const N of t){let T=null;N.assignee&&(T=u.find(G=>G.toLowerCase().includes(N.assignee.toLowerCase())||N.assignee.toLowerCase().includes(G.toLowerCase().split(" ")[0])));const L={title:N.title,description:Re.title?`From meeting: ${Re.title}`:"",project_id:n,status:"todo",critical:N.critical,start_date:null,due_date:N.dueDate||null,assignee:T||N.assignee||null,time_estimate:null,energy_level:"medium",category:"meeting_followup",source:"meeting",source_link:null,customer:null,notes:null},{error:P}=await R.from("tasks").insert(L);if(P)throw P}await ft(),Et(!1),gt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),mt([]),yt(!1),Vt(""),er()}catch(n){console.error("Error creating tasks:",n),I(n.message)}finally{C(!1)}}},Wt=(t,r,n)=>{mt(i=>i.map(u=>u.id===t?{...u,[r]:n}:u))},cs=t=>{mt(r=>r.filter(n=>n.id!==t))},gs=async t=>{C(!0),I(null);try{if(t.id){const{error:n}=await R.from("projects").update({name:t.name}).eq("id",t.id);if(n)throw n;await R.from("project_members").delete().eq("project_id",t.id),await R.from("project_customers").delete().eq("project_id",t.id),t.members.length>0&&await R.from("project_members").insert(t.members.map(i=>({project_id:t.id,name:i}))),t.customers.length>0&&await R.from("project_customers").insert(t.customers.map(i=>({project_id:t.id,name:i})))}else{const{data:n,error:i}=await R.from("projects").insert({name:t.name,user_id:s.id}).select().single();if(i)throw i;t.members.length>0&&await R.from("project_members").insert(t.members.map(u=>({project_id:n.id,name:u}))),t.customers.length>0&&await R.from("project_customers").insert(t.customers.map(u=>({project_id:n.id,name:u})))}await ft();const r=!t.id;b(r?"âœ“ Project created":"âœ“ Project saved")}catch(r){console.error("Error saving project:",r),I(r.message)}finally{C(!1)}},vr=async t=>{C(!0);try{const{error:r}=await R.from("projects").delete().eq("id",t);if(r)throw r;ye===t&&ve("all"),await ft()}catch(r){console.error("Error deleting project:",r),I(r.message)}finally{C(!1)}},sr=async t=>{const r=x.find(i=>i.id===t),n=r!=null&&r.archived?"unarchive":"archive";C(!0);try{const{error:i}=await R.from("projects").update({archived:!(r!=null&&r.archived)}).eq("id",t);if(i)throw i;M(x.map(u=>u.id===t?{...u,archived:!u.archived}:u)),v({taskId:null,previousStatus:null,taskTitle:`Project ${n}d`}),setTimeout(()=>v(null),3e3)}catch(i){console.error(`Error ${n}ing project:`,i),I(i.message)}finally{C(!1)}},xs=async t=>{if(We.size!==0){C(!0);try{const r=Array.from(We),{error:n}=await R.from("tasks").update({status:t}).in("id",r);if(n)throw n;g(m.map(i=>We.has(i.id)?{...i,status:t}:i)),v({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks moved to ${t.replace("_"," ")}`}),setTimeout(()=>v(null),3e3),Nt(!1),ot(new Set)}catch(r){console.error("Error bulk updating tasks:",r),I(r.message)}finally{C(!1)}}},ms=async()=>{We.size!==0&&wt({title:"Delete Tasks",message:`Are you sure you want to delete ${We.size} selected task${We.size===1?"":"s"}? This cannot be undone.`,confirmLabel:"Delete",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:async()=>{C(!0);try{const t=Array.from(We),{error:r}=await R.from("tasks").delete().in("id",t);if(r)throw r;g(m.filter(n=>!We.has(n.id))),v({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks deleted`}),setTimeout(()=>v(null),3e3),Nt(!1),ot(new Set),wt(null)}catch(t){console.error("Error bulk deleting tasks:",t),I(t.message)}finally{C(!1)}}})},us=async t=>{var r;if(!(We.size===0||!t)){C(!0);try{const n=Array.from(We),{error:i}=await R.from("tasks").update({project_id:t}).in("id",n);if(i)throw i;const u=((r=x.find(N=>N.id===t))==null?void 0:r.name)||"project";g(m.map(N=>We.has(N.id)?{...N,project_id:t}:N)),v({taskId:null,previousStatus:null,taskTitle:`${n.length} tasks moved to ${u}`}),setTimeout(()=>v(null),3e3),Nt(!1),ot(new Set)}catch(n){console.error("Error bulk moving tasks:",n),I(n.message)}finally{C(!1)}}},hs=async t=>{if(We.size!==0){C(!0);try{const r=Array.from(We),{error:n}=await R.from("tasks").update({assignee:t||null}).in("id",r);if(n)throw n;g(m.map(i=>We.has(i.id)?{...i,assignee:t||null}:i)),v({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks assigned to ${t||"nobody"}`}),setTimeout(()=>v(null),3e3),Nt(!1),ot(new Set)}catch(r){console.error("Error bulk assigning tasks:",r),I(r.message)}finally{C(!1)}}},ps=async()=>{if(We.size!==0){C(!0);try{const t=Array.from(We),r=m.filter(N=>We.has(N.id)),i=!(r.filter(N=>N.critical).length>r.length/2),{error:u}=await R.from("tasks").update({critical:i}).in("id",t);if(u)throw u;g(m.map(N=>We.has(N.id)?{...N,critical:i}:N)),v({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks ${i?"marked critical":"unmarked"}`}),setTimeout(()=>v(null),3e3),Nt(!1),ot(new Set)}catch(t){console.error("Error bulk toggling critical:",t),I(t.message)}finally{C(!1)}}},ys=()=>{ot(new Set(ut.map(t=>t.id)))},bs=()=>{ot(new Set)},fs=async(t,r=[],n=[])=>{C(!0),I(null);try{let i=t.id;if(i){const{error:N}=await R.from("tasks").update({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).eq("id",i);if(N)throw N;await R.from("task_dependencies").delete().eq("task_id",i),t.dependencies&&t.dependencies.length>0&&await R.from("task_dependencies").insert(t.dependencies.map(G=>({task_id:i,depends_on_id:G})));const T=n.map(G=>G.id),{data:L}=await R.from("attachments").select("id, file_path").eq("task_id",i),P=(L==null?void 0:L.filter(G=>!T.includes(G.id)))||[];for(const G of P)await R.storage.from("attachments").remove([G.file_path]),await R.from("attachments").delete().eq("id",G.id)}else{const{data:N,error:T}=await R.from("tasks").insert({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).select().single();if(T)throw T;if(i=N.id,t.dependencies&&t.dependencies.length>0&&await R.from("task_dependencies").insert(t.dependencies.map(L=>({task_id:i,depends_on_id:L}))),t.recurrence_type&&t.start_date){const L=t.recurrence_end_date?Or(t.start_date,t.recurrence_type,0,t.recurrence_end_date):Or(t.start_date,t.recurrence_type,t.recurrence_count||8);let P=null;t.due_date&&t.start_date&&(P=new Date(t.due_date)-new Date(t.start_date));const G=L.map(Y=>{let Q=null;if(P!==null){const ue=new Date(Y);ue.setTime(ue.getTime()+P),Q=ue.toISOString().split("T")[0]}return{title:t.title,description:t.description,project_id:t.project_id,status:"backlog",critical:t.critical,start_date:Y,start_time:t.start_time||null,end_time:t.end_time||null,due_date:Q,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type,recurrence_parent_id:i,subtasks:t.subtasks||[]}});if(G.length>0){const{error:Y}=await R.from("tasks").insert(G);Y&&console.error("Error creating future occurrences:",Y)}}}for(const N of r){const T=`${s.id}/${i}/${Date.now()}_${N.name}`,{error:L}=await R.storage.from("attachments").upload(T,N);if(L)throw L;await R.from("attachments").insert({task_id:i,file_name:N.name,file_path:T,file_size:N.size,file_type:N.type})}await ft();const u=!t.id;b(u?"âœ“ Task created":"âœ“ Task saved")}catch(i){console.error("Error saving task:",i),I(i.message)}finally{C(!1)}},Gt=async(t,r=!1)=>{const n=m.find(i=>i.id===t);if(n&&(n.recurrence_type||n.recurrence_parent_id)&&!r&&!Ce){Fe({taskId:t,title:n.title,parentId:n.recurrence_parent_id||n.id});return}C(!0);try{if(r&&n){const i=n.recurrence_parent_id||n.id,u=m.filter(T=>T.id===i||T.recurrence_parent_id===i);for(const T of u){const{data:L}=await R.from("attachments").select("file_path").eq("task_id",T.id);(L==null?void 0:L.length)>0&&await R.storage.from("attachments").remove(L.map(P=>P.file_path))}const{error:N}=await R.from("tasks").delete().or(`id.eq.${i},recurrence_parent_id.eq.${i}`);if(N)throw N;await ft(),b(`Deleted ${u.length} recurring tasks`)}else{const{data:i}=await R.from("attachments").select("file_path").eq("task_id",t);(i==null?void 0:i.length)>0&&await R.storage.from("attachments").remove(i.map(N=>N.file_path));const{error:u}=await R.from("tasks").delete().eq("id",t);if(u)throw u;await ft(),b("Task deleted")}}catch(i){console.error("Error deleting task:",i),I(i.message)}finally{C(!1),Fe(null)}},ks=async(t,r,n=null)=>{var u;if(!t.trim())return;const i=r||((u=x[0])==null?void 0:u.id);if(i)try{C(!0);const{data:N,error:T}=await R.from("tasks").insert({title:t.trim(),project_id:i,status:"backlog",due_date:n,energy_level:"medium",category:"deliverable",source:"ad_hoc"}).select().single();if(T)throw T;g(L=>[...L,{...N,attachments:[],dependencies:[]}]),Kt(""),At(!1)}catch(N){console.error("Error creating task:",N),I(N.message)}finally{C(!1)}},ar=async(t,r)=>{try{const n=m.find(u=>u.id===t),{error:i}=await R.from("tasks").update({my_day_date:r}).eq("id",t);if(i)throw i;g(u=>u.map(N=>N.id===t?{...N,my_day_date:r}:N)),r&&new Date(r).toDateString()===new Date().toDateString()&&b(`â˜€ï¸ Added "${n==null?void 0:n.title}" to My Day`)}catch(n){console.error("Error updating my_day_date:",n)}},Ct=async(t,r)=>{try{const n=m.find(N=>N.id===t),{error:i}=await R.from("tasks").update({status:r,completed_at:r==="done"?new Date().toISOString():null}).eq("id",t);if(i)throw i;const u=n==null?void 0:n.status;r==="done"&&(n!=null&&n.recurrence_type)?await ft():g(m.map(N=>N.id===t?{...N,status:r,completed_at:r==="done"?new Date().toISOString():null}:N)),r==="done"&&(v({taskId:t,previousStatus:u,taskTitle:n==null?void 0:n.title}),setTimeout(()=>v(null),5e3))}catch(n){console.error("Error updating task status:",n),I(n.message)}},wr=async(t,r)=>{try{const{error:n}=await R.from("tasks").update({due_date:r}).eq("id",t);if(n)throw n;g(m.map(i=>i.id===t?{...i,due_date:r}:i))}catch(n){console.error("Error setting due date:",n),I(n.message)}},Nr=async(t,r)=>{try{const{error:n}=await R.from("tasks").update({title:r}).eq("id",t);if(n)throw n;g(m.map(i=>i.id===t?{...i,title:r}:i))}catch(n){console.error("Error updating task title:",n),I(n.message)}},Cr=async(t,r)=>{try{const{error:n}=await R.from("tasks").update({critical:r}).eq("id",t);if(n)throw n;g(m.map(i=>i.id===t?{...i,critical:r}:i)),b(r?"ðŸš© Marked as critical":"âœ“ Critical flag removed")}catch(n){console.error("Error toggling critical:",n),I(n.message)}},js=async(t,r)=>{try{const{error:n}=await R.from("tasks").update(r).eq("id",t);if(n)throw n;g(m.map(i=>i.id===t?{...i,...r}:i))}catch(n){console.error("Error updating task from calendar:",n),I(n.message)}},vs=async()=>{if(U)try{await R.from("tasks").update({status:U.previousStatus}).eq("id",U.taskId),g(t=>t.map(r=>r.id===U.taskId?{...r,status:U.previousStatus}:r)),v(null)}catch(t){console.error("Error undoing:",t),I(t.message)}},nr=(t,r)=>{te(r),t.dataTransfer.effectAllowed="move"},_r=(t,r)=>{t.preventDefault()},Sr=(t,r)=>{t.preventDefault(),W&&W.status!==r&&Ct(W.id,r),te(null)},Dr=[...new Set(m.map(t=>t.assignee).filter(Boolean))],ws=[...new Set(m.map(t=>t.customer).filter(Boolean))],ir=d||p||J||z||le||A||Ye||De.trim()||Object.keys(fe).length>0,Ns=()=>{f(!1),D(!1),O(!1),oe(!1),ee(!1),we(!1),Me(!1),B(""),tt({}),Lt("")},Tr=t=>{const r={id:Date.now(),name:t,filters:{selectedProjectId:ye,filterCritical:d,filterOverdue:p,filterBlocked:J,filterActive:z,filterBacklog:le,filterDueToday:A,filterMyDay:Ye,searchQuery:De,fieldFilters:fe}},n=[...Ge,r];et(n),localStorage.setItem("trackli_saved_views",JSON.stringify(n)),ct(!1),Tt("")},Cs=t=>{ve(t.filters.selectedProjectId||"all"),f(t.filters.filterCritical||!1),D(t.filters.filterOverdue||!1),O(t.filters.filterBlocked||!1),oe(t.filters.filterActive||!1),ee(t.filters.filterBacklog||!1),we(t.filters.filterDueToday||!1),Me(t.filters.filterMyDay||!1),B(t.filters.searchQuery||""),tt(t.filters.fieldFilters||{})},_s=t=>{const r=Ge.filter(n=>n.id!==t);et(r),localStorage.setItem("trackli_saved_views",JSON.stringify(r))},Ss=t=>{const r={id:Date.now(),name:t.name,title:t.title||"",description:t.description||"",project_id:t.project_id||"",category:t.category||"deliverable",energy_level:t.energy_level||"medium",time_estimate:t.time_estimate||"",source:t.source||"ad_hoc",assignee:t.assignee||"",customer:t.customer||"",critical:t.critical||!1,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,subtasks:t.subtasks||[]},n=[...$t,r];return pr(n),localStorage.setItem("trackli_task_templates",JSON.stringify(n)),r},Ds=t=>{const r=$t.filter(n=>n.id!==t);pr(r),localStorage.setItem("trackli_task_templates",JSON.stringify(r))};m.filter(t=>ye!=="all"&&t.project_id!==ye?!1:Pt(t)).length;const ut=m.filter(t=>{var r,n,i,u,N,T;if(!Ve&&t.project_id){const L=x.find(P=>P.id===t.project_id);if(L!=null&&L.archived)return!1}if(ye!=="all"&&t.project_id!==ye||d&&!t.critical||p&&jt(t.due_date,t.status)!=="overdue"||J&&!ht(t,m)||z&&!["todo","in_progress"].includes(t.status)||le&&t.status!=="backlog"||A&&jt(t.due_date,t.status)!=="today"||Ye&&!xr(t))return!1;if(De.trim()){const L=De.toLowerCase(),P=(r=t.title)==null?void 0:r.toLowerCase().includes(L),G=(n=t.description)==null?void 0:n.toLowerCase().includes(L),Y=(i=t.customer)==null?void 0:i.toLowerCase().includes(L),Q=(u=t.assignee)==null?void 0:u.toLowerCase().includes(L),ue=(T=(N=x.find(Be=>Be.id===t.project_id))==null?void 0:N.name)==null?void 0:T.toLowerCase().includes(L);if(!P&&!G&&!Y&&!Q&&!ue)return!1}for(const[L,P]of Object.entries(fe))if(P==="__blank__"){if(L==="assignee"&&t.assignee||L==="customer"&&t.customer||L==="category"&&t.category||L==="energy_level"&&t.energy_level||L==="source"&&t.source||L==="due_date"&&t.due_date)return!1}else if(L==="assignee"&&t.assignee!==P||L==="customer"&&t.customer!==P||L==="category"&&t.category!==P||L==="energy_level"&&t.energy_level!==P||L==="source"&&t.source!==P||L==="due_date"&&P==="has_date"&&!t.due_date)return!1;if(Jt&&!Pt(t))return!1;if(It!=="all"&&Rt){const L=parseInt(Rt);if(It==="lt"&&(t.time_estimate||0)>=L||It==="gt"&&(t.time_estimate||0)<=L)return!1}return!0}),Mr=t=>{if(!t.start_date)return!1;const r=new Date;r.setHours(0,0,0,0);const n=new Date(t.start_date);return n.setHours(0,0,0,0),n>r},Ts=(t,r=!1)=>{const n={high:0,medium:1,low:2};return[...t].sort((i,u)=>{if(r){const G=Mr(i),Y=Mr(u);if(G&&!Y)return 1;if(!G&&Y)return-1}if(i.critical&&!u.critical)return-1;if(!i.critical&&u.critical)return 1;const N=!!i.due_date,T=!!u.due_date;if(N&&T){const G=new Date(i.due_date)-new Date(u.due_date);if(G!==0)return G}else{if(N&&!T)return-1;if(!N&&T)return 1}const L=n[i.energy_level]??1,P=n[u.energy_level]??1;return L!==P?L-P:new Date(i.created_at)-new Date(u.created_at)})},or=t=>{const r=ut.filter(n=>n.status===t);return t==="done"?[...r].sort((n,i)=>{const u=n.completed_at?new Date(n.completed_at):new Date(0);return(i.completed_at?new Date(i.completed_at):new Date(0))-u}):Ts(r,t==="backlog")},Lr=ut.filter(t=>t.critical&&t.status!=="done").length,Er=ut.filter(t=>jt(t.due_date,t.status)==="overdue").length,Fr=ut.filter(t=>jt(t.due_date,t.status)==="today").length;ut.filter(t=>ht(t,m)&&t.status!=="done").length;const Ar=ut.filter(t=>xr(t)).length;ut.filter(t=>t.status!=="done").reduce((t,r)=>t+(r.time_estimate||0),0);const Ms=(()=>{const t=m.filter(u=>u.status==="done"&&u.completed_at);if(t.length===0)return 0;const r=new Set(t.map(u=>new Date(u.completed_at).toDateString()));let n=0,i=new Date;for(i.setHours(0,0,0,0);r.has(i.toDateString());)n++,i.setDate(i.getDate()-1);if(n===0){const u=new Date;for(u.setDate(u.getDate()-1),u.setHours(0,0,0,0);r.has(u.toDateString());)n++,u.setDate(u.getDate()-1)}return n})(),Ir=(()=>{const t=new Date,r=new Date(t);r.setDate(r.getDate()-7);const n=m.filter(i=>{if(i.status!=="done"||!i.completed_at)return!1;const u=new Date(i.completed_at);return u>=r&&u<=t});return{count:n.length,time:n.reduce((i,u)=>i+(u.time_estimate||0),0)}})(),$r=new Date;$r.setHours(0,0,0,0);const Ls=m.filter(t=>t.status==="done"&&t.completed_at&&new Date(t.completed_at)>=$r).length;return m.filter(t=>t.due_date===new Date().toISOString().split("T")[0]&&t.status!=="done").length,k?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-xl shadow-indigo-500/30 animate-pulse",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Trackli"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading your tasks..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-200",children:[ce&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md bg-red-50 border border-red-200 rounded-xl p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:ce})]}),e.jsx("button",{onClick:()=>I(null),className:"p-1 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),U&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-4 animate-in slide-in-from-bottom-5",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm font-medium",children:['"',U.taskTitle,'" marked as done']}),e.jsx("button",{onClick:vs,className:"px-3 py-1 bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg text-sm font-semibold transition-colors",children:"Undo"}),e.jsx("button",{onClick:()=>v(null),className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),re&&e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[re.type==="success"?e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-blue-400 dark:text-blue-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:re.message}),e.jsx("button",{onClick:()=>be(null),className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>ge(!pe),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",title:"Menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),pe&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 sm:bg-black/20 animate-fadeIn",onClick:()=>ge(!1)}),e.jsxs("div",{className:"fixed sm:absolute top-0 sm:top-full left-0 h-screen sm:h-auto w-72 sm:w-56 sm:mt-2 sm:rounded-xl shadow-2xl border-r sm:border border-gray-200 dark:border-gray-700 py-2 z-[1000] animate-slideInFromLeft sm:animate-none",style:{backgroundColor:ae?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"sm:hidden flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Menu"}),e.jsx("button",{onClick:()=>ge(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsxs("button",{onClick:()=>{F("myday"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="myday"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"â˜€ï¸"}),e.jsx("span",{className:"font-medium",children:"My Day"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[S,"D"]})]}),e.jsxs("button",{onClick:()=>{F("board"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="board"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“‹"}),e.jsx("span",{className:"font-medium",children:"Board"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[S,"B"]})]}),e.jsxs("button",{onClick:()=>{F("calendar"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="calendar"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“†"}),e.jsx("span",{className:"font-medium",children:"Calendar"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[S,"L"]})]}),e.jsxs("button",{onClick:()=>{F("tasks"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="tasks"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ—ƒï¸"}),e.jsx("span",{className:"font-medium",children:"All Tasks"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[S,"A"]})]}),e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Manage"}),e.jsxs("button",{onClick:()=>{F("projects"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="projects"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"font-medium",children:"Projects"})]}),e.jsxs("button",{onClick:()=>{F("progress"),ge(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${y==="progress"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“Š"}),e.jsx("span",{className:"font-medium",children:"Progress"})]}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Settings"}),e.jsxs("button",{onClick:()=>{me(!ae)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:ae?"â˜€ï¸":"ðŸŒ™"}),e.jsx("span",{className:"font-medium",children:ae?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:()=>{var t;gt({...Re,projectId:((t=x[0])==null?void 0:t.id)||""}),mt([]),yt(!1),Et(!0),ge(!1)},disabled:x.length===0,className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"font-medium",children:"Import Notes"})]}),e.jsxs("button",{onClick:()=>{c(),ge(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx("span",{className:"text-lg",children:"ðŸšª"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:y==="myday"?"â˜€ï¸ My Day":y==="board"?"ðŸ“‹ Board":y==="calendar"?"ðŸ“† Calendar":y==="tasks"?"ðŸ—ƒï¸ All Tasks":y==="progress"?"ðŸ“Š Progress":"ðŸ“ Projects"})]}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden xl:flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("h1",{className:"hidden sm:block text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>me(!ae),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:ae?"Light mode":"Dark mode",children:ae?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),y==="board"&&e.jsx("button",{onClick:()=>{Nt(!Ft),ot(new Set)},className:`p-2 rounded-xl transition-colors ${Ft?"bg-indigo-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400"}`,title:"Bulk select",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("button",{onClick:()=>{qe(null),Ie(!0)},className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-teal-500 text-white rounded-lg sm:rounded-xl hover:bg-teal-600 transition-colors text-sm font-medium flex items-center gap-1.5",title:"âŒ˜P",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"P"}),"roject"]})]}),e.jsxs("button",{onClick:()=>{Ne(null),de(!0)},disabled:x.length===0,className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg sm:rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all text-sm font-medium flex items-center gap-1.5 shadow-lg shadow-indigo-500/25 disabled:opacity-50",title:`${S}T`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"T"}),"ask"]})]}),e.jsxs("button",{onClick:()=>{var t;gt({...Re,projectId:((t=x[0])==null?void 0:t.id)||""}),mt([]),yt(!1),Et(!0)},disabled:x.length===0,className:"hidden sm:flex px-3 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 transition-colors text-sm font-medium items-center gap-1.5 disabled:opacity-50",title:"Import Meeting Notes (âŒ˜N)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Notes"})]}),e.jsx("button",{onClick:()=>E(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Help Guide",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(s==null?void 0:s.email)===Ur&&e.jsx("button",{onClick:()=>Oe(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"View Feedback",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("button",{onClick:c,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Sign Out",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),y==="board"&&e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2.5 overflow-x-auto",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-max",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:ye,onChange:t=>ve(t.target.value),className:"appearance-none pl-3 pr-8 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),x.filter(t=>!t.archived||Ve).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("label",{className:"hidden sm:flex items-center gap-1.5 text-xs text-gray-600 dark:text-gray-300 cursor-pointer hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:Ve,onChange:t=>ze(t.target.checked),className:"w-3.5 h-3.5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Archived"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Object.entries(fe).map(([t,r])=>{var u,N;const n={assignee:"Assignee",customer:"Customer",category:"Category",energy_level:"Effort",source:"Source",due_date:"Due Date"};let i=r;return r==="__blank__"?i="(Blank)":t==="category"?i=((u=it.find(T=>T.id===r))==null?void 0:u.label)||r:t==="energy_level"?i=r==="high"?"High":r==="medium"?"Medium":"Low":t==="source"?i=((N=_t.find(T=>T.id===r))==null?void 0:N.label)||r:t==="due_date"&&r==="has_date"&&(i="Has Date"),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-xs font-medium",children:[n[t],": ",i,e.jsx("button",{onClick:()=>{const T={...fe};delete T[t],tt(T)},className:"ml-0.5 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:st,onChange:t=>Lt(t.target.value),className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"+ Filter"}),!fe.assignee&&e.jsx("option",{value:"assignee",children:"Assignee"}),!fe.customer&&e.jsx("option",{value:"customer",children:"Customer"}),!fe.category&&e.jsx("option",{value:"category",children:"Category"}),!fe.energy_level&&e.jsx("option",{value:"energy_level",children:"Effort"}),!fe.source&&e.jsx("option",{value:"source",children:"Source"}),!fe.due_date&&e.jsx("option",{value:"due_date",children:"Due Date"})]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),st&&e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:"",onChange:t=>{t.target.value&&(tt({...fe,[st]:t.target.value}),Lt(""))},className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"Select value..."}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),st==="assignee"&&Dr.map(t=>e.jsx("option",{value:t,children:t},t)),st==="customer"&&ws.map(t=>e.jsx("option",{value:t,children:t},t)),st==="category"&&it.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id)),st==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High Effort"}),e.jsx("option",{value:"medium",children:"Medium Effort"}),e.jsx("option",{value:"low",children:"Low Effort"})]}),st==="source"&&_t.map(t=>e.jsxs("option",{value:t.id,children:[t.icon," ",t.label]},t.id)),st==="due_date"&&e.jsx("option",{value:"has_date",children:"Has Due Date"})]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"relative flex-1 min-w-[150px] max-w-xs",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",value:De,onChange:t=>B(t.target.value),placeholder:"Search tasks...",className:"w-full pl-9 pr-8 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors placeholder-gray-400"}),De&&e.jsx("button",{onClick:()=>B(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ir&&e.jsxs("button",{onClick:Ns,className:"flex items-center gap-1 px-2 py-1.5 text-xs text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]}),e.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-200 dark:border-gray-700 pl-3 ml-1",children:[Ge.length>0&&e.jsxs("div",{className:"relative group",children:[e.jsxs("select",{onChange:t=>{const r=Ge.find(n=>n.id===parseInt(t.target.value));r&&Cs(r),t.target.value=""},className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"ðŸ“‘ Saved Views"}),Ge.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ir&&e.jsxs("button",{onClick:()=>ct(!0),className:"flex items-center gap-1 px-2 py-1.5 text-xs text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors",title:"Save current filters as a view",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),"Save View"]})]})]})})]}),y==="board"&&e.jsx("div",{className:"bg-white/60 dark:bg-gray-900/60 border-b border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2 sm:py-3 overflow-x-auto",children:e.jsxs("div",{className:"max-w-full mx-auto flex items-center gap-2 sm:gap-3 text-sm min-w-max",children:[e.jsxs("button",{onClick:()=>{oe(!z),ee(!1)},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${z?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"Active"}),e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-white/20",children:ut.filter(t=>["todo","in_progress"].includes(t.status)).length})]}),e.jsxs("button",{onClick:()=>{ee(!le),oe(!1)},className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${le?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"Backlog"}),e.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-white/20",children:ut.filter(t=>t.status==="backlog").length})]}),e.jsx("div",{className:"w-px h-5 bg-gray-300 dark:bg-gray-600"}),e.jsxs("button",{onClick:()=>f(!d),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${d?"bg-red-500 text-white":Lr>0?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500"}`,children:[e.jsx("span",{children:"ðŸš© Critical"}),e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${d?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:Lr})]}),e.jsxs("button",{onClick:()=>we(!A),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${A?"bg-orange-500 text-white":Fr>0?"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 hover:bg-orange-100 dark:hover:bg-orange-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500"}`,children:[e.jsx("span",{children:"Due Today"}),e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${A?"bg-white/20":"bg-orange-100 dark:bg-orange-900/50"}`,children:Fr})]}),e.jsxs("button",{onClick:()=>D(!p),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${p?"bg-red-600 text-white":Er>0?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500"}`,children:[e.jsx("span",{children:"Overdue"}),e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${p?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:Er})]}),e.jsxs("button",{onClick:()=>Me(!Ye),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg font-medium transition-all ${Ye?"bg-amber-500 text-white":Ar>0?"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/50":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500"}`,children:[e.jsx("span",{children:"â˜€ï¸ My Day"}),e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded-full ${Ye?"bg-white/20":"bg-amber-100 dark:bg-amber-900/50"}`,children:Ar})]}),ir&&e.jsxs("button",{onClick:()=>{oe(!1),ee(!1),f(!1),we(!1),D(!1),O(!1),Xt(!1),Me(!1),B("")},className:"flex items-center gap-1 px-2 py-1 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-xs",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})}),y==="board"&&ye!=="all"&&e.jsx("div",{className:"max-w-full mx-auto px-6 py-4",children:x.filter(t=>t.id===ye).map(t=>{var r,n;return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-800",children:t.name}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((r=t.members)==null?void 0:r.length)||0," members"]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((n=t.customers)==null?void 0:n.length)||0," customers"]}),e.jsx("button",{onClick:()=>{qe(t),Ie(!0)},className:"ml-2 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},t.id)})}),x.length===0&&e.jsxs("div",{className:"max-w-md mx-auto mt-20 text-center px-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first project."}),e.jsx("button",{onClick:()=>{qe(null),Ie(!0)},className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25",children:"Create Your First Project"})]}),x.length>0&&e.jsxs(e.Fragment,{children:[Ft&&e.jsx("div",{className:"sticky top-[73px] z-30 bg-indigo-600 dark:bg-indigo-700 border-b border-indigo-500",children:e.jsx("div",{className:"max-w-full mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{Nt(!1),ot(new Set)},className:"p-1.5 hover:bg-indigo-500 rounded-lg transition-colors text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("span",{className:"text-white font-medium",children:[We.size," task",We.size!==1?"s":""," selected"]}),e.jsx("button",{onClick:ys,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Select all"}),e.jsx("button",{onClick:bs,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Deselect all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>t.target.value&&xs(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Status..."}),e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsxs("select",{onChange:t=>t.target.value&&us(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Project..."}),x.filter(t=>!t.archived).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>hs(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Assign..."}),e.jsx("option",{value:"",children:"Unassign"}),Dr.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:ps,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 border border-white/30 text-white rounded-lg text-sm font-medium transition-colors",title:"Toggle critical flag",children:"ðŸš© Critical"}),e.jsx("button",{onClick:ms,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})}),y==="myday"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Gs,{tasks:m.filter(t=>{var r;return!t.project_id||!((r=x.find(n=>n.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{Ne(t),de(!0)},onDragStart:nr,allTasks:m.filter(t=>{var r;return!t.project_id||!((r=x.find(n=>n.id===t.project_id))!=null&&r.archived)}),onQuickStatusChange:Ct,onUpdateMyDayDate:ar})},"myday"),y==="calendar"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ks,{tasks:m.filter(t=>{var r;return!t.project_id||!((r=x.find(n=>n.id===t.project_id))!=null&&r.archived)}),projects:x,onEditTask:t=>{Ne(t),de(!0)},onCreateTask:t=>{Ne(t),de(!0)},allTasks:m.filter(t=>{var r;return!t.project_id||!((r=x.find(n=>n.id===t.project_id))!=null&&r.archived)}),onUpdateTask:js,onDeleteTask:Gt,viewMode:H,setViewMode:se,onShowConfirm:wt})},"calendar"),y==="tasks"&&e.jsx("div",{className:"animate-fadeIn h-[calc(100vh-140px)]",children:e.jsx(Qs,{tasks:m,projects:x,onEditTask:t=>{Ne(t),de(!0)},allTasks:m})},"tasks"),y==="projects"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Projects"}),e.jsxs("button",{onClick:()=>{qe(null),Ie(!0)},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:["Active Projects (",x.filter(t=>!t.archived).length,")"]}),e.jsxs("div",{className:"space-y-3",children:[x.filter(t=>!t.archived).map(t=>{var u,N;const r=m.filter(T=>T.project_id===t.id),n=r.filter(T=>T.status==="done").length,i=r.length>0?Math.round(n/r.length*100):0;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[r.length," tasks"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[((u=t.members)==null?void 0:u.length)||0," members"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[((N=t.customers)==null?void 0:N.length)||0," customers"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 w-12",children:[i,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{ve(t.id),F("board")},className:"px-3 py-1.5 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"View Board"}),e.jsx("button",{onClick:()=>{qe(t),Ie(!0)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>sr(t.id),className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Archive project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]})]})},t.id)}),x.filter(t=>!t.archived).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"No active projects yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first project to organize your tasks"})]})]})]}),x.filter(t=>t.archived).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:["Archived (",x.filter(t=>t.archived).length,")"]}),e.jsx("div",{className:"space-y-3",children:x.filter(t=>t.archived).map(t=>{const r=m.filter(n=>n.project_id===t.id);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¦"}),e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:t.name})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:[r.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>sr(t.id),className:"px-3 py-1.5 text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",children:"Unarchive"}),e.jsx("button",{onClick:()=>{wt({title:"Delete Project",message:`Delete "${t.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{vr(t.id),wt(null)}})},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete permanently",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)})})]})]},"projects"),y==="progress"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"ðŸ“Š Progress Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ”¥"}),e.jsx("span",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:Ms})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ls})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:Ir.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â±ï¸"}),e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Mt(Ir.time)||"0h"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time This Week"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Last 7 Days"}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:(()=>{const t=[];for(let n=6;n>=0;n--){const i=new Date;i.setDate(i.getDate()-n),i.setHours(0,0,0,0);const u=i.toDateString(),N=i.toLocaleDateString(void 0,{weekday:"short"}),T=m.filter(L=>L.status==="done"&&L.completed_at&&new Date(L.completed_at).toDateString()===u).length;t.push({dayName:N,count:T,isToday:n===0})}const r=Math.max(...t.map(n=>n.count),1);return t.map((n,i)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"80px"},children:e.jsx("div",{className:`w-full max-w-[40px] rounded-t-lg transition-all ${n.isToday?"bg-gradient-to-t from-indigo-500 to-purple-500":"bg-indigo-200 dark:bg-indigo-800"}`,style:{height:`${Math.max(n.count/r*100,8)}%`}})}),e.jsx("span",{className:`text-xs font-medium ${n.isToday?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:n.dayName}),e.jsx("span",{className:`text-xs ${n.isToday?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-400 dark:text-gray-500"}`,children:n.count})]},i))})()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Project Progress"}),e.jsx("div",{className:"space-y-4",children:x.filter(t=>!t.archived).map(t=>{const r=m.filter(u=>u.project_id===t.id),n=r.filter(u=>u.status==="done").length,i=r.length>0?Math.round(n/r.length*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n,"/",r.length," tasks"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})})]},t.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Recently Completed"}),e.jsxs("div",{className:"space-y-3",children:[m.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,10).map(t=>{const r=x.find(u=>u.id===t.project_id),i=new Date(t.completed_at).toDateString()===new Date().toDateString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==null?void 0:r.name})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:i?"Today":Dt(t.completed_at)})]},t.id)}),m.filter(t=>t.status==="done").length===0&&e.jsx("p",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No completed tasks yet. Get started! ðŸ’ª"})]})]})]}),y==="board"&&e.jsxs("main",{className:"w-full px-3 sm:px-6 py-4 sm:py-6 animate-fadeIn",children:[ke&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>K(Math.max(0,j-1)),disabled:j===0,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex gap-1",children:lt.map((t,r)=>e.jsxs("button",{onClick:()=>K(r),className:`px-2 py-1.5 rounded-lg text-xs font-medium transition-all ${r===j?"bg-gray-800 dark:bg-white text-white dark:text-gray-800":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:[t.title.split(" ")[0],e.jsxs("span",{className:"ml-1 opacity-60",children:["(",or(t.id).length,")"]})]},t.id))}),e.jsx("button",{onClick:()=>K(Math.min(lt.length-1,j+1)),disabled:j===lt.length-1,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:ke?"":"flex gap-3 sm:gap-4 lg:gap-6 overflow-x-auto overflow-y-visible pb-4 sm:pb-6 justify-center",children:ke?e.jsx(Rr,{column:lt[j],tasks:or(lt[j].id),projects:x,onEditTask:t=>{Ne(t),de(!0)},onDragStart:nr,onDragOver:_r,onDrop:Sr,showProject:ye==="all",allTasks:m,onQuickComplete:Ct,onStatusChange:Ct,onSetDueDate:wr,bulkSelectMode:Ft,selectedTaskIds:We,onToggleSelect:t=>{const r=new Set(We);r.has(t)?r.delete(t):r.add(t),ot(r)},onAddTask:t=>{Ne({status:t}),de(!0)},onToggleMyDay:(t,r)=>{const n=new Date().toISOString().split("T")[0],i=new Date(Date.now()-864e5).toISOString().split("T")[0];ar(t,r?n:i)},isMobileFullWidth:!0,draggedTask:W,onUpdateTitle:Nr,onToggleCritical:Cr},lt[j].id):lt.map(t=>e.jsx(Rr,{column:t,tasks:or(t.id),projects:x,onEditTask:r=>{Ne(r),de(!0)},onDragStart:nr,onDragOver:_r,onDrop:Sr,showProject:ye==="all",allTasks:m,onQuickComplete:Ct,onStatusChange:Ct,onSetDueDate:wr,bulkSelectMode:Ft,selectedTaskIds:We,onToggleSelect:r=>{const n=new Set(We);n.has(r)?n.delete(r):n.add(r),ot(n)},onAddTask:r=>{Ne({status:r}),de(!0)},onToggleMyDay:(r,n)=>{const i=new Date().toISOString().split("T")[0],u=new Date(Date.now()-864e5).toISOString().split("T")[0];ar(r,n?i:u)},draggedTask:W,onUpdateTitle:Nr,onToggleCritical:Cr},t.id))}),e.jsx(Xs,{tasks:m.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,5),projects:x,onEditTask:t=>{Ne(t),de(!0)},onUndoComplete:t=>Ct(t,"todo")})]})]}),e.jsx(Zs,{isOpen:Te,onClose:()=>{de(!1),Ne(null)},task:Pe!=null&&Pe.id&&m.find(t=>t.id===Pe.id)||Pe,projects:x,allTasks:m,onSave:fs,onDelete:Gt,loading:w,templates:$t,onSaveTemplate:Ss,onDeleteTemplate:Ds}),e.jsx(ea,{isOpen:$e,onClose:()=>{Ie(!1),qe(null)},project:dt,onSave:gs,onDelete:vr,onArchive:sr,loading:w,onShowConfirm:wt}),e.jsx(Ys,{isOpen:q,onClose:()=>V(!1),tasks:m,projects:x,onEditTask:t=>{Ne(t),de(!0)},allTasks:m}),qr&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl shadow-2xl p-6 ${ae?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"ðŸš€"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We've created a starter project with sample tasks to help you learn the app."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘†"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click on any task"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Each task has tips on features to explore"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Try My Day view"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your daily focus list - some tasks are already there!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Complete tasks to see them move"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete all My Day tasks for a celebration!"})]})]})]}),e.jsx("button",{onClick:()=>yr(!1),className:"w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Let's Go! ðŸŽ‰"})]})}),e.jsx(qs,{isOpen:X,onClose:()=>{E(!1),Qe("board")},initialTab:Ke,shortcutModifier:S}),e.jsx($s,{isOpen:!!He,onClose:()=>wt(null),onConfirm:()=>{var t;(t=He==null?void 0:He.onConfirm)==null||t.call(He),wt(null)},title:(He==null?void 0:He.title)||"",message:(He==null?void 0:He.message)||"",confirmLabel:He==null?void 0:He.confirmLabel,confirmStyle:He==null?void 0:He.confirmStyle,icon:He==null?void 0:He.icon,loading:w}),Ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 ${ae?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ”"})}),e.jsx("h3",{className:`text-lg font-semibold ${ae?"text-white":"text-gray-900"}`,children:"Delete Recurring Task"})]}),e.jsxs("p",{className:`mb-6 ${ae?"text-gray-300":"text-gray-600"}`,children:['"',Ce.title,'" is part of a recurring series. What would you like to do?']}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>Gt(Ce.taskId,!1),disabled:w,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${ae?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Delete only this occurrence"}),e.jsx("button",{onClick:()=>Gt(Ce.taskId,!0),disabled:w,className:"w-full py-3 px-4 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-all",children:w?"Deleting...":"Delete all future occurrences"}),e.jsx("button",{onClick:()=>Fe(null),disabled:w,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${ae?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cancel"})]})]})}),Ze&&y==="board"&&!ke&&e.jsx(Ps,{step:Ee,onNext:h,onSkip:()=>{Se(!1),localStorage.setItem("trackli_onboarding_complete","true")},onComplete:()=>{Se(!1),localStorage.setItem("trackli_onboarding_complete","true")}}),ne&&e.jsx(Us,{view:ne,step:$,onNext:he,onSkip:()=>jr(ne),onComplete:()=>jr(ne)}),e.jsx(ur,{isOpen:Yr,onClose:()=>{var t;Et(!1),er(),Vt(""),gt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:((t=x[0])==null?void 0:t.id)||""}),mt([]),yt(!1),Zt(null)},title:"Import Meeting Notes",wide:!0,children:Kr?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:["Found ",xt.length," potential task",xt.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and edit before creating"})]}),e.jsx("button",{onClick:()=>yt(!1),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"â† Back to Notes"})]}),xt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"No action items found in your notes."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Try adding bullet points or phrases like "Action:", "TODO:", or "@name"'})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:xt.map(t=>e.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${t.selected?"border-indigo-200 bg-indigo-50/50":"border-gray-100 bg-gray-50 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:r=>Wt(t.id,"selected",r.target.checked),className:"mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:r=>Wt(t.id,"title",r.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm font-medium"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Assignee:"}),e.jsx("input",{type:"text",value:t.assignee||"",onChange:r=>Wt(t.id,"assignee",r.target.value),placeholder:"Unassigned",className:"px-2 py-1 border border-gray-200 rounded-lg text-xs w-28 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Due:"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:r=>Wt(t.id,"dueDate",r.target.value),className:"px-2 py-1 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:t.critical,onChange:r=>Wt(t.id,"critical",r.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-red-600",children:"Critical"})]})]})]}),e.jsx("button",{onClick:()=>cs(t.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[xt.filter(t=>t.selected).length," task",xt.filter(t=>t.selected).length!==1?"s":""," selected"]}),e.jsx("button",{onClick:ds,disabled:xt.filter(t=>t.selected).length===0||w,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create ",xt.filter(t=>t.selected).length," Task",xt.filter(t=>t.selected).length!==1?"s":""]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[ce&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:ce}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paste notes or upload a photo of your notes. We'll extract action items automatically."}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-colors hover:border-indigo-300 dark:hover:border-indigo-600",children:bt?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:bt.preview,alt:"Uploaded notes",className:"w-full max-h-48 object-contain rounded-lg bg-gray-100 dark:bg-gray-800"}),e.jsx("button",{onClick:()=>Zt(null),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),bt.name," ready for extraction"]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Upload photo of notes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or take a photo on mobile"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:ls,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"or paste text notes"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:Re.title,onChange:t=>gt({...Re,title:t.target.value}),placeholder:"e.g., Weekly Team Sync",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Date"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("input",{type:"date",value:Re.date,onChange:t=>gt({...Re,date:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",style:{maxWidth:"100%",minWidth:0,WebkitAppearance:"none",boxSizing:"border-box",width:"100%"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsx("select",{value:Re.projectId,onChange:t=>gt({...Re,projectId:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Notes"}),e.jsx("textarea",{value:Re.notes,onChange:t=>gt({...Re,notes:t.target.value}),placeholder:`Paste your meeting notes here...

Best format - Follow-Up table:
| Follow-Up | Owner | Due Date | Status |
| Review proposal | Sarah | 30/12 | Open |
| Send update email | John | Friday | Open |

Or we can extract from:
â€¢ Action items like 'John to send report by Friday'
â€¢ TODO: Review the proposal
â€¢ @Sarah: Update the timeline`,rows:12,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:bt?"AI will analyze your image for tasks":"Tip: Follow-Up tables are extracted first"}),e.jsx("button",{onClick:os,disabled:!Re.notes.trim()&&!bt||br,className:"px-6 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-medium shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:br?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Extract Tasks"]})})]})]})}),qt&&e.jsx(Is,{message:qt.message,action:qt.action,actionLabel:qt.actionLabel,onClose:()=>Zr(null)}),es&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>At(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-md sm:mx-4 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Quick Add Task"}),e.jsx("button",{onClick:()=>At(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{const t=Qt(Yt);return e.jsxs("form",{onSubmit:r=>{r.preventDefault(),ks(t.cleanedText||Yt,kr,t.date)},children:[e.jsxs("div",{className:"relative flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:Yt,onChange:r=>Kt(r.target.value),placeholder:'Try "Call mom tomorrow" or "Report due friday"',autoFocus:!0,className:"flex-1 px-4 py-3 text-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),Gr&&e.jsx("button",{type:"button",onClick:()=>Xr(r=>Kt(r)),className:`p-3 rounded-xl transition-all ${Bt?"bg-red-500 text-white animate-pulse shadow-lg shadow-red-500/40":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400"}`,title:Bt?"Stop listening":"Voice input",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Bt?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),Bt&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-sm text-red-500",children:"Listening... speak now"})]}),t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due ",Dt(t.date)]}),e.jsxs("span",{className:"text-xs text-gray-400",children:['(from "',t.matched,'")']})]}),!t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Due:"}),As.map(r=>e.jsx("button",{type:"button",onClick:()=>Kt(n=>`${n} ${r.label.toLowerCase()}`.trim()),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors whitespace-nowrap",children:r.label},r.label))]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("select",{value:kr,onChange:r=>tr(r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:x.filter(r=>!r.archived).map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),e.jsx("button",{type:"button",onClick:()=>{At(!1),Ne(null),de(!0)},className:"px-3 py-2 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"More options"})]}),e.jsx("button",{type:"submit",disabled:!Yt.trim()||w,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:w?"Adding...":"Add Task"})]})})(),e.jsx("p",{className:"mt-3 text-xs text-center text-gray-400",children:'Try "tomorrow", "next friday", "in 2 weeks"'})]})]}),vt&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>ct(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Save Current View"}),e.jsx("input",{type:"text",value:Je,onChange:t=>Tt(t.target.value),placeholder:"View name (e.g., My Critical Tasks)",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 mb-4",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&Je.trim()&&Tr(Je.trim())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ct(!1),className:"flex-1 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Je.trim()&&Tr(Je.trim()),disabled:!Je.trim(),className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50",children:"Save"})]}),Ge.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Existing views:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Ge.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t.name}),e.jsx("button",{onClick:()=>_s(t.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]})]})]}),ts&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>rr(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-2xl sm:mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"â˜€ï¸ Plan Your Day"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Pick tasks to focus on today"})]}),e.jsx("button",{onClick:()=>rr(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Energy:"}),Object.entries(zt).map(([t,r])=>e.jsxs("button",{onClick:()=>setActiveFilters(n=>{const i=n.filter(u=>u.type!=="energy");return n.some(u=>u.type==="energy"&&u.value===t)?i:[...i,{type:"energy",value:t}]}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeFilters.some(n=>n.type==="energy"&&n.value===t)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.icon," ",r.label]},t))]}),e.jsxs("div",{className:"space-y-2",children:[m.filter(t=>t.status==="backlog"&&!ht(t,m)).filter(t=>!activeFilters.some(r=>r.type==="energy")||activeFilters.some(r=>r.type==="energy"&&r.value===t.energy_level)).sort((t,r)=>t.critical&&!r.critical?-1:!t.critical&&r.critical?1:t.due_date&&!r.due_date?-1:!t.due_date&&r.due_date?1:0).map(t=>{const r=x.find(u=>u.id===t.project_id),n=zt[t.energy_level],i=Pt(t);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${t.critical?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":i?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš©"}),i&&e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:r==null?void 0:r.name}),t.time_estimate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:Mt(t.time_estimate)})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded ${n.color}`,children:n.icon})]})]}),e.jsx("button",{onClick:()=>Ct(t.id,"todo"),className:"px-3 py-1.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"+ Today"})]},t.id)}),m.filter(t=>t.status==="backlog"&&!ht(t,m)).length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-lg mb-2",children:"ðŸŽ‰ Backlog is empty!"}),e.jsx("p",{className:"text-sm",children:"All tasks are either planned or done."})]})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:m.filter(t=>t.status==="todo").length})," tasks in Todo"]}),e.jsx("button",{onClick:()=>{rr(!1),F("myday")},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium",children:"View My Day â†’"})]})})]})]}),e.jsx("button",{onClick:()=>{var t;x.length>0&&(tr(((t=x[0])==null?void 0:t.id)||""),At(!0))},className:"sm:hidden fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center z-30 active:scale-95 transition-transform",disabled:x.length===0,children:e.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("button",{onClick:()=>je(!0),className:"fixed bottom-6 right-6 sm:bottom-8 sm:right-8 px-4 py-2.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 flex items-center gap-2 z-30 hover:bg-gray-50 dark:hover:bg-gray-700 hover:scale-105 active:scale-95 transition-all",title:"Send Feedback",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Feedback"})]}),e.jsx(Bs,{isOpen:Z,onClose:()=>je(!1),user:s}),e.jsx(Ws,{isOpen:xe,onClose:()=>Oe(!1),userEmail:s==null?void 0:s.email})]})}export{ca as default};
