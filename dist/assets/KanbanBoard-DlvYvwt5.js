import{u as Ts,r as o,s as z,j as e,a as fa,_ as ja}from"./index-CuxVupT-.js";const ka=()=>ja(()=>import("./confetti.module-wUsLuJ1J.js"),[]).then(s=>s.default),lr={high:{bg:"#FEE2E2",text:"#DC2626",icon:"â–°â–°â–°",label:"High Effort"},medium:{bg:"#FEF3C7",text:"#D97706",icon:"â–°â–°",label:"Medium Effort"},low:{bg:"#D1FAE5",text:"#059669",icon:"â–°",label:"Low Effort"}},gt=[{id:"meeting_followup",label:"Meeting Follow-up",color:"#8B5CF6"},{id:"email",label:"Email",color:"#3B82F6"},{id:"deliverable",label:"Deliverable",color:"#10B981"},{id:"admin",label:"Admin",color:"#4B5563"},{id:"review",label:"Review/Approval",color:"#F59E0B"},{id:"call",label:"Call/Meeting",color:"#EC4899"},{id:"research",label:"Research",color:"#14B8A6"}],Rt=[{id:"email",label:"Email",icon:"âœ‰ï¸"},{id:"meeting",label:"Meeting",icon:"ðŸ‘¥"},{id:"slack",label:"Slack/Teams",icon:"ðŸ’¬"},{id:"ad_hoc",label:"Ad-hoc",icon:"ðŸ’¡"},{id:"project_plan",label:"Project Plan",icon:"ðŸ“‹"},{id:"client_request",label:"Client Request",icon:"ðŸŽ¯"}],Ms=[{id:null,label:"No recurrence"},{id:"daily",label:"Daily"},{id:"weekly",label:"Weekly"},{id:"biweekly",label:"Bi-weekly (every 2 weeks)"},{id:"monthly",label:"Monthly"}],Bt={backlog:"#9CA3AF",todo:"#3B82F6",in_progress:"#EC4899",blocked:"#EF4444",done:"#64748B"},it=[{id:"backlog",title:"Backlog",subtitle:"Future work",color:Bt.backlog},{id:"todo",title:"To Do",subtitle:"Ready to start",color:Bt.todo},{id:"in_progress",title:"In Progress",subtitle:"Active work",color:Bt.in_progress},{id:"done",title:"Done",subtitle:"Completed",color:Bt.done}],Vr=5,Hr=10,Ns=[{bg:"#EDE9FE",text:"#7C3AED",border:"#C4B5FD"},{bg:"#DBEAFE",text:"#2563EB",border:"#93C5FD"},{bg:"#D1FAE5",text:"#059669",border:"#6EE7B7"},{bg:"#FEF3C7",text:"#D97706",border:"#FCD34D"},{bg:"#FCE7F3",text:"#DB2777",border:"#F9A8D4"},{bg:"#E0E7FF",text:"#4F46E5",border:"#A5B4FC"},{bg:"#CCFBF1",text:"#0D9488",border:"#5EEAD4"},{bg:"#FEE2E2",text:"#DC2626",border:"#FCA5A5"},{bg:"#F3E8FF",text:"#9333EA",border:"#D8B4FE"},{bg:"#CFFAFE",text:"#0891B2",border:"#67E8F9"}],Ur=s=>{if(!s)return null;let d=0;for(let l=0;l<s.length;l++)d=s.charCodeAt(l)+((d<<5)-d);return Ns[Math.abs(d)%Ns.length]},Et=(s,d)=>{if(!s||d==="done")return null;const l=new Date;l.setHours(0,0,0,0);const E=new Date(s);E.setHours(0,0,0,0);const g=Math.ceil((E-l)/(1e3*60*60*24));return g<0?"overdue":g===0?"today":g<=3?"soon":"ok"},ir=s=>{if(s.status!=="backlog")return!1;if(!s.start_date)return!0;const d=new Date;d.setHours(0,0,0,0);const l=new Date(s.start_date);return l.setHours(0,0,0,0),l<=d},St=(s,d)=>!s.dependencies||s.dependencies.length===0||s.status==="done"?!1:s.dependencies.some(l=>{const E=d.find(g=>g.id===l.depends_on_id);return E&&E.status!=="done"}),qr=s=>{if(s.status==="done")return!1;const d=new Date;if(d.setHours(0,0,0,0),s.my_day_date){const l=new Date(s.my_day_date);if(l.setHours(0,0,0,0),l<d)return!1;if(l.getTime()===d.getTime())return!0}if(s.start_date){const l=new Date(s.start_date);if(l.setHours(0,0,0,0),l<=d)return!0}return!1},Cs=(s,d,l,E=null)=>{if(!s||!d)return[];const g=[];let $=new Date(s);$.setHours(0,0,0,0);let m=null;E&&(m=new Date(E),m.setHours(23,59,59,999));const c=_=>{switch(d){case"daily":_.setDate(_.getDate()+1);break;case"weekly":_.setDate(_.getDate()+7);break;case"biweekly":_.setDate(_.getDate()+14);break;case"monthly":_.setMonth(_.getMonth()+1);break;default:return null}return _},y=E?365:l;let C=0;for(;C<y&&(c($),!(m&&$>m||(g.push($.toISOString().split("T")[0]),C++,!E&&C>=l))););return g},Wt=s=>s?new Date(s).toLocaleDateString(void 0,{day:"numeric",month:"short"}):"",Yr=()=>{const d=new Date(2e3,0,15).toLocaleDateString();return parseInt(d.split(/[\/\-\.]/)[0])===1},Vt=s=>{if(!s)return"";if(s<60)return`${s}m`;const d=Math.floor(s/60),l=s%60;return l>0?`${d}h ${l}m`:`${d}h`},_s=s=>{if(!s)return"";let d=s.toString().trim().toLowerCase();if(/^\d{1,2}:\d{2}$/.test(d)){const[m,c]=d.split(":").map(Number);if(m>=0&&m<=23&&c>=0&&c<=59)return`${String(m).padStart(2,"0")}:${String(c).padStart(2,"0")}`}const l=/pm|p\.m\.|p$/.test(d),E=/am|a\.m\.|a$/.test(d);d=d.replace(/\s*(am|pm|a\.m\.|p\.m\.|a|p)\s*/gi,"").trim();let g=0,$=0;if(d.includes(":")){const m=d.split(":");g=parseInt(m[0])||0,$=parseInt(m[1])||0}else if(d.length===1||d.length===2)g=parseInt(d)||0,$=0;else if(d.length===3)g=parseInt(d[0])||0,$=parseInt(d.slice(1))||0;else if(d.length===4)g=parseInt(d.slice(0,2))||0,$=parseInt(d.slice(2))||0;else return"";return l&&g<12?g+=12:E&&g===12&&(g=0),g<0||g>23||$<0||$>59?"":`${String(g).padStart(2,"0")}:${String($).padStart(2,"0")}`},or=s=>{if(!s)return{date:null,cleanedText:"",matched:null};const d=new Date;d.setHours(0,0,0,0);const l=s.trim().match(/^([TDWM])([+-]\d+)?$/i);if(l){const c=l[1].toUpperCase(),y=l[2]?parseInt(l[2]):0,C=new Date(d);switch(c){case"T":case"D":C.setDate(C.getDate()+y);break;case"W":C.setDate(C.getDate()+y*7);break;case"M":C.setMonth(C.getMonth()+y);break}return{date:C.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}const E=[{regex:/\b(today)\b/i,fn:()=>new Date(d)},{regex:/\b(tomorrow)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+1),c}},{regex:/\b(yesterday)\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()-1),c}},{regex:/\b(next\s+)?(monday)\b/i,fn:c=>g(1,c[1])},{regex:/\b(next\s+)?(tuesday)\b/i,fn:c=>g(2,c[1])},{regex:/\b(next\s+)?(wednesday)\b/i,fn:c=>g(3,c[1])},{regex:/\b(next\s+)?(thursday)\b/i,fn:c=>g(4,c[1])},{regex:/\b(next\s+)?(friday)\b/i,fn:c=>g(5,c[1])},{regex:/\b(next\s+)?(saturday)\b/i,fn:c=>g(6,c[1])},{regex:/\b(next\s+)?(sunday)\b/i,fn:c=>g(0,c[1])},{regex:/\bin\s+(\d+)\s+days?\b/i,fn:c=>{const y=new Date(d);return y.setDate(y.getDate()+parseInt(c[1])),y}},{regex:/\bin\s+(\d+)\s+weeks?\b/i,fn:c=>{const y=new Date(d);return y.setDate(y.getDate()+parseInt(c[1])*7),y}},{regex:/\bin\s+(\d+)\s+months?\b/i,fn:c=>{const y=new Date(d);return y.setMonth(y.getMonth()+parseInt(c[1])),y}},{regex:/\bnext\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+7),c}},{regex:/\bnext\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1),c}},{regex:/\bend\s+of\s+week\b/i,fn:()=>{const c=new Date(d);return c.setDate(c.getDate()+(5-c.getDay())),c}},{regex:/\bend\s+of\s+month\b/i,fn:()=>{const c=new Date(d);return c.setMonth(c.getMonth()+1,0),c}}];function g(c,y){const C=new Date(d),_=C.getDay();let M=c-_;return(M<=0||y)&&(M+=7),y&&M<=7&&(M+=7),C.setDate(C.getDate()+M),C}for(const c of E){const y=s.match(c.regex);if(y){const C=c.fn(y),_=s.replace(c.regex,"").replace(/\s+/g," ").trim();return{date:C.toISOString().split("T")[0],cleanedText:_,matched:y[0]}}}const $=Yr();let m=s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);if(m){let c,y;$?(y=parseInt(m[1])-1,c=parseInt(m[2])):(c=parseInt(m[1]),y=parseInt(m[2])-1);const C=m[3].length===2?2e3+parseInt(m[3]):parseInt(m[3]),_=new Date(C,y,c);if(!isNaN(_.getTime()))return{date:_.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}if(m=s.match(/^(\d{1,2})[\/\-](\d{1,2})$/),m){let c,y;$?(y=parseInt(m[1])-1,c=parseInt(m[2])):(c=parseInt(m[1]),y=parseInt(m[2])-1);const C=new Date(d.getFullYear(),y,c);if(C<d&&C.setFullYear(C.getFullYear()+1),!isNaN(C.getTime()))return{date:C.toISOString().split("T")[0],cleanedText:"",matched:s.trim()}}return{date:null,cleanedText:s,matched:null}},va=[{label:"Today",getValue:()=>new Date().toISOString().split("T")[0]},{label:"Tomorrow",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+1),s.toISOString().split("T")[0]}},{label:"Next Week",getValue:()=>{const s=new Date;return s.setDate(s.getDate()+7),s.toISOString().split("T")[0]}},{label:"Next Month",getValue:()=>{const s=new Date;return s.setMonth(s.getMonth()+1),s.toISOString().split("T")[0]}}],wa=({message:s,action:d,actionLabel:l,onClose:E,duration:g=5e3})=>(o.useEffect(()=>{const $=setTimeout(E,g);return()=>clearTimeout($)},[E,g]),e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-slide-up",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),d&&e.jsx("button",{onClick:()=>{d(),E()},className:"px-3 py-1 text-sm font-semibold bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg transition-colors",children:l||"Undo"}),e.jsx("button",{onClick:E,className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})),Na=({isOpen:s,onClose:d,onConfirm:l,title:E,message:g,confirmLabel:$="Confirm",confirmStyle:m="danger",icon:c="âš ï¸",loading:y=!1})=>{if(o.useEffect(()=>{const _=M=>{M.key==="Escape"&&d(),M.key==="Enter"&&!y&&l()};if(s)return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[s,d,l,y]),!s)return null;const C={danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 text-white",primary:"bg-indigo-500 hover:bg-indigo-600 text-white"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:c})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E})]}),e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:g}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:d,disabled:y,className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:y,className:`px-4 py-2 rounded-xl font-medium transition-colors ${C[m]} disabled:opacity-50`,children:y?"Please wait...":$})]})]})})},Ca=({isOpen:s,onClose:d,user:l})=>{const[E,g]=o.useState("suggestion"),[$,m]=o.useState(""),[c,y]=o.useState([]),[C,_]=o.useState(!1),[M,ie]=o.useState(!1),[P,re]=o.useState(null);o.useEffect(()=>{s||setTimeout(()=>{g("suggestion"),m(""),y([]),ie(!1),re(null)},300)},[s]),o.useEffect(()=>{const S=H=>{H.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[s,d]),o.useEffect(()=>{const S=H=>{var ge;if(!s)return;const oe=(ge=H.clipboardData)==null?void 0:ge.items;if(oe){for(const Q of oe)if(Q.type.startsWith("image/")){H.preventDefault();const te=Q.getAsFile();te&&j(te);break}}};return window.addEventListener("paste",S),()=>window.removeEventListener("paste",S)},[s,c]);const j=S=>{if(c.length>=3){re("Maximum 3 images allowed");return}const H=new Image,oe=new FileReader;oe.onload=ge=>{H.onload=()=>{let{width:xe,height:ye}=H;if(xe>1500||ye>1500){const q=Math.min(1500/xe,1500/ye);xe=Math.round(xe*q),ye=Math.round(ye*q)}const Ce=document.createElement("canvas");Ce.width=xe,Ce.height=ye,Ce.getContext("2d").drawImage(H,0,0,xe,ye);const k=Ce.toDataURL("image/jpeg",.8),U=k.split(",")[1];y(q=>[...q,{base64:U,preview:k}]),re(null)},H.onerror=()=>re("Failed to load image"),H.src=ge.target.result},oe.onerror=()=>re("Failed to read image"),oe.readAsDataURL(S)},ee=S=>{var oe;const H=(oe=S.target.files)==null?void 0:oe[0];H&&j(H),S.target.value=""},ue=S=>{y(H=>H.filter((oe,ge)=>ge!==S))},ce=async S=>{if(S.preventDefault(),!!$.trim()){_(!0),re(null);try{const H=[];for(const ge of c){const Q=`feedback/${(l==null?void 0:l.id)||"anonymous"}/${Date.now()}-${Math.random().toString(36).substr(2,9)}.jpg`,te=atob(ge.base64),xe=new Array(te.length);for(let U=0;U<te.length;U++)xe[U]=te.charCodeAt(U);const ye=new Uint8Array(xe),Ce=new Blob([ye],{type:"image/jpeg"}),{data:b,error:k}=await z.storage.from("attachments").upload(Q,Ce);if(k)console.error("Upload error:",k);else{const{data:U}=z.storage.from("attachments").getPublicUrl(Q);U!=null&&U.publicUrl&&H.push(U.publicUrl)}}const{error:oe}=await z.from("feedback").insert({user_id:l==null?void 0:l.id,user_email:l==null?void 0:l.email,type:E,message:$.trim(),images:H.length>0?H:null,page:window.location.pathname});if(oe)throw oe;ie(!0),setTimeout(()=>d(),2e3)}catch(H){console.error("Error submitting feedback:",H),re("Failed to submit feedback. Please try again.")}finally{_(!1)}}};if(!s)return null;const x=[{id:"bug",label:"ðŸ› Bug",desc:"Something isn't working"},{id:"suggestion",label:"ðŸ’¡ Suggestion",desc:"Ideas for improvement"},{id:"question",label:"â“ Question",desc:"Need help with something"},{id:"other",label:"ðŸ’¬ Other",desc:"General feedback"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp",onClick:S=>S.stopPropagation(),children:M?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-3xl",children:"âœ“"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Thanks for your feedback!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We really appreciate you taking the time to help us improve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Send Feedback"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Help us make Trackli better!"})]}),e.jsxs("form",{onSubmit:ce,className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map(S=>e.jsxs("button",{type:"button",onClick:()=>g(S.id),className:`p-3 rounded-xl border-2 text-left transition-all ${E===S.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:S.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.desc})]},S.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Message"}),e.jsx("textarea",{value:$,onChange:S=>m(S.target.value),placeholder:"Tell us what's on your mind...",rows:4,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Screenshots (optional)"}),c.length>0&&e.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:c.map((S,H)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S.preview,alt:`Screenshot ${H+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),e.jsx("button",{type:"button",onClick:()=>ue(H),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},H))}),c.length<3&&e.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-indigo-400 dark:hover:border-indigo-500 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add image or paste from clipboard"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ee,className:"hidden"})]}),P&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:P})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2.5 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:C||!$.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Sending...":"Send Feedback"})]})]})]})})})},Ls="roddickaimee@gmail.com",_a=({isOpen:s,onClose:d,userEmail:l})=>{const[E,g]=o.useState([]),[$,m]=o.useState(!0),[c,y]=o.useState("all"),C=l===Ls;o.useEffect(()=>{s&&C&&_()},[s,C]);const _=async()=>{m(!0);try{const{data:j,error:ee}=await z.from("feedback").select("*").order("created_at",{ascending:!1});if(ee)throw ee;g(j||[])}catch(j){console.error("Error loading feedback:",j)}finally{m(!1)}},M=async(j,ee)=>{try{const{error:ue}=await z.from("feedback").update({status:ee}).eq("id",j);if(ue)throw ue;g(ce=>ce.map(x=>x.id===j?{...x,status:ee}:x))}catch(ue){console.error("Error updating feedback:",ue)}};if(o.useEffect(()=>{const j=ee=>{ee.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[s,d]),!s||!C)return null;const ie=c==="all"?E:E.filter(j=>j.status===c),P={bug:"ðŸ›",suggestion:"ðŸ’¡",question:"â“",other:"ðŸ’¬"},re={new:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",read:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[300] p-4",onClick:d,children:e.jsxs("div",{className:"w-full max-w-3xl max-h-[85vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden animate-modalSlideUp flex flex-col",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Feedback Admin"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[E.length," total submissions"]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:["all","new","read","resolved"].map(j=>e.jsxs("button",{onClick:()=>y(j),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c===j?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[j.charAt(0).toUpperCase()+j.slice(1),j!=="all"&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(",E.filter(ee=>j==="all"||ee.status===j).length,")"]})]},j))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:$?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading feedback..."}):ie.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ðŸ“«"}),"No feedback yet"]}):e.jsx("div",{className:"space-y-4",children:ie.map(j=>e.jsx("div",{className:"p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:P[j.type]||"ðŸ’¬"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:j.type}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${re[j.status]}`,children:j.status})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:j.message}),j.images&&j.images.length>0&&e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:j.images.map((ee,ue)=>e.jsx("a",{href:ee,target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx("img",{src:ee,alt:`Screenshot ${ue+1}`,className:"w-24 h-24 object-cover rounded-lg border border-gray-200 dark:border-gray-600 hover:opacity-80 transition-opacity"})},ue))}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:j.user_email}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[new Date(j.created_at).toLocaleDateString()," ",new Date(j.created_at).toLocaleTimeString()]}),j.page&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:j.page})]})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[j.status!=="read"&&e.jsx("button",{onClick:()=>M(j.id,"read"),className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded-lg transition-colors",title:"Mark as read",children:e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),j.status!=="resolved"&&e.jsx("button",{onClick:()=>M(j.id,"resolved"),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Mark as resolved",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})]})},j.id))})})]})})},Ss=({icon:s,title:d,description:l,action:E,actionLabel:g,variant:$="default"})=>{const m={default:"from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",success:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30",warning:"from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30",celebrate:"from-pink-100 to-rose-100 dark:from-pink-900/30 dark:to-rose-900/30"};return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 px-6 sm:px-8 text-center animate-fadeIn",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:`absolute inset-0 w-24 h-24 rounded-full bg-gradient-to-br ${m[$]} opacity-50 animate-pulse`,style:{transform:"scale(1.3)"}}),e.jsx("div",{className:`relative w-20 h-20 sm:w-24 sm:h-24 rounded-2xl bg-gradient-to-br ${m[$]} flex items-center justify-center shadow-lg`,children:e.jsx("div",{className:"text-3xl sm:text-4xl",children:s})})]}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:d}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mb-6 max-w-xs sm:max-w-sm leading-relaxed",children:l}),E&&e.jsx("button",{onClick:E,className:"group px-5 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-2",children:[g,e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})},Kr=({isOpen:s,onClose:d,title:l,children:E,wide:g,fullScreenMobile:$})=>(o.useEffect(()=>{const m=c=>{c.key==="Escape"&&d()};if(s)return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[s,d]),s?e.jsxs("div",{className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:d}),e.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-2xl w-full flex flex-col animate-modalSlideUp ${$?"h-full sm:h-auto sm:max-h-[90vh] rounded-none sm:rounded-2xl sm:mx-4":"rounded-t-2xl sm:rounded-2xl sm:mx-4 max-h-[95vh] sm:max-h-[90vh]"} ${g?"sm:max-w-2xl":"sm:max-w-md"}`,children:[e.jsxs("div",{className:`flex-shrink-0 flex items-center justify-between p-4 pr-6 sm:p-6 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 z-20 ${$?"rounded-none sm:rounded-t-2xl":"rounded-t-2xl"}`,children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100",children:l}),e.jsx("button",{type:"button",onClick:d,className:"p-3 -mr-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors text-gray-600 dark:text-gray-400 touch-manipulation",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 overscroll-contain",children:E})]})]}):null),Sa=({isOpen:s,onClose:d,attachment:l,attachments:E,onNavigate:g})=>{var S;if(!s||!l)return null;const $=l.file_name||"",m=l.file_url||"",c=((S=$.split(".").pop())==null?void 0:S.toLowerCase())||"",y=["jpg","jpeg","png","gif","webp","svg","bmp"].includes(c),C=c==="pdf",_=["mp4","webm","ogg","mov"].includes(c),M=["mp3","wav","ogg","m4a"].includes(c),ie=["doc","docx","xls","xlsx","ppt","pptx"].includes(c),P=["eml","msg"].includes(c),re=(E==null?void 0:E.findIndex(H=>H.id===l.id))??-1,j=E&&E.length>1,ee=re>0,ue=re<((E==null?void 0:E.length)||0)-1,ce=()=>{ee&&g&&g(E[re-1])},x=()=>{ue&&g&&g(E[re+1])};return o.useEffect(()=>{const H=oe=>{s&&(oe.key==="Escape"&&d(),oe.key==="ArrowLeft"&&ee&&ce(),oe.key==="ArrowRight"&&ue&&x())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[s,re,E]),e.jsxs("div",{className:"fixed inset-0 z-[310] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/50 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"text-white/80 text-sm truncate max-w-[300px]",children:$}),j&&e.jsxs("span",{className:"text-white/50 text-sm",children:[re+1," / ",E.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:m,download:$,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",title:"Open in new tab",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),e.jsx("button",{onClick:d,className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ce,disabled:!ee,className:`absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${ee?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:x,disabled:!ue,className:`absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full transition-all ${ue?"bg-white/10 hover:bg-white/20 text-white":"bg-white/5 text-white/30 cursor-not-allowed"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"relative max-w-[90vw] max-h-[85vh] flex items-center justify-center",children:[y&&e.jsx("img",{src:m,alt:$,className:"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"}),C&&e.jsx("iframe",{src:m,title:$,className:"w-[90vw] h-[85vh] max-w-4xl rounded-lg bg-white"}),_&&e.jsx("video",{src:m,controls:!0,autoPlay:!0,className:"max-w-full max-h-[85vh] rounded-lg shadow-2xl",children:"Your browser does not support video playback."}),M&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸŽµ"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-4",children:$}),e.jsx("audio",{src:m,controls:!0,autoPlay:!0,className:"w-full max-w-md",children:"Your browser does not support audio playback."})]}),ie&&e.jsx("iframe",{src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(m)}`,title:$,className:"w-[90vw] h-[85vh] max-w-5xl rounded-lg bg-white"}),P&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/50 dark:to-indigo-900/50 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"âœ‰ï¸"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:$}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Email files can be opened in your email client"}),e.jsxs("a",{href:m,download:$,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Email"]})]}),!y&&!C&&!_&&!M&&!ie&&!P&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl text-center max-w-md",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“„"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium mb-2",children:$}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Preview not available for this file type"}),e.jsxs("a",{href:m,download:$,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download File"]})]})]})]})},Da=({step:s,onNext:d,onSkip:l,onComplete:E})=>{const $=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒT":"Ctrl+Alt+T",m=[{target:"summary-bar",title:"Welcome to Trackli! ðŸ‘‹",description:"This is your Summary Bar - click any stat to filter tasks. Use the â˜€ï¸ My Day filter to see your daily focus, or filter by assignee, customer, category and more.",position:"bottom"},{target:"columns",title:"Kanban Board",description:"Your tasks flow from Backlog â†’ To Do â†’ In Progress â†’ Done. Drag and drop to move tasks between columns.",position:"top"},{target:"task-card",title:"Task Cards",description:"Each card shows key info at a glance. Look for the â˜€ï¸ sun icon on cards in your My Day list! Hover to see details and attachments.",position:"right"},{target:"views",title:"Multiple Views",description:"Switch between Board, My Day, All Tasks (with sorting & CSV export), Calendar, and Progress views using the menu.",position:"bottom"},{target:"add-task",title:"Create Tasks",description:`Click + Task or press ${$} to create. Set dates, effort level, assignee, customer, category, attachments, subtasks, dependencies, and recurring schedules.`,position:"bottom"},{target:"notes",title:"Meeting Notes â†’ Tasks",description:"Click Notes to quickly capture meeting notes - type, paste, or even speak! AI extracts action items as tasks automatically.",position:"bottom"},{target:"help",title:"Need Help?",description:"Click the ? icon anytime to access the full help guide. You're all set! ðŸŽ‰",position:"bottom"}],c=m[s];return c?e.jsxs("div",{className:"fixed inset-0 z-[1000]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:l}),e.jsxs("div",{className:`absolute z-[1001] max-w-sm animate-fadeIn ${s===0?"top-32 left-1/2 -translate-x-1/2":s===1?"top-40 left-1/2 -translate-x-1/2":s===2?"top-60 left-[340px]":s===3?"top-24 left-8":s===4?"top-20 right-48":s===5?"top-20 right-32":"top-20 right-24"}`,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-4",children:m.map((y,C)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${C===s?"w-6 bg-indigo-500":C<s?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},C))}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-2",children:c.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:l,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip tour"}),e.jsxs("div",{className:"flex gap-2",children:[s>0&&e.jsx("button",{onClick:()=>d(s-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>s<m.length-1?d(s+1):E(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:s<m.length-1?"Next":"Get Started!"})]})]})]}),e.jsx("div",{className:`absolute w-4 h-4 bg-white dark:bg-gray-800 rotate-45 border-gray-200 dark:border-gray-700 ${c.position==="bottom"?"-top-2 left-1/2 -translate-x-1/2 border-t border-l":c.position==="top"?"-bottom-2 left-1/2 -translate-x-1/2 border-b border-r":c.position==="right"?"-left-2 top-8 border-l border-b":"-right-2 top-8 border-r border-t"}`})]})]}):null},Ta=()=>e.jsxs("svg",{viewBox:"0 0 280 120",className:"w-full h-32 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"cardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]}),e.jsx("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})]}),e.jsx("rect",{x:"10",y:"10",width:"80",height:"100",rx:"8",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"50",y:"28",textAnchor:"middle",fontSize:"9",fill:"#9CA3AF",children:"Tasks"}),e.jsx("rect",{x:"18",y:"38",width:"64",height:"20",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"18",y:"62",width:"64",height:"20",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"110",y:"10",width:"160",height:"100",rx:"8",fill:"#FEF3C7",stroke:"#F59E0B",strokeWidth:"2",strokeDasharray:"4"}),e.jsx("text",{x:"190",y:"28",textAnchor:"middle",fontSize:"10",fill:"#D97706",fontWeight:"bold",children:"â˜€ï¸ My Day"}),e.jsx("rect",{x:"120",y:"38",width:"140",height:"24",rx:"6",fill:"#FDE68A"}),e.jsx("circle",{cx:"132",cy:"50",r:"6",fill:"#10B981"}),e.jsx("rect",{x:"144",y:"46",width:"60",height:"8",rx:"2",fill:"#92400E",opacity:"0.3"}),e.jsxs("g",{filter:"url(#shadow)",children:[e.jsxs("rect",{x:"18",y:"38",width:"64",height:"20",rx:"4",fill:"url(#cardGradient)",children:[e.jsx("animate",{attributeName:"x",values:"18;120;120",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"38;70;70",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"64;140;140",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"height",values:"20;24;24",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("rect",{x:"24",y:"44",width:"40",height:"6",rx:"2",fill:"white",opacity:"0.8",children:[e.jsx("animate",{attributeName:"x",values:"24;132;132",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"44;78;78",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"40;80;80",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]})]}),e.jsx("path",{d:"M95 55 L105 55 L100 60 Z",fill:"#6366F1",children:e.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"1s",repeatCount:"indefinite"})})]}),Ma=()=>e.jsxs("svg",{viewBox:"0 0 280 140",className:"w-full h-36 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"calCardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]}),e.jsx("filter",{id:"calShadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.2"})})]}),e.jsx("rect",{x:"10",y:"10",width:"70",height:"120",rx:"6",fill:"#F3F4F6",className:"dark:fill-gray-600"}),e.jsx("text",{x:"45",y:"26",textAnchor:"middle",fontSize:"8",fill:"#9CA3AF",children:"Tasks"}),e.jsx("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"16",y:"56",width:"58",height:"18",rx:"4",fill:"#E5E7EB",className:"dark:fill-gray-500"}),e.jsx("rect",{x:"90",y:"10",width:"180",height:"120",rx:"6",fill:"white",className:"dark:fill-gray-800",stroke:"#E5E7EB"}),e.jsx("text",{x:"100",y:"40",fontSize:"8",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"100",y:"70",fontSize:"8",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"100",y:"100",fontSize:"8",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"125",y1:"32",x2:"260",y2:"32",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"62",x2:"260",y2:"62",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"92",x2:"260",y2:"92",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"125",y1:"122",x2:"260",y2:"122",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"130",y:"36",width:"120",height:"22",rx:"4",fill:"#10B981",opacity:"0.8"}),e.jsx("rect",{x:"136",y:"43",width:"50",height:"6",rx:"2",fill:"white",opacity:"0.7"}),e.jsxs("g",{filter:"url(#calShadow)",children:[e.jsxs("rect",{x:"16",y:"34",width:"58",height:"18",rx:"4",fill:"url(#calCardGradient)",children:[e.jsx("animate",{attributeName:"x",values:"16;130;130",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"34;66;66",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"58;120;120",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"height",values:"18;22;22",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("rect",{x:"22",y:"40",width:"30",height:"5",rx:"2",fill:"white",opacity:"0.8",children:[e.jsx("animate",{attributeName:"x",values:"22;136;136",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"y",values:"40;73;73",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"}),e.jsx("animate",{attributeName:"width",values:"30;50;50",dur:"2.5s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]})]}),e.jsx("line",{x1:"125",y1:"85",x2:"260",y2:"85",stroke:"#EF4444",strokeWidth:"2"}),e.jsx("circle",{cx:"125",cy:"85",r:"4",fill:"#EF4444"})]}),La=()=>e.jsxs("svg",{viewBox:"0 0 200 100",className:"w-full h-28 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"resizeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#818CF8"}),e.jsx("stop",{offset:"100%",stopColor:"#6366F1"})]})}),e.jsx("text",{x:"15",y:"25",fontSize:"9",fill:"#9CA3AF",children:"9:00"}),e.jsx("text",{x:"15",y:"55",fontSize:"9",fill:"#9CA3AF",children:"10:00"}),e.jsx("text",{x:"15",y:"85",fontSize:"9",fill:"#9CA3AF",children:"11:00"}),e.jsx("line",{x1:"45",y1:"18",x2:"190",y2:"18",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"48",x2:"190",y2:"48",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("line",{x1:"45",y1:"78",x2:"190",y2:"78",stroke:"#E5E7EB",strokeWidth:"1"}),e.jsx("rect",{x:"50",y:"22",width:"130",rx:"4",fill:"url(#resizeGradient)",children:e.jsx("animate",{attributeName:"height",values:"22;52;22",dur:"3s",repeatCount:"indefinite"})}),e.jsx("rect",{x:"56",y:"28",width:"60",height:"6",rx:"2",fill:"white",opacity:"0.8"}),e.jsxs("g",{children:[e.jsx("rect",{x:"105",width:"20",height:"6",rx:"3",fill:"white",opacity:"0.9",children:e.jsx("animate",{attributeName:"y",values:"40;70;40",dur:"3s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M115 0 L115 8 M111 4 L119 4",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",children:e.jsx("animate",{attributeName:"transform",values:"translate(0,48);translate(0,78);translate(0,48)",dur:"3s",repeatCount:"indefinite"})})]})]}),Ea=()=>e.jsxs("svg",{viewBox:"0 0 240 80",className:"w-full h-24 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("rect",{x:"20",y:"20",width:"200",height:"40",rx:"8",fill:"#FEF3C7"}),e.jsx("text",{x:"30",y:"38",fontSize:"10",fill:"#92400E",fontWeight:"bold",children:"Today's Progress"}),e.jsx("rect",{x:"30",y:"45",width:"180",height:"8",rx:"4",fill:"#FDE68A"}),e.jsx("rect",{x:"30",y:"45",height:"8",rx:"4",fill:"url(#progressGradient)",children:e.jsx("animate",{attributeName:"width",values:"0;180;180;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"})}),e.jsxs("text",{x:"120",y:"38",textAnchor:"middle",fontSize:"10",fill:"#059669",fontWeight:"bold",children:[e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.9;1"}),"100% âœ“"]}),e.jsxs("circle",{cx:"60",cy:"15",r:"3",fill:"#F59E0B",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;0.5;0.7"}),e.jsx("animate",{attributeName:"cy",values:"15;5;5",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.4;1"})]}),e.jsxs("circle",{cx:"120",cy:"12",r:"3",fill:"#EC4899",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;0.55;0.75"}),e.jsx("animate",{attributeName:"cy",values:"12;2;2",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.45;1"})]}),e.jsxs("circle",{cx:"180",cy:"14",r:"3",fill:"#6366F1",children:[e.jsx("animate",{attributeName:"opacity",values:"0;0;1;0",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;0.52;0.72"}),e.jsx("animate",{attributeName:"cy",values:"14;4;4",dur:"4s",repeatCount:"indefinite",keyTimes:"0;0.42;1"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#10B981"}),e.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),$a=({view:s,step:d,onNext:l,onSkip:E,onComplete:g})=>{const $={myday:[{title:"â˜€ï¸ Welcome to My Day!",description:"This is your personal daily focus list. Plan what to work on today without cluttering your board view.",icon:"ðŸŽ¯"},{title:"Drag Tasks to My Day",description:"Tasks with today's start date appear automatically. Drag any task from the sidebar to add it manually!",icon:"ðŸ“¥",animation:"dragToMyDay"},{title:"Track Your Progress",description:"Watch your progress bar fill up as you complete tasks. Finish everything for a confetti celebration!",icon:"ðŸ“Š",animation:"progressBar"}],calendar:[{title:"ðŸ“† Welcome to Calendar!",description:"Schedule your tasks visually. Switch between daily, weekly, and monthly views using the buttons at the top.",icon:"ðŸ—“ï¸"},{title:"Drag to Schedule",description:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time updates automatically.",icon:"âœ¨",animation:"dragToCalendar"},{title:"Resize to Adjust Duration",description:"Drag the bottom edge of any scheduled task to change how long it takes. Time estimate updates automatically!",icon:"ðŸŽ¨",animation:"resizeTask"}],tasks:[{title:"ðŸ—ƒï¸ All Tasks View",description:"See every task in a powerful table format. Click any column header to sort, or use the Filters button to narrow down results.",icon:"ðŸ“‹"},{title:"Import & Export CSV",description:"Export tasks for reporting, or import to bulk create/edit. Use * in the ID column to create new tasks, or include existing IDs to update them.",icon:"ðŸ“¥"}],projects:[{title:"ðŸ“ Projects View",description:"Organize your work into projects. Each project gets its own color that appears on task cards throughout the app.",icon:"ðŸ—ï¸"},{title:"Manage Projects",description:"Create new projects, edit details, or archive completed ones. Archived projects hide their tasks from the main board.",icon:"âš™ï¸"}],progress:[{title:"ðŸ“Š Progress View",description:"Track your productivity across all projects. See completion rates, task counts, and how you're doing over time.",icon:"ðŸ“ˆ"},{title:"Completion Insights",description:"The charts show your completed vs. remaining tasks. Use this to identify bottlenecks and celebrate wins!",icon:"ðŸ†"}]},m={dragToMyDay:Ta,dragToCalendar:Ma,resizeTask:La,progressBar:Ea},c=$[s]||[],y=c[d];return y?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:E}),e.jsx("div",{className:"relative z-[1001] max-w-md w-full animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[e.jsx("div",{className:"text-4xl mb-3",children:y.icon}),e.jsx("h3",{className:"text-xl font-bold",children:y.title})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:y.description}),y.animation&&m[y.animation]&&e.jsx("div",{className:"mb-6",children:(()=>{const C=m[y.animation];return e.jsx(C,{})})()}),e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:c.map((C,_)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${_===d?"w-8 bg-indigo-500":_<d?"bg-indigo-300":"bg-gray-200 dark:bg-gray-600"}`},_))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:E,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Skip"}),e.jsxs("div",{className:"flex gap-2",children:[d>0&&e.jsx("button",{onClick:()=>l(d-1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl font-medium transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>d<c.length-1?l(d+1):g(),className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:d<c.length-1?"Next":"Got it!"})]})]})]})]})})]}):null},Aa=({isOpen:s,onClose:d,initialTab:l="board",shortcutModifier:E="âŒ˜âŒƒ"})=>{const[g,$]=o.useState(l);if(o.useEffect(()=>{s&&$(l)},[s,l]),!s)return null;const m=[{id:"board",label:"Board",icon:"ðŸ“‹"},{id:"myday",label:"My Day",icon:"â˜€ï¸"},{id:"calendar",label:"Calendar",icon:"ðŸ“†"},{id:"alltasks",label:"All Tasks",icon:"ðŸ—ƒï¸"},{id:"tasks",label:"Tasks",icon:"âœ…"},{id:"shortcuts",label:"Shortcuts",icon:"âŒ¨ï¸"}];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-3xl mx-4 max-h-[85vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white text-xl",children:"â“"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Trackli Help Guide"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Learn how to use Trackli effectively"})]})]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:m.map(c=>e.jsxs("button",{onClick:()=>$(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${g===c.id?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{children:c.icon}),e.jsx("span",{children:c.label})]},c.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(85vh-180px)]",children:[g==="board"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Summary Bar (Filter Stats)"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Click any stat to filter your tasks:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-indigo-600",children:"Active"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks in To Do + In Progress"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-purple-600",children:"Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet started"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"High priority flagged tasks"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks due today"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Kanban Columns"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#9CA3AF",backgroundColor:"#F9FAFB"},children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Backlog"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Future work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#3B82F6",backgroundColor:"#EFF6FF"},children:[e.jsx("span",{className:"font-semibold text-blue-700",children:"To Do"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#EC4899",backgroundColor:"#FDF2F8"},children:[e.jsx("span",{className:"font-semibold text-pink-700",children:"In Progress"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Active work"})]}),e.jsxs("div",{className:"p-3 rounded-xl border-l-4",style:{borderColor:"#64748B",backgroundColor:"#F8FAFC"},children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Done"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Completed"})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"ðŸ’¡ Drag and drop tasks between columns to change status"})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Task Card Indicators"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Left Border Colors:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-orange-500"}),e.jsx("span",{children:"Orange = Blocked"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-red-500"}),e.jsx("span",{children:"Red = Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-green-500"}),e.jsx("span",{children:"Green = Ready to Start"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded bg-blue-500"}),e.jsx("span",{children:"Blue/Pink/Gray = Column"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Effort Indicator (under checkbox):"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-bold",children:"â–°"}),e.jsx("span",{children:"Low Effort"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-amber-600 font-bold",children:"â–°â–°"}),e.jsx("span",{children:"Medium Effort"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"â–°â–°â–°"}),e.jsx("span",{children:"High Effort"})]})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Other Indicators:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"ðŸš© = Critical/Flagged"}),e.jsx("div",{children:"ðŸ”’ = Blocked by another task"}),e.jsx("div",{children:"ðŸ” = Recurring task"}),e.jsx("div",{children:"ðŸ“… = Due date (red if overdue)"}),e.jsx("div",{children:"â–¶ = Start date"}),e.jsx("div",{children:"â± = Time estimate"})]})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Hover Popup"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hover over any task card to see additional details:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:"â€¢ Category badge"}),e.jsx("li",{children:"â€¢ Customer name"}),e.jsx("li",{children:"â€¢ Effort level badge"}),e.jsx("li",{children:"â€¢ Full description"}),e.jsx("li",{children:"â€¢ Assignee"}),e.jsx("li",{children:"â€¢ Subtask progress"}),e.jsx("li",{children:"â€¢ Attachments count"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Filtering Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Use the filter bar above the board to narrow down your tasks:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Quick Filters (Summary Bar):"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"â˜€ï¸ My Day â€“ Tasks in your daily focus"}),e.jsx("div",{children:"ðŸŸ¢ Active â€“ To Do + In Progress"}),e.jsx("div",{children:"ðŸŸ£ Backlog â€“ Future work"}),e.jsx("div",{children:"ðŸŸ  Due Today"}),e.jsx("div",{children:"ðŸ”´ Overdue"}),e.jsx("div",{children:"ðŸš© Critical â€“ Flagged tasks"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Field Filters:"}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:'Use the "Filter by..." dropdown to filter by:'}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{children:"â€¢ Assignee"}),e.jsx("div",{children:"â€¢ Customer"}),e.jsx("div",{children:"â€¢ Category"}),e.jsx("div",{children:"â€¢ Effort Level"}),e.jsx("div",{children:"â€¢ Source"}),e.jsx("div",{children:"â€¢ Due Date"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Search:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type in the search box to find tasks by title or description. Press âŒ˜K to jump to search."})]})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:'ðŸ’¡ Active filters show a count badge. Click "Clear" to reset all filters.'})]})]}),g==="myday"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center text-amber-600 dark:text-amber-400",children:"â˜€ï¸"}),"What is My Day?"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"My Day is your personal daily focus list. It helps you plan what to work on today without cluttering your board view."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"How Tasks Appear in My Day"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400 mb-1",children:"Auto-included:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tasks with a start date of today or earlier automatically appear in My Day"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Manually added:"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Drag tasks from Recommendations into the "My Day" section to add them to your focus list'})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Sun Icon on Cards (â˜€ï¸)"]}),e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800",children:e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Tasks in your My Day list show a ",e.jsx("span",{className:"text-lg",children:"â˜€ï¸"})," sun icon on their card in the board view, right below the effort bars. This helps you quickly identify your daily focus tasks while browsing the board."]})})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Recommendations & All Tasks"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The sidebar shows all available tasks organized by urgency and status. Drag any task to My Day to add it:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-red-600",children:"ðŸ”´ Overdue"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Past due date"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"ðŸŸ  Due Today"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due today"})]}),e.jsxs("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-yellow-600",children:"ðŸŸ¡ Due Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Due in next 3 days"})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-green-600",children:"ðŸŸ¢ Quick Wins"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low effort tasks"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"ðŸ”µ In Progress"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Currently being worked on"})]}),e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-900/20 rounded-xl",children:[e.jsx("span",{className:"font-semibold text-slate-600",children:"âšª To Do"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ready to start"})]}),e.jsxs("div",{className:"p-3 bg-gray-100 dark:bg-gray-800 rounded-xl col-span-2",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"ðŸ“‹ Backlog"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Future work not yet prioritized"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Daily Reset"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manually added tasks clear from My Day at midnight (or when completed), giving you a fresh start each day. Auto-included tasks based on start date will remain until their start date passes."})]})]}),g==="calendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ“†"}),"Calendar View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Schedule tasks on your calendar with start times and durations. Access via the menu or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜L"}),"."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"View Modes"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Daily"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Single day view"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“†"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"7-day overview"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ—“ï¸"}),e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mt-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Full month grid"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Scheduling Tasks"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Drag & Drop:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag tasks from the sidebar onto any time slot to schedule them. The task's start time and date will be automatically set."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Resize Duration:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drag the bottom edge of a scheduled task to adjust its duration. Time estimate updates automatically."})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Double-Click:"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Double-click any empty time slot to create a new task at that time."})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Sidebar Task Sections"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"The sidebar organizes unscheduled tasks by priority:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”´"}),e.jsx("span",{children:"Overdue tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ "}),e.jsx("span",{children:"Due Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¡"}),e.jsx("span",{children:"Due Soon (3 days)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”µ"}),e.jsx("span",{children:"In Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{children:"My Day tasks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âšª"}),e.jsx("span",{children:"To Do"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Backlog"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŸ¢"}),e.jsx("span",{children:"Quick Wins"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Visual Indicators"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-red-500 font-medium",children:"Red line"})," â€“ Current time indicator"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"text-orange-500 font-medium",children:"âš ï¸ Orange ring"})," â€“ Task overlaps with another scheduled task"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"Colored bars"})," â€“ Tasks are color-coded by project"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("span",{className:"font-medium",children:"30-min slots"})," â€“ Calendar auto-scrolls to 6am on load"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-400",children:"5"}),"Quick Actions"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:"Hover over any scheduled task to reveal action buttons:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"â–¶"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Start task"})]}),e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ“"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Mark done"})]}),e.jsxs("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg text-center",children:[e.jsx("span",{className:"text-lg",children:"âœ•"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:"Remove from calendar"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"ðŸ’¡ Removing a task from calendar clears its scheduled time. If not done, it returns to the sidebar for rescheduling."})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"âš™ï¸"}),"Workflow Automation"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"When you schedule a task:"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("li",{children:'â€¢ Status automatically changes to "To Do" (if in Backlog)'}),e.jsx("li",{children:"â€¢ Start date is set to the scheduled day"}),e.jsx("li",{children:"â€¢ Start time is set to the slot time"}),e.jsx("li",{children:"â€¢ Task appears in My Day if scheduled for today"})]})]})]})]}),g==="alltasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"ðŸ—ƒï¸"}),"All Tasks View"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Access all your tasks in a powerful table format. Click the view switcher in the header and select "All Tasks" or press ',e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒA"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+A"})," (Win)."]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Sorting"]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Click any column header to sort by that field. Click again to reverse the sort order. An arrow indicator shows the current sort direction."}),e.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Sortable columns: Title, Project, Status, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Created"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Filtering"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-medium",children:"Filters"})," button to show filter inputs for each column"]}),e.jsx("p",{children:"â€¢ Type in the filter boxes below column headers to narrow results"}),e.jsxs("p",{children:["â€¢ Click ",e.jsx("span",{className:"text-red-600",children:"Clear Filters"})," to reset all filters"]}),e.jsx("p",{children:"â€¢ Active filters show a dot indicator on the Filters button"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center text-green-600 dark:text-green-400",children:"3"}),"Export to CSV"]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Click the ",e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-sm font-medium",children:"Export CSV"})," button to download your tasks."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"The export includes: Title, Project, Status, Critical, Due Date, Start Date, Assignee, Customer, Category, Effort, Source, Time Estimate, Description, and Created date."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"ðŸ’¡ Only currently filtered/visible tasks are exported, making it easy to export specific subsets of your data."})]})]})]}),g==="tasks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"1"}),"Creating Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ Click the ",e.jsx("span",{className:"px-2 py-1 bg-indigo-500 text-white rounded text-sm font-medium",children:"+"})," button in the header"]}),e.jsxs("p",{children:["â€¢ Or press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"âŒ˜âŒƒT"})," (Mac) / ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm font-mono",children:"Ctrl+Alt+T"})," (Win)"]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"2"}),"Task Fields"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Title *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The task name (required)"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Project *"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Which project this belongs to"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Start Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"When to start working on it"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Deadline for completion"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Time Estimate"}),e.jsx("p",{className:"text-sm text-gray-500",children:"How long it will take"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Effort Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Low / Medium / High effort"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Customer"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Client/customer for the task"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Assignee"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Who's responsible"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Type of work"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"ðŸš© Critical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Flag as high priority"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"3"}),"Completing Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Click the circle checkbox on the left of the card"}),e.jsx("p",{children:'â€¢ Or drag the task to the "Done" column'}),e.jsx("p",{children:"â€¢ Completed tasks show with a green checkmark"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"4"}),"Dependencies (Blocking)"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:'â€¢ In the task editor, use "Blocked By" to select tasks that must be completed first'}),e.jsx("p",{children:"â€¢ Blocked tasks show with ðŸ”’ and an orange border"}),e.jsx("p",{children:'â€¢ When the blocking task is completed, the blocked task becomes "ready to start"'})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"5"}),"Recurring Tasks"]}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsx("p",{children:"â€¢ Set a recurrence pattern: Daily, Weekly, Bi-weekly, Monthly"}),e.jsx("p",{children:"â€¢ When completed, a new instance is automatically created"}),e.jsx("p",{children:"â€¢ Recurring tasks show ðŸ” on the card"})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:"6"}),"Attachments"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Adding Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Open a task and go to the Details tab"}),e.jsx("p",{children:'â€¢ Drag & drop files or click "Choose files"'}),e.jsx("p",{children:"â€¢ Supports images, PDFs, documents, and more"})]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Viewing Attachments:"}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[e.jsx("p",{children:"â€¢ Click any attachment to open the viewer"}),e.jsx("p",{children:"â€¢ PDFs display inline with page navigation"}),e.jsx("p",{children:"â€¢ Images show in a lightbox view"}),e.jsx("p",{children:"â€¢ Use â† â†’ arrow keys to navigate between multiple attachments"}),e.jsx("p",{children:"â€¢ Click the download icon to save files locally"})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"ðŸ’¡ Tasks with attachments show a ðŸ“Ž icon with count on the card"})]})]})]}),g==="shortcuts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Navigation Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"â˜€ï¸ My Day View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜D"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“‹ Board View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜B"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ“† Calendar View"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜L"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"ðŸ” Quick Search"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"âŒ˜K"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Action Shortcuts"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Task"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[E,"T"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"New Project"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[E,"P"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Import Tasks"}),e.jsxs("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:[E,"N"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Help / Shortcuts"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"?"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Close Modal"}),e.jsx("kbd",{className:"px-3 py-1 bg-white dark:bg-gray-700 rounded-lg text-sm font-mono shadow-sm",children:"Esc"})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click task"})," â€“ Open task editor"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Click checkbox"})," â€“ Mark complete/incomplete"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task"})," â€“ Move between columns or schedule on calendar"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Hover task"})," â€“ See details popup (desktop only)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Double-click calendar"})," â€“ Create task at that time"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Drag task edge"})," â€“ Resize duration on calendar"]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Need more help? Contact support"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-indigo-500 text-white rounded-xl font-medium hover:bg-indigo-600 transition-colors",children:"Got it!"})]})]})]})},Fa=({isOpen:s,onClose:d,tasks:l,projects:E,onEditTask:g,allTasks:$})=>{const[m,c]=o.useState(""),y=o.useRef(null);if(o.useEffect(()=>{s&&y.current&&y.current.focus(),s||c("")},[s]),o.useEffect(()=>{const _=M=>{M.key==="Escape"&&s&&d()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[s,d]),!s)return null;const C=m.trim()?l.filter(_=>{var ie,P,re,j,ee;const M=m.toLowerCase();return((ie=_.title)==null?void 0:ie.toLowerCase().includes(M))||((P=_.description)==null?void 0:P.toLowerCase().includes(M))||((re=_.assignee)==null?void 0:re.toLowerCase().includes(M))||((j=_.customer)==null?void 0:j.toLowerCase().includes(M))||((ee=_.notes)==null?void 0:ee.toLowerCase().includes(M))}):[];return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{ref:y,type:"text",value:m,onChange:_=>c(_.target.value),placeholder:"Search tasks by title, description, assignee, customer...",className:"flex-1 text-lg outline-none placeholder-gray-400"}),e.jsx("kbd",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded",children:"ESC"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:m.trim()===""?e.jsxs("div",{className:"p-8 text-center text-gray-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("p",{children:"Start typing to search across all tasks"})]}):C.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No results found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try a different search term"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:C.map(_=>{var re;const M=E.find(j=>j.id===_.project_id),ie=gt.find(j=>j.id===_.category),P=Et(_.due_date,_.status);return e.jsx("button",{onClick:()=>{g(_),d()},className:"w-full p-4 text-left hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mt-1.5 shrink-0",style:{backgroundColor:Bt[_.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-800 truncate",children:_.title}),_.critical&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-100 text-red-700",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:M==null?void 0:M.name}),ie&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{style:{color:ie.color},children:ie.label})]}),_.assignee&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:_.assignee})]}),_.due_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:P==="overdue"?"text-red-600":P==="today"?"text-orange-600":"",children:["Due ",Wt(_.due_date)]})]})]}),_.description&&e.jsx("p",{className:"text-sm text-gray-400 mt-1 truncate",children:_.description})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-lg text-gray-500 shrink-0",children:(re=it.find(j=>j.id===_.status))==null?void 0:re.title})]})},_.id)})})}),C.length>0&&e.jsxs("div",{className:"p-3 border-t border-gray-100 bg-gray-50 text-center text-sm text-gray-500",children:[C.length," task",C.length!==1?"s":""," found"]})]})]})},Ia=({tasks:s,projects:d,onEditTask:l,allTasks:E,onUpdateTask:g,onCreateTask:$,onDeleteTask:m,onDuplicateTask:c,viewMode:y,setViewMode:C,onShowConfirm:_})=>{const[M,ie]=o.useState(new Date),[P,re]=o.useState(null),[j,ee]=o.useState(null),[ue,ce]=o.useState(null),[x,S]=o.useState(null),[H,oe]=o.useState(null),[ge,Q]=o.useState(null),te=o.useRef(null),xe=o.useRef(!1),ye=[{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800"},{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800"},{bg:"bg-emerald-100 dark:bg-emerald-900/50",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800"},{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800"},{bg:"bg-cyan-100 dark:bg-cyan-900/50",text:"text-cyan-700 dark:text-cyan-300",border:"border-cyan-200 dark:border-cyan-800"},{bg:"bg-pink-100 dark:bg-pink-900/50",text:"text-pink-700 dark:text-pink-300",border:"border-pink-200 dark:border-pink-800"},{bg:"bg-amber-100 dark:bg-amber-900/50",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800"},{bg:"bg-teal-100 dark:bg-teal-900/50",text:"text-teal-700 dark:text-teal-300",border:"border-teal-200 dark:border-teal-800"}],Ce=u=>{if(!u)return{bg:"bg-indigo-100 dark:bg-indigo-900/50",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-200 dark:border-indigo-800"};const v=u.split("").reduce((f,w)=>f+w.charCodeAt(0),0)%ye.length;return ye[v]},b=(u,v)=>{if(!u.start_time)return!1;const f=v.toISOString().split("T")[0],w=he(u.start_time),I=w+(u.time_estimate||30);return s.some(A=>{if(A.id===u.id||A.start_date!==f||!A.start_time)return!1;const V=he(A.start_time),se=V+(A.time_estimate||30);return w<se&&I>V})};o.useEffect(()=>{(y==="daily"||y==="weekly")&&te.current&&(te.current.scrollTop=384)},[y,M]),o.useEffect(()=>{if(!x)return;const u=f=>{f.preventDefault()},v=f=>{ot(f)};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",v)}},[x]);const k=["January","February","March","April","May","June","July","August","September","October","November","December"],U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],G=Array.from({length:48},(u,v)=>{const f=v*30,w=Math.floor(f/60),I=f%60,A=w%12||12,V=w<12?"AM":"PM";return{slotIndex:v,minutes:f,label:`${A}:${I.toString().padStart(2,"0")} ${V}`,isHour:I===0}}),D=u=>{if(u==null)return"";const v=Math.floor(u/60),f=u%60;return`${v.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`},J=u=>{if(!u)return"";if(u.includes("AM")||u.includes("PM"))return u;const[v,f]=u.split(":").map(Number);if(isNaN(v)||isNaN(f))return u;const w=v%12||12,I=v<12?"AM":"PM";return`${w}:${f.toString().padStart(2,"0")} ${I}`},he=u=>{var A;if(!u)return null;const v=u.match(/(\d{1,2}):(\d{2})\s*(AM|PM)?/i);if(!v)return null;let f=parseInt(v[1]);const w=parseInt(v[2]),I=(A=v[3])==null?void 0:A.toUpperCase();return I==="PM"&&f!==12&&(f+=12),I==="AM"&&f===12&&(f=0),f*60+w},de=M.getFullYear(),Me=M.getMonth(),Ye=new Date(de,Me,1),Je=new Date(de,Me+1,0),Ke=Ye.getDay(),at=Je.getDate(),fe=new Date;fe.setHours(0,0,0,0);const $e=()=>{const u=new Date(M);y==="daily"?u.setDate(u.getDate()-1):y==="weekly"?u.setDate(u.getDate()-7):u.setMonth(u.getMonth()-1),ie(u)},p=()=>{const u=new Date(M);y==="daily"?u.setDate(u.getDate()+1):y==="weekly"?u.setDate(u.getDate()+7):u.setMonth(u.getMonth()+1),ie(u)},ne=()=>ie(new Date),T=()=>oe(null);o.useEffect(()=>{if(H){const u=()=>T();return document.addEventListener("click",u),document.addEventListener("contextmenu",u),()=>{document.removeEventListener("click",u),document.removeEventListener("contextmenu",u)}}},[H]);const me=u=>{const v=new Date(u),f=v.getDay();return v.setDate(v.getDate()-f),v.setHours(0,0,0,0),v},_e=()=>{const u=me(M);return Array.from({length:7},(v,f)=>{const w=new Date(u);return w.setDate(w.getDate()+f),w})},Pe=u=>{const v=u.toISOString().split("T")[0];return s.filter(f=>f.start_date===v||f.due_date===v)},Ie=(u,v)=>{const f=u.toISOString().split("T")[0],w=v*30,I=w+30;return s.filter(A=>{if(A.start_date!==f)return!1;const V=A.start_time?he(A.start_time):null;return V===null?!1:V>=w&&V<I})},ke=(u,v)=>{xe.current=!0,ee(v),u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/plain",v.id)},Se=()=>{ee(null),ce(null),setTimeout(()=>{xe.current=!1},100)},Re=u=>{!xe.current&&!x&&l(u)},je=async(u,v)=>{u.stopPropagation(),g&&await g(v.id,{start_time:null,end_time:null})},be=async(u,v)=>{u.stopPropagation(),g&&await g(v.id,{status:"done"})},Ae=async(u,v)=>{u.stopPropagation(),g&&await g(v.id,{status:"in_progress"})},Fe=(u,v)=>{if(!$)return;const f=u.toISOString().split("T")[0],w=new Date().toISOString().split("T")[0],I=v*30,A=D(I),V=D(I+30),se={start_date:f,due_date:f,start_time:A,end_time:V,status:"todo"};f===w&&(se.my_day_date=w),$(se)},Oe=async(u,v,f)=>{console.log("handleDropOnSlot called",{date:u,slotIndex:v,hasEvent:!!f,draggedTask:j});let w=j;if(!w&&(f!=null&&f.dataTransfer)){const Le=f.dataTransfer.getData("text/plain");console.log("Fallback to dataTransfer, taskId:",Le),w=E.find(De=>De.id===Le),console.log("Found task from allTasks:",w==null?void 0:w.title)}if(!w||!g){console.log("Drop failed: no task or onUpdateTask",{taskToSchedule:w,hasOnUpdateTask:!!g,allTasksLength:E==null?void 0:E.length});return}const I=u.toISOString().split("T")[0],A=new Date().toISOString().split("T")[0],V=v*30,se=D(V),le=w.time_estimate||30,Z=V+le,O=D(Z);console.log("Dropping task:",{taskId:w.id,dateStr:I,startTime:se,endTime:O,duration:le});const we={start_date:I,start_time:se,end_time:O};w.due_date||(we.due_date=I),w.status==="backlog"&&(we.status="todo"),I===A&&(we.my_day_date=A);const rt=w.id;ee(null);try{await g(rt,we),console.log("Task updated successfully with:",we)}catch(Le){console.error("Error updating task:",Le)}},qe=async u=>{if(!j||!g)return;const v=u.toISOString().split("T")[0];await g(j.id,{start_date:v,start_time:null,end_time:null}),ee(null)},xt=(u,v)=>{u.stopPropagation(),u.preventDefault(),S({task:v,startY:u.clientY,originalDuration:v.time_estimate||30})},ot=async u=>{if(!x||!g){S(null);return}const v=u.clientY-x.startY,f=Math.round(v/32),w=Math.max(15,x.originalDuration+f*30),I=he(x.task.start_time);if(I!==null){const A=I+w,V=D(A);console.log("Resizing task:",{taskId:x.task.id,oldDuration:x.originalDuration,newDuration:w,newEndTime:V}),await g(x.task.id,{time_estimate:w,end_time:V})}S(null)},lt=()=>{const u=[];for(let v=0;v<Ke;v++)u.push(e.jsx("div",{className:"h-20 sm:h-28 bg-gray-50/50 dark:bg-gray-800/30"},`empty-${v}`));for(let v=1;v<=at;v++){const f=new Date(de,Me,v),w=f.toISOString().split("T")[0],I=Pe(f),A=f.getTime()===fe.getTime(),V=P===w,se=f<fe,le=I.filter(O=>O.status!=="done"&&se&&!A),Z=I.filter(O=>O.critical&&O.status!=="done");I.filter(O=>O.status==="done"),I.filter(O=>O.status!=="done"),u.push(e.jsxs("div",{"data-dropzone":"calendar-date","data-date":f,onClick:()=>{ie(f),C("daily")},onDragOver:O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},onDrop:O=>{O.preventDefault(),qe(f)},className:`h-20 sm:h-28 p-1.5 sm:p-2 border-b border-r border-gray-100 dark:border-gray-800 cursor-pointer transition-all hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 touch-manipulation ${A?"bg-indigo-50 dark:bg-indigo-900/30 ring-2 ring-inset ring-indigo-400":V?"bg-indigo-100 dark:bg-indigo-900/50":se?"bg-gray-50/30 dark:bg-gray-800/30":"bg-white dark:bg-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5 sm:mb-1",children:[e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${A?"text-indigo-600 dark:text-indigo-400":se?"text-gray-400 dark:text-gray-500":"text-gray-700 dark:text-gray-300"}`,children:v}),I.length>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full ${le.length>0?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":Z.length>0?"bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:I.length})]}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 overflow-hidden",children:[I.slice(0,2).map(O=>(d.find(we=>we.id===O.project_id),e.jsxs("div",{draggable:!0,onDragStart:we=>ke(we,O),onDragEnd:Se,onClick:we=>{we.stopPropagation(),Re(O)},className:`text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded truncate cursor-grab active:cursor-grabbing transition-all hover:ring-2 hover:ring-indigo-300 dark:hover:ring-indigo-600 ${O.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":O.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":se&&!A?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300"}`,title:O.title,children:[O.critical&&"ðŸš© ",O.title]},O.id))),I.length>2&&e.jsxs("div",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500 px-1.5 sm:px-2",children:["+",I.length-2," more"]})]})]},v))}return u},dt=P?s.filter(u=>u.due_date===P||u.start_date===P):[],n=()=>{if(y==="daily")return M.toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long",year:"numeric"});if(y==="weekly"){const u=_e(),v=u[0],f=u[6];return v.getMonth()===f.getMonth()?`${v.getDate()} - ${f.getDate()} ${k[v.getMonth()]} ${v.getFullYear()}`:`${v.getDate()} ${k[v.getMonth()].slice(0,3)} - ${f.getDate()} ${k[f.getMonth()].slice(0,3)} ${f.getFullYear()}`}return`${k[Me]} ${de}`},R=()=>{const u=new Date().toISOString().split("T")[0],v=new Date;v.setHours(0,0,0,0);const f=new Date(v);f.setDate(f.getDate()+3);const w=s.filter(W=>{if(W.status==="done")return!1;if(!W.start_time)return!0;if(W.start_date){const Te=new Date(W.start_date);if(Te.setHours(0,0,0,0),Te<v)return!0}return!1}),I=W=>{if(W.status==="done")return!1;if(W.my_day_date){const Te=new Date(W.my_day_date);if(Te.setHours(0,0,0,0),Te<v)return!1;if(Te.getTime()===v.getTime())return!0}return W.start_date===u},A=w.filter(W=>I(W)),V=w.filter(W=>{if(A.includes(W)||!W.due_date)return!1;const Te=new Date(W.due_date);return Te.setHours(0,0,0,0),Te<v}),se=w.filter(W=>A.includes(W)?!1:W.due_date===u),le=w.filter(W=>{if(A.includes(W)||se.includes(W)||!W.due_date||W.due_date===u)return!1;const Te=new Date(W.due_date);return Te.setHours(0,0,0,0),Te>v&&Te<=f}),Z=W=>A.includes(W)||V.includes(W)||se.includes(W)||le.includes(W),O=w.filter(W=>W.status==="in_progress"&&!Z(W)),we=w.filter(W=>W.status==="todo"&&!Z(W)&&!O.includes(W)),rt=w.filter(W=>W.status==="backlog"&&!Z(W)&&!O.includes(W)&&!we.includes(W)),Le=w.filter(W=>W.energy_level==="low"&&!Z(W)&&!O.includes(W)&&!we.includes(W)&&!rt.includes(W)),De=W=>W.sort((Te,ze)=>{if(Te.critical&&!ze.critical)return-1;if(!Te.critical&&ze.critical)return 1;if(Te.due_date&&ze.due_date){const ut=new Date(Te.due_date)-new Date(ze.due_date);if(ut!==0)return ut}return Te.due_date&&!ze.due_date?-1:!Te.due_date&&ze.due_date?1:new Date(Te.created_at)-new Date(ze.created_at)});return{overdue:De(V),dueToday:De(se),dueSoon:De(le),inProgress:De(O),myDay:De(A),todo:De(we),backlog:De(rt),quickWins:De(Le)}},X=()=>{const u=M.toISOString().split("T")[0],v=M.toDateString()===new Date().toDateString(),f=R(),w=f.overdue.length+f.dueToday.length+f.dueSoon.length+f.inProgress.length+f.myDay.length+f.todo.length+f.backlog.length+f.quickWins.length,I=({task:V,highlight:se})=>{const le=o.useRef(null),Z=o.useRef(!1),[O,we]=o.useState(!1),[rt,Le]=o.useState(!1),De=o.useRef(!1),W=o.useRef(null),[Te,ze]=o.useState(!1),[ut,Ht]=o.useState({x:0,y:0}),Nr=st=>{st.target.closest("button")||(De.current=!1,le.current=setTimeout(()=>{Z.current=!0,we(!0)},200))},dr=()=>{le.current&&clearTimeout(le.current),Le(!1),setTimeout(()=>{Z.current=!1,we(!1),De.current=!1},100)},Ze=st=>{if(!Z.current){st.preventDefault();return}De.current=!0,Le(!0),ke(st,V)},Cr=()=>{!De.current&&!Z.current&&l(V)},Dt=st=>{if(st.target.closest("button"))return;const Ue=st.touches[0];W.current={x:Ue.clientX,y:Ue.clientY},De.current=!1,le.current=setTimeout(()=>{Z.current=!0,we(!0),navigator.vibrate&&navigator.vibrate(50)},200)},$t=st=>{if(!Z.current){if(W.current){const ct=st.touches[0],pt=Math.abs(ct.clientX-W.current.x),Zt=Math.abs(ct.clientY-W.current.y);(pt>10||Zt>10)&&(De.current=!0,le.current&&(clearTimeout(le.current),le.current=null))}return}st.preventDefault(),ze(!0),De.current=!0,ee(V);const Ue=st.touches[0];Ht({x:Ue.clientX,y:Ue.clientY});const nt=document.elementFromPoint(Ue.clientX,Ue.clientY),Pt=nt==null?void 0:nt.closest('[data-dropzone="calendar-slot"]'),ht=nt==null?void 0:nt.closest('[data-dropzone="calendar-date"]');document.querySelectorAll('[data-dropzone="calendar-slot"], [data-dropzone="calendar-date"]').forEach(ct=>{ct.classList.remove("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")}),Pt?Pt.classList.add("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40"):ht&&ht.classList.add("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")},et=st=>{if(le.current&&(clearTimeout(le.current),le.current=null),document.querySelectorAll('[data-dropzone="calendar-slot"], [data-dropzone="calendar-date"]').forEach(Ue=>{Ue.classList.remove("ring-2","ring-indigo-400","bg-indigo-100","dark:bg-indigo-900/40")}),Te&&Z.current){const Ue=st.changedTouches[0],nt=document.elementFromPoint(Ue.clientX,Ue.clientY),Pt=nt==null?void 0:nt.closest('[data-dropzone="calendar-slot"]'),ht=nt==null?void 0:nt.closest('[data-dropzone="calendar-date"]');if(Pt){const ct=Pt.dataset.date,pt=parseInt(Pt.dataset.slotIndex,10);ct&&!isNaN(pt)&&Oe(ct,pt,null)}else if(ht){const ct=ht.dataset.date;ct&&qe(ct)}}else!De.current&&!Z.current&&l(V);ze(!1),ee(null),setTimeout(()=>{Z.current=!1,we(!1),De.current=!1},100),W.current=null};return e.jsxs(e.Fragment,{children:[e.jsx("div",{draggable:!0,onMouseDown:Nr,onMouseUp:dr,onMouseLeave:()=>le.current&&clearTimeout(le.current),onDragStart:Ze,onDragEnd:dr,onClick:Cr,onTouchStart:Dt,onTouchMove:$t,onTouchEnd:et,className:`p-2.5 rounded-lg border transition-all duration-200 select-none ${rt||Te?"opacity-40 scale-[0.98]":O?"cursor-grabbing ring-2 ring-indigo-400 scale-[1.02] shadow-lg":"cursor-pointer hover:shadow-md hover:-translate-y-0.5"} ${se==="red"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":se==="orange"?"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800":se==="yellow"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":se==="pink"?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800":se==="amber"?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":se==="green"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":se==="blue"?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":se==="gray"?"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 shrink-0",style:{backgroundColor:Bt[V.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[V.critical&&"ðŸš© ",V.title]}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-[10px] text-gray-500 dark:text-gray-400",children:[V.time_estimate&&e.jsxs("span",{children:["â±",Vt(V.time_estimate)]}),V.due_date&&e.jsxs("span",{children:["ðŸ“…",Wt(V.due_date)]})]})]})]})}),Te&&e.jsx("div",{className:"fixed pointer-events-none z-[9999] p-2.5 rounded-lg border bg-white dark:bg-gray-800 border-indigo-400 shadow-2xl opacity-90 max-w-[200px]",style:{left:ut.x-100,top:ut.y-30},children:e.jsxs("p",{className:"text-xs font-medium text-gray-800 dark:text-gray-200 truncate",children:[V.critical&&"ðŸš© ",V.title]})})]})},A=({title:V,icon:se,tasks:le,highlight:Z,defaultOpen:O=!0})=>le.length===0?null:e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx("span",{children:se})," ",V,e.jsxs("span",{className:"text-gray-400",children:["(",le.length,")"]})]}),e.jsxs("div",{className:"space-y-1.5",children:[le.slice(0,5).map(we=>e.jsx(I,{task:we,highlight:Z},we.id)),le.length>5&&e.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:["+",le.length-5," more"]})]})]});return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[ge&&e.jsxs("div",{className:"lg:hidden fixed bottom-4 left-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center justify-between animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“Œ"}),e.jsxs("span",{className:"text-sm font-medium truncate",children:["Tap a time slot to schedule: ",ge.title]})]}),e.jsx("button",{onClick:()=>Q(null),className:"shrink-0 p-1.5 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),e.jsxs("div",{className:`h-12 flex items-center justify-center font-semibold ${v?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300"}`,children:[q[M.getDay()]," ",M.getDate()]})]}),e.jsx("div",{ref:te,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_1fr] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:G.map(({slotIndex:V,label:se,isHour:le})=>e.jsx("div",{className:"h-8 px-2 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:le&&e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:se})},V))}),e.jsxs("div",{className:"relative",children:[v&&(()=>{const V=new Date,le=(V.getHours()*60+V.getMinutes())/30*32;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${le}px`},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("div",{className:"flex-1 h-0.5 bg-red-500"})]})})})(),G.map(({slotIndex:V,isHour:se})=>{const le=Ie(M,V),Z=ue&&ue.date===u&&ue.slotIndex===V;return e.jsxs("div",{"data-dropzone":"calendar-slot","data-date":M,"data-slot-index":V,className:`h-8 border-b relative transition-all duration-150 ${se?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} ${Z&&j?"bg-indigo-100 dark:bg-indigo-900/40 ring-2 ring-inset ring-indigo-400":"hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20"} cursor-pointer`,onDragOver:O=>{O.preventDefault(),O.dataTransfer.dropEffect="move",ce({date:u,slotIndex:V})},onDragLeave:()=>ce(null),onDrop:O=>{O.preventDefault(),ce(null),Oe(M,V,O)},onDoubleClick:()=>Fe(M,V),children:[Z&&j&&e.jsx("div",{className:"absolute inset-x-1 top-0 bg-indigo-200/50 dark:bg-indigo-700/30 border-2 border-dashed border-indigo-400 rounded text-[10px] text-indigo-600 dark:text-indigo-300 px-1 truncate pointer-events-none z-30",style:{height:`${Math.ceil((j.time_estimate||30)/30)*32-2}px`},children:j.title}),le.map(O=>{const we=O.time_estimate||30,rt=Math.ceil(we/30),Le=Ce(O.project_id),De=b(O,M);return e.jsxs("div",{draggable:!x,onDragStart:W=>!x&&ke(W,O),onDragEnd:Se,onClick:W=>{W.stopPropagation(),Re(O)},onDoubleClick:W=>{W.stopPropagation(),Re(O)},className:`absolute left-1 right-1 px-2 py-0.5 rounded text-xs font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${O.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":O.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${Le.bg} ${Le.text}`} ${De?"ring-2 ring-orange-400 dark:ring-orange-500":""}`,style:{height:`${rt*32-2}px`,top:"1px"},title:`${O.title}${O.start_time?` (${J(O.start_time)}${O.end_time?" - "+J(O.end_time):""})`:""}${De?" âš ï¸ Overlaps with another task":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-1",children:[e.jsxs("div",{className:"truncate text-[11px]",children:[De&&e.jsx("span",{title:"Time conflict",children:"âš ï¸ "}),O.critical&&"ðŸš© ",O.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[(O.status==="backlog"||O.status==="todo")&&e.jsx("button",{onClick:W=>Ae(W,O),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-blue-100 dark:hover:bg-blue-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Start task",children:"â–¶"}),O.status!=="done"&&e.jsx("button",{onClick:W=>be(W,O),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-green-100 dark:hover:bg-green-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:W=>je(W,O),className:"text-[8px] px-1 py-0.5 rounded bg-white/50 dark:bg-black/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-gray-600 dark:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from calendar",children:"âœ•"})]})]}),rt>1&&O.start_time&&e.jsxs("div",{className:"text-[9px] opacity-70",children:[J(O.start_time),O.end_time&&` - ${J(O.end_time)}`]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize bg-transparent hover:bg-indigo-300/50 dark:hover:bg-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b",onMouseDown:W=>xt(W,O)})]},O.id)})]},V)})]})]})})]}),e.jsx("div",{className:"w-full lg:w-72 lg:shrink-0",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“…"})," Schedule Tasks"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:["Drag to calendar â€¢ ",v?"Auto-adds to My Day":""]}),e.jsx("div",{className:"max-h-[600px] overflow-y-auto pr-1",children:w===0?e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 text-center py-8",children:"All caught up! ðŸŽ‰"}):e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"My Day",icon:"â˜€ï¸",tasks:f.myDay,highlight:"amber"}),e.jsx(A,{title:"In Progress",icon:"ðŸŸ£",tasks:f.inProgress,highlight:"pink"}),e.jsx(A,{title:"To Do",icon:"ðŸ“‹",tasks:f.todo,highlight:"blue"}),e.jsx(A,{title:"Backlog",icon:"ðŸ“¦",tasks:f.backlog,highlight:"gray"}),e.jsx(A,{title:"Overdue",icon:"ðŸ”´",tasks:f.overdue,highlight:"red"}),e.jsx(A,{title:"Due Today",icon:"ðŸŸ ",tasks:f.dueToday,highlight:"orange"}),e.jsx(A,{title:"Due Soon",icon:"ðŸŸ¡",tasks:f.dueSoon,highlight:"yellow"}),e.jsx(A,{title:"Quick Wins",icon:"âš¡",tasks:f.quickWins,highlight:"green"})]})})]})})]})},ve=()=>{const u=_e(),v=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[700px]",children:[e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"h-12 bg-gray-50 dark:bg-gray-800"}),u.map((f,w)=>{const A=f.toISOString().split("T")[0]===v;return e.jsxs("div",{className:`h-12 flex flex-col items-center justify-center ${A?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:U[f.getDay()]}),e.jsx("span",{className:`text-sm font-semibold ${A?"text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300"}`,children:f.getDate()})]},w)})]}),e.jsx("div",{ref:te,className:"max-h-[600px] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-[60px_repeat(7,1fr)] divide-x divide-gray-200 dark:divide-gray-700",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800",children:G.map(({slotIndex:f,label:w,isHour:I})=>e.jsx("div",{className:"h-6 px-1 flex items-center justify-end border-b border-gray-100 dark:border-gray-800",children:I&&e.jsx("span",{className:"text-[9px] text-gray-500 dark:text-gray-400",children:w})},f))}),u.map((f,w)=>{const A=f.toISOString().split("T")[0]===v;return e.jsxs("div",{className:`min-w-[80px] relative ${A?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:[A&&(()=>{const V=new Date,le=(V.getHours()*60+V.getMinutes())/30*24;return e.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${le}px`},children:e.jsx("div",{className:"h-0.5 bg-red-500"})})})(),G.map(({slotIndex:V,isHour:se})=>{const le=Ie(f,V);return e.jsx("div",{"data-dropzone":"calendar-slot","data-date":f,"data-slot-index":V,className:`h-6 border-b relative transition-colors ${se?"border-gray-200 dark:border-gray-700":"border-gray-100 dark:border-gray-800"} hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 cursor-pointer`,onDragOver:Z=>{Z.preventDefault(),Z.dataTransfer.dropEffect="move"},onDrop:Z=>{Z.preventDefault(),Oe(f,V,Z)},onDoubleClick:()=>Fe(f,V),children:le.map(Z=>{const O=Z.time_estimate||30,we=Math.min(Math.ceil(O/30),8),rt=Ce(Z.project_id);return e.jsx("div",{draggable:!0,onDragStart:Le=>ke(Le,Z),onDragEnd:Se,onClick:Le=>{Le.stopPropagation(),Re(Z)},onDoubleClick:Le=>{Le.stopPropagation(),Re(Z)},className:`absolute left-0.5 right-0.5 px-1 rounded text-[9px] font-medium cursor-grab active:cursor-grabbing shadow-sm transition-all hover:shadow-md z-10 overflow-hidden group ${Z.status==="done"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 line-through":Z.critical?"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300":`${rt.bg} ${rt.text}`}`,style:{height:`${we*24-2}px`,top:"1px"},title:Z.title,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"truncate",children:[Z.critical&&"ðŸš©",Z.title]}),e.jsxs("div",{className:"flex items-center gap-0.5 shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[(Z.status==="backlog"||Z.status==="todo")&&e.jsx("button",{onClick:Le=>Ae(Le,Z),className:"hover:text-blue-500",title:"Start task",children:"â–¶"}),Z.status!=="done"&&e.jsx("button",{onClick:Le=>be(Le,Z),className:"hover:text-green-500",title:"Mark as done",children:"âœ“"}),e.jsx("button",{onClick:Le=>je(Le,Z),className:"hover:text-red-500",title:"Remove from calendar",children:"âœ•"})]})]})},Z.id)})},V)})]},w)})]})})]})})})};return e.jsxs("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-4 sm:py-8 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-gray-800 dark:text-gray-100",children:n()}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[s.filter(u=>(u.due_date||u.start_date)&&u.status!=="done").length," tasks scheduled"]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:ne,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"Today"}),e.jsx("button",{onClick:$e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>C("daily"),className:`flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm font-medium rounded-md transition-all touch-manipulation ${y==="daily"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>C("weekly"),className:`flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm font-medium rounded-md transition-all touch-manipulation ${y==="weekly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>C("monthly"),className:`flex-1 sm:flex-none px-3 py-2 sm:py-1.5 text-sm font-medium rounded-md transition-all touch-manipulation ${y==="monthly"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Month"})]})]}),y==="daily"&&X(),y==="weekly"&&ve(),y==="monthly"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden mb-6",children:[e.jsx("div",{className:"grid grid-cols-7 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:U.map((u,v)=>e.jsxs("div",{className:"py-2 sm:py-3 text-center text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"hidden sm:inline",children:u}),e.jsx("span",{className:"sm:hidden",children:u.charAt(0)})]},u))}),e.jsx("div",{className:"grid grid-cols-7",children:lt()})]}),P&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4",children:["Tasks for ",new Date(P+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"numeric",month:"long"})]}),dt.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No tasks due on this date"}):e.jsx("div",{className:"space-y-3",children:dt.map(u=>{var w;const v=d.find(I=>I.id===u.project_id),f=gt.find(I=>I.id===u.category);return e.jsx("div",{onClick:()=>l(u),className:`p-4 rounded-xl border cursor-pointer hover:shadow-md transition-all ${u.status==="done"?"bg-green-50 border-green-200":u.critical?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Bt[u.status]}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:`font-medium ${u.status==="done"?"text-gray-400 line-through":"text-gray-800"}`,children:[u.critical&&"ðŸš© ",u.title]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-500",children:[v&&e.jsx("span",{children:v.name}),f&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs text-white",style:{backgroundColor:f.color},children:f.label}),u.assignee&&e.jsxs("span",{children:["â€¢ ",u.assignee]})]})]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${u.status==="done"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:(w=it.find(I=>I.id===u.status))==null?void 0:w.title})]})},u.id)})})]}),e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-400"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Overdue / Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to reschedule"})]})]})]}),(y==="daily"||y==="weekly")&&e.jsxs("div",{className:"mt-6 flex items-center flex-wrap gap-4 sm:gap-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-100 dark:bg-indigo-900/50"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 dark:bg-red-900/50"}),e.jsx("span",{children:"Critical"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 dark:bg-green-900/50"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs",children:"ðŸ“Œ"}),e.jsx("span",{children:"Drag tasks to schedule time"})]})]})]})},Ba=({tasks:s,projects:d,onEditTask:l,onDragStart:E,allTasks:g,onQuickStatusChange:$,onUpdateMyDayDate:m,showConfettiPref:c})=>{const[y,C]=o.useState(!1),[_,M]=o.useState("overdue"),[ie,P]=o.useState(!1),re=o.useRef(null);o.useRef(!1);const j=new Date;j.setHours(0,0,0,0);const ee=j.toISOString().split("T")[0],ue=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=["January","February","March","April","May","June","July","August","September","October","November","December"],x=new Date().getHours(),S=x<12?"Good morning":x<17?"Good afternoon":"Good evening",H=x<12?"ðŸŒ…":x<17?"â˜€ï¸":"ðŸŒ™",oe=p=>{if(p.my_day_date){const ne=new Date(p.my_day_date);if(ne.setHours(0,0,0,0),ne<j)return!1;if(ne.getTime()===j.getTime()){if(p.status==="done"){if(!p.completed_at)return!1;const T=new Date(p.completed_at);return T.setHours(0,0,0,0),T.getTime()===j.getTime()}return!0}}if(p.status==="done"){if(!p.completed_at)return!1;const ne=new Date(p.completed_at);if(ne.setHours(0,0,0,0),ne.getTime()!==j.getTime())return!1;if(p.start_date){const T=new Date(p.start_date);if(T.setHours(0,0,0,0),T<=j)return!0}return!1}if(p.start_date){const ne=new Date(p.start_date);if(ne.setHours(0,0,0,0),ne<=j)return!0}return!1},ge=o.useMemo(()=>s.filter(p=>oe(p)),[s]),Q=o.useMemo(()=>ge.filter(p=>p.status!=="done"),[ge]),te=o.useMemo(()=>ge.filter(p=>p.status==="done"),[ge]);Q.sort((p,ne)=>{const T=!!p.start_date,me=!!ne.start_date;if(T&&!me)return-1;if(!T&&me)return 1;if(T&&me){const ke=new Date(p.start_date)-new Date(ne.start_date);if(ke!==0)return ke;const Se=p.start_time||p.end_time,Re=ne.start_time||ne.end_time;if(Se&&!Re)return-1;if(!Se&&Re)return 1;if(Se&&Re){const je=Se.localeCompare(Re);if(je!==0)return je}}const _e={in_progress:0,todo:1,backlog:2},Pe=_e[p.status]??3,Ie=_e[ne.status]??3;return Pe!==Ie?Pe-Ie:new Date(p.created_at)-new Date(ne.created_at)});const xe=s.filter(p=>!oe(p)&&p.status!=="done"),ye=xe.filter(p=>(p.status==="todo"||p.status==="in_progress")&&!St(p,g)),Ce=ye.filter(p=>Et(p.due_date,p.status)==="overdue"),b=ye.filter(p=>Et(p.due_date,p.status)==="today"&&!Ce.includes(p)),k=ye.filter(p=>{if(!p.due_date||Ce.includes(p)||b.includes(p))return!1;const ne=new Date(p.due_date);ne.setHours(0,0,0,0);const T=Math.ceil((ne-j)/(1e3*60*60*24));return T>0&&T<=3}),U=p=>Ce.includes(p)||b.includes(p)||k.includes(p),q=xe.filter(p=>p.status==="in_progress"&&!St(p,g)&&!U(p)),G=xe.filter(p=>p.status==="todo"&&!St(p,g)&&!U(p)),D=xe.filter(p=>p.status==="backlog"&&!St(p,g)),J=xe.filter(p=>p.energy_level==="low"&&!U(p)&&!q.includes(p)&&!G.includes(p)&&!D.includes(p)).slice(0,5),he=Q.reduce((p,ne)=>p+(ne.time_estimate||0),0),de=te.reduce((p,ne)=>p+(ne.time_estimate||0),0),Me=ge.length>0?Math.round(te.length/ge.length*100):0;o.useEffect(()=>{re.current>0&&Q.length===0&&te.length>0&&!ie&&c!==!1&&(P(!0),ka().then(p=>{const T=Date.now()+3e3,me=()=>{p({particleCount:3,angle:60,spread:55,origin:{x:0,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),p({particleCount:3,angle:120,spread:55,origin:{x:1,y:.8},colors:["#6366f1","#8b5cf6","#a855f7","#ec4899"]}),Date.now()<T&&requestAnimationFrame(me)};me()})),re.current=Q.length},[Q.length,te.length,ie,c]);const Ye=p=>{p.preventDefault(),C(!0)},Je=()=>{C(!1)},Ke=p=>{p.preventDefault(),C(!1);const ne=p.dataTransfer.getData("taskId");ne&&m(ne,ee)},at=(p,ne)=>{p.stopPropagation();const T=new Date(j);T.setDate(T.getDate()-1);const me=T.toISOString().split("T")[0];m(ne.id,me)},fe=({task:p,showRemove:ne=!1,isCompleted:T=!1})=>{const me=d.find(w=>w.id===p.project_id),_e=lr[p.energy_level],Pe=Et(p.due_date,p.status),Ie=St(p,g),ke=o.useRef(null),Se=o.useRef(!1),[Re,je]=o.useState(!1),[be,Ae]=o.useState(!1),Fe=o.useRef(!1),Oe=o.useRef(null),[qe,xt]=o.useState(!1),[ot,lt]=o.useState({x:0,y:0}),dt=w=>{T||w.target.closest("button")||(Fe.current=!1,ke.current=setTimeout(()=>{Se.current=!0,je(!0)},200))},n=()=>{ke.current&&(clearTimeout(ke.current),ke.current=null),Ae(!1),setTimeout(()=>{Se.current=!1,je(!1),Fe.current=!1},100)},R=()=>{ke.current&&(clearTimeout(ke.current),ke.current=null)},X=()=>{!Fe.current&&!Se.current&&l(p)},ve=w=>{if(!Se.current){w.preventDefault();return}Fe.current=!0,Ae(!0),w.dataTransfer.effectAllowed="move",w.dataTransfer.setData("taskId",p.id),E&&E(w,p)},u=w=>{if(T||w.target.closest("button"))return;const I=w.touches[0];Oe.current={x:I.clientX,y:I.clientY},Fe.current=!1,ke.current=setTimeout(()=>{Se.current=!0,je(!0),navigator.vibrate&&navigator.vibrate(50)},200)},v=w=>{if(!Se.current){if(Oe.current){const se=w.touches[0],le=Math.abs(se.clientX-Oe.current.x),Z=Math.abs(se.clientY-Oe.current.y);(le>10||Z>10)&&(Fe.current=!0,ke.current&&(clearTimeout(ke.current),ke.current=null))}return}w.preventDefault(),xt(!0),Fe.current=!0;const I=w.touches[0];lt({x:I.clientX,y:I.clientY});const A=document.elementFromPoint(I.clientX,I.clientY),V=A==null?void 0:A.closest('[data-dropzone="myday"]');document.querySelectorAll('[data-dropzone="myday"]').forEach(se=>{se.classList.remove("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")}),V&&V.classList.add("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")},f=w=>{if(ke.current&&(clearTimeout(ke.current),ke.current=null),document.querySelectorAll('[data-dropzone="myday"]').forEach(I=>{I.classList.remove("ring-2","ring-indigo-400","bg-indigo-50","dark:bg-indigo-900/30")}),qe&&Se.current){const I=w.changedTouches[0],A=document.elementFromPoint(I.clientX,I.clientY);(A==null?void 0:A.closest('[data-dropzone="myday"]'))&&m(p.id,new Date().toISOString().split("T")[0])}else!Fe.current&&!Se.current&&l(p);xt(!1),setTimeout(()=>{Se.current=!1,je(!1),Fe.current=!1},100),Oe.current=null};return e.jsxs(e.Fragment,{children:[e.jsx("div",{draggable:!T,onMouseDown:dt,onMouseUp:n,onMouseLeave:R,onDragStart:ve,onDragEnd:n,onClick:X,onTouchStart:u,onTouchMove:v,onTouchEnd:f,className:`group relative p-4 rounded-xl select-none transition-all duration-200 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50 hover:-translate-y-0.5 ${be||qe?"opacity-40 scale-[0.98]":Re?"cursor-grabbing ring-2 ring-indigo-400 scale-[1.02] shadow-lg":"cursor-pointer"} ${T?"bg-gray-50 dark:bg-gray-800/50 opacity-60":Ie?"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800":p.critical?"bg-gradient-to-br from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 border border-red-200 dark:border-red-800":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),$(p.id,p.status==="done"?"todo":"done")},className:`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${p.status==="done"?"bg-emerald-500 border-emerald-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,children:p.status==="done"&&e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("h4",{className:`font-medium text-sm leading-tight ${T?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-100"}`,children:[p.critical&&!T&&e.jsx("span",{className:"text-red-500 mr-1",children:"ðŸš©"}),Ie&&!T&&e.jsx("span",{className:"text-orange-500 mr-1",children:"ðŸ”’"}),p.title]}),ne&&!T&&e.jsx("button",{onClick:w=>at(w,p),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",title:"Remove from My Day",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[me&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),me.name]}),p.due_date&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${Pe==="overdue"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":Pe==="today"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":Pe==="soon"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Wt(p.due_date)}),_e&&e.jsxs("span",{className:"text-xs",title:`${_e.label} effort`,children:[p.energy_level==="low"&&e.jsx("span",{style:{color:_e.text},children:"â–°"}),p.energy_level==="medium"&&e.jsx("span",{style:{color:_e.text},children:"â–°â–°"}),p.energy_level==="high"&&e.jsx("span",{style:{color:_e.text},children:"â–°â–°â–°"})]}),p.time_estimate&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.time_estimate<60?`${p.time_estimate}m`:`${Math.round(p.time_estimate/60)}h`})]})]})]})}),qe&&e.jsx("div",{className:"fixed pointer-events-none z-[9999] p-3 rounded-xl border bg-white dark:bg-gray-800 border-indigo-400 shadow-2xl opacity-90 max-w-[200px]",style:{left:ot.x-100,top:ot.y-30},children:e.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:[p.critical&&"ðŸš© ",p.title]})})]})},$e=({title:p,emoji:ne,color:T,tasks:me,id:_e})=>{if(me.length===0)return null;const Pe=_===_e;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>M(Pe?null:_e),className:`w-full px-3 sm:px-4 py-3 sm:py-3 flex items-center justify-between ${T} transition-colors touch-manipulation`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:ne}),e.jsx("span",{className:"font-medium text-sm",children:p}),e.jsx("span",{className:"text-xs bg-white/50 dark:bg-black/20 px-2 py-0.5 rounded-full",children:me.length})]}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${Pe?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Pe&&e.jsx("div",{className:"p-2 sm:p-3 space-y-2 bg-white dark:bg-gray-900",children:me.map(Ie=>e.jsx(fe,{task:Ie},Ie.id))})]})};return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:p-6 py-4",children:[e.jsx("div",{className:"mb-4 sm:mb-6 flex items-start justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 sm:gap-3",children:[H," ",S]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:[ue[j.getDay()],", ",ce[j.getMonth()]," ",j.getDate()]})]})}),ge.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Today's Progress"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[te.length," of ",ge.length," tasks (",Me,"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${Me}%`}})}),he>0&&e.jsxs("div",{className:"flex justify-between mt-2 text-[10px] sm:text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["~",Math.round(he/60),"h remaining"]}),e.jsxs("span",{children:["~",Math.round(de/60),"h completed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"â˜€ï¸"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"My Day"}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["(",Q.length," active)"]})]}),e.jsx("div",{"data-dropzone":"myday",onDragOver:Ye,onDragLeave:Je,onDrop:Ke,className:`min-h-[150px] sm:min-h-[200px] rounded-xl border-2 border-dashed transition-all ${y?"border-indigo-400 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-700"}`,children:Q.length===0&&te.length===0?e.jsx(Ss,{icon:"â˜€ï¸",title:"Your day is wide open",description:"Drag tasks here from the recommendations, or add tasks with today's start date to build your focus list.",variant:"default"}):e.jsxs("div",{className:"p-3 sm:p-4 space-y-2 sm:space-y-3",children:[Q.map(p=>e.jsx(fe,{task:p,showRemove:!0},p.id)),te.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 pt-3 sm:pt-4 pb-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsxs("span",{className:"text-[10px] sm:text-xs text-gray-400 dark:text-gray-500",children:["Completed today (",te.length,")"]}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),te.map(p=>e.jsx(fe,{task:p,isCompleted:!0},p.id))]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:"ðŸ’¡"}),e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100",children:"Recommendations"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-3 sm:mb-4",children:"Drag tasks to My Day to add them to your focus list"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx($e,{id:"overdue",title:"Overdue",emoji:"ðŸ”´",color:"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400",tasks:Ce}),e.jsx($e,{id:"dueToday",title:"Due Today",emoji:"ðŸŸ ",color:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400",tasks:b}),e.jsx($e,{id:"dueSoon",title:"Due Soon",emoji:"ðŸŸ¡",color:"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",tasks:k}),e.jsx($e,{id:"quickWins",title:"Quick Wins",emoji:"ðŸŸ¢",color:"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400",tasks:J}),e.jsx($e,{id:"inProgress",title:"In Progress",emoji:"ðŸ”µ",color:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",tasks:q}),e.jsx($e,{id:"todo",title:"To Do",emoji:"âšª",color:"bg-slate-50 dark:bg-slate-900/20 text-slate-700 dark:text-slate-400",tasks:G}),e.jsx($e,{id:"backlog",title:"Backlog",emoji:"ðŸ“‹",color:"bg-gray-50 dark:bg-gray-800/50 text-gray-600 dark:text-gray-400",tasks:D}),Ce.length===0&&b.length===0&&k.length===0&&J.length===0&&q.length===0&&G.length===0&&D.length===0&&e.jsx(Ss,{icon:"ðŸŽ‰",title:"You're all caught up!",description:"No tasks need your attention right now. Enjoy the moment or create something new.",variant:"celebrate"})]})]})]})]})},Wa=({tasks:s,projects:d,onEditTask:l,allTasks:E})=>{var Ce;const{user:g}=Ts(),[$,m]=o.useState("created_at"),[c,y]=o.useState("desc"),[C,_]=o.useState({}),[M,ie]=o.useState(!1),P=b=>{const k=s.map(U=>{var q,G,D;return b==="project"?(q=d.find(J=>J.id===U.project_id))==null?void 0:q.name:b==="category"?(G=gt.find(J=>J.id===U.category))==null?void 0:G.label:b==="source"?(D=Rt.find(J=>J.id===U.source))==null?void 0:D.label:U[b]}).filter(Boolean);return[...new Set(k)].sort()},re=b=>{$===b?y(c==="asc"?"desc":"asc"):(m(b),y("asc"))},j=o.useMemo(()=>s.filter(b=>{var k,U,q;for(const[G,D]of Object.entries(C)){if(!D)continue;let J;if(G==="project"?J=((k=d.find(he=>he.id===b.project_id))==null?void 0:k.name)||"":G==="category"?J=((U=gt.find(he=>he.id===b.category))==null?void 0:U.label)||"":G==="source"?J=((q=Rt.find(he=>he.id===b.source))==null?void 0:q.label)||"":J=b[G]||"",D==="__blank__"&&J||D!=="__blank__"&&String(J).toLowerCase()!==String(D).toLowerCase())return!1}return!0}),[s,C,d]),ee=o.useMemo(()=>[...j].sort((b,k)=>{var G,D,J,he;let U,q;return $==="project"?(U=((G=d.find(de=>de.id===b.project_id))==null?void 0:G.name)||"",q=((D=d.find(de=>de.id===k.project_id))==null?void 0:D.name)||""):$==="category"?(U=((J=gt.find(de=>de.id===b.category))==null?void 0:J.label)||"",q=((he=gt.find(de=>de.id===k.category))==null?void 0:he.label)||""):(U=b[$]??"",q=k[$]??""),($.includes("date")||$==="created_at")&&(U=U?new Date(U).getTime():0,q=q?new Date(q).getTime():0),typeof U=="boolean"&&(U=U?1:0),typeof q=="boolean"&&(q=q?1:0),U<q?c==="asc"?-1:1:U>q?c==="asc"?1:-1:0}),[j,$,c,d]),ue=()=>{const b=["ID","Title","Project","Project Archived","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description","Created"],k=ee.map(D=>{var he,de;const J=d.find(Me=>Me.id===D.project_id);return[D.id||"",D.title||"",(J==null?void 0:J.name)||"",J!=null&&J.archived?"Yes":"No",D.status||"",D.critical?"Yes":"No",D.due_date||"",D.start_date||"",D.assignee||"",D.customer||"",((he=gt.find(Me=>Me.id===D.category))==null?void 0:he.label)||"",D.energy_level||"",((de=Rt.find(Me=>Me.id===D.source))==null?void 0:de.label)||"",D.time_estimate?`${D.time_estimate}m`:"",(D.description||"").replace(/[\n\r,]/g," "),D.created_at?new Date(D.created_at).toLocaleDateString():""]}),U=[b,...k].map(D=>D.map(J=>`"${String(J).replace(/"/g,'""')}"`).join(",")).join(`
`),q=new Blob([U],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a");G.href=URL.createObjectURL(q),G.download=`trackli-tasks-${new Date().toISOString().split("T")[0]}.csv`,G.click()},ce=()=>{var D;const b=["ID","Title","Project","Status","Critical","Due Date","Start Date","Assignee","Customer","Category","Effort","Source","Time Estimate","Description"],k=["*","Example Task",((D=d[0])==null?void 0:D.name)||"Project Name","todo","No","","","","","","","","30m","Task description here"],U=[b,k].map(J=>J.map(he=>`"${String(he).replace(/"/g,'""')}"`).join(",")).join(`
`),q=new Blob([U],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a");G.href=URL.createObjectURL(q),G.download="trackli-template.csv",G.click()},[x,S]=o.useState(!1),[H,oe]=o.useState(null),ge=o.useRef(null),Q=async b=>{var U,q,G;const k=(U=b.target.files)==null?void 0:U[0];if(k){S(!0),oe(null);try{const J=(await k.text()).split(`
`).filter(je=>je.trim());if(J.length<2){oe({error:"CSV must have a header row and at least one data row"}),S(!1);return}const he=je=>{const be=[];let Ae="",Fe=!1;for(let Oe=0;Oe<je.length;Oe++){const qe=je[Oe];qe==='"'?Fe&&je[Oe+1]==='"'?(Ae+='"',Oe++):Fe=!Fe:qe===","&&!Fe?(be.push(Ae.trim()),Ae=""):Ae+=qe}return be.push(Ae.trim()),be},de=he(J[0]).map(je=>je.toLowerCase().trim()),Me=de.indexOf("id"),Ye=de.indexOf("title"),Je=de.indexOf("project"),Ke=de.indexOf("status"),at=de.indexOf("critical"),fe=de.indexOf("due date"),$e=de.indexOf("start date"),p=de.indexOf("assignee"),ne=de.indexOf("customer"),T=de.indexOf("category"),me=de.indexOf("effort"),_e=de.indexOf("source"),Pe=de.indexOf("time estimate"),Ie=de.indexOf("description");if(Ye===-1){oe({error:"CSV must have a Title column"}),S(!1);return}let ke=0,Se=0,Re=[];for(let je=1;je<J.length;je++){const be=he(J[je]);if(be.length===0||be.every(A=>!A))continue;const Ae=Me>=0?be[Me]:"",Fe=Ye>=0?be[Ye]:"";if(!Fe){Re.push(`Row ${je+1}: Missing title`);continue}const Oe=Je>=0?be[Je]:"",qe=d.find(A=>A.name.toLowerCase()===Oe.toLowerCase()),xt=T>=0?be[T]:"",ot=gt.find(A=>A.label.toLowerCase()===xt.toLowerCase()),lt=_e>=0?be[_e]:"",dt=Rt.find(A=>A.label.toLowerCase()===lt.toLowerCase()),n=Ke>=0?(q=be[Ke])==null?void 0:q.toLowerCase():"todo",X={backlog:"backlog","to do":"todo",todo:"todo","in progress":"in_progress",in_progress:"in_progress",done:"done"}[n]||"todo",ve=at>=0?(G=be[at])==null?void 0:G.toLowerCase():"",u=ve==="yes"||ve==="true"||ve==="1",v=Pe>=0?be[Pe]:"",f=v&&parseInt(v.replace(/m$/i,""))||null,w=A=>{if(!A)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(A))return A;const V=Yr(),se=A.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(se){let le,Z;return V?(Z=se[1].padStart(2,"0"),le=se[2].padStart(2,"0")):(le=se[1].padStart(2,"0"),Z=se[2].padStart(2,"0")),`${se[3]}-${Z}-${le}`}return null},I={title:Fe,project_id:(qe==null?void 0:qe.id)||null,status:X,critical:u,due_date:w(fe>=0?be[fe]:null),start_date:w($e>=0?be[$e]:null),assignee:p>=0&&be[p]||null,customer:ne>=0&&be[ne]||null,category:(ot==null?void 0:ot.id)||null,energy_level:me>=0&&be[me]?be[me].toLowerCase():null,source:(dt==null?void 0:dt.id)||null,time_estimate:f,description:Ie>=0&&be[Ie]||null};try{if(!Ae||Ae==="*"){const{error:A}=await z.from("tasks").insert(I);if(A)throw A;ke++}else{const{error:A}=await z.from("tasks").update(I).eq("id",Ae);if(A)throw A;Se++}}catch(A){Re.push(`Row ${je+1}: ${A.message}`)}}if(oe({created:ke,updated:Se,errors:Re}),ke>0||Se>0){const{data:je}=await z.from("tasks").select("*, dependencies:task_dependencies!task_dependencies_task_id_fkey(depends_on_id)").eq("user_id",g.id).order("created_at",{ascending:!1});je&&window.location.reload()}}catch(D){oe({error:`Failed to parse CSV: ${D.message}`})}S(!1),ge.current&&(ge.current.value="")}},te=[{key:"title",label:"Title",width:"min-w-[200px]"},{key:"project",label:"Project",width:"min-w-[120px]"},{key:"status",label:"Status",width:"min-w-[100px]"},{key:"critical",label:"Critical",width:"min-w-[80px]"},{key:"due_date",label:"Due Date",width:"min-w-[100px]"},{key:"start_date",label:"Start Date",width:"min-w-[100px]"},{key:"assignee",label:"Assignee",width:"min-w-[120px]"},{key:"customer",label:"Customer",width:"min-w-[120px]"},{key:"category",label:"Category",width:"min-w-[120px]"},{key:"energy_level",label:"Effort",width:"min-w-[100px]"},{key:"source",label:"Source",width:"min-w-[100px]"},{key:"time_estimate",label:"Est. Time",width:"min-w-[90px]"},{key:"created_at",label:"Created",width:"min-w-[100px]"}],xe=(b,k)=>{var U,q;switch(k){case"project":return((U=d.find(D=>D.id===b.project_id))==null?void 0:U.name)||"-";case"status":return{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",done:"Done"}[b.status]||b.status;case"critical":return b.critical?"ðŸš¨ Yes":"-";case"due_date":case"start_date":return b[k]?Wt(b[k]):"-";case"category":return((q=gt.find(D=>D.id===b.category))==null?void 0:q.label)||"-";case"energy_level":return{high:"â–°â–°â–° High",medium:"â–°â–° Medium",low:"â–° Low"}[b.energy_level]||"-";case"source":const G=Rt.find(D=>D.id===b.source);return G?`${G.icon} ${G.label}`:"-";case"time_estimate":return b.time_estimate?Vt(b.time_estimate):"-";case"created_at":return b.created_at?new Date(b.created_at).toLocaleDateString():"-";default:return b[k]||"-"}},ye=b=>({backlog:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",todo:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",in_progress:"bg-pink-100 text-pink-700 dark:bg-pink-900/50 dark:text-pink-300",done:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"})[b]||"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sm:p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-100",children:"All Tasks"}),e.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:ee.length})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsxs("button",{onClick:()=>ie(!M),className:`flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${M||Object.values(C).some(b=>b)?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Object.values(C).some(b=>b)&&e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]}),Object.values(C).some(b=>b)&&e.jsx("button",{onClick:()=>_({}),className:"px-2 py-1.5 text-xs sm:text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Clear"}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700"}),e.jsxs("button",{onClick:ue,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 rounded-lg text-sm font-medium transition-colors",title:"Export CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:()=>{var b;return(b=ge.current)==null?void 0:b.click()},disabled:x,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",title:"Import CSV",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("span",{className:"hidden sm:inline",children:x?"Importing...":"Import"})]}),e.jsxs("button",{onClick:ce,className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",title:"Download CSV template",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Template"]}),e.jsx("input",{ref:ge,type:"file",accept:".csv",onChange:Q,className:"hidden"})]})]}),H&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>oe(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:H.error?"Import Error":"Import Complete"}),H.error?e.jsx("p",{className:"text-red-600 dark:text-red-400",children:H.error}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-green-600",children:H.created})," tasks created"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:H.updated})," tasks updated"]}),((Ce=H.errors)==null?void 0:Ce.length)>0&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Errors:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 space-y-1",children:[H.errors.slice(0,5).map((b,k)=>e.jsx("li",{children:b},k)),H.errors.length>5&&e.jsxs("li",{children:["...and ",H.errors.length-5," more"]})]})]})]}),e.jsx("button",{onClick:()=>oe(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors",children:"Close"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{className:"sticky top-0 z-10",children:[e.jsx("tr",{className:"bg-gray-50 dark:bg-gray-800",children:te.map(b=>e.jsx("th",{className:`${b.width} px-4 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700`,children:e.jsxs("button",{onClick:()=>re(b.key),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:[b.label,$===b.key&&e.jsx("svg",{className:`w-4 h-4 ${c==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})},b.key))}),M&&e.jsx("tr",{className:"bg-gray-100 dark:bg-gray-800/50",children:te.map(b=>e.jsx("th",{className:"px-2 py-2 border-b border-gray-200 dark:border-gray-700",children:["title","time_estimate","created_at"].includes(b.key)?e.jsx("span",{className:"text-xs text-gray-400",children:"-"}):e.jsxs("select",{value:C[b.key]||"",onChange:k=>_({...C,[b.key]:k.target.value}),className:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded focus:ring-1 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"__blank__",children:"(Blank)"}),b.key==="status"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),b.key==="critical"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),b.key==="energy_level"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]}),["project","assignee","customer","category","source"].includes(b.key)&&P(b.key).map(k=>e.jsx("option",{value:k,children:k},k))]})},`filter-${b.key}`))})]}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:ee.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:te.length,className:"px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"No tasks found"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Try adjusting your filters or search terms"})]})})}):ee.map(b=>{const k=d.find(q=>q.id===b.project_id),U=k==null?void 0:k.archived;return e.jsx("tr",{onClick:()=>l(b),className:`cursor-pointer transition-colors ${U?"bg-gray-100 dark:bg-gray-800/50 opacity-60":"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800/50"}`,children:te.map(q=>e.jsx("td",{className:"px-4 py-3 text-sm",children:q.key==="title"?e.jsxs("div",{className:"flex items-center gap-2",children:[b.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš¨"}),U&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:"Archived"}),e.jsx("span",{className:`font-medium truncate max-w-[250px] ${U?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:b.title})]}):q.key==="status"?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ye(b.status)}`,children:xe(b,q.key)}):q.key==="critical"?e.jsx("span",{className:b.critical?"text-red-500 font-medium":"text-gray-400",children:xe(b,q.key)}):e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:xe(b,q.key)})},`${b.id}-${q.key}`))},b.id)})})]})})]})},Pa=({task:s,project:d,onEdit:l,onDragStart:E,showProject:g=!0,allTasks:$=[],onQuickComplete:m,bulkSelectMode:c,isSelected:y,onToggleSelect:C,onStatusChange:_,onSetDueDate:M,onToggleMyDay:ie,isDragging:P,onUpdateTitle:re,onToggleCritical:j})=>{var Ye,Je,Ke,at,fe,$e,p,ne;const[ee,ue]=o.useState(!1),[ce,x]=o.useState(!1),[S,H]=o.useState(s.title),oe=o.useRef(null),ge=T=>{c||!re||(T.stopPropagation(),x(!0),H(s.title),setTimeout(()=>{var me;return(me=oe.current)==null?void 0:me.focus()},0))},Q=()=>{S.trim()&&S!==s.title&&re(s.id,S.trim()),x(!1)},te=T=>{T.key==="Enter"?(T.preventDefault(),Q()):T.key==="Escape"&&(H(s.title),x(!1))},xe=Et(s.due_date,s.status),ye=St(s,$),Ce=s.recurrence_type?Ms.find(T=>T.id===s.recurrence_type):null,b=s.status==="done",k=s.status==="in_progress",U=ir(s),q=gt.find(T=>T.id===s.category),G=lr[s.energy_level],D=qr(s),J=!b&&xe==="overdue",he=!b&&xe==="today",de=J?"#DC2626":he?"#D97706":ye?"#F97316":s.critical?"#EF4444":U?"#10B981":Bt[s.status],Me=s.description||s.assignee||q||((Ye=s.subtasks)==null?void 0:Ye.length)>0||((Je=s.attachments)==null?void 0:Je.length)>0;return e.jsxs("div",{draggable:!0,onDragStart:T=>E(T,s),onClick:()=>c?C==null?void 0:C(s.id):l(s),className:`task-card relative rounded-lg p-2 sm:p-2.5 shadow-sm border cursor-pointer transition-all duration-200 group hover:z-[100] ${P?"opacity-30 scale-95 ring-2 ring-dashed ring-indigo-400 bg-indigo-50 dark:bg-indigo-900/30":"hover:-translate-y-1 hover:shadow-lg hover:shadow-gray-200/50 dark:hover:shadow-gray-900/50"} ${!P&&b?"opacity-60 bg-white dark:bg-gray-800":!P&&J?"bg-red-50 dark:bg-red-900/40":!P&&he?"bg-amber-50 dark:bg-amber-900/40":P?"":"bg-white dark:bg-gray-800"} ${y?"ring-2 ring-indigo-500 border-indigo-300":J?"border-red-300 dark:border-red-500 hover:border-red-400 dark:hover:border-red-400":he?"border-amber-300 dark:border-amber-500 hover:border-amber-400 dark:hover:border-amber-400":ye?"border-orange-200 dark:border-orange-800 hover:border-orange-300":s.critical?"border-red-200 dark:border-red-800 hover:border-red-300":U?"border-green-200 dark:border-green-800 hover:border-green-300":"border-gray-100 dark:border-gray-700 hover:border-gray-200"}`,style:{borderLeftWidth:"2px",borderLeftColor:de},children:[Me&&e.jsxs("div",{className:`hidden md:block absolute top-0 z-[200] w-56 p-3 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 pointer-events-none ${s.status==="done"?"right-full mr-2":"left-full ml-2"}`,children:[q&&e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:q.color},children:q.label})}),s.customer&&e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium mb-2",children:s.customer}),G&&e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full",style:{backgroundColor:G.bg,color:G.text},children:[G.icon," ",G.label]})}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 line-clamp-3",children:s.description}),s.assignee&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500 text-white text-[10px] font-medium flex items-center justify-center flex-shrink-0",children:s.assignee.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:s.assignee})]}),((Ke=s.dependencies)==null?void 0:Ke.length)>0&&(()=>{const T=s.dependencies.map(me=>$.find(_e=>_e.id===me.depends_on_id)).filter(me=>me&&me.status!=="done");return T.length===0?null:e.jsxs("div",{className:"mb-2 p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"ðŸš« Blocked by:"}),T.map(me=>e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 truncate",children:["â€¢ ",me.title]},me.id))]})})(),((at=s.subtasks)==null?void 0:at.length)>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Subtasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${s.subtasks.filter(T=>T.completed).length/s.subtasks.length*100}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.subtasks.filter(T=>T.completed).length,"/",s.subtasks.length]})]})]}),((fe=s.attachments)==null?void 0:fe.length)>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["ðŸ“Ž ",s.attachments.length," attachment",s.attachments.length>1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col",children:[c&&e.jsx("div",{className:"absolute top-1 left-1 z-10",children:e.jsx("button",{onClick:T=>{T.stopPropagation(),C==null||C(s.id)},className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${y?"bg-indigo-500 border-indigo-500 text-white":"border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-800"}`,children:y&&e.jsx("svg",{className:"w-2.5 h-2.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[D&&!b&&e.jsx("span",{className:"text-xs flex-shrink-0",title:"In My Day",children:"â˜€ï¸"}),J&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-red-100 dark:bg-red-500/80 text-red-700 dark:text-white flex-shrink-0",children:"OVERDUE"}),he&&e.jsx("span",{className:"px-1.5 py-0.5 text-[9px] font-semibold rounded bg-amber-100 dark:bg-amber-500/80 text-amber-700 dark:text-white flex-shrink-0",children:"TODAY"}),ye&&e.jsx("span",{title:"Blocked",className:"text-xs flex-shrink-0",children:"ðŸ”’"}),s.critical&&e.jsx("span",{title:"Critical",className:"text-xs flex-shrink-0",children:"ðŸš©"}),Ce&&e.jsx("span",{title:Ce.label,className:"text-xs flex-shrink-0",children:"ðŸ”"}),ce?e.jsx("input",{ref:oe,type:"text",value:S,onChange:T=>H(T.target.value),onBlur:Q,onKeyDown:te,onClick:T=>T.stopPropagation(),className:"flex-1 text-xs font-medium bg-white dark:bg-gray-700 border border-indigo-400 rounded px-1.5 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700 dark:text-gray-200"}):e.jsx("h4",{onClick:T=>re&&T.stopPropagation(),onDoubleClick:ge,className:`flex-1 text-xs font-medium line-clamp-2 leading-tight ${J?"text-red-700 dark:text-red-200 group-hover:text-red-800 dark:group-hover:text-red-100":he?"text-amber-700 dark:text-amber-200 group-hover:text-amber-800 dark:group-hover:text-amber-100":"text-gray-700 dark:text-gray-200 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"} ${re?"cursor-text":""}`,title:re?"Double-click to edit":"",children:s.title})]}),e.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 mt-1.5 text-[10px] text-gray-600 dark:text-gray-400",children:[s.start_date&&e.jsxs("span",{className:`flex items-center gap-0.5 ${U?"text-green-600 dark:text-green-400":""}`,children:[e.jsx("span",{children:"â–¶"})," ",Wt(s.start_date)]}),s.due_date&&e.jsxs("span",{className:`flex items-center gap-0.5 font-medium ${xe==="overdue"?"text-red-600 dark:text-red-400":xe==="today"?"text-orange-600 dark:text-orange-400":xe==="soon"?"text-amber-600 dark:text-amber-400":""}`,children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Wt(s.due_date)]}),s.time_estimate&&e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx("span",{children:"â±"})," ",Vt(s.time_estimate)]}),G&&e.jsxs("span",{className:"hidden sm:inline-flex px-1.5 py-0.5 text-[9px] font-medium rounded-full",style:{backgroundColor:G.bg,color:G.text},title:G.label,children:[G.icon," ",G.label]})]}),s.customer&&e.jsx("div",{className:"hidden sm:block mt-1.5",children:e.jsx("span",{className:"inline-block px-2 py-0.5 text-[10px] font-medium rounded-full",style:{backgroundColor:(($e=Ur(s.customer))==null?void 0:$e.bg)||"#EDE9FE",color:((p=Ur(s.customer))==null?void 0:p.text)||"#7C3AED",border:`1px solid ${((ne=Ur(s.customer))==null?void 0:ne.border)||"#C4B5FD"}`},children:s.customer})}),g&&d&&e.jsx("div",{className:"hidden sm:block mt-2 pt-1.5 border-t border-gray-100 dark:border-gray-700",children:e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:d.name})}),m&&e.jsxs("div",{className:"sm:hidden flex items-center gap-1.5 mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[s.status==="backlog"&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-400 rounded hover:bg-blue-100 transition-colors",children:"â†’ To Do"}),s.status==="todo"&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,"in_progress")},className:"flex-1 py-1 text-[10px] font-medium text-pink-600 bg-pink-50 dark:bg-pink-900/30 dark:text-pink-400 rounded hover:bg-pink-100 transition-colors",children:"â–¶ Start"}),(s.status==="backlog"||s.status==="todo"||s.status==="in_progress")&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,"done")},className:"flex-1 py-1 text-[10px] font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400 rounded hover:bg-emerald-100 transition-colors",children:"âœ“ Done"}),s.status==="done"&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,"todo")},className:"flex-1 py-1 text-[10px] font-medium text-amber-600 bg-amber-50 dark:bg-amber-900/30 dark:text-amber-400 rounded hover:bg-amber-100 transition-colors",children:"â†© Reopen"})]})]})]}),!P&&e.jsx("div",{className:"hidden md:flex absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 scale-90 group-hover:scale-100 z-10",children:e.jsxs("div",{className:"flex items-center gap-0.5 p-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600",children:[!k&&!b&&m&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,"in_progress")},className:"p-1.5 text-gray-400 hover:text-pink-500 hover:bg-pink-50 dark:hover:bg-pink-900/30 rounded transition-colors",title:"Start working",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),m&&e.jsx("button",{onClick:T=>{T.stopPropagation(),m(s.id,b?"todo":"done")},className:`p-1.5 rounded transition-colors ${b?"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/30":"text-gray-400 hover:text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/30"}`,title:b?"Reopen task":"Mark done",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),j&&e.jsx("button",{onClick:T=>{T.stopPropagation(),j(s.id,!s.critical)},className:`p-1.5 rounded transition-colors ${s.critical?"text-red-500 bg-red-50 dark:bg-red-900/30":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30"}`,title:s.critical?"Remove critical flag":"Mark as critical",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:s.critical?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})})}),ie&&!D&&!b&&e.jsx("button",{onClick:T=>{T.stopPropagation(),ie(s.id,!0)},className:"p-1.5 text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded transition-colors",title:"Add to My Day",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]})})]})},Oa=({tasks:s,projects:d,onEditTask:l,onUndoComplete:E})=>{const[g,$]=o.useState(!1);if(s.length===0)return null;const m=c=>{const y=new Date(c),_=new Date-y,M=Math.floor(_/6e4),ie=Math.floor(_/36e5),P=Math.floor(_/864e5);return M<1?"just now":M<60?`${M}m ago`:ie<24?`${ie}h ago`:`${P}d ago`};return e.jsxs("div",{className:"mt-6 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("button",{onClick:()=>$(!g),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Recently Completed"}),e.jsx("span",{className:"text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 px-2 py-0.5 rounded-full",children:s.length})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"px-4 pb-4 space-y-2",children:s.map(c=>{const y=d.find(C=>C.id===c.project_id);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-100 dark:border-gray-700 group hover:border-gray-200 dark:hover:border-gray-600 transition-colors",children:[e.jsx("button",{onClick:()=>E(c.id),className:"w-5 h-5 rounded-full bg-emerald-500 text-white flex items-center justify-center shrink-0 hover:bg-amber-500 transition-colors",title:"Mark as incomplete",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>l(c),children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-through truncate",children:c.title}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:y&&e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:y.name})})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 shrink-0",children:m(c.completed_at)})]},c.id)})})]})},Ds=({column:s,tasks:d,projects:l,onEditTask:E,onDragStart:g,onDragOver:$,onDrop:m,showProject:c,allTasks:y,onQuickComplete:C,onStatusChange:_,onSetDueDate:M,bulkSelectMode:ie,selectedTaskIds:P,onToggleSelect:re,onAddTask:j,onToggleMyDay:ee,isMobileFullWidth:ue,draggedTask:ce,onUpdateTitle:x,onToggleCritical:S})=>{const[H,oe]=o.useState(!1),[ge,Q]=o.useState(!1),[te,xe]=o.useState(!1),ye=d.reduce((D,J)=>D+(J.time_estimate||0),0),Ce=d.filter(D=>D.critical).length,b=d.filter(D=>ir(D)).length,k=s.id==="done",U=s.id==="backlog";let q=d,G=0;return k&&!ge?(q=d.slice(0,Vr),G=Math.max(0,d.length-Vr)):U&&!te&&(q=d.slice(0,Hr),G=Math.max(0,d.length-Hr)),e.jsxs("div",{className:`${ue?"w-full":"flex-shrink-0 w-[280px] sm:w-[300px] lg:flex-1 lg:min-w-[300px] lg:max-w-[400px] xl:max-w-[450px]"} bg-gray-50/80 dark:bg-gray-800/80 rounded-2xl p-3 sm:p-4 transition-all duration-200 overflow-visible ${H?"ring-2 ring-indigo-400 ring-offset-2 dark:ring-offset-gray-900 bg-indigo-50/50 dark:bg-indigo-900/20 scale-[1.01]":""}`,onDragOver:D=>{D.preventDefault(),oe(!0),$(D,s.id)},onDragLeave:()=>oe(!1),onDrop:D=>{oe(!1),m(D,s.id)},children:[e.jsxs("div",{className:`${ue?"hidden":"flex"} items-center gap-3 mb-2`,children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:s.title}),e.jsx("span",{className:"ml-auto bg-white dark:bg-gray-700 px-2.5 py-0.5 rounded-full text-sm font-medium text-gray-500 dark:text-gray-300 shadow-sm",children:d.length})]}),e.jsxs("div",{className:`${ue?"hidden":"flex"} items-center gap-2 mb-4 ml-6 text-xs text-gray-500 dark:text-gray-400`,children:[ye>0&&e.jsx("span",{children:Vt(ye)}),s.id!=="done"&&Ce>0&&e.jsxs("span",{className:"text-red-500",children:[Ce," critical"]}),s.id==="backlog"&&b>0&&e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[b," ready"]})]}),e.jsxs("div",{className:"space-y-2 overflow-visible",children:[q.length===0&&!H&&e.jsxs("div",{className:"py-6 sm:py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-10 sm:h-10 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3 sm:mb-2 opacity-60",children:e.jsx("span",{className:"text-xl sm:text-lg",children:s.id==="done"?"âœ…":s.id==="in_progress"?"ðŸ’­":s.id==="todo"?"ðŸ“‹":"ðŸ“¦"})}),e.jsx("p",{className:"text-sm sm:text-xs text-gray-400 dark:text-gray-500 px-4",children:s.id==="done"?"Completed tasks appear here":s.id==="in_progress"?"Tasks you're working on":s.id==="todo"?"Ready to start":"Future tasks"})]}),q.map(D=>e.jsx(Pa,{task:D,project:l.find(J=>J.id===D.project_id),onEdit:E,onDragStart:g,showProject:c,allTasks:y,onQuickComplete:C,onStatusChange:_,onSetDueDate:M,bulkSelectMode:ie,isSelected:P==null?void 0:P.has(D.id),onToggleSelect:re,onToggleMyDay:ee,isDragging:(ce==null?void 0:ce.id)===D.id,onUpdateTitle:x,onToggleCritical:S},D.id)),k&&G>0&&!ge&&e.jsxs("button",{onClick:()=>Q(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-indigo-300 transition-all",children:["View all ",d.length," completed tasks â†’"]}),k&&ge&&d.length>Vr&&e.jsx("button",{onClick:()=>Q(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all",children:"Show less â†‘"}),U&&G>0&&!te&&e.jsxs("button",{onClick:()=>xe(!0),className:"w-full py-3 text-sm text-indigo-600 hover:text-indigo-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-indigo-300 transition-all",children:["View all ",d.length," backlog tasks â†’"]}),U&&te&&d.length>Hr&&e.jsx("button",{onClick:()=>xe(!1),className:"w-full py-3 text-sm text-gray-500 hover:text-gray-700 font-medium bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 hover:border-gray-300 transition-all",children:"Show less â†‘"}),ce&&ce.status!==s.id&&H&&e.jsxs("div",{className:"w-full py-4 rounded-xl border-2 border-dashed border-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20 animate-dropZone flex items-center justify-center gap-2 text-indigo-500 dark:text-indigo-400 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),"Drop here"]}),e.jsxs("button",{onClick:()=>j(s.id),className:"w-full mt-3 py-3 sm:py-2.5 text-sm text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-medium rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:bg-indigo-50/50 dark:hover:bg-indigo-900/20 transition-all flex items-center justify-center gap-2 active:scale-95 touch-manipulation",children:[e.jsx("svg",{className:"w-5 h-5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add task"]})]})]})},za=({isOpen:s,onClose:d,task:l,projects:E,allTasks:g,onSave:$,onDelete:m,loading:c,templates:y=[],onSaveTemplate:C,onDeleteTemplate:_,onShowConfirm:M})=>{var lt,dt;const ie=o.useRef(null),[P,re]=o.useState(!1),[j,ee]=o.useState(!1),[ue,ce]=o.useState(""),[x,S]=o.useState({title:"",description:"",project_id:"",status:"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),[H,oe]=o.useState([]),[ge,Q]=o.useState([]),[te,xe]=o.useState([]),[ye,Ce]=o.useState("details"),[b,k]=o.useState(""),[U,q]=o.useState(!1),[G,D]=o.useState(!1),[J,he]=o.useState(""),[de,Me]=o.useState(!1),[Ye,Je]=o.useState(""),[Ke,at]=o.useState(""),[fe,$e]=o.useState([]),[p,ne]=o.useState(""),[T,me]=o.useState([]),[_e,Pe]=o.useState(""),Ie=o.useRef(null),[ke,Se]=o.useState(null);o.useEffect(()=>{const n=R=>{var X;j&&(R.key==="Escape"&&ee(!1),R.key==="Enter"&&(m(l.id),ee(!1),d())),(R.ctrlKey||R.metaKey)&&R.key==="s"&&!j&&(R.preventDefault(),(X=document.querySelector("form"))==null||X.requestSubmit())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[j,l,m,d]);const Re=n=>{n&&(S(R=>({...R,title:n.title||"",description:n.description||"",project_id:n.project_id||R.project_id,category:n.category||"deliverable",energy_level:n.energy_level||"medium",time_estimate:n.time_estimate||"",source:n.source||"ad_hoc",assignee:n.assignee||"",customer:n.customer||"",critical:n.critical||!1,recurrence_type:n.recurrence_type||null,recurrence_count:n.recurrence_count||8})),$e(n.subtasks||[]),n.assignee&&(E.flatMap(X=>X.team_members||[]).includes(n.assignee)||(D(!0),he(n.assignee))),n.customer&&(Me(!0),Je(n.customer)))},je=async n=>{var X;const R=(X=n.clipboardData)==null?void 0:X.items;if(R){for(const ve of R)if(ve.type.startsWith("image/")){n.preventDefault();const u=ve.getAsFile();if(u){const v=new Date().toISOString().replace(/[:.]/g,"-"),f=u.type.split("/")[1]||"png",w=new File([u],`pasted-image-${v}.${f}`,{type:u.type});if(w.size>10*1024*1024){k("Pasted image is too large. Max size is 10MB.");return}xe(I=>[...I,w]),at("ðŸ“Ž Image captured!"),setTimeout(()=>at(""),2e3)}break}}};o.useEffect(()=>{var R,X,ve,u;const n=l!=null&&l.id?`edit-${l.id}`:s?`new-${(l==null?void 0:l.title)||""}-${(l==null?void 0:l.project_id)||""}`:null;if(!(!s||Ie.current===n)){if(Ie.current=n,l!=null&&l.id){const v=E.find(I=>I.id===l.project_id),f=v&&!((R=v.members)!=null&&R.includes(l.assignee))&&l.assignee,w=v&&!((X=v.customers)!=null&&X.includes(l.customer))&&l.customer;S({title:l.title||"",description:l.description||"",project_id:l.project_id||"",status:l.status||"backlog",critical:l.critical||!1,start_date:l.start_date||"",start_time:l.start_time||"",end_time:l.end_time||"",due_date:l.due_date||"",assignee:f?"":l.assignee||"",time_estimate:l.time_estimate||"",energy_level:l.energy_level||"medium",category:l.category||"deliverable",source:l.source||"ad_hoc",source_link:l.source_link||"",customer:w?"":l.customer||"",notes:l.notes||"",recurrence_type:l.recurrence_type||null,recurrence_count:l.recurrence_count||8,recurrence_end_date:l.recurrence_end_date||""}),Q(l.attachments||[]),oe(((ve=l.dependencies)==null?void 0:ve.map(I=>I.depends_on_id))||[]),D(f),he(f?l.assignee:""),Me(w),Je(w?l.customer:""),$e(l.subtasks||[]),me(l.comments||[])}else S({title:(l==null?void 0:l.title)||"",description:"",project_id:(l==null?void 0:l.project_id)||((u=E[0])==null?void 0:u.id)||"",status:(l==null?void 0:l.status)||"backlog",critical:!1,start_date:"",start_time:"",end_time:"",due_date:(l==null?void 0:l.due_date)||"",assignee:"",time_estimate:"",energy_level:"medium",category:"deliverable",source:"ad_hoc",source_link:"",customer:"",notes:"",recurrence_type:null,recurrence_count:8,recurrence_end_date:""}),Q([]),oe([]),D(!1),he(""),Me(!1),Je(""),$e([]),me([]);xe([]),Ce("details"),k(""),ne(""),Pe("")}},[l==null?void 0:l.id,l==null?void 0:l.title,l==null?void 0:l.project_id,s]),o.useEffect(()=>{s||(Ie.current=null)},[s]);const be=E.find(n=>n.id===x.project_id),Ae=async n=>{const R=Array.from(n.target.files);if(R.length===0)return;k("");const X=[];for(const ve of R){if(ve.size>10*1024*1024){k(`File "${ve.name}" is too large. Max size is 10MB.`);continue}X.push(ve)}xe([...te,...X]),ie.current&&(ie.current.value="")},Fe=n=>{xe(te.filter((R,X)=>X!==n))},Oe=n=>{Q(ge.filter(R=>R.id!==n))},qe=async n=>{n.preventDefault();const R=G?J:x.assignee,X=de?Ye:x.customer;await $({...x,assignee:R,customer:X,time_estimate:x.time_estimate?parseInt(x.time_estimate):null,id:l==null?void 0:l.id,dependencies:H,subtasks:fe,comments:T},te,ge),d()},xt=(g==null?void 0:g.filter(n=>n.project_id===x.project_id&&n.id!==(l==null?void 0:l.id)&&n.status!=="done"))||[],ot=n=>n<1024?n+" B":n<1024*1024?(n/1024).toFixed(1)+" KB":(n/(1024*1024)).toFixed(1)+" MB";return e.jsxs(Kr,{isOpen:s,onClose:d,title:l!=null&&l.id?"Edit Task":"New Task",wide:!0,fullScreenMobile:!0,children:[e.jsxs("form",{onSubmit:qe,children:[!(l!=null&&l.id)&&y.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"ðŸ“‹ Use template:"}),e.jsxs("select",{onChange:n=>{const R=y.find(X=>X.id===parseInt(n.target.value));R&&Re(R),n.target.value=""},className:"flex-1 min-w-[150px] px-3 py-1.5 bg-white dark:bg-gray-800 border border-indigo-200 dark:border-indigo-700 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",value:"",children:[e.jsx("option",{value:"",children:"Select a template..."}),y.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),_&&e.jsxs("div",{className:"relative group",children:[e.jsx("button",{type:"button",className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",title:"Manage templates",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 hidden group-hover:block",children:[e.jsx("div",{className:"px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700",children:"Delete template"}),y.map(n=>e.jsxs("button",{type:"button",onClick:()=>_(n.id),className:"w-full px-3 py-1.5 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n.name]},n.id))]})]})]})}),e.jsx("div",{className:"flex gap-1 mb-6 bg-gray-100 dark:bg-gray-800 rounded-xl p-1 overflow-x-auto min-h-[44px]",children:[{id:"details",label:"Details"},{id:"additional",label:"More"},{id:"subtasks",label:"Subtasks"},{id:"dependencies",label:"Deps"},{id:"activity",label:"Activity"}].map(n=>e.jsx("button",{type:"button",onClick:()=>Ce(n.id),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${ye===n.id?"bg-white dark:bg-gray-700 shadow-sm text-gray-800 dark:text-gray-100":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:n.label},n.id))}),ye==="details"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:x.title,onChange:n=>S({...x,title:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.title?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,placeholder:"What needs to be done?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:n=>S({...x,description:n.target.value}),onPaste:je,rows:2,className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.description?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Add more context... (paste images here!)"}),Ke&&ye==="details"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Ke})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project *"}),e.jsxs("select",{required:!0,value:x.project_id,onChange:n=>S({...x,project_id:n.target.value,assignee:"",customer:""}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.project_id?"":"border-l-4 border-l-red-400 dark:border-l-red-500"}`,children:[e.jsx("option",{value:"",children:"Select project"}),E.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsx("select",{value:x.status,onChange:n=>S({...x,status:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:it.map(n=>e.jsx("option",{value:n.id,children:n.title},n.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer/Client"}),de?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Ye,onChange:n=>Je(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Customer name"}),e.jsx("button",{type:"button",onClick:()=>{Me(!1),Je("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:x.customer,onChange:n=>{n.target.value==="__other__"?(Me(!0),S({...x,customer:""})):S({...x,customer:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.customer?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"No customer"}),(lt=be==null?void 0:be.customers)==null?void 0:lt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Effort Level"}),e.jsx("select",{value:x.energy_level,onChange:n=>S({...x,energy_level:n.target.value}),className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.energy_level?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:Object.entries(lr).map(([n,R])=>e.jsxs("option",{value:n,children:[R.icon," ",R.label]},n))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Start Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:x.start_date,onChange:n=>S({...x,start_date:n.target.value}),onBlur:n=>{const R=n.target.value.trim();if(!R){S({...x,start_date:""});return}const X=or(R);X.date&&S({...x,start_date:X.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${x.start_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Due Date",e.jsx("span",{className:"ml-2 text-xs text-gray-400 font-normal",children:"T, T+1, W+1, M+1"})]}),e.jsx("input",{type:"text",value:x.due_date,onChange:n=>S({...x,due_date:n.target.value}),onBlur:n=>{const R=n.target.value.trim();if(!R){S({...x,due_date:""});return}const X=or(R);X.date&&S({...x,due_date:X.date})},placeholder:"T, T+1, W+1, or date",className:`w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm ${x.due_date?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),e.jsx("input",{type:"text",value:x.start_time||"",onChange:n=>S({...x,start_time:n.target.value}),onBlur:n=>{const R=_s(n.target.value);if(R||!n.target.value){const X={start_time:R};if(R&&x.time_estimate){const[ve,u]=R.split(":").map(Number),f=ve*60+u+parseInt(x.time_estimate),w=Math.floor(f/60),I=f%60;X.end_time=`${String(w).padStart(2,"0")}:${String(I).padStart(2,"0")}`}S({...x,...X})}},placeholder:"e.g. 9am, 230pm, 14:30",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),e.jsx("input",{type:"text",value:x.end_time||"",onChange:n=>S({...x,end_time:n.target.value}),onBlur:n=>{const R=_s(n.target.value);if(R||!n.target.value){const X={end_time:R};if(x.start_time&&R){const[ve,u]=x.start_time.split(":").map(Number),[v,f]=R.split(":").map(Number),w=ve*60+u,A=v*60+f-w;A>0&&(X.time_estimate=String(A))}S({...x,...X})}},placeholder:"e.g. 10am, 430pm, 16:00",className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>S({...x,critical:!x.critical}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${x.critical?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 ring-2 ring-red-300 dark:ring-red-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸš© Critical"}),e.jsx("button",{type:"button",onClick:()=>S({...x,recurrence_type:x.recurrence_type?null:"weekly"}),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all ${x.recurrence_type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-2 ring-blue-300 dark:ring-blue-700":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"ðŸ” Recurring"})]}),x.recurrence_type&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Repeat"}),e.jsx("select",{value:x.recurrence_type||"",onChange:n=>S({...x,recurrence_type:n.target.value||null}),className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm",children:Ms.filter(n=>n.id).map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),x.start_date?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Occurrences"}),e.jsx("input",{type:"number",min:"1",max:"52",value:x.recurrence_count,onChange:n=>S({...x,recurrence_count:parseInt(n.target.value)||1,recurrence_end_date:""}),className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Or until date"}),e.jsx("input",{type:"text",value:x.recurrence_end_date,onChange:n=>S({...x,recurrence_end_date:n.target.value}),onBlur:n=>{const R=n.target.value.trim();if(!R)return;const X=or(R);X.date&&S({...x,recurrence_end_date:X.date,recurrence_count:0})},placeholder:"e.g. M+6",className:"w-full px-3 py-1.5 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"})]})]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["ðŸ“… ",x.recurrence_end_date?`Will create occurrences until ${x.recurrence_end_date}`:`Will create ${x.recurrence_count} future occurrence${x.recurrence_count!==1?"s":""}`]})]}):e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Set a Start Date above for recurrence to work"]})]})]}),ye==="subtasks"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),e.jsx("h3",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:"Checklist"})]}),e.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-300 mb-4",children:"Break down this task into smaller steps"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:p,onChange:n=>ne(n.target.value),onKeyDown:n=>{n.key==="Enter"&&p.trim()&&(n.preventDefault(),$e([...fe,{id:Date.now().toString(),title:p.trim(),completed:!1}]),ne(""))},placeholder:"Add a subtask...",className:"flex-1 px-4 py-2.5 border border-indigo-200 dark:border-indigo-700 rounded-xl bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),e.jsx("button",{type:"button",onClick:()=>{p.trim()&&($e([...fe,{id:Date.now().toString(),title:p.trim(),completed:!1}]),ne(""))},className:"px-4 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium",children:"Add"})]}),fe.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:[e.jsxs("span",{children:[fe.filter(n=>n.completed).length," of ",fe.length," completed"]}),e.jsxs("span",{children:[Math.round(fe.filter(n=>n.completed).length/fe.length*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-indigo-200 dark:bg-indigo-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${fe.filter(n=>n.completed).length/fe.length*100}%`}})})]}),fe.length===0?e.jsxs("div",{className:"text-center py-8 text-indigo-400 dark:text-indigo-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No subtasks yet. Add some to track progress!"})]}):e.jsx("div",{className:"space-y-2",children:fe.map((n,R)=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border-2 transition-all ${n.completed?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsx("button",{type:"button",onClick:()=>{$e(fe.map(X=>X.id===n.id?{...X,completed:!X.completed}:X))},className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${n.completed?"bg-green-500 border-green-500 text-white":"border-gray-300 dark:border-gray-600 hover:border-indigo-400"}`,children:n.completed&&e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`flex-1 ${n.completed?"text-gray-400 dark:text-gray-500 line-through":"text-gray-800 dark:text-gray-200"}`,children:n.title}),e.jsx("button",{type:"button",onClick:()=>$e(fe.filter(X=>X.id!==n.id)),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},n.id))})]})}),ye==="additional"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time Estimate"}),e.jsx("input",{type:"number",min:"0",step:"5",value:x.time_estimate,onChange:n=>{const R=n.target.value,X={time_estimate:R};if(x.start_time&&R){const[ve,u]=x.start_time.split(":").map(Number),f=ve*60+u+parseInt(R),w=Math.floor(f/60),I=f%60;X.end_time=`${String(w).padStart(2,"0")}:${String(I).padStart(2,"0")}`}S({...x,...X})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.time_estimate?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,placeholder:"Minutes (e.g., 30)"}),x.time_estimate&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Vt(parseInt(x.time_estimate))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assignee"}),G?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:J,onChange:n=>he(n.target.value),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Enter name"}),e.jsx("button",{type:"button",onClick:()=>{D(!1),he("")},className:"px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"âœ•"})]}):e.jsxs("select",{value:x.assignee,onChange:n=>{n.target.value==="__other__"?(D(!0),S({...x,assignee:""})):S({...x,assignee:n.target.value})},className:`w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ${x.assignee?"":"border-l-4 border-l-amber-300 dark:border-l-amber-500"}`,children:[e.jsx("option",{value:"",children:"Unassigned"}),(dt=be==null?void 0:be.members)==null?void 0:dt.map(n=>e.jsx("option",{value:n,children:n},n)),e.jsx("option",{value:"__other__",children:"Other (enter name)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),e.jsx("select",{value:x.category,onChange:n=>S({...x,category:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:gt.map(n=>e.jsx("option",{value:n.id,children:n.label},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source"}),e.jsx("select",{value:x.source,onChange:n=>S({...x,source:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:Rt.map(n=>e.jsxs("option",{value:n.id,children:[n.icon," ",n.label]},n.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Link"}),e.jsx("input",{type:"text",value:x.source_link,onChange:n=>S({...x,source_link:n.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"URL or reference to the source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:x.notes,onChange:n=>S({...x,notes:n.target.value}),onPaste:je,rows:4,className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Running notes, context, updates... (paste images here!)"}),Ke&&ye==="additional"&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:Ke})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Attachments"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 text-center hover:border-indigo-400 transition-colors",children:[e.jsx("input",{ref:ie,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:Ae,className:"hidden"}),e.jsx("input",{id:"camera-input",type:"file",accept:"image/*",capture:"environment",onChange:Ae,className:"hidden"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{var n;return(n=document.getElementById("camera-input"))==null?void 0:n.click()},disabled:U,className:"sm:hidden w-full flex items-center justify-center gap-2 px-3 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"ðŸ“· Take Photo"}),e.jsx("button",{type:"button",onClick:()=>{var n;return(n=ie.current)==null?void 0:n.click()},disabled:U,className:"w-full sm:w-auto px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium disabled:opacity-50 hover:bg-gray-200 dark:hover:bg-gray-600",children:U?"Uploading...":"ðŸ“Ž Choose Files"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Max 10MB â€¢ Paste images with âŒ˜V"})]}),b&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-sm text-red-700 dark:text-red-400",children:b}),(ge.length>0||te.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[ge.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 cursor-pointer flex-1",onClick:()=>Se(n),children:[e.jsx("span",{className:"text-lg",children:"ðŸ“„"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:n.file_name}),e.jsx("p",{className:"text-xs text-gray-400",children:ot(n.file_size)})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Se(n),className:"p-1.5 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 rounded-lg text-indigo-500",title:"View",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("a",{href:n.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg",title:"Download",children:"â¬‡ï¸"}),e.jsx("button",{type:"button",onClick:()=>{M?M({title:"Remove Attachment",message:`Remove "${n.file_name||n.name}"? This cannot be undone.`,confirmLabel:"Remove",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>Oe(n.id)}):Oe(n.id)},className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500",title:"Delete",children:"ðŸ—‘ï¸"})]})]},n.id)),te.map((n,R)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-lg",children:"âž•"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:n.name}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["New â€¢ ",ot(n.size)]})]})]}),e.jsx("button",{type:"button",onClick:()=>Fe(R),className:"p-1.5 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg text-red-500 flex-shrink-0",children:"âœ•"})]},R))]})]})]}),ye==="dependencies"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”—"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-orange-800 dark:text-orange-300",children:"Task Dependencies"}),e.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"This task will be blocked until selected tasks are completed"})]})]}),x.project_id?xt.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No other tasks available to link as dependencies"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:xt.map(n=>{var X;const R=H.includes(n.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-all ${R?"border-orange-300 dark:border-orange-600 bg-orange-100 dark:bg-orange-900/40":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-orange-200 dark:hover:border-orange-700"}`,children:[e.jsx("input",{type:"checkbox",checked:R,onChange:ve=>{ve.target.checked?oe([...H,n.id]):oe(H.filter(u=>u!==n.id))},className:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-orange-600 focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:n.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(X=it.find(ve=>ve.id===n.status))==null?void 0:X.title,n.assignee&&` â€¢ ${n.assignee}`]})]}),n.critical&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-400 rounded-full",children:"Critical"})]},n.id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Select a project first to add dependencies"}),H.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-orange-200 dark:border-orange-800",children:e.jsxs("p",{className:"text-sm text-orange-700 dark:text-orange-400 font-medium",children:["âœ“ ",H.length," dependenc",H.length===1?"y":"ies"," selected - task will be blocked until complete"]})})]})}),ye==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Add a Comment"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Notes and updates about this task"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("textarea",{value:_e,onChange:n=>Pe(n.target.value),placeholder:"Add a comment or note...",rows:2,className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 text-sm"}),e.jsx("button",{type:"button",onClick:()=>{if(_e.trim()){const n={id:Date.now().toString(),text:_e.trim(),created_at:new Date().toISOString(),type:"comment"};me([n,...T]),Pe("")}},disabled:!_e.trim(),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors text-sm font-medium sm:self-end",children:"Add Comment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Activity & Comments",T.length>0&&e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["(",T.length,")"]})]}),T.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ“"}),e.jsx("p",{className:"text-sm",children:"No comments yet"}),e.jsx("p",{className:"text-xs",children:"Add notes to track progress and context"})]}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:T.map(n=>e.jsx("div",{className:`p-3 rounded-lg border ${n.type==="comment"?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-gray-50 dark:bg-gray-800/50 border-gray-100 dark:border-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[n.type==="comment"?e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:n.text}):e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:n.icon||"â€¢"})," ",n.text]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(n.created_at).toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),n.type==="comment"&&e.jsx("button",{type:"button",onClick:()=>me(T.filter(R=>R.id!==n.id)),className:"p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors",title:"Delete comment",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},n.id))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 pt-6 mt-6 border-t border-gray-100 dark:border-gray-700",children:[(l==null?void 0:l.id)&&e.jsx("button",{type:"button",onClick:()=>ee(!0),disabled:c,className:"px-3 sm:px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50 text-sm sm:text-base",children:"Delete"}),e.jsx("div",{className:"hidden sm:block",children:P?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:ue,onChange:n=>ce(n.target.value),placeholder:"Template name...",className:"px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-800 focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),e.jsx("button",{type:"button",onClick:()=>{ue.trim()&&C&&(C({...x,name:ue.trim(),subtasks:fe}),ce(""),re(!1))},disabled:!ue.trim(),className:"px-3 py-2 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium hover:bg-indigo-200 dark:hover:bg-indigo-900/60 disabled:opacity-50",children:"Save"}),e.jsx("button",{type:"button",onClick:()=>{re(!1),ce("")},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsx("button",{type:"button",onClick:()=>re(!0),className:"px-4 py-2.5 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors text-sm",title:"Save current task settings as a reusable template",children:"ðŸ’¾ Save as Template"})}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",onClick:d,className:"px-3 sm:px-4 py-2.5 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors text-sm sm:text-base",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 sm:px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 text-sm sm:text-base",children:c?"Saving...":l!=null&&l.id?"Save":"Create"})]})]}),e.jsx(Sa,{isOpen:!!ke,onClose:()=>Se(null),attachment:ke,attachments:ge,onNavigate:Se}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ—‘ï¸"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Task"})]}),e.jsxs("p",{className:"mb-6 text-gray-600 dark:text-gray-300",children:['Delete "',l==null?void 0:l.title,'"? This cannot be undone.']}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 rounded-xl font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{m(l.id),ee(!1),d()},className:"px-4 py-2 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-colors",children:"Delete"})]})]})})]})},Ra=({isOpen:s,onClose:d,project:l,onSave:E,onDelete:g,onArchive:$,loading:m,onShowConfirm:c})=>{const[y,C]=o.useState({name:"",members:[],customers:[]}),[_,M]=o.useState(""),[ie,P]=o.useState("");o.useEffect(()=>{C(l?{name:l.name,members:[...l.members||[]],customers:[...l.customers||[]]}:{name:"",members:[],customers:[]}),M(""),P("")},[l,s]),o.useEffect(()=>{const x=S=>{var H;(S.ctrlKey||S.metaKey)&&S.key==="s"&&s&&(S.preventDefault(),(H=document.querySelector("form"))==null||H.requestSubmit())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[s]);const re=()=>{_.trim()&&!y.members.includes(_.trim())&&(C({...y,members:[...y.members,_.trim()]}),M(""))},j=x=>{C({...y,members:y.members.filter(S=>S!==x)})},ee=()=>{ie.trim()&&!y.customers.includes(ie.trim())&&(C({...y,customers:[...y.customers,ie.trim()]}),P(""))},ue=x=>{C({...y,customers:y.customers.filter(S=>S!==x)})},ce=async x=>{x.preventDefault(),await E({...y,id:l==null?void 0:l.id}),d()};return e.jsx(Kr,{isOpen:s,onClose:d,title:l?"Edit Project":"New Project",children:e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",required:!0,value:y.name,onChange:x=>C({...y,name:x.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Team Members"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:_,onChange:x=>M(x.target.value),onKeyDown:x=>x.key==="Enter"&&(x.preventDefault(),re()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add team member"}),e.jsx("button",{type:"button",onClick:re,className:"px-4 py-2.5 bg-teal-500 text-white rounded-xl hover:bg-teal-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.members.map(x=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-700 rounded-full text-sm",children:[x,e.jsx("button",{type:"button",onClick:()=>j(x),className:"hover:text-indigo-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customers/Clients"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:ie,onChange:x=>P(x.target.value),onKeyDown:x=>x.key==="Enter"&&(x.preventDefault(),ee()),className:"flex-1 px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Add customer/client"}),e.jsx("button",{type:"button",onClick:ee,className:"px-4 py-2.5 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.customers.map(x=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-full text-sm",children:[x,e.jsx("button",{type:"button",onClick:()=>ue(x),className:"hover:text-purple-900",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},x))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[l&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>{c({title:"Delete Project",message:`Delete "${l.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{g(l.id),d()}})},disabled:m,className:"px-4 py-2.5 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors disabled:opacity-50",children:"Delete"}),e.jsx("button",{type:"button",onClick:()=>{$(l.id),d()},disabled:m,className:"px-4 py-2.5 text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-xl transition-colors disabled:opacity-50",children:l.archived?"Unarchive":"Archive"})]}),e.jsx("button",{type:"button",onClick:d,className:"ml-auto px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2.5 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors font-medium disabled:opacity-50",children:m?"Saving...":l?e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Changes"]}):e.jsxs(e.Fragment,{children:[e.jsx("u",{children:"S"}),"ave Project"]})})]})]})})};function en(){var fs,js,ks,vs,ws;const{user:s,signOut:d}=Ts(),E=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"âŒ˜âŒƒ":"Ctrl+Alt+",[g,$]=o.useState([]),[m,c]=o.useState([]),[y,C]=o.useState(!0),[_,M]=o.useState(!1),[ie,P]=o.useState(null),[re,j]=o.useState(null),[ee,ue]=o.useState(null),ce=(t,r="success")=>{ue({message:t,type:r}),setTimeout(()=>ue(null),3e3)},x=async()=>{if(Pe==="DELETE"){Se(!0);try{await z.from("tasks").delete().eq("user_id",s.id),await z.from("projects").delete().eq("user_id",s.id),await z.from("feedback").delete().eq("user_id",s.id),await z.from("task_templates").delete().eq("user_id",s.id),await d()}catch(t){console.error("Error deleting account:",t),P("Failed to delete account"),Se(!1)}}},S=async()=>{Oe(!0);try{const{error:t}=await z.auth.updateUser({data:{display_name:Re}});if(t)throw t;Ae(!1),ce("Display name saved")}catch(t){console.error("Error saving display name:",t),P("Failed to save display name")}Oe(!1)},H=async()=>{xt(!0);try{const{error:t}=await z.auth.resetPasswordForEmail(s.email,{redirectTo:window.location.origin});if(t)throw t;lt(!0)}catch(t){console.error("Error sending password reset:",t),P("Failed to send password reset email")}xt(!1)},oe=(t,r)=>{localStorage.setItem(t,r),t==="trackli-default-view"&&n(r),t==="trackli-week-start"&&X(r),t==="trackli-show-confetti"&&u(r==="true")},ge=async()=>{f(!0);try{const t=new Date;t.setDate(t.getDate()-parseInt(w));const{data:r,error:a}=await z.from("tasks").select("id").eq("user_id",s.id).eq("status","done").lt("updated_at",t.toISOString());if(a)throw a;if(r.length>0){const{error:i}=await z.from("tasks").delete().in("id",r.map(h=>h.id));if(i)throw i;c(h=>h.filter(N=>!r.find(L=>L.id===N.id))),ce(`Cleared ${r.length} completed task${r.length===1?"":"s"}`)}else ce("No completed tasks older than "+w+" days")}catch(t){console.error("Error clearing tasks:",t),P("Failed to clear completed tasks")}f(!1)},[Q,te]=o.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[xe,ye]=o.useState("monthly"),[Ce,b]=o.useState(!1),[k,U]=o.useState(()=>typeof window<"u"?localStorage.getItem("trackli-dark-mode")==="true":!1),[q,G]=o.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[D,J]=o.useState(1),[he,de]=o.useState(!1),[Me,Ye]=o.useState(!1),[Je,Ke]=o.useState(!1),[at,fe]=o.useState(!1),[$e,p]=o.useState(!1),[ne,T]=o.useState(!1),[me,_e]=o.useState(!1),[Pe,Ie]=o.useState(""),[ke,Se]=o.useState(!1),[Re,je]=o.useState(""),[be,Ae]=o.useState(!1),[Fe,Oe]=o.useState(!1),[qe,xt]=o.useState(!1),[ot,lt]=o.useState(!1),[dt,n]=o.useState(()=>localStorage.getItem("trackli-default-view")||"board"),[R,X]=o.useState(()=>localStorage.getItem("trackli-week-start")||"0"),[ve,u]=o.useState(()=>localStorage.getItem("trackli-show-confetti")!=="false"),[v,f]=o.useState(!1),[w,I]=o.useState("30"),[A,V]=o.useState("board"),[se,le]=o.useState(()=>!localStorage.getItem("trackli_onboarding_complete")),[Z,O]=o.useState(0),[we,rt]=o.useState(null),[Le,De]=o.useState(0),[W,Te]=o.useState(()=>{const t=localStorage.getItem("trackli_view_tours_completed");return t?JSON.parse(t):{}}),[ze,ut]=o.useState("all"),[Ht,Nr]=o.useState(!1),[dr,Ze]=o.useState(!1),[Cr,Dt]=o.useState(!1),[$t,et]=o.useState(null),[st,Ue]=o.useState(null),[nt,Pt]=o.useState(null),[ht,ct]=o.useState(null),[pt,Zt]=o.useState(null),[yt,cr]=o.useState(!1),[bt,gr]=o.useState(!1),[_r,Gr]=o.useState(!1),[Sr,Jr]=o.useState(!1),[Dr,Qr]=o.useState(!1),[ft,xr]=o.useState(!1),[jt,mr]=o.useState(!1),[Ut,ur]=o.useState(""),[Be,Ot]=o.useState({}),[Es,Xr]=o.useState(""),[$s,Va]=o.useState(!1),[Tr,Ha]=o.useState("all"),[Zr,Ua]=o.useState(""),[zt,es]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_saved_views")||"[]")}catch{return[]}}),[As,hr]=o.useState(!1),[qt,ts]=o.useState(""),[Mr,rs]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("trackli_task_templates")||"[]")}catch{return[]}}),[qa,Ya]=o.useState(!1),[Fs,ss]=o.useState(!1),[Is,Yt]=o.useState(!1),[Ve,kt]=o.useState({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),[vt,wt]=o.useState([]),[as,ns]=o.useState(!1),[Bs,Tt]=o.useState(!1),[Mt,Lr]=o.useState(null),[er,pr]=o.useState(!1),[Ka,yr]=o.useState(""),[Ws,Ps]=o.useState(!1),br=o.useRef(null);o.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;Ps(!!t)},[]);const Os=(t,r=!1)=>{const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a){alert("Voice input is not supported in this browser. Try Chrome or Safari.");return}const i=new a;i.continuous=r,i.interimResults=!0,i.lang="en-GB",i.onstart=()=>{pr(!0)},i.onresult=h=>{let N="";for(let L=0;L<h.results.length;L++)N+=h.results[L][0].transcript;t(N)},i.onerror=h=>{console.error("Speech recognition error:",h.error),pr(!1),h.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access in your browser settings.")},i.onend=()=>{pr(!1)},br.current=i,i.start()},Er=()=>{br.current&&(br.current.stop(),br.current=null),pr(!1)},zs=(t,r=!1)=>{er?Er():Os(t,r)},[fr,Rs]=o.useState(null),[tr,$r]=o.useState(null),Ar=(t,r=null,a=null)=>{const i=t.includes("Failed to fetch")||t.includes("NetworkError")?"Network error - please check your connection":t.includes("JWT")||t.includes("auth")?"Session expired - please refresh the page":t.includes("duplicate")||t.includes("unique")?"This item already exists":t.includes("permission")||t.includes("denied")?"You don't have permission to do this":t;$r({message:i,retryAction:r,details:a})},[He,Nt]=o.useState(null),[Kt,At]=o.useState(!1),[We,mt]=o.useState(new Set),[Ga,Ja]=o.useState(!1),[Vs,Gt]=o.useState(!1),[Jt,Qt]=o.useState(""),[Fr,Ir]=o.useState(""),[Hs,Br]=o.useState(!1);o.useEffect(()=>{localStorage.setItem("trackli-dark-mode",k),k?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[k]),o.useEffect(()=>{const t=()=>{G(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),o.useEffect(()=>{const t=r=>{var h,N,L;if(r.target.tagName==="INPUT"||r.target.tagName==="TEXTAREA"||r.target.tagName==="SELECT")return;const i=navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey&&r.ctrlKey:r.ctrlKey&&r.altKey;if(i&&(r.key==="k"||r.key==="s")){r.preventDefault(),Ye(!0);return}if(r.key==="/"){r.preventDefault(),Ye(!0);return}if(r.key==="q"){r.preventDefault(),g.length>0&&(Ir(((h=g[0])==null?void 0:h.id)||""),Gt(!0));return}if(i&&r.key==="t"){r.preventDefault(),g.length>0&&(et(null),Ze(!0));return}if(i&&r.key==="p"){r.preventDefault(),Ue(null),Dt(!0);return}if(i&&r.key==="n"){r.preventDefault(),g.length>0&&(kt({...Ve,projectId:((N=g[0])==null?void 0:N.id)||""}),wt([]),Tt(!1),yr(""),Yt(!0));return}if(i&&r.key==="v"){r.preventDefault(),g.length>0&&(kt({...Ve,projectId:((L=g[0])==null?void 0:L.id)||"",notes:""}),wt([]),Tt(!1),yr(" "),Yt(!0));return}if(i&&r.key==="d"){r.preventDefault(),te("myday");return}if(i&&r.key==="b"){r.preventDefault(),te("board");return}if(i&&r.key==="l"){r.preventDefault(),te("calendar");return}if(i&&r.key==="a"){r.preventDefault(),te("tasks");return}if(r.key==="?"||r.shiftKey&&r.key==="/"){r.preventDefault(),V("shortcuts"),Ke(!0);return}if(r.key==="Escape"&&Kt){At(!1),mt(new Set);return}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[g,Ve,m]),o.useEffect(()=>{if(q||se)return;if(["myday","calendar","tasks","projects","progress"].includes(Q)&&!W[Q]){const r=setTimeout(()=>{rt(Q),De(0)},500);return()=>clearTimeout(r)}},[Q,W,q,se]);const is=t=>{const r={...W,[t]:!0};Te(r),localStorage.setItem("trackli_view_tours_completed",JSON.stringify(r)),rt(null),De(0)},Us=async()=>{try{const t=new Date().toISOString().split("T")[0],r=new Date(Date.now()+864e5).toISOString().split("T")[0],a=new Date(Date.now()+7*864e5).toISOString().split("T")[0],{data:i,error:h}=await z.from("projects").insert({name:"ðŸš€ Getting Started with Trackli",user_id:s.id}).select().single();if(h)throw console.error("Project creation error:",h),h;const N=[{title:"ðŸ‘‹ Welcome! Click me to see task details",description:`This is the task editor. Here you can:

â€¢ Set due dates and start dates
â€¢ Add time estimates
â€¢ Assign to team members
â€¢ Add subtasks
â€¢ Attach files
â€¢ Set up recurring schedules

Try editing this task, then mark it complete!`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:5},{title:"â˜€ï¸ Check out My Day view",description:`My Day is your daily focus list. Tasks appear here if:

â€¢ Their start date is today or earlier
â€¢ You manually add them via the â˜€ï¸ icon

Try switching to My Day view in the menu!`,status:"todo",project_id:i.id,start_date:t,energy_level:"medium",time_estimate:10},{title:"ðŸ“… Explore the Calendar view",description:`The Calendar view lets you:

â€¢ See tasks on their due dates
â€¢ Drag tasks to reschedule them
â€¢ Switch between daily, weekly, and monthly views

This task is due tomorrow!`,status:"todo",project_id:i.id,due_date:r,energy_level:"medium",time_estimate:15},{title:"ðŸ“ Try the Notes feature for meetings",description:`Click the Notes button in the header to:

â€¢ Paste meeting notes
â€¢ Use voice-to-text (speak your notes!)
â€¢ AI extracts action items automatically

Perfect for turning meetings into tasks!`,status:"todo",project_id:i.id,energy_level:"high",time_estimate:20},{title:"âŒ¨ï¸ Learn keyboard shortcuts",description:`Speed up your workflow with shortcuts:

â€¢ âŒ˜/Ctrl + âŒƒ + T â€” New task
â€¢ âŒ˜/Ctrl + S â€” Save
â€¢ Escape â€” Close modal
â€¢ ? â€” Help menu

Click the ? icon anytime for more!`,status:"backlog",project_id:i.id,due_date:a,energy_level:"low",time_estimate:10},{title:"âœ… Complete this task to see the celebration!",description:`When you complete all your My Day tasks, you get a confetti celebration! ðŸŽ‰

Try completing this task by clicking the circle on the left.`,status:"todo",project_id:i.id,my_day_date:t,energy_level:"low",time_estimate:1}],{data:L,error:F}=await z.from("tasks").insert(N).select();if(F)throw F;const B=L.find(K=>K.title.includes("Welcome!"));B&&await z.from("subtasks").insert([{task_id:B.id,title:"Read this task description",completed:!1,position:0},{task_id:B.id,title:"Check out the different views (My Day, Calendar, etc.)",completed:!1,position:1},{task_id:B.id,title:"Complete a task to see it move to Done",completed:!1,position:2}]),ss(!0),await Lt()}catch(t){console.error("Error creating welcome project:",t)}};o.useEffect(()=>{Lt()},[]);const Lt=async()=>{var t,r,a,i,h;C(!0),P(null);try{const[N,L,F,B,K,Y]=await Promise.all([z.from("projects").select("*").order("created_at",{ascending:!1}),z.from("tasks").select("*").order("created_at",{ascending:!1}),z.from("project_members").select("project_id, name"),z.from("project_customers").select("project_id, name"),z.from("attachments").select("*"),z.from("task_dependencies").select("task_id, depends_on_id")]);if(N.error)throw N.error;if(L.error)throw L.error;const ae={},Ne={};(t=F.data)==null||t.forEach(pe=>{ae[pe.project_id]||(ae[pe.project_id]=[]),ae[pe.project_id].push(pe.name)}),(r=B.data)==null||r.forEach(pe=>{Ne[pe.project_id]||(Ne[pe.project_id]=[]),Ne[pe.project_id].push(pe.name)});const Ge=N.data.map(pe=>({...pe,members:ae[pe.id]||[],customers:Ne[pe.id]||[]})),Ee={},Qe={};(a=K.data)==null||a.forEach(pe=>{Ee[pe.task_id]||(Ee[pe.task_id]=[]),Ee[pe.task_id].push({...pe,file_url:z.storage.from("attachments").getPublicUrl(pe.file_path).data.publicUrl})}),(i=Y.data)==null||i.forEach(pe=>{Qe[pe.task_id]||(Qe[pe.task_id]=[]),Qe[pe.task_id].push(pe)});const Xe=L.data.map(pe=>({...pe,attachments:Ee[pe.id]||[],dependencies:Qe[pe.id]||[]}));$(Ge),c(Xe);const{data:{user:Xt}}=await z.auth.getUser();if(!((h=Xt==null?void 0:Xt.user_metadata)==null?void 0:h.has_been_welcomed)&&Ge.length===0&&Xe.length===0){await Us(),await z.auth.updateUser({data:{has_been_welcomed:!0}});return}const tt=new Date;tt.setHours(0,0,0,0);const nr=Xe.filter(pe=>{if(pe.status!=="backlog"||!pe.start_date)return!1;const _t=new Date(pe.start_date);return _t.setHours(0,0,0,0),_t<=tt});if(nr.length>0){const pe=nr.map(_t=>_t.id);await z.from("tasks").update({status:"todo"}).in("id",pe),c(_t=>_t.map(Rr=>pe.includes(Rr.id)?{...Rr,status:"todo"}:Rr))}}catch(N){console.error("Error fetching data:",N),P(N.message)}finally{C(!1)}},qs=t=>{const r=t.split(`
`),a=Ys(t);return a.length>0?a:Gs(r)},Ys=t=>{const r=t.split(`
`),a=[];let i=-1,h={followUp:-1,owner:-1,dueDate:-1,status:-1},N="|";for(let F=0;F<r.length;F++){const B=r[F].toLowerCase();if(B.includes("|")&&(B.includes("follow")||B.includes("action")||B.includes("task"))){const K=r[F].split("|").map(Y=>Y.trim().toLowerCase());for(let Y=0;Y<K.length;Y++){const ae=K[Y];ae.includes("follow")||ae.includes("action")||ae.includes("task")||ae.includes("item")?h.followUp=Y:ae.includes("owner")||ae.includes("assignee")||ae.includes("who")||ae.includes("responsible")?h.owner=Y:ae.includes("due")||ae.includes("date")||ae.includes("when")||ae.includes("deadline")?h.dueDate=Y:(ae.includes("status")||ae.includes("state")||ae.includes("progress"))&&(h.status=Y)}if(h.followUp!==-1){i=F,N="|";break}}if(B.includes("	")&&(B.includes("follow")||B.includes("action")||B.includes("task"))){const K=r[F].split("	").map(Y=>Y.trim().toLowerCase());for(let Y=0;Y<K.length;Y++){const ae=K[Y];ae.includes("follow")||ae.includes("action")||ae.includes("task")||ae.includes("item")?h.followUp=Y:ae.includes("owner")||ae.includes("assignee")||ae.includes("who")?h.owner=Y:ae.includes("due")||ae.includes("date")||ae.includes("when")?h.dueDate=Y:(ae.includes("status")||ae.includes("state"))&&(h.status=Y)}if(h.followUp!==-1){i=F,N="	";break}}}if(i===-1||h.followUp===-1)return[];let L=i+1;L<r.length&&/^[\s|:-]+$/.test(r[L].replace(/\t/g,""))&&L++;for(let F=L;F<r.length;F++){const B=r[F].trim();if(!B||!B.includes(N)&&N==="|"||N==="	"&&!B.includes("	")&&B.split(/\s{2,}/).length<2){if(a.length>0)break;continue}const K=N==="|"?B.split("|").map(Xe=>Xe.trim()):B.split("	").map(Xe=>Xe.trim()),Y=K[h.followUp]||"",ae=h.owner!==-1&&K[h.owner]||"",Ne=h.dueDate!==-1&&K[h.dueDate]||"",Ge=h.status!==-1?(K[h.status]||"").toLowerCase():"";if(!Y||Y.length<3||Ge.includes("done")||Ge.includes("complete")||Ge.includes("closed"))continue;let Ee=Ve.date;if(Ne){const Xe=Ks(Ne);Xe&&(Ee=Xe)}const Qe=/urgent|asap|critical|important|high/i.test(Y)||/urgent|asap|critical|important|high/i.test(Ge);a.push({id:`extracted-table-${F}`,title:Y.charAt(0).toUpperCase()+Y.slice(1),assignee:ae,dueDate:Ee,selected:!0,critical:Qe})}return a},Ks=t=>{if(!t)return null;const r=t.trim().toLowerCase(),a=new Date,i=Yr();if(r==="today"||r==="eod")return a.toISOString().split("T")[0];if(r==="tomorrow")return a.setDate(a.getDate()+1),a.toISOString().split("T")[0];if(r==="asap")return a.toISOString().split("T")[0];const N=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(r);if(N!==-1){let B=(N-a.getDay()+7)%7;return B===0&&(B=7),a.setDate(a.getDate()+B),a.toISOString().split("T")[0]}let L=t.match(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/);if(L){let B,K;i?(K=parseInt(L[1])-1,B=parseInt(L[2])):(B=parseInt(L[1]),K=parseInt(L[2])-1);const Y=L[3].length===2?2e3+parseInt(L[3]):parseInt(L[3]),ae=new Date(Y,K,B);if(!isNaN(ae.getTime()))return ae.toISOString().split("T")[0]}if(L=t.match(/(\d{1,2})[\/\-](\d{1,2})(?!\d)/),L){let B,K;i?(K=parseInt(L[1])-1,B=parseInt(L[2])):(B=parseInt(L[1]),K=parseInt(L[2])-1);const Y=new Date(a.getFullYear(),K,B);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}const F=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];if(L=t.match(/(\d{1,2})\s*(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i),L){const B=parseInt(L[1]),K=F.indexOf(L[2].toLowerCase()),Y=new Date(a.getFullYear(),K,B);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}if(L=t.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s*(\d{1,2})/i),L){const B=parseInt(L[2]),K=F.indexOf(L[1].toLowerCase()),Y=new Date(a.getFullYear(),K,B);if(!isNaN(Y.getTime()))return Y.toISOString().split("T")[0]}return null},Gs=t=>{var h,N,L,F,B;const r=[],a=[/^[-*â€¢]\s*\[?\s*\]?\s*(.+)/i,/^(?:action|todo|task|to-do|to do)[:\s]+(.+)/i,/^(\d+[.)]\s*.+)/i,/(.+?)\s+(?:will|to|should|must|needs? to|has to)\s+(.+)/i,/(?:@|assigned to:?)\s*(\w+)\s*[-:]\s*(.+)/i,/^(?:ai|action item)[:\s]+(.+)/i,/^follow[ -]?up[:\s]+(.+)/i],i=/^(schedule|send|create|update|review|prepare|draft|complete|finish|follow|contact|call|email|write|set up|organize|coordinate|check|confirm|arrange|book|submit|share|distribute|circulate|research|investigate|look into|find|get|obtain|collect|gather|compile|analyze|assess|evaluate|implement|execute|deliver|present|discuss|meet|sync|align|escalate|resolve|fix|address)/i;for(let K=0;K<t.length;K++){const Y=t[K].trim();if(!Y)continue;let ae=!1,Ne="",Ge="";for(const Ee of a){const Qe=Y.match(Ee);if(Qe){Ee.toString().includes("will|to|should")?(Ge=((h=Qe[1])==null?void 0:h.trim())||"",Ne=`${Ge} ${((N=Qe[2])==null?void 0:N.trim())||""}`.trim()):Ee.toString().includes("@|assigned")?(Ge=((L=Qe[1])==null?void 0:L.trim())||"",Ne=((F=Qe[2])==null?void 0:F.trim())||""):Ne=((B=Qe[1])==null?void 0:B.trim())||"",ae=!0;break}}if(!ae&&i.test(Y)&&(Ne=Y,ae=!0),!ae&&Y.includes(":")&&!Y.startsWith("http")){const Ee=Y.split(":");if(Ee.length>=2&&Ee[0].length<30){const Qe=Ee[0].trim(),Xe=Ee.slice(1).join(":").trim();Xe.length>5&&i.test(Xe)&&(Ge=Qe,Ne=Xe,ae=!0)}}if(ae&&Ne.length>3){Ne=Ne.replace(/^[-*â€¢]\s*\[?\s*\]?\s*/,"").replace(/^\d+[.)]\s*/,"").replace(/^(?:action|todo|task|ai|action item|follow[ -]?up)[:\s]*/i,"").trim();let Ee=Ve.date;const Qe=[/by\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/by\s+(\d{1,2}\/\d{1,2})/i,/due\s+(today|tomorrow|monday|tuesday|wednesday|thursday|friday|saturday|sunday)/i,/(eod|end of day|eow|end of week|asap)/i];for(const Xe of Qe){const Xt=Ne.match(Xe);if(Xt){const Ct=Xt[1].toLowerCase(),tt=new Date;if(Ct==="today"||Ct==="eod"||Ct==="end of day")Ee=tt.toISOString().split("T")[0];else if(Ct==="tomorrow")tt.setDate(tt.getDate()+1),Ee=tt.toISOString().split("T")[0];else if(Ct==="asap")Ee=tt.toISOString().split("T")[0];else if(Ct==="eow"||Ct==="end of week"){const nr=(5-tt.getDay()+7)%7||7;tt.setDate(tt.getDate()+nr),Ee=tt.toISOString().split("T")[0]}else if(["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(Ct)){let _t=(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(Ct)-tt.getDay()+7)%7;_t===0&&(_t=7),tt.setDate(tt.getDate()+_t),Ee=tt.toISOString().split("T")[0]}Ne=Ne.replace(Xe,"").trim()}}Ne.length>3&&r.push({id:`extracted-${K}`,title:Ne.charAt(0).toUpperCase()+Ne.slice(1),assignee:Ge,dueDate:Ee,selected:!0,critical:/urgent|asap|critical|important/i.test(Ne)})}}return r},Js=async()=>{if(!(!Ve.notes.trim()&&!Mt)){ns(!0);try{if(Mt){const t=await fetch("/api/extract-from-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:Mt.base64,mediaType:Mt.mediaType})});if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to extract tasks from image")}const a=(await t.json()).tasks.map((i,h)=>({id:`img-${Date.now()}-${h}`,title:i.title,assignee:i.assignee||"",dueDate:i.dueDate||Ve.date,critical:i.isCritical||!1,selected:!0}));wt(a),Tt(!0)}else setTimeout(()=>{const t=qs(Ve.notes);wt(t),Tt(!0)},300)}catch(t){console.error("Extraction error:",t),P(t.message)}finally{ns(!1)}}},Qs=t=>{var h;const r=(h=t.target.files)==null?void 0:h[0];if(!r){console.log("No file selected");return}console.log("File selected:",r.name,r.type,r.size);const a=new Image,i=new FileReader;i.onload=N=>{a.onload=()=>{let{width:B,height:K}=a;if(B>2e3||K>2e3){const Ee=Math.min(2e3/B,2e3/K);B=Math.round(B*Ee),K=Math.round(K*Ee)}const Y=document.createElement("canvas");Y.width=B,Y.height=K,Y.getContext("2d").drawImage(a,0,0,B,K);const Ne=Y.toDataURL("image/jpeg",.8),Ge=Ne.split(",")[1];console.log("Compressed image size:",Math.round(Ge.length*.75/1024),"KB"),Lr({base64:Ge,mediaType:"image/jpeg",preview:Ne,name:r.name||"photo.jpg"}),P(null)},a.onerror=()=>{console.error("Failed to load image"),P("Failed to load image")},a.src=N.target.result},i.onerror=()=>{console.error("FileReader error:",i.error),P("Failed to read image file")},i.readAsDataURL(r)},Xs=async()=>{var r;const t=vt.filter(a=>a.selected);if(t.length!==0){M(!0),P(null);try{const a=Ve.projectId||((r=g[0])==null?void 0:r.id);if(!a)throw new Error("Please select a project");const i=g.find(N=>N.id===a),h=(i==null?void 0:i.members)||[];for(const N of t){let L=null;N.assignee&&(L=h.find(K=>K.toLowerCase().includes(N.assignee.toLowerCase())||N.assignee.toLowerCase().includes(K.toLowerCase().split(" ")[0])));const F={title:N.title,description:Ve.title?`From meeting: ${Ve.title}`:"",project_id:a,status:"todo",critical:N.critical,start_date:null,due_date:N.dueDate||null,assignee:L||N.assignee||null,time_estimate:null,energy_level:"medium",category:"meeting_followup",source:"meeting",source_link:null,customer:null,notes:null},{error:B}=await z.from("tasks").insert(F);if(B)throw B}await Lt(),Yt(!1),kt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:""}),wt([]),Tt(!1),yr(""),Er()}catch(a){console.error("Error creating tasks:",a),P(a.message)}finally{M(!1)}}},rr=(t,r,a)=>{wt(i=>i.map(h=>h.id===t?{...h,[r]:a}:h))},Zs=t=>{wt(r=>r.filter(a=>a.id!==t))},ea=async t=>{M(!0),P(null);try{if(t.id){const{error:a}=await z.from("projects").update({name:t.name}).eq("id",t.id);if(a)throw a;await z.from("project_members").delete().eq("project_id",t.id),await z.from("project_customers").delete().eq("project_id",t.id),t.members.length>0&&await z.from("project_members").insert(t.members.map(i=>({project_id:t.id,name:i}))),t.customers.length>0&&await z.from("project_customers").insert(t.customers.map(i=>({project_id:t.id,name:i})))}else{const{data:a,error:i}=await z.from("projects").insert({name:t.name,user_id:s.id}).select().single();if(i)throw i;t.members.length>0&&await z.from("project_members").insert(t.members.map(h=>({project_id:a.id,name:h}))),t.customers.length>0&&await z.from("project_customers").insert(t.customers.map(h=>({project_id:a.id,name:h})))}await Lt();const r=!t.id;ce(r?"âœ“ Project created":"âœ“ Project saved")}catch(r){console.error("Error saving project:",r),P(r.message)}finally{M(!1)}},os=async t=>{M(!0);try{const{error:r}=await z.from("projects").delete().eq("id",t);if(r)throw r;ze===t&&ut("all"),await Lt()}catch(r){console.error("Error deleting project:",r),P(r.message)}finally{M(!1)}},Wr=async t=>{const r=g.find(i=>i.id===t),a=r!=null&&r.archived?"unarchive":"archive";M(!0);try{const{error:i}=await z.from("projects").update({archived:!(r!=null&&r.archived)}).eq("id",t);if(i)throw i;$(g.map(h=>h.id===t?{...h,archived:!h.archived}:h)),j({taskId:null,previousStatus:null,taskTitle:`Project ${a}d`}),setTimeout(()=>j(null),3e3)}catch(i){console.error(`Error ${a}ing project:`,i),Ar(i.message||`Failed to ${a} project`,null,`Project ${a} failed`)}finally{M(!1)}},ta=async t=>{if(We.size!==0){M(!0);try{const r=Array.from(We),{error:a}=await z.from("tasks").update({status:t}).in("id",r);if(a)throw a;c(m.map(i=>We.has(i.id)?{...i,status:t}:i)),j({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks moved to ${t.replace("_"," ")}`}),setTimeout(()=>j(null),3e3),At(!1),mt(new Set)}catch(r){console.error("Error bulk updating tasks:",r),P(r.message)}finally{M(!1)}}},ra=async()=>{We.size!==0&&Nt({title:"Delete Tasks",message:`Are you sure you want to delete ${We.size} selected task${We.size===1?"":"s"}? This cannot be undone.`,confirmLabel:"Delete",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:async()=>{M(!0);try{const t=Array.from(We),{error:r}=await z.from("tasks").delete().in("id",t);if(r)throw r;c(m.filter(a=>!We.has(a.id))),j({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks deleted`}),setTimeout(()=>j(null),3e3),At(!1),mt(new Set),Nt(null)}catch(t){console.error("Error bulk deleting tasks:",t),P(t.message)}finally{M(!1)}}})},sa=async t=>{var r;if(!(We.size===0||!t)){M(!0);try{const a=Array.from(We),{error:i}=await z.from("tasks").update({project_id:t}).in("id",a);if(i)throw i;const h=((r=g.find(N=>N.id===t))==null?void 0:r.name)||"project";c(m.map(N=>We.has(N.id)?{...N,project_id:t}:N)),j({taskId:null,previousStatus:null,taskTitle:`${a.length} tasks moved to ${h}`}),setTimeout(()=>j(null),3e3),At(!1),mt(new Set)}catch(a){console.error("Error bulk moving tasks:",a),P(a.message)}finally{M(!1)}}},aa=async t=>{if(We.size!==0){M(!0);try{const r=Array.from(We),{error:a}=await z.from("tasks").update({assignee:t||null}).in("id",r);if(a)throw a;c(m.map(i=>We.has(i.id)?{...i,assignee:t||null}:i)),j({taskId:null,previousStatus:null,taskTitle:`${r.length} tasks assigned to ${t||"nobody"}`}),setTimeout(()=>j(null),3e3),At(!1),mt(new Set)}catch(r){console.error("Error bulk assigning tasks:",r),P(r.message)}finally{M(!1)}}},na=async()=>{if(We.size!==0){M(!0);try{const t=Array.from(We),r=m.filter(N=>We.has(N.id)),i=!(r.filter(N=>N.critical).length>r.length/2),{error:h}=await z.from("tasks").update({critical:i}).in("id",t);if(h)throw h;c(m.map(N=>We.has(N.id)?{...N,critical:i}:N)),j({taskId:null,previousStatus:null,taskTitle:`${t.length} tasks ${i?"marked critical":"unmarked"}`}),setTimeout(()=>j(null),3e3),At(!1),mt(new Set)}catch(t){console.error("Error bulk toggling critical:",t),P(t.message)}finally{M(!1)}}},ia=()=>{mt(new Set(It.map(t=>t.id)))},oa=()=>{mt(new Set)},ls=async(t,r=[],a=[])=>{M(!0),P(null);try{let i=t.id;if(i){const{error:N}=await z.from("tasks").update({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).eq("id",i);if(N)throw N;await z.from("task_dependencies").delete().eq("task_id",i),t.dependencies&&t.dependencies.length>0&&await z.from("task_dependencies").insert(t.dependencies.map(K=>({task_id:i,depends_on_id:K})));const L=a.map(K=>K.id),{data:F}=await z.from("attachments").select("id, file_path").eq("task_id",i),B=(F==null?void 0:F.filter(K=>!L.includes(K.id)))||[];for(const K of B)await z.storage.from("attachments").remove([K.file_path]),await z.from("attachments").delete().eq("id",K.id)}else{const{data:N,error:L}=await z.from("tasks").insert({title:t.title,description:t.description,project_id:t.project_id,status:t.status,critical:t.critical,start_date:t.start_date||null,start_time:t.start_time||null,end_time:t.end_time||null,due_date:t.due_date||null,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,recurrence_end_date:t.recurrence_end_date||null,subtasks:t.subtasks||[],comments:t.comments||[]}).select().single();if(L)throw L;if(i=N.id,t.dependencies&&t.dependencies.length>0&&await z.from("task_dependencies").insert(t.dependencies.map(F=>({task_id:i,depends_on_id:F}))),t.recurrence_type&&t.start_date){const F=t.recurrence_end_date?Cs(t.start_date,t.recurrence_type,0,t.recurrence_end_date):Cs(t.start_date,t.recurrence_type,t.recurrence_count||8);let B=null;t.due_date&&t.start_date&&(B=new Date(t.due_date)-new Date(t.start_date));const K=F.map(Y=>{let ae=null;if(B!==null){const Ne=new Date(Y);Ne.setTime(Ne.getTime()+B),ae=Ne.toISOString().split("T")[0]}return{title:t.title,description:t.description,project_id:t.project_id,status:"backlog",critical:t.critical,start_date:Y,start_time:t.start_time||null,end_time:t.end_time||null,due_date:ae,assignee:t.assignee||null,time_estimate:t.time_estimate,energy_level:t.energy_level,category:t.category,source:t.source,source_link:t.source_link||null,customer:t.customer||null,notes:t.notes||null,recurrence_type:t.recurrence_type,recurrence_parent_id:i,subtasks:t.subtasks||[]}});if(K.length>0){const{error:Y}=await z.from("tasks").insert(K);Y&&console.error("Error creating future occurrences:",Y)}}}for(const N of r){const L=`${s.id}/${i}/${Date.now()}_${N.name}`,{error:F}=await z.storage.from("attachments").upload(L,N);if(F)throw F;await z.from("attachments").insert({task_id:i,file_name:N.name,file_path:L,file_size:N.size,file_type:N.type})}await Lt();const h=!t.id;ce(h?"âœ“ Task created":"âœ“ Task saved")}catch(i){console.error("Error saving task:",i),Ar(i.message||"Failed to save task",()=>ls(t,r,a),"Save failed")}finally{M(!1)}},sr=async(t,r=!1)=>{const a=m.find(i=>i.id===t);if(a&&(a.recurrence_type||a.recurrence_parent_id)&&!r&&!pt){Zt({taskId:t,title:a.title,parentId:a.recurrence_parent_id||a.id});return}M(!0);try{if(r&&a){const i=a.recurrence_parent_id||a.id,h=m.filter(L=>L.id===i||L.recurrence_parent_id===i);for(const L of h){const{data:F}=await z.from("attachments").select("file_path").eq("task_id",L.id);(F==null?void 0:F.length)>0&&await z.storage.from("attachments").remove(F.map(B=>B.file_path))}const{error:N}=await z.from("tasks").delete().or(`id.eq.${i},recurrence_parent_id.eq.${i}`);if(N)throw N;await Lt(),ce(`Deleted ${h.length} recurring tasks`)}else{const{data:i}=await z.from("attachments").select("file_path").eq("task_id",t);(i==null?void 0:i.length)>0&&await z.storage.from("attachments").remove(i.map(N=>N.file_path));const{error:h}=await z.from("tasks").delete().eq("id",t);if(h)throw h;await Lt(),ce("Task deleted")}}catch(i){console.error("Error deleting task:",i),Ar(i.message||"Failed to delete task",()=>sr(t,r),"Delete failed")}finally{M(!1),Zt(null)}},la=async(t,r,a=null)=>{var h;if(!t.trim())return;const i=r||((h=g[0])==null?void 0:h.id);if(i)try{M(!0);const{data:N,error:L}=await z.from("tasks").insert({title:t.trim(),project_id:i,status:"backlog",due_date:a,energy_level:"medium",category:"deliverable",source:"ad_hoc"}).select().single();if(L)throw L;c(F=>[...F,{...N,attachments:[],dependencies:[]}]),Qt(""),Gt(!1)}catch(N){console.error("Error creating task:",N),P(N.message)}finally{M(!1)}},Pr=async(t,r)=>{try{const a=m.find(h=>h.id===t),{error:i}=await z.from("tasks").update({my_day_date:r}).eq("id",t);if(i)throw i;c(h=>h.map(N=>N.id===t?{...N,my_day_date:r}:N)),r&&new Date(r).toDateString()===new Date().toDateString()&&ce(`â˜€ï¸ Added "${a==null?void 0:a.title}" to My Day`)}catch(a){console.error("Error updating my_day_date:",a)}},Ft=async(t,r)=>{try{const a=m.find(N=>N.id===t),{error:i}=await z.from("tasks").update({status:r,completed_at:r==="done"?new Date().toISOString():null}).eq("id",t);if(i)throw i;const h=a==null?void 0:a.status;r==="done"&&(a!=null&&a.recurrence_type)?await Lt():c(m.map(N=>N.id===t?{...N,status:r,completed_at:r==="done"?new Date().toISOString():null}:N)),r==="done"&&(j({taskId:t,previousStatus:h,taskTitle:a==null?void 0:a.title}),setTimeout(()=>j(null),5e3))}catch(a){console.error("Error updating task status:",a),P(a.message)}},ds=async(t,r)=>{try{const{error:a}=await z.from("tasks").update({due_date:r}).eq("id",t);if(a)throw a;c(m.map(i=>i.id===t?{...i,due_date:r}:i))}catch(a){console.error("Error setting due date:",a),P(a.message)}},cs=async(t,r)=>{try{const{error:a}=await z.from("tasks").update({title:r}).eq("id",t);if(a)throw a;c(m.map(i=>i.id===t?{...i,title:r}:i))}catch(a){console.error("Error updating task title:",a),P(a.message)}},gs=async(t,r)=>{try{const{error:a}=await z.from("tasks").update({critical:r}).eq("id",t);if(a)throw a;c(m.map(i=>i.id===t?{...i,critical:r}:i)),ce(r?"ðŸš© Marked as critical":"âœ“ Critical flag removed")}catch(a){console.error("Error toggling critical:",a),P(a.message)}},da=async(t,r)=>{try{const{error:a}=await z.from("tasks").update(r).eq("id",t);if(a)throw a;c(m.map(i=>i.id===t?{...i,...r}:i))}catch(a){console.error("Error updating task from calendar:",a),P(a.message)}},ca=async()=>{if(re)try{await z.from("tasks").update({status:re.previousStatus}).eq("id",re.taskId),c(t=>t.map(r=>r.id===re.taskId?{...r,status:re.previousStatus}:r)),j(null)}catch(t){console.error("Error undoing:",t),P(t.message)}},Or=(t,r)=>{ct(r),t.dataTransfer.effectAllowed="move"},xs=(t,r)=>{t.preventDefault()},ms=(t,r)=>{t.preventDefault(),ht&&ht.status!==r&&Ft(ht.id,r),ct(null)},ga=[...new Set(m.map(t=>t.assignee).filter(Boolean))];[...new Set(m.map(t=>t.customer).filter(Boolean))];const ar=yt||bt||_r||Sr||Dr||ft||jt||Ut.trim()||Object.keys(Be).length>0,us=()=>{cr(!1),gr(!1),Gr(!1),Jr(!1),Qr(!1),xr(!1),mr(!1),ur(""),Ot({}),Xr("")},hs=t=>{const r={id:Date.now(),name:t,filters:{selectedProjectId:ze,filterCritical:yt,filterOverdue:bt,filterBlocked:_r,filterActive:Sr,filterBacklog:Dr,filterDueToday:ft,filterMyDay:jt,searchQuery:Ut,fieldFilters:Be}},a=[...zt,r];es(a),localStorage.setItem("trackli_saved_views",JSON.stringify(a)),hr(!1),ts("")},xa=t=>{ut(t.filters.selectedProjectId||"all"),cr(t.filters.filterCritical||!1),gr(t.filters.filterOverdue||!1),Gr(t.filters.filterBlocked||!1),Jr(t.filters.filterActive||!1),Qr(t.filters.filterBacklog||!1),xr(t.filters.filterDueToday||!1),mr(t.filters.filterMyDay||!1),ur(t.filters.searchQuery||""),Ot(t.filters.fieldFilters||{})},ma=t=>{const r=zt.filter(a=>a.id!==t);es(r),localStorage.setItem("trackli_saved_views",JSON.stringify(r))},ua=t=>{const r={id:Date.now(),name:t.name,title:t.title||"",description:t.description||"",project_id:t.project_id||"",category:t.category||"deliverable",energy_level:t.energy_level||"medium",time_estimate:t.time_estimate||"",source:t.source||"ad_hoc",assignee:t.assignee||"",customer:t.customer||"",critical:t.critical||!1,recurrence_type:t.recurrence_type||null,recurrence_count:t.recurrence_count||8,subtasks:t.subtasks||[]},a=[...Mr,r];return rs(a),localStorage.setItem("trackli_task_templates",JSON.stringify(a)),r},ha=t=>{const r=Mr.filter(a=>a.id!==t);rs(r),localStorage.setItem("trackli_task_templates",JSON.stringify(r))};m.filter(t=>ze!=="all"&&t.project_id!==ze?!1:ir(t)).length;const It=m.filter(t=>{var r,a,i,h,N,L;if(!Ht&&t.project_id){const F=g.find(B=>B.id===t.project_id);if(F!=null&&F.archived)return!1}if(ze!=="all"&&t.project_id!==ze||yt&&!t.critical||bt&&Et(t.due_date,t.status)!=="overdue"||_r&&!St(t,m)||Sr&&!["todo","in_progress"].includes(t.status)||Dr&&t.status!=="backlog"||ft&&Et(t.due_date,t.status)!=="today"||jt&&!qr(t))return!1;if(Ut.trim()){const F=Ut.toLowerCase(),B=(r=t.title)==null?void 0:r.toLowerCase().includes(F),K=(a=t.description)==null?void 0:a.toLowerCase().includes(F),Y=(i=t.customer)==null?void 0:i.toLowerCase().includes(F),ae=(h=t.assignee)==null?void 0:h.toLowerCase().includes(F),Ne=(L=(N=g.find(Ge=>Ge.id===t.project_id))==null?void 0:N.name)==null?void 0:L.toLowerCase().includes(F);if(!B&&!K&&!Y&&!ae&&!Ne)return!1}for(const[F,B]of Object.entries(Be))if(B==="__blank__"){if(F==="assignee"&&t.assignee||F==="customer"&&t.customer||F==="category"&&t.category||F==="energy_level"&&t.energy_level||F==="source"&&t.source||F==="due_date"&&t.due_date)return!1}else if(F==="assignee"&&t.assignee!==B||F==="customer"&&t.customer!==B||F==="category"&&t.category!==B||F==="energy_level"&&t.energy_level!==B||F==="source"&&t.source!==B||F==="due_date"&&B==="has_date"&&!t.due_date)return!1;if($s&&!ir(t))return!1;if(Tr!=="all"&&Zr){const F=parseInt(Zr);if(Tr==="lt"&&(t.time_estimate||0)>=F||Tr==="gt"&&(t.time_estimate||0)<=F)return!1}return!0}),ps=t=>{if(!t.start_date)return!1;const r=new Date;r.setHours(0,0,0,0);const a=new Date(t.start_date);return a.setHours(0,0,0,0),a>r},pa=(t,r=!1)=>{const a={high:0,medium:1,low:2};return[...t].sort((i,h)=>{if(r){const K=ps(i),Y=ps(h);if(K&&!Y)return 1;if(!K&&Y)return-1}if(i.critical&&!h.critical)return-1;if(!i.critical&&h.critical)return 1;const N=!!i.due_date,L=!!h.due_date;if(N&&L){const K=new Date(i.due_date)-new Date(h.due_date);if(K!==0)return K}else{if(N&&!L)return-1;if(!N&&L)return 1}const F=a[i.energy_level]??1,B=a[h.energy_level]??1;return F!==B?F-B:new Date(i.created_at)-new Date(h.created_at)})},zr=t=>{const r=It.filter(a=>a.status===t);return t==="done"?[...r].sort((a,i)=>{const h=a.completed_at?new Date(a.completed_at):new Date(0);return(i.completed_at?new Date(i.completed_at):new Date(0))-h}):pa(r,t==="backlog")},jr=It.filter(t=>t.critical&&t.status!=="done").length,kr=It.filter(t=>Et(t.due_date,t.status)==="overdue").length,vr=It.filter(t=>Et(t.due_date,t.status)==="today").length;It.filter(t=>St(t,m)&&t.status!=="done").length;const wr=It.filter(t=>qr(t)).length;It.filter(t=>t.status!=="done").reduce((t,r)=>t+(r.time_estimate||0),0);const ya=(()=>{const t=m.filter(h=>h.status==="done"&&h.completed_at);if(t.length===0)return 0;const r=new Set(t.map(h=>new Date(h.completed_at).toDateString()));let a=0,i=new Date;for(i.setHours(0,0,0,0);r.has(i.toDateString());)a++,i.setDate(i.getDate()-1);if(a===0){const h=new Date;for(h.setDate(h.getDate()-1),h.setHours(0,0,0,0);r.has(h.toDateString());)a++,h.setDate(h.getDate()-1)}return a})(),ys=(()=>{const t=new Date,r=new Date(t);r.setDate(r.getDate()-7);const a=m.filter(i=>{if(i.status!=="done"||!i.completed_at)return!1;const h=new Date(i.completed_at);return h>=r&&h<=t});return{count:a.length,time:a.reduce((i,h)=>i+(h.time_estimate||0),0)}})(),bs=new Date;bs.setHours(0,0,0,0);const ba=m.filter(t=>t.status==="done"&&t.completed_at&&new Date(t.completed_at)>=bs).length;return m.filter(t=>t.due_date===new Date().toISOString().split("T")[0]&&t.status!=="done").length,y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-xl shadow-indigo-500/30 animate-pulse",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-ping opacity-20"})]}),e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Trackli"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading your tasks..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-200",children:[tr&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 max-w-md bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-xl p-4 shadow-lg animate-in slide-in-from-bottom-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:tr.details||"Error"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300 mt-1",children:tr.message}),tr.retryAction&&e.jsx("button",{onClick:()=>{$r(null),tr.retryAction()},className:"mt-2 px-3 py-1 bg-red-100 dark:bg-red-800/50 hover:bg-red-200 dark:hover:bg-red-800 text-red-700 dark:text-red-200 rounded-lg text-xs font-medium transition-colors",children:"Try Again"})]}),e.jsx("button",{onClick:()=>$r(null),className:"p-1 hover:bg-red-100 dark:hover:bg-red-800/50 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-red-500 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),re&&e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-4 animate-in slide-in-from-bottom-5",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm font-medium",children:['"',re.taskTitle,'" marked as done']}),e.jsx("button",{onClick:ca,className:"px-3 py-1 bg-white/20 dark:bg-gray-900/20 hover:bg-white/30 dark:hover:bg-gray-900/30 rounded-lg text-sm font-semibold transition-colors",children:"Undo"}),e.jsx("button",{onClick:()=>j(null),className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ee&&e.jsxs("div",{className:"fixed bottom-6 left-6 z-50 bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 rounded-xl px-4 py-3 shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[ee.type==="success"?e.jsx("svg",{className:"w-5 h-5 text-emerald-400 dark:text-emerald-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-5 h-5 text-blue-400 dark:text-blue-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium",children:ee.message}),e.jsx("button",{onClick:()=>ue(null),className:"p-1 hover:bg-white/20 dark:hover:bg-gray-900/20 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 sticky top-0 z-40",children:[e.jsx("div",{className:"max-w-full mx-auto px-3 sm:px-6 py-2 sm:py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>b(!Ce),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",title:"Menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),Ce&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 sm:bg-black/20 animate-fadeIn",onClick:()=>b(!1)}),e.jsxs("div",{className:"fixed sm:absolute top-0 sm:top-full left-0 h-screen sm:h-auto w-72 sm:w-56 sm:mt-2 sm:rounded-xl shadow-2xl border-r sm:border border-gray-200 dark:border-gray-700 py-2 z-[1000] animate-slideInFromLeft sm:animate-none overflow-y-auto",style:{backgroundColor:k?"#1f2937":"#ffffff"},children:[e.jsxs("div",{className:"sm:hidden flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Menu"}),e.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Views"}),e.jsxs("button",{onClick:()=>{te("myday"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="myday"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"â˜€ï¸"}),e.jsx("span",{className:"font-medium",children:"My Day"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[E,"D"]})]}),e.jsxs("button",{onClick:()=>{te("board"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="board"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“‹"}),e.jsx("span",{className:"font-medium",children:"Board"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[E,"B"]})]}),e.jsxs("button",{onClick:()=>{te("calendar"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="calendar"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“†"}),e.jsx("span",{className:"font-medium",children:"Calendar"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[E,"L"]})]}),e.jsxs("button",{onClick:()=>{te("tasks"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="tasks"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ—ƒï¸"}),e.jsx("span",{className:"font-medium",children:"All Tasks"}),e.jsxs("span",{className:"ml-auto text-xs text-gray-400 hidden sm:inline",children:[E,"A"]})]}),e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Manage"}),e.jsxs("button",{onClick:()=>{te("projects"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="projects"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"font-medium",children:"Projects"})]}),e.jsxs("button",{onClick:()=>{te("progress"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-3 sm:py-2.5 text-left transition-colors ${Q==="progress"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-lg",children:"ðŸ“Š"}),e.jsx("span",{className:"font-medium",children:"Progress"})]}),e.jsxs("div",{className:"sm:hidden",children:[e.jsx("div",{className:"my-2 border-t border-gray-100 dark:border-gray-700"}),e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:"Settings"}),e.jsxs("button",{onClick:()=>{U(!k)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:k?"â˜€ï¸":"ðŸŒ™"}),e.jsx("span",{className:"font-medium",children:k?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:()=>{var t;kt({...Ve,projectId:((t=g[0])==null?void 0:t.id)||""}),wt([]),Tt(!1),Yt(!0),b(!1)},disabled:g.length===0,className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{className:"font-medium",children:"Import Notes"})]}),e.jsxs("button",{onClick:()=>{fe(!0),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sm:hidden",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¬"}),e.jsx("span",{className:"font-medium",children:"Send Feedback"})]}),e.jsxs("button",{onClick:()=>{T(!0),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("span",{className:"text-lg",children:"âš™ï¸"}),e.jsx("span",{className:"font-medium",children:"Settings"})]}),e.jsxs("button",{onClick:()=>{d(),b(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx("span",{className:"text-lg",children:"ðŸšª"}),e.jsx("span",{className:"font-medium",children:"Sign Out"})]}),e.jsx("div",{className:"h-8"})]})]})]})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:Q==="myday"?"â˜€ï¸ My Day":Q==="board"?"ðŸ“‹ Board":Q==="calendar"?"ðŸ“† Calendar":Q==="tasks"?"ðŸ—ƒï¸ All Tasks":Q==="progress"?"ðŸ“Š Progress":"ðŸ“ Projects"})]}),e.jsxs("div",{className:"flex sm:hidden items-center gap-1.5",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("span",{className:"text-base font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden xl:flex items-center gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("h1",{className:"hidden sm:block text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Trackli"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>U(!k),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:k?"Light mode":"Dark mode",children:k?e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),Q==="board"&&e.jsx("button",{onClick:()=>{At(!Kt),mt(new Set)},className:`hidden sm:block p-2 rounded-xl transition-colors ${Kt?"bg-indigo-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400"}`,title:"Bulk select",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),e.jsx("div",{className:"hidden sm:block w-px h-6 bg-gray-200 dark:bg-gray-700 mx-1"}),e.jsxs("button",{onClick:()=>{Ue(null),Dt(!0)},className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-teal-500 text-white rounded-lg sm:rounded-xl hover:bg-teal-600 transition-colors text-sm font-medium items-center gap-1.5",title:"âŒ˜P",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"P"}),"roject"]})]}),e.jsxs("button",{onClick:()=>{et(null),Ze(!0)},disabled:g.length===0,className:"hidden sm:flex px-2 sm:px-3 py-1.5 sm:py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-lg sm:rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all text-sm font-medium items-center gap-1.5 shadow-lg shadow-indigo-500/25 disabled:opacity-50",title:`${E}T`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsxs("span",{className:"hidden sm:inline",children:[e.jsx("u",{children:"T"}),"ask"]})]}),e.jsxs("button",{onClick:()=>{var t;kt({...Ve,projectId:((t=g[0])==null?void 0:t.id)||""}),wt([]),Tt(!1),Yt(!0)},disabled:g.length===0,className:"hidden sm:flex px-3 py-2 bg-amber-500 text-white rounded-xl hover:bg-amber-600 transition-colors text-sm font-medium items-center gap-1.5 disabled:opacity-50",title:"Import Meeting Notes (âŒ˜N)",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Notes"})]}),e.jsx("button",{onClick:()=>Ke(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Help Guide",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(s==null?void 0:s.email)===Ls&&e.jsx("button",{onClick:()=>p(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"View Feedback",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("button",{onClick:()=>T(!0),className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Settings",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:d,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors text-gray-500 dark:text-gray-400",title:"Sign Out",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),Q==="board"&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 sm:px-6 py-2",children:[e.jsxs("div",{className:"sm:hidden flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:ze,onChange:t=>ut(t.target.value),className:"w-full appearance-none pl-3 pr-7 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),g.filter(t=>!t.archived||Ht).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("button",{onClick:()=>de(!0),className:`relative p-2.5 rounded-xl border transition-all ${ar?"bg-indigo-500 border-indigo-500 text-white":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),ar&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:Object.keys(Be).length+(yt?1:0)+(ft?1:0)+(bt?1:0)+(jt?1:0)})]}),e.jsx("button",{onClick:()=>Ye(!0),className:"p-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-600 dark:text-gray-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),he&&fa.createPortal(e.jsxs("div",{className:"sm:hidden fixed inset-0 z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>de(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Filters"}),e.jsx("button",{onClick:()=>de(!1),className:"p-2 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Quick Filters"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>cr(!yt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${yt?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["ðŸš© Critical (",jr,")"]}),e.jsxs("button",{onClick:()=>xr(!ft),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${ft?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Today (",vr,")"]}),e.jsxs("button",{onClick:()=>gr(!bt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${bt?"bg-red-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["Overdue (",kr,")"]}),e.jsxs("button",{onClick:()=>mr(!jt),className:`flex items-center justify-center gap-2 p-3 rounded-xl text-sm font-medium transition-all ${jt?"bg-amber-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:["â˜€ï¸ My Day (",wr,")"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Filter by Field"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:Be.assignee||"",onChange:t=>Ot(t.target.value?{...Be,assignee:t.target.value}:(({assignee:r,...a})=>a)(Be)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Assignee: All"}),e.jsx("option",{value:"__blank__",children:"Assignee: (Blank)"}),[...new Set(m.map(t=>t.assignee).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Be.customer||"",onChange:t=>Ot(t.target.value?{...Be,customer:t.target.value}:(({customer:r,...a})=>a)(Be)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Customer: All"}),e.jsx("option",{value:"__blank__",children:"Customer: (Blank)"}),[...new Set(m.map(t=>t.customer).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{value:Be.category||"",onChange:t=>Ot(t.target.value?{...Be,category:t.target.value}:(({category:r,...a})=>a)(Be)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Category: All"}),gt.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]}),e.jsxs("select",{value:Be.energy_level||"",onChange:t=>Ot(t.target.value?{...Be,energy_level:t.target.value}:(({energy_level:r,...a})=>a)(Be)),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm text-gray-700 dark:text-gray-200 border-0",children:[e.jsx("option",{value:"",children:"Effort: All"}),e.jsx("option",{value:"high",children:"High Effort"}),e.jsx("option",{value:"medium",children:"Medium Effort"}),e.jsx("option",{value:"low",children:"Low Effort"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[ar&&e.jsx("button",{onClick:()=>{us(),de(!1)},className:"flex-1 p-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl text-sm font-medium",children:"Clear All"}),e.jsx("button",{onClick:()=>de(!1),className:"flex-1 p-3 bg-indigo-500 text-white rounded-xl text-sm font-medium",children:"Apply"})]})]})]}),document.body),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 sm:gap-3 min-w-max overflow-x-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:ze,onChange:t=>ut(t.target.value),className:"appearance-none pl-3 pr-7 py-1.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"all",children:"ðŸ“ All Projects"}),g.filter(t=>!t.archived||Ht).map(t=>e.jsxs("option",{value:t.id,children:[t.archived?"ðŸ“¦ ":"ðŸ“ ",t.name]},t.id))]}),e.jsx("svg",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("button",{onClick:()=>cr(!yt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${yt?"bg-red-500 text-white shadow-sm":jr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"ðŸš©"}),e.jsx("span",{className:"hidden sm:inline",children:"Critical"}),(yt||jr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${yt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:jr})]}),e.jsxs("button",{onClick:()=>xr(!ft),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${ft?"bg-orange-500 text-white shadow-sm":vr>0?"text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Due Today"}),e.jsx("span",{className:"sm:hidden",children:"Today"}),(ft||vr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${ft?"bg-white/20":"bg-orange-100 dark:bg-orange-900/50"}`,children:vr})]}),e.jsxs("button",{onClick:()=>gr(!bt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${bt?"bg-red-600 text-white shadow-sm":kr>0?"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"Overdue"}),(bt||kr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${bt?"bg-white/20":"bg-red-100 dark:bg-red-900/50"}`,children:kr})]}),e.jsxs("button",{onClick:()=>mr(!jt),className:`flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium transition-all ${jt?"bg-amber-500 text-white shadow-sm":wr>0?"text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30":"text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[e.jsx("span",{children:"â˜€ï¸"}),e.jsx("span",{className:"hidden sm:inline",children:"My Day"}),(jt||wr>0)&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 text-[10px] rounded ${jt?"bg-white/20":"bg-amber-100 dark:bg-amber-900/50"}`,children:wr})]})]}),e.jsx("div",{className:"w-px h-5 bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[Object.entries(Be).map(([t,r])=>{var h,N;const a={assignee:"Assignee",customer:"Customer",category:"Category",energy_level:"Effort",source:"Source",due_date:"Due Date"};let i=r;return r==="__blank__"?i="(Blank)":t==="category"?i=((h=gt.find(L=>L.id===r))==null?void 0:h.label)||r:t==="energy_level"?i=r==="high"?"High":r==="medium"?"Medium":"Low":t==="source"?i=((N=Rt.find(L=>L.id===r))==null?void 0:N.label)||r:t==="due_date"&&r==="has_date"&&(i="Has Date"),e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 rounded text-xs font-medium",children:[a[t],": ",i,e.jsx("button",{onClick:()=>{const L={...Be};delete L[t],Ot(L)},className:"ml-0.5 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:Es,onChange:t=>Xr(t.target.value),className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("option",{value:"",children:"+ Filter"}),!Be.assignee&&e.jsx("option",{value:"assignee",children:"Assignee"}),!Be.customer&&e.jsx("option",{value:"customer",children:"Customer"}),!Be.category&&e.jsx("option",{value:"category",children:"Category"}),!Be.energy_level&&e.jsx("option",{value:"energy_level",children:"Effort"}),!Be.source&&e.jsx("option",{value:"source",children:"Source"}),!Be.due_date&&e.jsx("option",{value:"due_date",children:"Due Date"})]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search...",value:Ut,onChange:t=>ur(t.target.value),className:"w-32 sm:w-40 pl-7 pr-2 py-1 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-700 dark:text-gray-200 placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-transparent focus:bg-white dark:focus:bg-gray-700 transition-colors"}),e.jsx("svg",{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Ut&&e.jsx("button",{onClick:()=>ur(""),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-0.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ar&&e.jsxs("button",{onClick:us,className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 transition-colors",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]}),e.jsxs("label",{className:"hidden sm:flex items-center gap-1 text-[10px] text-gray-500 dark:text-gray-400 cursor-pointer hover:text-gray-600 dark:hover:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:Ht,onChange:t=>Nr(t.target.checked),className:"w-3 h-3 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),"Archived"]})]}),zt.length>0&&e.jsxs("div",{className:"relative border-l border-gray-200 dark:border-gray-700 pl-2",children:[e.jsxs("select",{onChange:t=>{const r=zt.find(a=>a.id===parseInt(t.target.value));r&&xa(r),t.target.value=""},className:"appearance-none pl-2 pr-5 py-1 bg-transparent border border-gray-200 dark:border-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600",children:[e.jsx("option",{value:"",children:"ðŸ“‘ Views"}),zt.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("svg",{className:"absolute right-1 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ar&&e.jsx("button",{onClick:()=>hr(!0),className:"p-1 text-indigo-600 hover:text-indigo-700 dark:text-indigo-400 dark:hover:text-indigo-300",title:"Save current filters as a view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]})]}),Q==="board"&&ze!=="all"&&e.jsx("div",{className:"max-w-full mx-auto px-6 py-4",children:g.filter(t=>t.id===ze).map(t=>{var r,a;return e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white rounded-xl shadow-sm border border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-800",children:t.name}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((r=t.members)==null?void 0:r.length)||0," members"]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[((a=t.customers)==null?void 0:a.length)||0," customers"]}),e.jsx("button",{onClick:()=>{Ue(t),Dt(!0)},className:"ml-2 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]},t.id)})}),g.length===0&&e.jsxs("div",{className:"max-w-md mx-auto mt-12 sm:mt-20 text-center px-6",children:[e.jsx("div",{className:"w-24 h-24 sm:w-20 sm:h-20 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-12 h-12 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h2",{className:"text-2xl sm:text-2xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-base sm:text-base",children:"Get started by creating your first project."}),e.jsx("button",{onClick:()=>{Ue(null),Dt(!0)},className:"w-full sm:w-auto px-8 py-4 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 text-lg sm:text-base active:scale-95",children:"Create Your First Project"})]}),g.length>0&&e.jsxs(e.Fragment,{children:[Kt&&e.jsx("div",{className:"sticky top-[73px] z-30 bg-indigo-600 dark:bg-indigo-700 border-b border-indigo-500",children:e.jsx("div",{className:"max-w-full mx-auto px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{At(!1),mt(new Set)},className:"p-1.5 hover:bg-indigo-500 rounded-lg transition-colors text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("span",{className:"text-white font-medium",children:[We.size," task",We.size!==1?"s":""," selected"]}),e.jsx("button",{onClick:ia,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Select all"}),e.jsx("button",{onClick:oa,className:"text-sm text-indigo-200 hover:text-white transition-colors",children:"Deselect all"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{onChange:t=>t.target.value&&ta(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Status..."}),e.jsx("option",{value:"backlog",children:"Backlog"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"done",children:"Done"})]}),e.jsxs("select",{onChange:t=>t.target.value&&sa(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Project..."}),g.filter(t=>!t.archived).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{onChange:t=>aa(t.target.value),className:"px-3 py-1.5 bg-white/20 border border-white/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-white/50 focus:border-transparent [&>option]:bg-gray-800 [&>option]:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Assign..."}),e.jsx("option",{value:"",children:"Unassign"}),ga.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("button",{onClick:na,className:"px-3 py-1.5 bg-white/20 hover:bg-white/30 border border-white/30 text-white rounded-lg text-sm font-medium transition-colors",title:"Toggle critical flag",children:"ðŸš© Critical"}),e.jsx("button",{onClick:ra,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Delete"})]})]})})}),Q==="myday"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ba,{tasks:m.filter(t=>{var r;return!t.project_id||!((r=g.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:g,onEditTask:t=>{et(t),Ze(!0)},onDragStart:Or,allTasks:m.filter(t=>{var r;return!t.project_id||!((r=g.find(a=>a.id===t.project_id))!=null&&r.archived)}),onQuickStatusChange:Ft,onUpdateMyDayDate:Pr,showConfettiPref:ve})},"myday"),Q==="calendar"&&e.jsx("div",{className:"animate-fadeIn",children:e.jsx(Ia,{tasks:m.filter(t=>{var r;return!t.project_id||!((r=g.find(a=>a.id===t.project_id))!=null&&r.archived)}),projects:g,onEditTask:t=>{et(t),Ze(!0)},onCreateTask:t=>{et(t),Ze(!0)},allTasks:m.filter(t=>{var r;return!t.project_id||!((r=g.find(a=>a.id===t.project_id))!=null&&r.archived)}),onUpdateTask:da,onDeleteTask:sr,viewMode:xe,setViewMode:ye,onShowConfirm:Nt})},"calendar"),Q==="tasks"&&e.jsx("div",{className:"animate-fadeIn h-[calc(100vh-140px)]",children:e.jsx(Wa,{tasks:m,projects:g,onEditTask:t=>{et(t),Ze(!0)},allTasks:m})},"tasks"),Q==="projects"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Projects"}),e.jsxs("button",{onClick:()=>{Ue(null),Dt(!0)},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:["Active Projects (",g.filter(t=>!t.archived).length,")"]}),e.jsxs("div",{className:"space-y-3",children:[g.filter(t=>!t.archived).map(t=>{var h,N;const r=m.filter(L=>L.project_id===t.id),a=r.filter(L=>L.status==="done").length,i=r.length>0?Math.round(a/r.length*100):0;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[r.length," tasks"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[((h=t.members)==null?void 0:h.length)||0," members"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[((N=t.customers)==null?void 0:N.length)||0," customers"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 w-12",children:[i,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{ut(t.id),te("board")},className:"px-3 py-1.5 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",children:"View Board"}),e.jsx("button",{onClick:()=>{Ue(t),Dt(!0)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("button",{onClick:()=>{const L=m.filter(F=>F.project_id===t.id&&F.status!=="done");Nt({title:"Archive Project",message:`Archive "${t.name}"?${L.length>0?` This will hide ${L.length} active task${L.length===1?"":"s"} from the board.`:""} You can unarchive it later.`,confirmLabel:"Archive",confirmStyle:"warning",icon:"ðŸ“¦",onConfirm:()=>Wr(t.id)})},className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:"Archive project",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]})]})},t.id)}),g.filter(t=>!t.archived).length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:"No active projects yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Create your first project to organize your tasks"})]})]})]}),g.filter(t=>t.archived).length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:["Archived (",g.filter(t=>t.archived).length,")"]}),e.jsx("div",{className:"space-y-3",children:g.filter(t=>t.archived).map(t=>{const r=m.filter(a=>a.project_id===t.id);return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700 p-4 opacity-75",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¦"}),e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-400",children:t.name})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:[r.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Wr(t.id),className:"px-3 py-1.5 text-sm text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",children:"Unarchive"}),e.jsx("button",{onClick:()=>{Nt({title:"Delete Project",message:`Delete "${t.name}" and all its tasks? This cannot be undone.`,confirmLabel:"Delete Project",confirmStyle:"danger",icon:"ðŸ—‘ï¸",onConfirm:()=>{os(t.id),Nt(null)}})},className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete permanently",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)})})]})]},"projects"),Q==="progress"&&e.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:"ðŸ“Š Progress Dashboard"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ”¥"}),e.jsx("span",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:ya})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Day Streak"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsx("span",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:ba})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed Today"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“…"}),e.jsx("span",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400",children:ys.count})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This Week"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"â±ï¸"}),e.jsx("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:Vt(ys.time)||"0h"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time This Week"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Last 7 Days"}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:(()=>{const t=[];for(let a=6;a>=0;a--){const i=new Date;i.setDate(i.getDate()-a),i.setHours(0,0,0,0);const h=i.toDateString(),N=i.toLocaleDateString(void 0,{weekday:"short"}),L=m.filter(F=>F.status==="done"&&F.completed_at&&new Date(F.completed_at).toDateString()===h).length;t.push({dayName:N,count:L,isToday:a===0})}const r=Math.max(...t.map(a=>a.count),1);return t.map((a,i)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"80px"},children:e.jsx("div",{className:`w-full max-w-[40px] rounded-t-lg transition-all ${a.isToday?"bg-gradient-to-t from-indigo-500 to-purple-500":"bg-indigo-200 dark:bg-indigo-800"}`,style:{height:`${Math.max(a.count/r*100,8)}%`}})}),e.jsx("span",{className:`text-xs font-medium ${a.isToday?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:a.dayName}),e.jsx("span",{className:`text-xs ${a.isToday?"text-indigo-600 dark:text-indigo-400 font-semibold":"text-gray-400 dark:text-gray-500"}`,children:a.count})]},i))})()})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Project Progress"}),e.jsx("div",{className:"space-y-4",children:g.filter(t=>!t.archived).map(t=>{const r=m.filter(h=>h.project_id===t.id),a=r.filter(h=>h.status==="done").length,i=r.length>0?Math.round(a/r.length*100):0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:t.name}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a,"/",r.length," tasks"]})]}),e.jsx("div",{className:"h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all",style:{width:`${i}%`}})})]},t.id)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Recently Completed"}),e.jsxs("div",{className:"space-y-3",children:[m.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,10).map(t=>{const r=g.find(h=>h.id===t.project_id),i=new Date(t.completed_at).toDateString()===new Date().toDateString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==null?void 0:r.name})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:i?"Today":Wt(t.completed_at)})]},t.id)}),m.filter(t=>t.status==="done").length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸ’ª"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-base sm:text-sm",children:"No completed tasks yet"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Get started!"})]})]})]})]}),Q==="board"&&e.jsx("main",{className:"flex-1 px-3 sm:px-6 py-4 sm:py-6 animate-fadeIn",children:e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-900/50 rounded-2xl border border-gray-200/60 dark:border-gray-700/40 shadow-inner p-3 sm:p-4",children:[q&&e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("button",{onClick:()=>J(Math.max(0,D-1)),disabled:D===0,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:it[D].color}}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:it[D].title}),e.jsx("span",{className:"px-2 py-0.5 text-sm font-medium bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full shadow-sm",children:zr(it[D].id).length})]})}),e.jsx("button",{onClick:()=>J(Math.min(it.length-1,D+1)),disabled:D===it.length-1,className:"p-2.5 rounded-xl bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 disabled:opacity-30 disabled:cursor-not-allowed active:scale-95 transition-all",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:it.map((t,r)=>e.jsx("button",{onClick:()=>J(r),className:`transition-all duration-200 ${r===D?"w-6 h-2 rounded-full":"w-2 h-2 rounded-full"}`,style:{backgroundColor:r===D?t.color:"#D1D5DB"}},t.id))})]}),e.jsx("div",{className:q?"":"flex gap-3 sm:gap-4 lg:gap-6 overflow-x-auto overflow-y-visible pb-4 sm:pb-6 justify-center",children:q?e.jsx(Ds,{column:it[D],tasks:zr(it[D].id),projects:g,onEditTask:t=>{et(t),Ze(!0)},onDragStart:Or,onDragOver:xs,onDrop:ms,showProject:ze==="all",allTasks:m,onQuickComplete:Ft,onStatusChange:Ft,onSetDueDate:ds,bulkSelectMode:Kt,selectedTaskIds:We,onToggleSelect:t=>{const r=new Set(We);r.has(t)?r.delete(t):r.add(t),mt(r)},onAddTask:t=>{et({status:t}),Ze(!0)},onToggleMyDay:(t,r)=>{const a=new Date().toISOString().split("T")[0],i=new Date(Date.now()-864e5).toISOString().split("T")[0];Pr(t,r?a:i)},isMobileFullWidth:!0,draggedTask:ht,onUpdateTitle:cs,onToggleCritical:gs},it[D].id):it.map(t=>e.jsx(Ds,{column:t,tasks:zr(t.id),projects:g,onEditTask:r=>{et(r),Ze(!0)},onDragStart:Or,onDragOver:xs,onDrop:ms,showProject:ze==="all",allTasks:m,onQuickComplete:Ft,onStatusChange:Ft,onSetDueDate:ds,bulkSelectMode:Kt,selectedTaskIds:We,onToggleSelect:r=>{const a=new Set(We);a.has(r)?a.delete(r):a.add(r),mt(a)},onAddTask:r=>{et({status:r}),Ze(!0)},onToggleMyDay:(r,a)=>{const i=new Date().toISOString().split("T")[0],h=new Date(Date.now()-864e5).toISOString().split("T")[0];Pr(r,a?i:h)},draggedTask:ht,onUpdateTitle:cs,onToggleCritical:gs},t.id))}),e.jsx(Oa,{tasks:m.filter(t=>t.status==="done"&&t.completed_at).sort((t,r)=>new Date(r.completed_at)-new Date(t.completed_at)).slice(0,5),projects:g,onEditTask:t=>{et(t),Ze(!0)},onUndoComplete:t=>Ft(t,"todo")})]})})]}),e.jsx(za,{isOpen:dr,onClose:()=>{Ze(!1),et(null)},task:$t!=null&&$t.id&&m.find(t=>t.id===$t.id)||$t,projects:g,allTasks:m,onSave:ls,onDelete:sr,loading:_,templates:Mr,onSaveTemplate:ua,onDeleteTemplate:ha,onShowConfirm:Nt}),e.jsx(Ra,{isOpen:Cr,onClose:()=>{Dt(!1),Ue(null)},project:st,onSave:ea,onDelete:os,onArchive:Wr,loading:_,onShowConfirm:Nt}),e.jsx(Fa,{isOpen:Me,onClose:()=>Ye(!1),tasks:m,projects:g,onEditTask:t=>{et(t),Ze(!0)},allTasks:m}),Fs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-lg rounded-2xl shadow-2xl p-6 ${k?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-3xl",children:"ðŸš€"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to Trackli!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"We've created a starter project with sample tasks to help you learn the app."})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"ðŸ‘†"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Click on any task"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Each task has tips on features to explore"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"â˜€ï¸"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Try My Day view"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your daily focus list - some tasks are already there!"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Complete tasks to see them move"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete all My Day tasks for a celebration!"})]})]})]}),e.jsx("button",{onClick:()=>ss(!1),className:"w-full py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-semibold rounded-xl hover:shadow-lg transition-all",children:"Let's Go! ðŸŽ‰"})]})}),e.jsx(Aa,{isOpen:Je,onClose:()=>{Ke(!1),V("board")},initialTab:A,shortcutModifier:E}),e.jsx(Na,{isOpen:!!He,onClose:()=>Nt(null),onConfirm:()=>{var t;(t=He==null?void 0:He.onConfirm)==null||t.call(He),Nt(null)},title:(He==null?void 0:He.title)||"",message:(He==null?void 0:He.message)||"",confirmLabel:He==null?void 0:He.confirmLabel,confirmStyle:He==null?void 0:He.confirmStyle,icon:He==null?void 0:He.icon,loading:_}),pt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 ${k?"bg-gray-800":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ”"})}),e.jsx("h3",{className:`text-lg font-semibold ${k?"text-white":"text-gray-900"}`,children:"Delete Recurring Task"})]}),e.jsxs("p",{className:`mb-6 ${k?"text-gray-300":"text-gray-600"}`,children:['"',pt.title,'" is part of a recurring series. What would you like to do?']}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>sr(pt.taskId,!1),disabled:_,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${k?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"}`,children:"Delete only this occurrence"}),e.jsx("button",{onClick:()=>sr(pt.taskId,!0),disabled:_,className:"w-full py-3 px-4 rounded-xl font-medium bg-red-500 hover:bg-red-600 text-white transition-all",children:_?"Deleting...":"Delete all future occurrences"}),e.jsx("button",{onClick:()=>Zt(null),disabled:_,className:`w-full py-3 px-4 rounded-xl font-medium transition-all ${k?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"Cancel"})]})]})}),se&&Q==="board"&&!q&&e.jsx(Da,{step:Z,onNext:O,onSkip:()=>{le(!1),localStorage.setItem("trackli_onboarding_complete","true")},onComplete:()=>{le(!1),localStorage.setItem("trackli_onboarding_complete","true")}}),we&&e.jsx($a,{view:we,step:Le,onNext:De,onSkip:()=>is(we),onComplete:()=>is(we)}),e.jsx(Kr,{isOpen:Is,onClose:()=>{var t;Yt(!1),Er(),yr(""),kt({title:"",date:new Date().toISOString().split("T")[0],notes:"",projectId:((t=g[0])==null?void 0:t.id)||""}),wt([]),Tt(!1),Lr(null)},title:"Import Meeting Notes",wide:!0,children:Bs?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-800",children:["Found ",vt.length," potential task",vt.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Review and edit before creating"})]}),e.jsx("button",{onClick:()=>Tt(!1),className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"â† Back to Notes"})]}),vt.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-gray-500",children:"No action items found in your notes."}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Try adding bullet points or phrases like "Action:", "TODO:", or "@name"'})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:vt.map(t=>e.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${t.selected?"border-indigo-200 bg-indigo-50/50":"border-gray-100 bg-gray-50 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.selected,onChange:r=>rr(t.id,"selected",r.target.checked),className:"mt-1 w-5 h-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("input",{type:"text",value:t.title,onChange:r=>rr(t.id,"title",r.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm font-medium"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Assignee:"}),e.jsx("input",{type:"text",value:t.assignee||"",onChange:r=>rr(t.id,"assignee",r.target.value),placeholder:"Unassigned",className:"px-2 py-1 border border-gray-200 rounded-lg text-xs w-28 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Due:"}),e.jsx("input",{type:"date",value:t.dueDate||"",onChange:r=>rr(t.id,"dueDate",r.target.value),className:"px-2 py-1 border border-gray-200 rounded-lg text-xs focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs",children:[e.jsx("input",{type:"checkbox",checked:t.critical,onChange:r=>rr(t.id,"critical",r.target.checked),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsx("span",{className:"text-red-600",children:"Critical"})]})]})]}),e.jsx("button",{onClick:()=>Zs(t.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.id))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[vt.filter(t=>t.selected).length," task",vt.filter(t=>t.selected).length!==1?"s":""," selected"]}),e.jsx("button",{onClick:Xs,disabled:vt.filter(t=>t.selected).length===0||_,className:"px-6 py-2.5 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create ",vt.filter(t=>t.selected).length," Task",vt.filter(t=>t.selected).length!==1?"s":""]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[ie&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm",children:ie}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paste notes or upload a photo of your notes. We'll extract action items automatically."}),e.jsx("div",{className:"border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl p-4 transition-colors hover:border-indigo-300 dark:hover:border-indigo-600",children:Mt?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Mt.preview,alt:"Uploaded notes",className:"w-full max-h-48 object-contain rounded-lg bg-gray-100 dark:bg-gray-800"}),e.jsx("button",{onClick:()=>Lr(null),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Mt.name," ready for extraction"]})]}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:e.jsxs("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Upload photo of notes"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"or take a photo on mobile"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:Qs,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-400"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"or paste text notes"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200 dark:bg-gray-700"})]}),e.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:Ve.title,onChange:t=>kt({...Ve,title:t.target.value}),placeholder:"e.g., Weekly Team Sync",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Date"}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("input",{type:"date",value:Ve.date,onChange:t=>kt({...Ve,date:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",style:{maxWidth:"100%",minWidth:0,WebkitAppearance:"none",boxSizing:"border-box",width:"100%"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Project"}),e.jsx("select",{value:Ve.projectId,onChange:t=>kt({...Ve,projectId:t.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",children:g.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meeting Notes"}),e.jsx("textarea",{value:Ve.notes,onChange:t=>kt({...Ve,notes:t.target.value}),placeholder:`Paste your meeting notes here...

Best format - Follow-Up table:
| Follow-Up | Owner | Due Date | Status |
| Review proposal | Sarah | 30/12 | Open |
| Send update email | John | Friday | Open |

Or we can extract from:
â€¢ Action items like 'John to send report by Friday'
â€¢ TODO: Review the proposal
â€¢ @Sarah: Update the timeline`,rows:12,className:"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:Mt?"AI will analyze your image for tasks":"Tip: Follow-Up tables are extracted first"}),e.jsx("button",{onClick:Js,disabled:!Ve.notes.trim()&&!Mt||as,className:"px-6 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 transition-all font-medium shadow-lg shadow-amber-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:as?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Extracting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Extract Tasks"]})})]})]})}),fr&&e.jsx(wa,{message:fr.message,action:fr.action,actionLabel:fr.actionLabel,onClose:()=>Rs(null)}),Vs&&e.jsxs("div",{className:"fixed inset-0 z-[400] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Gt(!1)}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-md sm:mx-4 p-4 pr-8 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Quick Add Task"}),e.jsx("button",{type:"button",onClick:()=>{Gt(!1),Qt("")},className:"p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors touch-manipulation active:bg-gray-200 dark:active:bg-gray-700",children:e.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(()=>{const t=or(Jt);return e.jsxs("form",{onSubmit:r=>{r.preventDefault(),la(t.cleanedText||Jt,Fr,t.date)},children:[e.jsxs("div",{className:"relative flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"text",value:Jt,onChange:r=>Qt(r.target.value),placeholder:'Try "Call mom tomorrow" or "Report due friday"',autoFocus:!0,className:"flex-1 px-4 py-3 text-lg border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),Ws&&e.jsx("button",{type:"button",onClick:()=>zs(r=>Qt(r)),className:`p-3 rounded-xl transition-all ${er?"bg-red-500 text-white animate-pulse shadow-lg shadow-red-500/40":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400"}`,title:er?"Stop listening":"Voice input",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:er?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]}),er&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[e.jsxs("span",{className:"flex h-2 w-2",children:[e.jsx("span",{className:"animate-ping absolute h-2 w-2 rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative rounded-full h-2 w-2 bg-red-500"})]}),e.jsx("span",{className:"text-sm text-red-500",children:"Listening... speak now"})]}),t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due ",Wt(t.date)]}),e.jsxs("span",{className:"text-xs text-gray-400",children:['(from "',t.matched,'")']})]}),!t.date&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto pb-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Due:"}),va.map(r=>e.jsx("button",{type:"button",onClick:()=>Qt(a=>`${a} ${r.label.toLowerCase()}`.trim()),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors whitespace-nowrap",children:r.label},r.label))]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("select",{value:Fr,onChange:r=>Ir(r.target.value),className:"flex-1 px-3 py-2 border border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:g.filter(r=>!r.archived).map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))}),e.jsx("button",{type:"button",onClick:()=>{const r=or(Jt),a={title:r.cleanedText||Jt,project_id:Fr,due_date:r.date||null};Gt(!1),Qt(""),setTimeout(()=>{et(a),Ze(!0)},100)},className:"px-3 py-2 text-sm text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors whitespace-nowrap",children:"More options"})]}),e.jsx("button",{type:"submit",disabled:!Jt.trim()||_,className:"w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium shadow-lg shadow-indigo-500/25 disabled:opacity-50",children:_?"Adding...":"Add Task"})]})})(),e.jsx("p",{className:"mt-3 text-xs text-center text-gray-400",children:'Try "tomorrow", "next friday", "in 2 weeks"'})]})]}),As&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>hr(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Save Current View"}),e.jsx("input",{type:"text",value:qt,onChange:t=>ts(t.target.value),placeholder:"View name (e.g., My Critical Tasks)",className:"w-full px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 mb-4",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&qt.trim()&&hs(qt.trim())}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>hr(!1),className:"flex-1 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>qt.trim()&&hs(qt.trim()),disabled:!qt.trim(),className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 transition-colors disabled:opacity-50",children:"Save"})]}),zt.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Existing views:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:zt.map(t=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t.name}),e.jsx("button",{onClick:()=>ma(t.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete view",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]})]})]}),Hs&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>Br(!1)}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:max-w-2xl sm:mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"â˜€ï¸ Plan Your Day"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Pick tasks to focus on today"})]}),e.jsx("button",{onClick:()=>Br(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Energy:"}),Object.entries(lr).map(([t,r])=>e.jsxs("button",{onClick:()=>setActiveFilters(a=>{const i=a.filter(h=>h.type!=="energy");return a.some(h=>h.type==="energy"&&h.value===t)?i:[...i,{type:"energy",value:t}]}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${activeFilters.some(a=>a.type==="energy"&&a.value===t)?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[r.icon," ",r.label]},t))]}),e.jsxs("div",{className:"space-y-2",children:[m.filter(t=>t.status==="backlog"&&!St(t,m)).filter(t=>!activeFilters.some(r=>r.type==="energy")||activeFilters.some(r=>r.type==="energy"&&r.value===t.energy_level)).sort((t,r)=>t.critical&&!r.critical?-1:!t.critical&&r.critical?1:t.due_date&&!r.due_date?-1:!t.due_date&&r.due_date?1:0).map(t=>{const r=g.find(h=>h.id===t.project_id),a=lr[t.energy_level],i=ir(t);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${t.critical?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":i?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.critical&&e.jsx("span",{className:"text-red-500",children:"ðŸš©"}),i&&e.jsx("span",{className:"text-green-500",children:"âœ“"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:r==null?void 0:r.name}),t.time_estimate&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:Vt(t.time_estimate)})]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded ${a.color}`,children:a.icon})]})]}),e.jsx("button",{onClick:()=>Ft(t.id,"todo"),className:"px-3 py-1.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors whitespace-nowrap",children:"+ Today"})]},t.id)}),m.filter(t=>t.status==="backlog"&&!St(t,m)).length===0&&e.jsxs("div",{className:"text-center py-10 sm:py-8",children:[e.jsx("div",{className:"w-14 h-14 sm:w-12 sm:h-12 rounded-xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl sm:text-xl",children:"ðŸŽ‰"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium text-base sm:text-lg mb-1",children:"Backlog is empty!"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"All tasks are either planned or done."})]})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:m.filter(t=>t.status==="todo").length})," tasks in Todo"]}),e.jsx("button",{onClick:()=>{Br(!1),te("myday")},className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl hover:from-indigo-600 hover:to-purple-600 transition-all font-medium",children:"View My Day â†’"})]})})]})]}),e.jsx("button",{onClick:()=>{var t;g.length>0&&(Ir(((t=g[0])==null?void 0:t.id)||""),Gt(!0))},className:"sm:hidden fixed bottom-6 right-6 w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full shadow-lg shadow-indigo-500/40 flex items-center justify-center z-30 active:scale-95 transition-transform",disabled:g.length===0,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsxs("button",{onClick:()=>fe(!0),className:"hidden sm:flex fixed bottom-8 right-8 px-4 py-2.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 items-center gap-2 z-30 hover:bg-gray-50 dark:hover:bg-gray-700 hover:scale-105 active:scale-95 transition-all",title:"Send Feedback",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Feedback"})]}),e.jsx(Ca,{isOpen:at,onClose:()=>fe(!1),user:s}),e.jsx(_a,{isOpen:$e,onClose:()=>p(!1),userEmail:s==null?void 0:s.email}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t=>{t.target===t.currentTarget&&(T(!1),_e(!1),Ie(""),Ae(!1),lt(!1))},children:e.jsxs("div",{className:`w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${k?"bg-gray-800":"bg-white"}`,onKeyDown:t=>{t.key==="Escape"&&(T(!1),_e(!1),Ie(""),Ae(!1),lt(!1))},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-inherit",children:[e.jsx("h2",{className:`text-xl font-bold ${k?"text-white":"text-gray-900"}`,children:"Settings"}),e.jsx("button",{onClick:()=>{T(!1),_e(!1),Ie(""),Ae(!1),lt(!1)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${k?"text-gray-400":"text-gray-500"}`,children:"Profile"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${k?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:(js=Re||((fs=s==null?void 0:s.user_metadata)==null?void 0:fs.display_name)||(s==null?void 0:s.email))==null?void 0:js.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`text-sm ${k?"text-gray-400":"text-gray-500"}`,children:s==null?void 0:s.email}),e.jsx("div",{className:`text-xs ${k?"text-gray-500":"text-gray-400"}`,children:((ks=s==null?void 0:s.app_metadata)==null?void 0:ks.provider)==="google"?"Google Account":"Email Account"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium mb-1 ${k?"text-gray-300":"text-gray-700"}`,children:"Display Name"}),be?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:Re,onChange:t=>je(t.target.value),placeholder:"Enter display name",className:`flex-1 px-3 py-2 rounded-lg border text-sm ${k?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-indigo-500 focus:border-transparent`,autoFocus:!0}),e.jsx("button",{onClick:S,disabled:Fe,className:"px-3 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50",children:Fe?"...":"Save"}),e.jsx("button",{onClick:()=>{var t;Ae(!1),je(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||"")},className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${k?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${k?"text-white":"text-gray-900"}`,children:((vs=s==null?void 0:s.user_metadata)==null?void 0:vs.display_name)||e.jsx("span",{className:"text-gray-400 italic",children:"Not set"})}),e.jsx("button",{onClick:()=>{var t;je(((t=s==null?void 0:s.user_metadata)==null?void 0:t.display_name)||""),Ae(!0)},className:"text-indigo-500 hover:text-indigo-600 text-sm font-medium",children:"Edit"})]})]})]})]}),((ws=s==null?void 0:s.app_metadata)==null?void 0:ws.provider)!=="google"&&e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${k?"text-gray-400":"text-gray-500"}`,children:"Password"}),e.jsx("div",{className:`p-4 rounded-xl ${k?"bg-gray-700/50":"bg-gray-50"}`,children:ot?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-green-500 text-sm mb-2",children:"âœ“ Password reset email sent!"}),e.jsx("p",{className:`text-xs ${k?"text-gray-400":"text-gray-500"}`,children:"Check your inbox for a link to reset your password."})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${k?"text-white":"text-gray-900"}`,children:"Change Password"}),e.jsx("div",{className:`text-xs ${k?"text-gray-400":"text-gray-500"}`,children:"We'll send a reset link to your email"})]}),e.jsx("button",{onClick:H,disabled:qe,className:"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors disabled:opacity-50 shrink-0",children:qe?"Sending...":"Send Link"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${k?"text-gray-400":"text-gray-500"}`,children:"Preferences"}),e.jsxs("div",{className:`p-4 rounded-xl space-y-4 ${k?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:"Default view on login"}),e.jsxs("select",{value:dt,onChange:t=>oe("trackli-default-view",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${k?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"board",children:"Board"}),e.jsx("option",{value:"myday",children:"My Day"}),e.jsx("option",{value:"calendar",children:"Calendar"}),e.jsx("option",{value:"tasks",children:"All Tasks"}),e.jsx("option",{value:"projects",children:"Projects"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:"Week starts on"}),e.jsxs("select",{value:R,onChange:t=>oe("trackli-week-start",t.target.value),className:`w-28 px-3 py-1.5 rounded-lg border text-sm ${k?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"0",children:"Sunday"}),e.jsx("option",{value:"1",children:"Monday"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:"Show confetti on completion"}),e.jsx("button",{onClick:()=>oe("trackli-show-confetti",ve?"false":"true"),className:`relative w-12 h-6 rounded-full transition-colors ${ve?"bg-indigo-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${ve?"translate-x-6":"translate-x-0.5"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${k?"text-gray-400":"text-gray-500"}`,children:"Data"}),e.jsx("div",{className:`p-4 rounded-xl ${k?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-sm font-medium ${k?"text-white":"text-gray-900"}`,children:"Clear completed tasks"}),e.jsx("div",{className:`text-xs ${k?"text-gray-400":"text-gray-500"}`,children:"Remove done tasks older than:"})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("select",{value:w,onChange:t=>I(t.target.value),className:`px-2 py-1.5 rounded-lg border text-sm ${k?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"7",children:"7 days"}),e.jsx("option",{value:"14",children:"14 days"}),e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"60",children:"60 days"}),e.jsx("option",{value:"90",children:"90 days"})]}),e.jsx("button",{onClick:ge,disabled:v,className:"px-3 py-1.5 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:v?"...":"Clear"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide mb-3 text-red-500",children:"Danger Zone"}),e.jsx("div",{className:`p-4 rounded-xl border-2 border-red-200 dark:border-red-800 ${k?"bg-red-900/20":"bg-red-50"}`,children:me?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`text-sm ${k?"text-red-300":"text-red-700"}`,children:"âš ï¸ This will permanently delete all your tasks, projects, and data. This cannot be undone."}),e.jsxs("div",{className:`text-sm ${k?"text-gray-300":"text-gray-700"}`,children:["Type ",e.jsx("span",{className:"font-mono font-bold",children:"DELETE"})," to confirm:"]}),e.jsx("input",{type:"text",value:Pe,onChange:t=>Ie(t.target.value),placeholder:"Type DELETE",className:`w-full px-3 py-2 rounded-lg border ${k?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-red-500 focus:border-transparent`,autoFocus:!0}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{_e(!1),Ie("")},className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-colors ${k?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Cancel"}),e.jsx("button",{onClick:x,disabled:Pe!=="DELETE"||ke,className:"flex-1 px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ke?"Deleting...":"Delete Everything"})]})]}):e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${k?"text-white":"text-gray-900"}`,children:"Delete Account"}),e.jsx("div",{className:`text-sm ${k?"text-gray-400":"text-gray-500"}`,children:"Permanently delete all your data"})]}),e.jsx("button",{onClick:()=>_e(!0),className:"px-4 py-2 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors shrink-0",children:"Delete"})]})})]})]})]})})]})}export{en as default};
